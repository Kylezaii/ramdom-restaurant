{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NewEcComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst core_1 = require(\"@angular/core\");\nconst forms_1 = require(\"@angular/forms\");\nconst EmpClaimRequest_model_1 = require(\"../../../claim/ec-claim/model/EmpClaimRequest.model\");\nconst moment_1 = tslib_1.__importDefault(require(\"moment\"));\nconst date_validator_directive_1 = require(\"app/shared/validator/date-validator.directive\");\nconst common_validator_directive_1 = require(\"app/shared/validator/common-validator.directive\");\nconst claim_model_1 = require(\"app/claim/model/claim.model\");\nconst EmpClaim_model_1 = require(\"app/claim/ec-claim/model/EmpClaim.model\");\nconst http_1 = require(\"@angular/common/http\");\nconst claim_json_1 = tslib_1.__importDefault(require(\"../../../../i18n/en/claim.json\"));\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"../../../claim/ec-claim/service/ec-claim.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/claim/service/claim.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/administration/black-out-date/public-holiday/service/public-holiday.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/calendar\"));\nconst i13 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nfunction NewEcComponent_p_messages_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r24.claimJson.nspay2App.claim.warning[\"CLM-W003\"]);\n  }\n}\nfunction NewEcComponent_p_messages_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 35);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewEcComponent_p_messages_2_ng_template_2_Template, 4, 1, \"ng-template\", 36);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewEcComponent_p_messages_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r25.claimJson.nspay2App.claim.warning[\"CLM-W004\"]);\n  }\n}\nfunction NewEcComponent_p_messages_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 35);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewEcComponent_p_messages_4_ng_template_2_Template, 4, 1, \"ng-template\", 38);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewEcComponent_p_messages_7_ng_template_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"a\", 42);\n    i0.ɵɵlistener(\"click\", function NewEcComponent_p_messages_7_ng_template_2_span_3_Template_a_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const overlappingClaim_r28 = restoredCtx.$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r30.popUpEnquiryClaim(overlappingClaim_r28.claimId, overlappingClaim_r28.claimType));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const overlappingClaim_r28 = ctx.$implicit;\n    const i_r29 = ctx.index;\n    const ctx_r27 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                \", overlappingClaim_r28.fullMsg, \"\\n                \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n                \", i_r29 < ctx_r27.overlappingClaims.length - 1 ? \",\" : \"\", \"\\n            \");\n  }\n}\nfunction NewEcComponent_p_messages_7_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵtext(2, \"\\n            Overlap with\\u00A0\\n            \");\n    i0.ɵɵtemplate(3, NewEcComponent_p_messages_7_ng_template_2_span_3_Template, 6, 2, \"span\", 41);\n    i0.ɵɵtext(4, \"\\n            , proceed to\\n            \");\n    i0.ɵɵelementStart(5, \"a\", 42);\n    i0.ɵɵlistener(\"click\", function NewEcComponent_p_messages_7_ng_template_2_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r32.emitRoute(\"supp-doc\"));\n    });\n    i0.ɵɵtext(6, \"\\n                upload supporting document\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r26.overlappingClaims);\n  }\n}\nfunction NewEcComponent_p_messages_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 39);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewEcComponent_p_messages_7_ng_template_2_Template, 9, 1, \"ng-template\", 40);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    field: \"NRIC\"\n  };\n};\nfunction NewEcComponent_small_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction NewEcComponent_small_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 44);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction NewEcComponent_small_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 45);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nconst _c1 = function () {\n  return {\n    field: \"Start Date\"\n  };\n};\nfunction NewEcComponent_small_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    dateYear: a0\n  };\n};\nfunction NewEcComponent_small_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 46);\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction1(1, _c2, ctx_r7.createFG == null ? null : ctx_r7.createFG.get(\"trgStartDt\").value.getFullYear()));\n  }\n}\nfunction NewEcComponent_label_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r8.formatDate(ctx_r8.createFG.get(\"trgStartDt\").value, \"ddd\"), \") \");\n  }\n}\nconst _c3 = function () {\n  return {\n    field: \"End Date\"\n  };\n};\nfunction NewEcComponent_small_78_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c3));\n  }\n}\nfunction NewEcComponent_small_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 46);\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction1(1, _c2, ctx_r10.createFG == null ? null : ctx_r10.createFG.get(\"trgEndDt\").value.getFullYear()));\n  }\n}\nfunction NewEcComponent_label_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r11.formatDate(ctx_r11.createFG.get(\"trgEndDt\").value, \"ddd\"), \") \");\n  }\n}\nconst _c4 = function () {\n  return {\n    endField: \"End Date\",\n    startField: \"Start Date\"\n  };\n};\nfunction NewEcComponent_div_95_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelement(2, \"div\", 6);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementStart(4, \"div\", 47);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelement(6, \"small\", 48);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c4));\n  }\n}\nfunction NewEcComponent_div_97_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelement(2, \"div\", 6);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementStart(4, \"div\", 47);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelement(6, \"small\", 49);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c5 = function () {\n  return {\n    field: \"CSN\"\n  };\n};\nfunction NewEcComponent_small_117_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_119_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 50);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_121_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 50);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_128_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_130_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 51);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_132_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 50);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_139_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 43);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_small_141_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 52);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c5));\n  }\n}\nfunction NewEcComponent_div_151_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelement(2, \"div\", 7);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementStart(4, \"div\", 47);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementStart(6, \"label\", 53);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r22.coyName, \" \", ctx_r22.coyDirectInd ? ctx_r22.coyDirectInd === \"Y\" ? \"(Direct)\" : \"(Non-Direct)\" : \"\", \"\");\n  }\n}\nfunction NewEcComponent_div_153_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelement(2, \"div\", 6);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementStart(4, \"div\", 47);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelement(6, \"small\", 54);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c6 = function () {\n  return {\n    \"margin-top\": \"2rem\",\n    \"margin-left\": \"1.5rem\"\n  };\n};\nconst _c7 = function () {\n  return {\n    \"max-width\": \"14em\"\n  };\n};\nconst _c8 = function () {\n  return {\n    \"margin-left\": \"0em\",\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nconst _c9 = function () {\n  return {\n    \"margin-right\": \"2em\",\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nclass NewEcComponent {\n  constructor(activatedRoute, router, formBuilder, ecClaimService, claimService, publicHolidayService, dateUtilsService) {\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.ecClaimService = ecClaimService;\n    this.claimService = claimService;\n    this.publicHolidayService = publicHolidayService;\n    this.dateUtilsService = dateUtilsService;\n    this.navigateTabRoute = new core_1.EventEmitter();\n    // form control status validation check\n    this.INVALID_STATUS = 'INVALID';\n    // Dummy Company (CSN)\n    this.CSN_DUMMY_FIELD_1 = '9999999999';\n    this.CSN_DUMMY_FIELD_2 = '999';\n    this.CSN_DUMMY_FIELD_3 = '99';\n    // ngModel\n    this.empClaimDto = new EmpClaim_model_1.EmpClaim();\n    this.overlappingClaims = [];\n    // validation message\n    this.nricErrorMsg = 'NRIC is required'; // default\n    this.trgStartDtErrorMsg = 'Training start date is required'; // default\n    this.trgEndDtErrorMsg = 'Training end date is required'; // default\n    this.csn1ErrorMsg = 'CSN is required'; // default\n    this.csn2ErrorMsg = 'CSN is required'; // default\n    this.csn3ErrorMsg = 'CSN is required'; // default\n    this.overlappingErrorMsg = '';\n    // extra validation (check info is genuine)\n    this.nricValid = false;\n    this.coyValid = null;\n    this.outsideCurYr = false;\n    // regex\n    this.nricRegex = /^[stfgmSTFGM]\\d{7}[A-Za-z]$/;\n    this.numbersOnlyRegex = /^[\\d]+$/;\n    this.alphaNumericRegex = /^[a-zA-Z\\d]+$/;\n    this.lettersOnlyRegex = /^[a-zA-Z]+$/;\n    this.claimJson = claim_json_1.default;\n  }\n  ngOnInit() {\n    // set default ngModel\n    this.coyName = null;\n    this.nsManName = '';\n    this.trgStartDay = this.trgEndDay = 'Day';\n    this.initialiseFormGroup();\n    this.checkFormValueChanges();\n  }\n  // CSN = Unique Entity Identifier(UEN) + Payment Code\n  initialiseFormGroup() {\n    return this.createFG = this.formBuilder.group({\n      nric: ['', [forms_1.Validators.required, forms_1.Validators.minLength(9), common_validator_directive_1.CommonValidator.nricValidator()]],\n      trgStartDt: [null, [forms_1.Validators.required]],\n      trgEndDt: [null, [forms_1.Validators.required]],\n      csn1: ['', [forms_1.Validators.required, forms_1.Validators.minLength(9), common_validator_directive_1.CommonValidator.alphaNumericValidator()]],\n      csn2: ['PTE', [forms_1.Validators.required, forms_1.Validators.minLength(3), common_validator_directive_1.CommonValidator.alphaNumericValidator()]],\n      csn3: ['01', [forms_1.Validators.required, forms_1.Validators.minLength(2), common_validator_directive_1.CommonValidator.numbersOnlyValidator()]]\n    }, {\n      validators: [date_validator_directive_1.DateValidator.dateLessThan('trgStartDt', 'trgEndDt'), date_validator_directive_1.DateValidator.dateRangeMoreThan('trgStartDt', 'trgEndDt', 60)]\n    });\n  }\n  checkFormValueChanges() {\n    this.createFG.get('nric').valueChanges.subscribe(nric => {\n      if (nric) {\n        const nricControl = this.createFG.get('nric');\n        if (nricControl.valid) {\n          this.ecClaimService.getNsmanInfo(nric.toUpperCase()).subscribe(res => {\n            if (res.body.data) {\n              console.log('NSMAN RES', res);\n              this.nsManInfo = res.body.data;\n              this.nsManName = res.body.data.name;\n              this.nricValid = true;\n              this.ecClaimService.nsManInfo = res.body.data;\n              // check for overlapping claim changes\n              const endDt = this.createFG.get('trgEndDt').value;\n              const startDt = this.createFG.get('trgStartDt').value;\n              const fullCsn = this.getFullCsn();\n              if (endDt && startDt && fullCsn) {\n                let params = new http_1.HttpParams();\n                params = params.append('nric', nric.toUpperCase());\n                params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\n                params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\n                params = params.append('csn', fullCsn);\n                this.getOverlappingClaims(params);\n              } else {\n                if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\n                  delete this.createFG.errors['overlapping'];\n                }\n              }\n            } else {\n              nricControl.setErrors({\n                'nricNotFound': true\n              });\n              this.nsManName = '';\n            }\n          });\n        } else {\n          if (nricControl.hasError('nricNotFound')) {\n            delete nricControl.errors['nricNotFound'];\n            nricControl.updateValueAndValidity();\n          }\n          this.nricValid = false;\n          this.nsManName = '';\n          // TODO: validate 'NRIC is not a MINDEF NSMan'\n        }\n      }\n    });\n\n    this.createFG.get('trgStartDt').valueChanges.subscribe(startDt => {\n      if (startDt) {\n        // check for overlapping claim changes\n        const endDt = this.createFG.get('trgEndDt').value;\n        const nric = this.createFG.get('nric').value;\n        const fullCsn = this.getFullCsn();\n        if (endDt && nric && fullCsn) {\n          let params = new http_1.HttpParams();\n          params = params.append('nric', nric.toUpperCase());\n          params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\n          params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\n          params = params.append('csn', fullCsn);\n          this.getOverlappingClaims(params);\n        }\n        // check for public holiday\n        const year = startDt.getFullYear();\n        this.validateHasHoliday(year, this.createFG.get('trgStartDt'));\n        this.onBlurTrgStartEndDt();\n      }\n    });\n    this.createFG.get('trgEndDt').valueChanges.subscribe(endDt => {\n      if (endDt) {\n        // check for overlapping claim changes\n        const startDt = this.createFG.get('trgStartDt').value;\n        const nric = this.createFG.get('nric').value;\n        const fullCsn = this.getFullCsn();\n        if (startDt && nric && fullCsn) {\n          let params = new http_1.HttpParams();\n          params = params.append('nric', nric);\n          params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\n          params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\n          params = params.append('csn', fullCsn);\n          this.getOverlappingClaims(params);\n        }\n        // check for public holiday\n        const year = endDt.getFullYear();\n        this.validateHasHoliday(year, this.createFG.get('trgEndDt'));\n        this.onBlurTrgStartEndDt();\n      }\n    });\n  }\n  onBlurCsn() {\n    const csn1Control = this.createFG.get('csn1');\n    const csn2Control = this.createFG.get('csn2');\n    const csn3Control = this.createFG.get('csn3');\n    const fullCsn = String(csn1Control.value) + String(csn2Control.value) + String(csn3Control.value);\n    if (fullCsn === String(this.CSN_DUMMY_FIELD_1) + String(this.CSN_DUMMY_FIELD_2) + String(this.CSN_DUMMY_FIELD_3)) {\n      this.coyValid = true;\n      this.coyName = 'Dummy Company';\n      this.coyDirectInd = 'N';\n    } else if (csn1Control.valid && csn2Control.valid && csn3Control.valid) {\n      this.claimService.getCompanyInfo(fullCsn).subscribe({\n        next: res => this.csnRespHandler(res),\n        error: error => this.errorRespHandler(error)\n      });\n    } else {\n      this.coyValid = null;\n    }\n  }\n  getFullCsn() {\n    const csn1Value = this.createFG.get('csn1').value ? this.createFG.get('csn1').value : null;\n    const csn2Value = this.createFG.get('csn2').value ? this.createFG.get('csn2').value : null;\n    const csn3Value = this.createFG.get('csn3').value ? this.createFG.get('csn3').value : null;\n    if (csn1Value && csn2Value && csn3Value) {\n      return String(csn1Value) + String(csn2Value) + String(csn3Value);\n    }\n    return null;\n  }\n  csn2BeforeInput(event) {\n    if (event.inputType === \"insertText\" || event.inputType === \"insertFromPaste\") {\n      return /([a-zA-Z])|(\\9+)$/.test(event.data);\n    }\n    return true;\n  }\n  csn3BeforeInput(event) {\n    if (event.inputType === \"insertText\" || event.inputType === \"insertFromPaste\") {\n      return /^\\d+$/.test(event.data);\n    }\n    return true;\n  }\n  onBlurTrgStartEndDt() {\n    this.outsideCurYr = this.fallOutsideCurrentYr(this.createFG?.get('trgStartDt')?.value) || this.fallOutsideCurrentYr(this.createFG?.get('trgEndDt')?.value);\n  }\n  validateHasHoliday(year, ctrl) {\n    let params = new http_1.HttpParams();\n    params = params.append('year', year);\n    this.publicHolidayService.getHolidayByYear({\n      params\n    }).subscribe(resp => {\n      console.log(\"holiday is\", resp);\n      if (!resp.ok || resp.body.length <= 0) {\n        ctrl.setErrors({\n          'noHoliday': true\n        });\n      }\n    });\n  }\n  fallOutsideCurrentYr(date) {\n    const curYr = new Date().getFullYear();\n    const inputDate = new Date(date);\n    if (inputDate.getFullYear() < curYr || inputDate.getFullYear() > curYr) {\n      return true;\n    } else return false;\n  }\n  getOverlappingClaims(params) {\n    this.ecClaimService.getOverlappingEmpClaimWithCsn(params).subscribe(res => {\n      if (res.body.data) {\n        this.overlappingClaims = res.body.data;\n        if (res.body.data.length > 0) {\n          this.overlappingClaims.forEach(x => {\n            let errMsg = \"\";\n            errMsg = errMsg.concat(x.caseId);\n            if (x.draftByInit) {\n              errMsg = errMsg.concat(\"(\").concat(\"Draft by \").concat(x.draftByInit).concat(\")\");\n            }\n            x.fullMsg = errMsg;\n          });\n          if (!this.createFG.hasError('overlapping')) {\n            this.createFG.setErrors({\n              ...(this.createFG.errors || {}),\n              'overlapping': true\n            });\n          }\n        } else {\n          if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\n            delete this.createFG.errors['overlapping'];\n          }\n        }\n      }\n    });\n  }\n  popUpEnquiryClaim(claimId, claimType) {\n    console.log('ENQUIRY POP UP FOR CLAIM ID: ', claimId);\n    const params2 = {\n      claimId\n    };\n    // TODO: after enquiry version of the page is done, uncomment and put in the real route\n    // if(claimType === \"S\"){\n    //   const url = this.router.serializeUrl(this.router.createUrlTree(['claim/se-claim/view-latest-owner'],{queryParams: params2}));\n    //   window.open(url, \"enquireSEClaim\", 'location=0,menubar=0,status=0,height=1000, width=1500');\n    // } else if (claimType === \"E\") {\n    //   const url = this.router.serializeUrl(this.router.createUrlTree(['claim/se-claim/view-latest-owner'],{queryParams: params2}));\n    //   window.open(url, \"enquireECClaim\", 'location=0,menubar=0,status=0,height=1000, width=1500');\n    // }\n  }\n\n  emitRoute(tabName) {\n    this.navigateTabRoute.emit({\n      selectedTab: tabName\n    });\n  }\n  isLateClaim() {\n    if (this.createFG.get('trgStartDt').value) {\n      const claimStart = this.createFG.get('trgStartDt')?.value;\n      const dateNow = new Date();\n      const threshold = (0, moment_1.default)(dateNow).subtract(1, 'years').subtract(1, 'days').toDate();\n      // const threshold = new Date(dateNow.getFullYear()-1, dateNow.getMonth(),dateNow.getDay()); \n      return claimStart < threshold;\n    } else return false;\n  }\n  isLongPeriod() {\n    if (this.createFG.get('trgStartDt').value && this.createFG.get('trgEndDt').value) {\n      const diffDays = this.dateUtilsService.getDaysBetween(this.createFG.get('trgStartDt').value, this.createFG.get('trgEndDt').value);\n      return diffDays > 30 && diffDays < 60;\n    } else return false;\n  }\n  errorRespHandler(error) {\n    console.log(\"error is\" + String(error?.error?.error_desc));\n  }\n  csnRespHandler(res) {\n    console.log('CSN RES', res);\n    if (res.body.data) {\n      const resData = res.body.data;\n      this.coyName = resData.companyName;\n      this.coyERegistered = resData.eRegistered;\n      this.coyDirectInd = resData.directInd;\n      this.coyValid = true;\n      let fullAddress = '';\n      fullAddress += resData?.blk ? 'Blk ' + String(resData.blk) + ' ' : '';\n      fullAddress += resData?.street ? String(resData.street) + ' ' : '';\n      fullAddress += resData?.unit ? '#' + String(resData.unit) + ' ' : '';\n      fullAddress += resData?.building ? String(resData.building) + ' ' : '';\n      fullAddress += resData?.postalCode ? String(resData.postalCode) : '';\n      this.coyAddress = fullAddress;\n      this.empClaimDto.blkNo = resData?.blk ? String(resData?.blk) : null;\n      this.empClaimDto.street = resData?.street ? String(resData?.street) : null;\n      this.empClaimDto.unitNo = resData?.unit ? String(resData?.unit) : null;\n      this.empClaimDto.building = resData?.building ? String(resData?.building) : null;\n      this.empClaimDto.postalCode = resData?.postalCode ? String(resData?.postalCode) : null;\n      const startDt = this.createFG.get('trgStartDt').value;\n      const endDt = this.createFG.get('trgEndDt').value;\n      const nric = this.createFG.get('nric').value;\n      const fullCsn = this.getFullCsn();\n      if (startDt && endDt && nric && fullCsn) {\n        let params = new http_1.HttpParams();\n        params = params.append('nric', nric);\n        params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\n        params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\n        params = params.append('csn', fullCsn);\n        this.getOverlappingClaims(params);\n      } else {\n        if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\n          delete this.createFG.errors['overlapping'];\n        }\n      }\n      // if (this.createFG.hasError('invalidCoy')){\n      //   delete this.createFG.errors['invalidCoy'];\n      //   this.createFG.updateValueAndValidity();\n      // }\n    } else {\n      console.log('NO COMPANY');\n      this.coyName = null;\n      this.coyDirectInd = null;\n      this.coyValid = false;\n      // if (!this.createFG.hasError('invalidCoy')){\n      //   console.log('NO ERRORs');\n      //   this.createFG.setErrors({...this.createFG.errors || {}, 'invalidCoy': true});\n      // }\n    }\n  }\n\n  checkFormValidColor(isValid) {\n    if (isValid === true && this.nricValid === true && this.coyValid === true) {\n      return 'p-button-primary';\n    }\n    return 'p-button-secondary';\n  }\n  setDummyCompany() {\n    // set company fields\n    this.createFG.get('csn1').setValue(this.CSN_DUMMY_FIELD_1);\n    this.createFG.get('csn2').setValue(this.CSN_DUMMY_FIELD_2);\n    this.createFG.get('csn3').setValue(this.CSN_DUMMY_FIELD_3);\n    this.coyValid = true;\n    this.coyDirectInd = 'N';\n    this.coyName = 'Dummy Company';\n  }\n  setSameDay() {\n    // set training date to be on the same day\n    const trgStartDt = this.createFG.get('trgStartDt').value;\n    if (trgStartDt) {\n      this.createFG.get('trgEndDt').setValue(trgStartDt);\n    } else {\n      console.log('Fail to set same date - trgStartDt: ', trgStartDt);\n    }\n  }\n  clearForm() {\n    this.createFG.reset();\n    this.createFG.get('csn2').setValue('PTE');\n    this.createFG.get('csn3').setValue('01');\n    // set Error msg to default\n    this.nricErrorMsg = 'NRIC is required';\n    this.trgStartDtErrorMsg = 'Training start date is required';\n    this.trgEndDtErrorMsg = 'Training end date is required';\n    this.csn1ErrorMsg = 'CSN is required';\n    this.csn2ErrorMsg = 'CSN is required';\n    this.csn3ErrorMsg = 'CSN is required';\n  }\n  createClaim() {\n    const hardcopyDto = new EmpClaimRequest_model_1.EmpClaimRequest();\n    hardcopyDto.nsManRank = this.nsManInfo.rank;\n    hardcopyDto.nsManName = this.nsManName;\n    hardcopyDto.nsManGender = this.nsManInfo.gender;\n    hardcopyDto.nsManPhoneNum = this.nsManInfo.handphoneNo;\n    hardcopyDto.csn1 = this.createFG.get('csn1').value;\n    hardcopyDto.csn2 = this.createFG.get('csn2').value;\n    hardcopyDto.csn3 = this.createFG.get('csn3').value;\n    hardcopyDto.coyName = this.coyName;\n    hardcopyDto.coyType = this.coyERegistered;\n    hardcopyDto.coyAddress = this.coyAddress ? this.coyAddress : null;\n    hardcopyDto.coyDirectInd = this.coyDirectInd;\n    const claimDto = new claim_model_1.Claim();\n    claimDto.nric = this.createFG.get('nric').value.toUpperCase();\n    claimDto.trgStartDate = (0, moment_1.default)(this.createFG.get('trgStartDt').value).format('YYYY-MM-DD');\n    claimDto.trgEndDate = (0, moment_1.default)(this.createFG.get('trgEndDt').value).format('YYYY-MM-DD');\n    claimDto.claimInitiateBy = 0; // codeType: 0 = Hardcopy\n    hardcopyDto.claimDto = claimDto;\n    if ((0, moment_1.default)(claimDto.trgStartDate).format('DD-MM-YYYY') === (0, moment_1.default)(claimDto.trgEndDate).format('DD-MM-YYYY')) {\n      this.empClaimDto.halfDayInd = 'Y';\n    }\n    this.empClaimDto.csn = this.concateCsn();\n    this.empClaimDto.claimOption = 'E';\n    hardcopyDto.empClaimDto = this.empClaimDto;\n    this.createFG.get('csn1').value && this.createFG.get('csn1').value === this.CSN_DUMMY_FIELD_1 ? hardcopyDto.isDummyCoy = true : hardcopyDto.isDummyCoy = false;\n    console.log('HardcopyEmpClaimDTO: ', hardcopyDto);\n    this.ecClaimService.hardcopyEcDto = hardcopyDto;\n    this.router.navigate(['claim/ec-claim/edit-hardcopy-ec']);\n    // this.router.navigate(['edit-hardcopy-ec'], { relativeTo: this.activatedRoute }) <-- output: inbox/edit-hardcopy-ec;\n  }\n\n  concateCsn() {\n    const uen = this.createFG.get('csn1').value;\n    const paymentCode1 = this.createFG.get('csn2').value;\n    const paymentCode2 = this.createFG.get('csn3').value;\n    return String(uen) + String(paymentCode1) + String(paymentCode2);\n  }\n  formatDate(date, formatType) {\n    return (0, moment_1.default)(date).format(formatType);\n  }\n  // ----------- DISPLAY ERROR MESSAGE ---------------\n  showErrorMsg(controlName, errorName) {\n    return this.createFG.get(controlName)?.hasError(errorName) && this.createFG.get(controlName)?.touched;\n  }\n  // custom\n  showCsn2ErrorMsg(controlName) {\n    return this.createFG.get(controlName)?.status === this.INVALID_STATUS && this.createFG.get(controlName)?.touched;\n  }\n  consoleLog() {\n    console.log('Formgroup', this.createFG);\n    console.log('overlappingClaims', this.overlappingClaims);\n    const checkMap = new Map();\n    checkMap.set('coyValid', this.coyValid);\n    checkMap.set('nricValid', this.nricValid);\n    checkMap.set('claimJson', this.claimJson);\n    console.log('checkMap', checkMap);\n  }\n}\nexports.NewEcComponent = NewEcComponent;\nNewEcComponent.ɵfac = function NewEcComponent_Factory(t) {\n  return new (t || NewEcComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ECClaimService), i0.ɵɵdirectiveInject(i4.ClaimService), i0.ɵɵdirectiveInject(i5.PublicHolidayService), i0.ɵɵdirectiveInject(i6.DateUtilsService));\n};\nNewEcComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewEcComponent,\n  selectors: [[\"n2-new-ec\"]],\n  outputs: {\n    navigateTabRoute: \"navigateTabRoute\"\n  },\n  decls: 171,\n  vars: 51,\n  consts: [[\"severity\", \"warn\", 4, \"ngIf\"], [\"key\", \"CLM-E002\", \"severity\", \"error\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"grid\"], [1, \"row\", \"col-8\"], [1, \"field\", \"grid\"], [1, \"col-2\", \"col-form-label\"], [1, \"col-2\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"nric\", \"maxlength\", \"9\", \"oninput\", \"this.value = this.value.toUpperCase()\", 1, \"form-control\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V003\", 3, \"translateValues\", 4, \"ngIf\"], [1, \"col-auto\", \"col-form-label\"], [1, \"text-secondary\", 2, \"margin-top\", \"5px\"], [1, \"row\"], [1, \"col-2\", \"input-group\"], [\"id\", \"trgStartDt\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"trgStartDt\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\", \"inputStyleClass\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V007\", 3, \"translateValues\", 4, \"ngIf\"], [1, \"col-1\"], [4, \"ngIf\"], [\"id\", \"trgEndDt\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"trgEndDt\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\", \"inputStyleClass\"], [1, \"col-auto\"], [\"pButton\", \"\", \"label\", \"Same Day\", 3, \"click\"], [\"class\", \"field grid\", 4, \"ngIf\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"csn1\", \"maxlength\", \"10\", \"oninput\", \"this.value = this.value.toUpperCase()\", 1, \"form-control\", 3, \"blur\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V009\", 3, \"translateValues\", 4, \"ngIf\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"csn2\", \"maxlength\", \"3\", \"oninput\", \"this.value = this.value.toUpperCase()\", 1, \"form-control\", 3, \"beforeinput\", \"blur\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V010\", 3, \"translateValues\", 4, \"ngIf\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"csn3\", \"maxlength\", \"2\", 1, \"form-control\", 3, \"beforeinput\", \"blur\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V011\", 3, \"translateValues\", 4, \"ngIf\"], [\"pButton\", \"\", \"label\", \"Dummy\", 3, \"click\"], [1, \"text-right\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"LOG\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Clear All\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Create Claim\", 3, \"disabled\", \"click\"], [\"severity\", \"warn\"], [\"key\", \"CLM-W003\", \"pTemplate\", \"\"], [1, \"ml-2\"], [\"key\", \"CLM-W004\", \"pTemplate\", \"\"], [\"key\", \"CLM-E002\", \"severity\", \"error\"], [\"pTemplate\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"href\", \"javascript:\", 3, \"click\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V003\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V007\", 1, \"p-error\", 3, \"translateValues\"], [1, \"col\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V004\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V013\", 1, \"p-error\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V009\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V010\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V011\", 1, \"p-error\", 3, \"translateValues\"], [1, \"text-secondary\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V012\", 1, \"p-error\"]],\n  template: function NewEcComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \" \");\n      i0.ɵɵtext(1, \"\\n \");\n      i0.ɵɵtemplate(2, NewEcComponent_p_messages_2_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(3, \"\\n\");\n      i0.ɵɵtemplate(4, NewEcComponent_p_messages_4_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(5, \"\\n\\n\");\n      i0.ɵɵtext(6, \"\\n\");\n      i0.ɵɵtemplate(7, NewEcComponent_p_messages_7_Template, 4, 0, \"p-messages\", 1);\n      i0.ɵɵtext(8, \"\\n\");\n      i0.ɵɵtext(9, \"\\n\\n\");\n      i0.ɵɵelementStart(10, \"form\", 2);\n      i0.ɵɵtext(11, \"\\n    \");\n      i0.ɵɵelementStart(12, \"div\", 3);\n      i0.ɵɵtext(13, \"\\n        \");\n      i0.ɵɵelementStart(14, \"div\", 4);\n      i0.ɵɵtext(15, \"\\n        \");\n      i0.ɵɵtext(16, \"\\n        \");\n      i0.ɵɵelementStart(17, \"div\", 5);\n      i0.ɵɵtext(18, \"\\n            \");\n      i0.ɵɵelementStart(19, \"div\", 6);\n      i0.ɵɵtext(20, \"\\n                \");\n      i0.ɵɵelementStart(21, \"label\");\n      i0.ɵɵtext(22, \"NRIC:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n            \");\n      i0.ɵɵelementStart(25, \"div\", 7);\n      i0.ɵɵtext(26, \"\\n                \");\n      i0.ɵɵelement(27, \"input\", 8);\n      i0.ɵɵtext(28, \"\\n                \");\n      i0.ɵɵtemplate(29, NewEcComponent_small_29_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(30, \"\\n                \");\n      i0.ɵɵtemplate(31, NewEcComponent_small_31_Template, 1, 2, \"small\", 10);\n      i0.ɵɵtext(32, \"\\n                \");\n      i0.ɵɵtemplate(33, NewEcComponent_small_33_Template, 1, 2, \"small\", 11);\n      i0.ɵɵtext(34, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n            \");\n      i0.ɵɵelementStart(36, \"div\", 12);\n      i0.ɵɵtext(37, \" \\n                \");\n      i0.ɵɵelementStart(38, \"label\", 13);\n      i0.ɵɵtext(39);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n        \");\n      i0.ɵɵtext(43, \"\\n        \\n        \");\n      i0.ɵɵtext(44, \"\\n        \");\n      i0.ɵɵelementStart(45, \"div\", 14);\n      i0.ɵɵtext(46, \"\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(47, \"\\n\\n        \");\n      i0.ɵɵtext(48, \"\\n        \");\n      i0.ɵɵelementStart(49, \"div\", 5);\n      i0.ɵɵtext(50, \"\\n            \");\n      i0.ɵɵelementStart(51, \"div\", 6);\n      i0.ɵɵtext(52, \"\\n                \");\n      i0.ɵɵelementStart(53, \"label\");\n      i0.ɵɵtext(54, \"Trg:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(55, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(56, \"\\n            \");\n      i0.ɵɵelementStart(57, \"div\", 15);\n      i0.ɵɵtext(58, \"\\n                \");\n      i0.ɵɵelement(59, \"p-calendar\", 16);\n      i0.ɵɵtext(60, \"\\n                \");\n      i0.ɵɵtemplate(61, NewEcComponent_small_61_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(62, \"\\n                \");\n      i0.ɵɵtemplate(63, NewEcComponent_small_63_Template, 1, 3, \"small\", 17);\n      i0.ɵɵtext(64, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n            \");\n      i0.ɵɵelementStart(66, \"div\", 18);\n      i0.ɵɵtext(67, \"\\n                \");\n      i0.ɵɵtemplate(68, NewEcComponent_label_68_Template, 2, 1, \"label\", 19);\n      i0.ɵɵtext(69, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n\\n            \");\n      i0.ɵɵelementStart(71, \"div\", 18);\n      i0.ɵɵtext(72, \"to\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(73, \"\\n\\n            \");\n      i0.ɵɵelementStart(74, \"div\", 15);\n      i0.ɵɵtext(75, \"\\n                \");\n      i0.ɵɵelement(76, \"p-calendar\", 20);\n      i0.ɵɵtext(77, \"\\n                \");\n      i0.ɵɵtemplate(78, NewEcComponent_small_78_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(79, \"\\n                \");\n      i0.ɵɵtemplate(80, NewEcComponent_small_80_Template, 1, 3, \"small\", 17);\n      i0.ɵɵtext(81, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(82, \"\\n            \");\n      i0.ɵɵelementStart(83, \"div\", 18);\n      i0.ɵɵtext(84, \"\\n                \");\n      i0.ɵɵtemplate(85, NewEcComponent_label_85_Template, 2, 1, \"label\", 19);\n      i0.ɵɵtext(86, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(87, \"\\n            \\n            \");\n      i0.ɵɵtext(88, \"\\n            \");\n      i0.ɵɵelementStart(89, \"div\", 21);\n      i0.ɵɵtext(90, \"\\n                \");\n      i0.ɵɵelementStart(91, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function NewEcComponent_Template_button_click_91_listener() {\n        return ctx.setSameDay();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(92, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(93, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(94, \"\\n        \");\n      i0.ɵɵtemplate(95, NewEcComponent_div_95_Template, 9, 2, \"div\", 23);\n      i0.ɵɵtext(96, \"\\n        \");\n      i0.ɵɵtemplate(97, NewEcComponent_div_97_Template, 9, 0, \"div\", 23);\n      i0.ɵɵtext(98, \"\\n        \");\n      i0.ɵɵtext(99, \"\\n\\n        \");\n      i0.ɵɵtext(100, \"\\n        \");\n      i0.ɵɵelementStart(101, \"div\", 14);\n      i0.ɵɵtext(102, \"\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(103, \"\\n\\n        \");\n      i0.ɵɵtext(104, \"\\n        \");\n      i0.ɵɵelementStart(105, \"div\", 5);\n      i0.ɵɵtext(106, \"\\n            \");\n      i0.ɵɵelementStart(107, \"div\", 6);\n      i0.ɵɵtext(108, \"\\n                \");\n      i0.ɵɵelementStart(109, \"label\");\n      i0.ɵɵtext(110, \"CSN: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(111, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(112, \"\\n            \");\n      i0.ɵɵelementStart(113, \"div\", 7);\n      i0.ɵɵtext(114, \"\\n                \");\n      i0.ɵɵelementStart(115, \"input\", 24);\n      i0.ɵɵlistener(\"blur\", function NewEcComponent_Template_input_blur_115_listener() {\n        return ctx.onBlurCsn();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(116, \"\\n                \");\n      i0.ɵɵtemplate(117, NewEcComponent_small_117_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(118, \"\\n                \");\n      i0.ɵɵtemplate(119, NewEcComponent_small_119_Template, 1, 2, \"small\", 25);\n      i0.ɵɵtext(120, \"\\n                \");\n      i0.ɵɵtemplate(121, NewEcComponent_small_121_Template, 1, 2, \"small\", 25);\n      i0.ɵɵtext(122, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(123, \"\\n            \");\n      i0.ɵɵelementStart(124, \"div\", 18);\n      i0.ɵɵtext(125, \"\\n                \");\n      i0.ɵɵelementStart(126, \"input\", 26);\n      i0.ɵɵlistener(\"beforeinput\", function NewEcComponent_Template_input_beforeinput_126_listener($event) {\n        return ctx.csn2BeforeInput($event);\n      })(\"blur\", function NewEcComponent_Template_input_blur_126_listener() {\n        return ctx.onBlurCsn();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(127, \"\\n                \");\n      i0.ɵɵtemplate(128, NewEcComponent_small_128_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(129, \"\\n                \");\n      i0.ɵɵtemplate(130, NewEcComponent_small_130_Template, 1, 2, \"small\", 27);\n      i0.ɵɵtext(131, \"\\n                \");\n      i0.ɵɵtemplate(132, NewEcComponent_small_132_Template, 1, 2, \"small\", 25);\n      i0.ɵɵtext(133, \" \\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(134, \"      \\n            \");\n      i0.ɵɵelementStart(135, \"div\", 18);\n      i0.ɵɵtext(136, \"\\n                \");\n      i0.ɵɵelementStart(137, \"input\", 28);\n      i0.ɵɵlistener(\"beforeinput\", function NewEcComponent_Template_input_beforeinput_137_listener($event) {\n        return ctx.csn3BeforeInput($event);\n      })(\"blur\", function NewEcComponent_Template_input_blur_137_listener() {\n        return ctx.onBlurCsn();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(138, \"\\n                \");\n      i0.ɵɵtemplate(139, NewEcComponent_small_139_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(140, \"\\n                \");\n      i0.ɵɵtemplate(141, NewEcComponent_small_141_Template, 1, 2, \"small\", 29);\n      i0.ɵɵtext(142, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(143, \"\\n            \");\n      i0.ɵɵtext(144, \"\\n            \");\n      i0.ɵɵelementStart(145, \"div\", 21);\n      i0.ɵɵtext(146, \"\\n                \");\n      i0.ɵɵelementStart(147, \"button\", 30);\n      i0.ɵɵlistener(\"click\", function NewEcComponent_Template_button_click_147_listener() {\n        return ctx.setDummyCompany();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(148, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(149, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(150, \"\\n        \");\n      i0.ɵɵtemplate(151, NewEcComponent_div_151_Template, 10, 2, \"div\", 23);\n      i0.ɵɵtext(152, \"\\n        \");\n      i0.ɵɵtemplate(153, NewEcComponent_div_153_Template, 9, 0, \"div\", 23);\n      i0.ɵɵtext(154, \"\\n        \");\n      i0.ɵɵtext(155, \"\\n\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(156, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(157, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(158, \"\\n\\n\");\n      i0.ɵɵtext(159, \"\\n\");\n      i0.ɵɵtext(160, \"\\n    \");\n      i0.ɵɵelementStart(161, \"div\", 31);\n      i0.ɵɵtext(162, \"\\n        \");\n      i0.ɵɵelementStart(163, \"button\", 32);\n      i0.ɵɵlistener(\"click\", function NewEcComponent_Template_button_click_163_listener() {\n        return ctx.consoleLog();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(164, \"\\n        \");\n      i0.ɵɵelementStart(165, \"button\", 33);\n      i0.ɵɵlistener(\"click\", function NewEcComponent_Template_button_click_165_listener() {\n        return ctx.clearForm();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(166, \"\\n        \");\n      i0.ɵɵelementStart(167, \"button\", 34);\n      i0.ɵɵlistener(\"click\", function NewEcComponent_Template_button_click_167_listener() {\n        return ctx.createClaim();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(168, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(169, \"\\n\");\n      i0.ɵɵtext(170, \"\\n\\n\");\n    }\n    if (rf & 2) {\n      let tmp_12_0;\n      let tmp_13_0;\n      let tmp_20_0;\n      let tmp_21_0;\n      let tmp_24_0;\n      let tmp_25_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLongPeriod());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLateClaim());\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.overlappingClaims.length > 0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(45, _c6));\n      i0.ɵɵproperty(\"formGroup\", ctx.createFG);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"nric\", \"required\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"nric\", \"nric\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"nric\", \"nricNotFound\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", ctx.nsManName, \" \");\n      i0.ɵɵadvance(20);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(46, _c7));\n      i0.ɵɵproperty(\"showIcon\", false)(\"inputStyleClass\", ctx.outsideCurYr ? \"warning-date\" : null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : (tmp_12_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_12_0.hasError(\"required\")) && (ctx.createFG == null ? null : (tmp_12_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_12_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : (tmp_13_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_13_0.hasError(\"noHoliday\")) && (ctx.createFG == null ? null : (tmp_13_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_13_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(47, _c8));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.createFG.get(\"trgStartDt\").value);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(48, _c9));\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(49, _c7));\n      i0.ɵɵproperty(\"showIcon\", false)(\"inputStyleClass\", ctx.outsideCurYr ? \"warning-date\" : null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : (tmp_20_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_20_0.hasError(\"required\")) && (ctx.createFG == null ? null : (tmp_20_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_20_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : (tmp_21_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_21_0.hasError(\"noHoliday\")) && (ctx.createFG == null ? null : (tmp_21_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_21_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(50, _c8));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.createFG.get(\"trgEndDt\").value);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : ctx.createFG.errors == null ? null : ctx.createFG.errors[\"invalidDateLessThan\"]) && ((ctx.createFG == null ? null : (tmp_24_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_24_0.touched) || (ctx.createFG == null ? null : (tmp_24_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_24_0.touched)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createFG == null ? null : ctx.createFG.errors == null ? null : ctx.createFG.errors[\"invalidDateRangeMoreThan\"]) && ((ctx.createFG == null ? null : (tmp_25_0 = ctx.createFG.get(\"trgStartDt\")) == null ? null : tmp_25_0.touched) || (ctx.createFG == null ? null : (tmp_25_0 = ctx.createFG.get(\"trgEndDt\")) == null ? null : tmp_25_0.touched)));\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn1\", \"required\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn1\", \"minlength\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn1\", \"invalidAlphanumeric\"));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn2\", \"required\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn2\", \"minlength\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn2\", \"invalidAlphanumeric\"));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn3\", \"required\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showErrorMsg(\"csn3\", \"minlength\"));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.coyValid === true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.coyValid === false);\n      i0.ɵɵadvance(14);\n      i0.ɵɵclassMap(ctx.checkFormValidColor(ctx.createFG.valid));\n      i0.ɵɵproperty(\"disabled\", !ctx.createFG.valid || ctx.coyValid === false);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.MaxLengthValidator, i7.NgForOf, i7.NgIf, i2.FormGroupDirective, i2.FormControlName, i8.PrimeTemplate, i9.ButtonDirective, i10.InputText, i11.Messages, i12.Calendar, i13.TranslateDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXctZWMuY29tcG9uZW50LnNjc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvd29ya2xvYWQvcGF5cm9sbC12ZXJpZmllci9uZXctZWMvbmV3LWVjLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxvS0FBb0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","NewEcComponent","constructor","activatedRoute","router","formBuilder","ecClaimService","claimService","publicHolidayService","dateUtilsService","core_1","EmpClaim_model_1","claimJson","claim_json_1","ngOnInit","coyName","nsManName","trgStartDay","trgEndDay","initialiseFormGroup","checkFormValueChanges","createFG","group","nric","forms_1","required","minLength","common_validator_directive_1","nricValidator","trgStartDt","trgEndDt","csn1","alphaNumericValidator","csn2","csn3","numbersOnlyValidator","validators","date_validator_directive_1","dateLessThan","dateRangeMoreThan","get","valueChanges","subscribe","nricControl","valid","getNsmanInfo","toUpperCase","res","body","data","console","log","nsManInfo","name","nricValid","endDt","value","startDt","fullCsn","getFullCsn","params","http_1","append","formatDate","getOverlappingClaims","errors","setErrors","hasError","updateValueAndValidity","year","getFullYear","validateHasHoliday","onBlurTrgStartEndDt","onBlurCsn","csn1Control","csn2Control","csn3Control","String","CSN_DUMMY_FIELD_1","CSN_DUMMY_FIELD_2","CSN_DUMMY_FIELD_3","coyValid","coyDirectInd","getCompanyInfo","next","csnRespHandler","error","errorRespHandler","csn1Value","csn2Value","csn3Value","csn2BeforeInput","event","inputType","test","csn3BeforeInput","outsideCurYr","fallOutsideCurrentYr","ctrl","getHolidayByYear","resp","ok","length","date","curYr","Date","inputDate","getOverlappingEmpClaimWithCsn","overlappingClaims","forEach","x","errMsg","concat","caseId","draftByInit","fullMsg","popUpEnquiryClaim","claimId","claimType","params2","emitRoute","tabName","navigateTabRoute","emit","selectedTab","isLateClaim","claimStart","dateNow","threshold","subtract","toDate","isLongPeriod","diffDays","getDaysBetween","error_desc","resData","companyName","coyERegistered","eRegistered","directInd","fullAddress","blk","street","unit","building","postalCode","coyAddress","empClaimDto","blkNo","unitNo","checkFormValidColor","isValid","setDummyCompany","setValue","setSameDay","clearForm","reset","nricErrorMsg","trgStartDtErrorMsg","trgEndDtErrorMsg","csn1ErrorMsg","csn2ErrorMsg","csn3ErrorMsg","createClaim","hardcopyDto","EmpClaimRequest_model_1","nsManRank","rank","nsManGender","gender","nsManPhoneNum","handphoneNo","coyType","claimDto","claim_model_1","trgStartDate","format","trgEndDate","claimInitiateBy","halfDayInd","csn","concateCsn","claimOption","isDummyCoy","hardcopyEcDto","navigate","uen","paymentCode1","paymentCode2","formatType","showErrorMsg","controlName","errorName","touched","showCsn2ErrorMsg","status","INVALID_STATUS","consoleLog","checkMap","Map","set","exports","selectors","outputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-verifier\\new-ec\\new-ec.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-verifier\\new-ec\\new-ec.component.html"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, AbstractControl} from '@angular/forms';\r\nimport { ECClaimService } from '../../../claim/ec-claim/service/ec-claim.service';\r\nimport { EmpClaimRequest } from '../../../claim/ec-claim/model/EmpClaimRequest.model';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport moment from 'moment';\r\nimport { DateValidator } from 'app/shared/validator/date-validator.directive';\r\nimport { CommonValidator } from 'app/shared/validator/common-validator.directive';\r\nimport { Claim } from 'app/claim/model/claim.model';\r\nimport { EmpClaim } from 'app/claim/ec-claim/model/EmpClaim.model';\r\nimport { ClaimService } from 'app/claim/service/claim.service';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport claim from '../../../../i18n/en/claim.json';\r\nimport { PublicHolidayService } from 'app/administration/black-out-date/public-holiday/service/public-holiday.service';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-new-ec',\r\n  templateUrl: './new-ec.component.html',\r\n  styleUrls: ['./new-ec.component.scss']\r\n})\r\nexport class NewEcComponent implements OnInit {\r\n\r\n  @Output() navigateTabRoute: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  // form control status validation check\r\n  readonly INVALID_STATUS: string = 'INVALID'; \r\n\r\n  // Dummy Company (CSN)\r\n  readonly CSN_DUMMY_FIELD_1: string = '9999999999';\r\n  readonly CSN_DUMMY_FIELD_2: string = '999';\r\n  readonly CSN_DUMMY_FIELD_3: string = '99';\r\n\r\n  // ngModel\r\n  empClaimDto: EmpClaim = new EmpClaim();\r\n  coyName: string;\r\n  coyERegistered: string;\r\n  coyAddress: string;\r\n  coyDirectInd: string;\r\n  nsManName: string;\r\n  trgStartDay: string; // indicate day of the week\r\n  trgEndDay: string; // indicate day of the week\r\n  nsManInfo: any;\r\n  overlappingClaims: any[] = [];\r\n  claimJson: any;\r\n\r\n  // validation message\r\n  nricErrorMsg = 'NRIC is required'; // default\r\n  trgStartDtErrorMsg = 'Training start date is required'; // default\r\n  trgEndDtErrorMsg = 'Training end date is required'; // default\r\n  csn1ErrorMsg = 'CSN is required'; // default\r\n  csn2ErrorMsg = 'CSN is required'; // default\r\n  csn3ErrorMsg = 'CSN is required'; // default\r\n  overlappingErrorMsg = '';\r\n\r\n  // extra validation (check info is genuine)\r\n  nricValid = false;\r\n  coyValid: boolean = null;\r\n  outsideCurYr = false;\r\n\r\n  // formGroup\r\n  createFG: FormGroup;\r\n\r\n  // regex\r\n  readonly nricRegex = /^[stfgmSTFGM]\\d{7}[A-Za-z]$/;\r\n  readonly numbersOnlyRegex = /^[\\d]+$/;\r\n  readonly alphaNumericRegex = /^[a-zA-Z\\d]+$/;\r\n  readonly lettersOnlyRegex = /^[a-zA-Z]+$/;\r\n\r\n  // others\r\n  yearRange: string;\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    private formBuilder: FormBuilder,\r\n    private ecClaimService: ECClaimService,\r\n    private claimService: ClaimService,\r\n    private publicHolidayService: PublicHolidayService,\r\n    public dateUtilsService: DateUtilsService\r\n    ) {\r\n      this.claimJson = claim;  \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // set default ngModel\r\n    this.coyName = null;\r\n    this.nsManName = '';\r\n    this.trgStartDay = this.trgEndDay = 'Day';\r\n\r\n    this.initialiseFormGroup();\r\n\r\n    this.checkFormValueChanges();\r\n  }\r\n\r\n  // CSN = Unique Entity Identifier(UEN) + Payment Code\r\n  initialiseFormGroup(): FormGroup {\r\n    return this.createFG = this.formBuilder.group({\r\n      nric: ['', [Validators.required, Validators.minLength(9), CommonValidator.nricValidator()]],\r\n      trgStartDt: [null, [Validators.required]],\r\n      trgEndDt: [null, [Validators.required]],\r\n      csn1: ['', [Validators.required, Validators.minLength(9), CommonValidator.alphaNumericValidator()]],\r\n      csn2: ['PTE', [Validators.required, Validators.minLength(3), CommonValidator.alphaNumericValidator()]],\r\n      csn3: ['01', [Validators.required, Validators.minLength(2), CommonValidator.numbersOnlyValidator()]]\r\n    }, {validators: [\r\n        DateValidator.dateLessThan('trgStartDt', 'trgEndDt'),\r\n        DateValidator.dateRangeMoreThan('trgStartDt', 'trgEndDt', 60)\r\n      ]\r\n    });\r\n  }\r\n\r\n\r\n  checkFormValueChanges(): void {\r\n\r\n    this.createFG.get('nric').valueChanges.subscribe(nric => {\r\n      if (nric) {\r\n        const nricControl = this.createFG.get('nric');\r\n        if (nricControl.valid) {\r\n          this.ecClaimService.getNsmanInfo(nric.toUpperCase()).subscribe(res => {\r\n            if (res.body.data) {\r\n              console.log('NSMAN RES', res);\r\n              this.nsManInfo = res.body.data;\r\n              this.nsManName = res.body.data.name;\r\n              this.nricValid = true;\r\n              this.ecClaimService.nsManInfo = res.body.data;\r\n              \r\n              // check for overlapping claim changes\r\n              const endDt = this.createFG.get('trgEndDt').value; \r\n              const startDt = this.createFG.get('trgStartDt').value;\r\n              const fullCsn = this.getFullCsn();\r\n              if (endDt && startDt && fullCsn) {\r\n                let params = new HttpParams();\r\n                params = params.append('nric', nric.toUpperCase());\r\n                params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\r\n                params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\r\n                params = params.append('csn', fullCsn);\r\n                this.getOverlappingClaims(params);\r\n              } else {\r\n                if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\r\n                  delete this.createFG.errors['overlapping'];\r\n                }\r\n              }\r\n            } else {\r\n              nricControl.setErrors({'nricNotFound':true});\r\n              this.nsManName = '';\r\n            }\r\n          });\r\n        } else {\r\n          if (nricControl.hasError('nricNotFound')) {\r\n            delete nricControl.errors['nricNotFound'];\r\n            nricControl.updateValueAndValidity();\r\n          }\r\n          this.nricValid = false;\r\n          this.nsManName = '';\r\n          // TODO: validate 'NRIC is not a MINDEF NSMan'\r\n        }  \r\n      }\r\n    });\r\n\r\n    this.createFG.get('trgStartDt').valueChanges.subscribe(startDt => {\r\n      if (startDt) {  \r\n          // check for overlapping claim changes\r\n          const endDt = this.createFG.get('trgEndDt').value; \r\n          const nric = this.createFG.get('nric').value;\r\n          const fullCsn = this.getFullCsn();\r\n          if (endDt && nric && fullCsn) {\r\n              let params = new HttpParams();\r\n              params = params.append('nric', nric.toUpperCase());\r\n              params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\r\n              params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\r\n              params = params.append('csn', fullCsn);\r\n              this.getOverlappingClaims(params);\r\n          }\r\n\r\n          // check for public holiday\r\n          const year = (startDt as Date).getFullYear();\r\n          this.validateHasHoliday(year, this.createFG.get('trgStartDt'));\r\n\r\n          this.onBlurTrgStartEndDt();\r\n      }\r\n    });\r\n\r\n    this.createFG.get('trgEndDt').valueChanges.subscribe(endDt => {\r\n        if (endDt) {\r\n            // check for overlapping claim changes\r\n            const startDt = this.createFG.get('trgStartDt').value; \r\n            const nric = this.createFG.get('nric').value;\r\n            const fullCsn = this.getFullCsn();\r\n            if (startDt && nric && fullCsn) {\r\n                let params = new HttpParams();\r\n                params = params.append('nric', nric);\r\n                params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\r\n                params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\r\n                params = params.append('csn', fullCsn);\r\n                this.getOverlappingClaims(params);\r\n            }\r\n\r\n            // check for public holiday\r\n            const year = (endDt as Date).getFullYear();\r\n            this.validateHasHoliday(year, this.createFG.get('trgEndDt'));\r\n\r\n            this.onBlurTrgStartEndDt();\r\n        }\r\n    });\r\n  }\r\n\r\n  onBlurCsn() {\r\n    const csn1Control = this.createFG.get('csn1');\r\n    const csn2Control = this.createFG.get('csn2');\r\n    const csn3Control = this.createFG.get('csn3');\r\n    const fullCsn = String(csn1Control.value) + String(csn2Control.value) + String(csn3Control.value);\r\n    if (fullCsn === (String(this.CSN_DUMMY_FIELD_1) + String(this.CSN_DUMMY_FIELD_2) + String (this.CSN_DUMMY_FIELD_3))) {\r\n      this.coyValid = true;\r\n      this.coyName = 'Dummy Company';\r\n      this.coyDirectInd = 'N';\r\n    } else if (csn1Control.valid && csn2Control.valid && csn3Control.valid) {\r\n      this.claimService.getCompanyInfo(fullCsn).subscribe({\r\n        next: (res) => this.csnRespHandler(res),\r\n        error: (error) => this.errorRespHandler(error)\r\n      });\r\n    } else {\r\n      this.coyValid = null;\r\n    }\r\n  }\r\n\r\n  getFullCsn(): string {\r\n    const csn1Value = this.createFG.get('csn1').value ? this.createFG.get('csn1').value : null;\r\n    const csn2Value = this.createFG.get('csn2').value ? this.createFG.get('csn2').value : null;\r\n    const csn3Value = this.createFG.get('csn3').value ? this.createFG.get('csn3').value : null;\r\n    if (csn1Value && csn2Value && csn3Value) {\r\n      return String(csn1Value) + String(csn2Value) + String(csn3Value);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  csn2BeforeInput(event: InputEvent) {\r\n    if(event.inputType === \"insertText\" || event.inputType === \"insertFromPaste\") {\r\n      return /([a-zA-Z])|(\\9+)$/.test(event.data);\r\n    }\r\n    return true;  \r\n  }\r\n\r\n  csn3BeforeInput(event: InputEvent) {\r\n    if(event.inputType === \"insertText\" || event.inputType === \"insertFromPaste\") {\r\n      return /^\\d+$/.test(event.data);\r\n    }\r\n    return true;  \r\n  }\r\n\r\n  onBlurTrgStartEndDt(): void{\r\n    this.outsideCurYr =  this.fallOutsideCurrentYr(this.createFG?.get('trgStartDt')?.value)||\r\n    this.fallOutsideCurrentYr(this.createFG?.get('trgEndDt')?.value);\r\n  }\r\n\r\n  validateHasHoliday(year: number, ctrl: AbstractControl): void{\r\n    let params = new HttpParams();\r\n    params = params.append('year',year);\r\n    this.publicHolidayService.getHolidayByYear({params}).subscribe(resp => {\r\n        console.log(\"holiday is\", resp)\r\n        if (!resp.ok ||  resp.body.length<=0){\r\n            ctrl.setErrors({'noHoliday': true});\r\n        }\r\n    });\r\n  }\r\n\r\n  fallOutsideCurrentYr(date: any): boolean{\r\n    const curYr = new Date().getFullYear();\r\n    const inputDate = new Date(date);\r\n    if (inputDate.getFullYear()< curYr || inputDate.getFullYear()> curYr){\r\n        return true;\r\n    } else return false;\r\n  }\r\n\r\n  getOverlappingClaims(params: HttpParams) {\r\n    this.ecClaimService.getOverlappingEmpClaimWithCsn(params).subscribe(res => {\r\n        if (res.body.data) {\r\n          this.overlappingClaims = res.body.data;\r\n          if (res.body.data.length>0 ) {\r\n            this.overlappingClaims.forEach(x=>{\r\n              let errMsg = \"\";\r\n              errMsg = errMsg.concat(x.caseId);\r\n              if (x.draftByInit) {\r\n                errMsg = errMsg.concat(\"(\").concat(\"Draft by \").concat(x.draftByInit).concat(\")\");\r\n              } \r\n              x.fullMsg = errMsg;\r\n            });\r\n            if (!this.createFG.hasError('overlapping')){\r\n              this.createFG.setErrors({...this.createFG.errors || {}, 'overlapping': true});\r\n            }\r\n          } else {\r\n            if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\r\n              delete this.createFG.errors['overlapping'];\r\n            }\r\n          }\r\n        }\r\n    });\r\n  }\r\n\r\n  popUpEnquiryClaim(claimId: string, claimType: string): void{\r\n    console.log('ENQUIRY POP UP FOR CLAIM ID: ', claimId);\r\n    const params2 = {\r\n      claimId\r\n    }\r\n    // TODO: after enquiry version of the page is done, uncomment and put in the real route\r\n    // if(claimType === \"S\"){\r\n    //   const url = this.router.serializeUrl(this.router.createUrlTree(['claim/se-claim/view-latest-owner'],{queryParams: params2}));\r\n    //   window.open(url, \"enquireSEClaim\", 'location=0,menubar=0,status=0,height=1000, width=1500');\r\n    // } else if (claimType === \"E\") {\r\n    //   const url = this.router.serializeUrl(this.router.createUrlTree(['claim/se-claim/view-latest-owner'],{queryParams: params2}));\r\n    //   window.open(url, \"enquireECClaim\", 'location=0,menubar=0,status=0,height=1000, width=1500');\r\n    // }\r\n  }\r\n\r\n  emitRoute(tabName: string): void{\r\n    this.navigateTabRoute.emit({\r\n      selectedTab: tabName\r\n    });\r\n  }\r\n\r\n  isLateClaim(): boolean{\r\n    if (this.createFG.get('trgStartDt').value) {\r\n      const claimStart = this.createFG.get('trgStartDt')?.value;\r\n      const dateNow  = new Date();\r\n      const threshold = moment(dateNow).subtract(1, 'years').subtract(1, 'days').toDate();\r\n      // const threshold = new Date(dateNow.getFullYear()-1, dateNow.getMonth(),dateNow.getDay()); \r\n      return claimStart<threshold;\r\n    } else return false;\r\n  }\r\n\r\n  isLongPeriod(): boolean {\r\n      if (this.createFG.get('trgStartDt').value && this.createFG.get('trgEndDt').value){\r\n        const diffDays = this.dateUtilsService.getDaysBetween((this.createFG.get('trgStartDt').value as Date),(this.createFG.get('trgEndDt').value as Date));\r\n        return diffDays>30 && diffDays<60;\r\n      } else return false;\r\n  }\r\n\r\n  errorRespHandler(error:any) {\r\n    console.log(\"error is\" + String(error?.error?.error_desc));\r\n  }\r\n\r\n  csnRespHandler(res: any) {\r\n    console.log('CSN RES', res);\r\n    if (res.body.data) {\r\n      const resData = res.body.data;\r\n      this.coyName = resData.companyName;\r\n      this.coyERegistered = resData.eRegistered;\r\n      this.coyDirectInd = resData.directInd;\r\n      this.coyValid = true;\r\n\r\n      let fullAddress = '';\r\n      fullAddress += resData?.blk ? 'Blk ' + String(resData.blk) + ' ' : '';\r\n      fullAddress += resData?.street ? String(resData.street) + ' ' : '';\r\n      fullAddress += resData?.unit ? '#' + String(resData.unit) + ' ' : '';\r\n      fullAddress += resData?.building ? String(resData.building) + ' ' : '';\r\n      fullAddress += resData?.postalCode ? String(resData.postalCode) : '';\r\n      this.coyAddress = fullAddress;\r\n\r\n      this.empClaimDto.blkNo = resData?.blk ? String(resData?.blk) : null;\r\n      this.empClaimDto.street = resData?.street ? String(resData?.street) : null; \r\n      this.empClaimDto.unitNo = resData?.unit ? String(resData?.unit) : null;\r\n      this.empClaimDto.building = resData?.building ? String(resData?.building) : null;\r\n      this.empClaimDto.postalCode = resData?.postalCode ? String(resData?.postalCode) : null;\r\n\r\n      const startDt = this.createFG.get('trgStartDt').value; \r\n      const endDt = this.createFG.get('trgEndDt').value; \r\n      const nric = this.createFG.get('nric').value;\r\n      const fullCsn = this.getFullCsn();\r\n      if (startDt && endDt && nric && fullCsn) {\r\n        let params = new HttpParams();\r\n        params = params.append('nric', nric);\r\n        params = params.append('claimStartDt', this.formatDate(startDt, 'YYYY-MM-DD'));\r\n        params = params.append('claimEndDt', this.formatDate(endDt, 'YYYY-MM-DD'));\r\n        params = params.append('csn', fullCsn);\r\n        this.getOverlappingClaims(params);\r\n      } else {\r\n        if (this.createFG?.errors && this.createFG?.errors['overlapping']) {\r\n              delete this.createFG.errors['overlapping'];\r\n        }\r\n      }\r\n\r\n      // if (this.createFG.hasError('invalidCoy')){\r\n      //   delete this.createFG.errors['invalidCoy'];\r\n      //   this.createFG.updateValueAndValidity();\r\n      // }\r\n    } else {\r\n      console.log('NO COMPANY');\r\n      this.coyName = null;\r\n      this.coyDirectInd = null;\r\n      this.coyValid = false;\r\n      // if (!this.createFG.hasError('invalidCoy')){\r\n      //   console.log('NO ERRORs');\r\n      //   this.createFG.setErrors({...this.createFG.errors || {}, 'invalidCoy': true});\r\n      // }\r\n    }\r\n  }\r\n\r\n  checkFormValidColor(isValid: boolean): string {\r\n    if (isValid === true && this.nricValid === true && this.coyValid === true) {\r\n      return 'p-button-primary';\r\n    }\r\n    return 'p-button-secondary';\r\n  }\r\n\r\n  setDummyCompany(): void {\r\n    // set company fields\r\n    this.createFG.get('csn1').setValue(this.CSN_DUMMY_FIELD_1);\r\n    this.createFG.get('csn2').setValue(this.CSN_DUMMY_FIELD_2);\r\n    this.createFG.get('csn3').setValue(this.CSN_DUMMY_FIELD_3);\r\n    this.coyValid = true;\r\n    this.coyDirectInd = 'N';\r\n    this.coyName = 'Dummy Company';\r\n  }\r\n\r\n  setSameDay(): void {\r\n    // set training date to be on the same day\r\n    const trgStartDt = this.createFG.get('trgStartDt').value;\r\n    if (trgStartDt) {\r\n      this.createFG.get('trgEndDt').setValue(trgStartDt);\r\n    } else {\r\n      console.log('Fail to set same date - trgStartDt: ', trgStartDt);\r\n    }\r\n  }\r\n \r\n\r\n  clearForm(): void {\r\n    this.createFG.reset();\r\n    this.createFG.get('csn2').setValue('PTE');\r\n    this.createFG.get('csn3').setValue('01');\r\n\r\n    // set Error msg to default\r\n    this.nricErrorMsg = 'NRIC is required'; \r\n    this.trgStartDtErrorMsg = 'Training start date is required'; \r\n    this.trgEndDtErrorMsg = 'Training end date is required'; \r\n    this.csn1ErrorMsg = 'CSN is required';\r\n    this.csn2ErrorMsg = 'CSN is required';\r\n    this.csn3ErrorMsg = 'CSN is required';\r\n  }\r\n\r\n  createClaim(): void{\r\n    const hardcopyDto  = new EmpClaimRequest();\r\n    hardcopyDto.nsManRank = this.nsManInfo.rank;\r\n    hardcopyDto.nsManName = this.nsManName;\r\n    hardcopyDto.nsManGender = this.nsManInfo.gender;\r\n    hardcopyDto.nsManPhoneNum = this.nsManInfo.handphoneNo;\r\n    hardcopyDto.csn1 = this.createFG.get('csn1').value;\r\n    hardcopyDto.csn2 = this.createFG.get('csn2').value;\r\n    hardcopyDto.csn3 = this.createFG.get('csn3').value;\r\n    hardcopyDto.coyName = this.coyName;\r\n    hardcopyDto.coyType = this.coyERegistered;\r\n    hardcopyDto.coyAddress = (this.coyAddress) ? this.coyAddress : null;\r\n    hardcopyDto.coyDirectInd = this.coyDirectInd;\r\n\r\n    const claimDto = new Claim();\r\n    claimDto.nric = this.createFG.get('nric').value.toUpperCase();\r\n    claimDto.trgStartDate = moment(this.createFG.get('trgStartDt').value).format('YYYY-MM-DD');\r\n    claimDto.trgEndDate = moment(this.createFG.get('trgEndDt').value).format('YYYY-MM-DD');\r\n    claimDto.claimInitiateBy = 0; // codeType: 0 = Hardcopy\r\n    hardcopyDto.claimDto = claimDto;\r\n\r\n    if (moment(claimDto.trgStartDate).format('DD-MM-YYYY') === moment(claimDto.trgEndDate).format('DD-MM-YYYY')) {\r\n      this.empClaimDto.halfDayInd = 'Y';\r\n    }\r\n    this.empClaimDto.csn = this.concateCsn();\r\n    this.empClaimDto.claimOption = 'E';\r\n    hardcopyDto.empClaimDto = this.empClaimDto;\r\n    \r\n    (this.createFG.get('csn1').value && this.createFG.get('csn1').value === this.CSN_DUMMY_FIELD_1) ? hardcopyDto.isDummyCoy = true : hardcopyDto.isDummyCoy = false;\r\n    console.log('HardcopyEmpClaimDTO: ', hardcopyDto);\r\n    this.ecClaimService.hardcopyEcDto = hardcopyDto;\r\n    this.router.navigate(['claim/ec-claim/edit-hardcopy-ec']);\r\n    // this.router.navigate(['edit-hardcopy-ec'], { relativeTo: this.activatedRoute }) <-- output: inbox/edit-hardcopy-ec;\r\n  }\r\n\r\n  concateCsn(): string {\r\n    const uen = this.createFG.get('csn1').value;\r\n    const paymentCode1 = this.createFG.get('csn2').value;\r\n    const paymentCode2 = this.createFG.get('csn3').value;\r\n    return String(uen) + String(paymentCode1) + String(paymentCode2);\r\n  }\r\n\r\n  formatDate(date: any, formatType: string): string {\r\n    return moment(date).format(formatType);\r\n  }\r\n\r\n  // ----------- DISPLAY ERROR MESSAGE ---------------\r\n  showErrorMsg(controlName: string, errorName: string): boolean {\r\n    return this.createFG.get(controlName)?.hasError(errorName) && this.createFG.get(controlName)?.touched;\r\n  }\r\n\r\n  // custom\r\n  showCsn2ErrorMsg(controlName: string): boolean {\r\n    return this.createFG.get(controlName)?.status === this.INVALID_STATUS && this.createFG.get(controlName)?.touched;\r\n  }\r\n\r\n  consoleLog() {\r\n    console.log('Formgroup', this.createFG);\r\n    console.log('overlappingClaims', this.overlappingClaims);\r\n    const checkMap = new Map();\r\n    checkMap.set('coyValid', this.coyValid);\r\n    checkMap.set('nricValid', this.nricValid);\r\n    checkMap.set('claimJson', this.claimJson);\r\n    console.log('checkMap', checkMap);\r\n\r\n  }\r\n  // ------------------------------------------\r\n}\r\n"," <!-- warning type  -->\r\n <p-messages severity=\"warn\" *ngIf=\"isLongPeriod()\">\r\n    <ng-template key=\"CLM-W003\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W003'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf=\"isLateClaim()\">\r\n    <ng-template key=\"CLM-W004\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W004'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n\r\n<!-- error type  -->\r\n<p-messages key=\"CLM-E002\" severity=\"error\" *ngIf=\"overlappingClaims.length>0\">\r\n    <ng-template pTemplate>\r\n        <div class=\"ml-2\">\r\n            Overlap with&nbsp;\r\n            <span *ngFor=\"let overlappingClaim of overlappingClaims; let i = index\" >\r\n                <!--TODO: When enquiry is out, need to link to that page-->\r\n                <a href=\"javascript:\" (click)=\"popUpEnquiryClaim(overlappingClaim.claimId, overlappingClaim.claimType)\">\r\n                {{overlappingClaim.fullMsg}}\r\n                </a>\r\n                {{i < overlappingClaims.length - 1? \",\":\"\"}}\r\n            </span>\r\n            , proceed to\r\n            <a href=\"javascript:\" (click)=\"emitRoute('supp-doc')\">\r\n                upload supporting document\r\n            </a>\r\n        </div>\r\n    </ng-template>\r\n</p-messages>\r\n<!-- <p-messages key=\"CLM-E002\" severity=\"error\" *ngIf=\"overlappingClaims.length>0\">\r\n    <ng-template pTemplate>\r\n        <div class=\"ml-2\">{{ overlappingErrorMsg }}</div>\r\n    </ng-template>\r\n</p-messages> -->\r\n\r\n<form [formGroup]=\"createFG\" [style]=\"{'margin-top': '2rem', 'margin-left':'1.5rem'}\">\r\n    <div class=\"grid\">\r\n        <div class=\"row col-8\">\r\n        <!-- NRIC field START-->\r\n        <div class=\"field grid\">\r\n            <div class=\"col-2 col-form-label\">\r\n                <label>NRIC:</label>\r\n            </div>\r\n            <div class=\"col-2\">\r\n                <input type=\"text\" pInputText class=\"form-control\"  formControlName = \"nric\" maxlength=\"9\" oninput=\"this.value = this.value.toUpperCase()\">\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('nric', 'required')\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('nric', 'nric')\" icTranslate=\"nspay2App.claim.validation.CLM-V002\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('nric', 'nricNotFound')\" icTranslate=\"nspay2App.claim.validation.CLM-V003\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n            </div>\r\n            <div class=\"col-auto col-form-label\"> \r\n                <label style=\"margin-top:5px\" class=\"text-secondary\"> {{nsManName}} </label>\r\n            </div>\r\n        </div>\r\n        <!-- NRIC field END -->\r\n        \r\n        <!-- breakline -->\r\n        <div class=\"row\">&nbsp;</div>\r\n\r\n        <!-- Training field START -->\r\n        <div class=\"field grid\">\r\n            <div class=\"col-2 col-form-label\">\r\n                <label>Trg:</label>\r\n            </div>\r\n            <div class=\"col-2 input-group\">\r\n                <p-calendar [showIcon]=\"false\" id=\"trgStartDt\"\r\n                dateFormat=\"dd-mm-yy\"\r\n                formControlName = \"trgStartDt\" appendTo=\"body\"\r\n                position='center'\r\n                [style]=\"{'max-width': '14em'}\"\r\n                [inputStyleClass]=\"this.outsideCurYr? 'warning-date' : null\"\r\n                ></p-calendar>\r\n                <small *ngIf=\"createFG?.get('trgStartDt')?.hasError('required') && createFG?.get('trgStartDt')?.touched\"\r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                [translateValues]=\"{ field: 'Start Date' }\"></small>\r\n                <small *ngIf=\"createFG?.get('trgStartDt')?.hasError('noHoliday') && createFG?.get('trgStartDt')?.touched\"\r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V007\"\r\n                [translateValues]=\"{ dateYear: (createFG?.get('trgStartDt').value).getFullYear() }\"></small>\r\n            </div>\r\n            <div class=\"col-1\" [style]=\"{'margin-left':'0em','align-items': 'center', 'display':'flex'}\">\r\n                <label *ngIf=\"createFG.get('trgStartDt').value\" > ({{this.formatDate(createFG.get('trgStartDt').value, 'ddd')}}) </label>\r\n            </div>\r\n\r\n            <div class=\"col-1\" [style]=\"{'margin-right':'2em','align-items': 'center', 'display':'flex'}\">to</div>\r\n\r\n            <div class=\"col-2 input-group\">\r\n                <p-calendar [showIcon]=\"false\" id=\"trgEndDt\"\r\n                dateFormat=\"dd-mm-yy\"\r\n                formControlName=\"trgEndDt\" appendTo=\"body\"\r\n                position='center'\r\n                [style]=\"{'max-width': '14em'}\"\r\n                [inputStyleClass]=\"this.outsideCurYr? 'warning-date' : null\"\r\n                ></p-calendar>\r\n                <small *ngIf=\"createFG?.get('trgEndDt')?.hasError('required') && createFG?.get('trgEndDt')?.touched\"\r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                [translateValues]=\"{ field: 'End Date' }\"></small>\r\n                <small *ngIf=\"createFG?.get('trgEndDt')?.hasError('noHoliday') && createFG?.get('trgEndDt')?.touched\"\r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V007\"\r\n                [translateValues]=\"{ dateYear: (createFG?.get('trgEndDt').value).getFullYear() }\"></small>\r\n            </div>\r\n            <div class=\"col-1\"   [style]=\"{'margin-left':'0em','align-items': 'center', 'display':'flex'}\">\r\n                <label *ngIf=\"createFG.get('trgEndDt').value\"> ({{this.formatDate(createFG.get('trgEndDt').value, 'ddd')}}) </label>\r\n            </div>\r\n            \r\n            <!-- SAME DAY BUTTON -->\r\n            <div class=\"col-auto\">\r\n                <button pButton (click)=\"setSameDay()\" label=\"Same Day\"></button>\r\n            </div>\r\n        </div>\r\n        <div class=\"field grid\" *ngIf=\"createFG?.errors?.['invalidDateLessThan'] &&  (createFG?.get('trgStartDt')?.touched ||createFG?.get('trgEndDt')?.touched)\">\r\n            <div class=\"col-2 col-form-label\"></div>\r\n            <div class=\"col\">\r\n                <small \r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V004\"\r\n                [translateValues]=\"{ endField: 'End Date', startField : 'Start Date' }\"></small>\r\n            </div>\r\n        </div>\r\n        <div class=\"field grid\" *ngIf=\"createFG?.errors?.['invalidDateRangeMoreThan'] && (createFG?.get('trgStartDt')?.touched || createFG?.get('trgEndDt')?.touched)\">\r\n            <div class=\"col-2 col-form-label\"></div>\r\n            <div class=\"col\">\r\n                <small \r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V013\"></small>\r\n            </div>\r\n        </div>\r\n        <!-- Training field END -->\r\n\r\n        <!-- breakline -->\r\n        <div class=\"row\">&nbsp;</div>\r\n\r\n        <!-- Company field START -->\r\n        <div class=\"field grid\">\r\n            <div class=\"col-2 col-form-label\">\r\n                <label>CSN: </label>\r\n            </div>\r\n            <div class=\"col-2\">\r\n                <input type=\"text\" pInputText class=\"form-control\" formControlName=\"csn1\" maxlength=\"10\" (blur)=\"onBlurCsn()\" oninput=\"this.value = this.value.toUpperCase()\">\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn1', 'required')\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn1', 'minlength')\" icTranslate=\"nspay2App.claim.validation.CLM-V009\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn1', 'invalidAlphanumeric')\" icTranslate=\"nspay2App.claim.validation.CLM-V009\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n            </div>\r\n            <div class=\"col-1\">\r\n                <input type=\"text\" pInputText class=\"form-control\" formControlName=\"csn2\" maxlength=\"3\" (beforeinput)=\"csn2BeforeInput($event)\" (blur)=\"onBlurCsn()\" oninput=\"this.value = this.value.toUpperCase()\">\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn2', 'required')\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                [translateValues]=\"{ field: 'CSN' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn2', 'minlength')\" icTranslate=\"nspay2App.claim.validation.CLM-V010\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn2', 'invalidAlphanumeric')\" icTranslate=\"nspay2App.claim.validation.CLM-V009\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small> \r\n            </div>      \r\n            <div class=\"col-1\">\r\n                <input type=\"text\" pInputText class=\"form-control\" formControlName=\"csn3\" maxlength=\"2\" (beforeinput)=\"csn3BeforeInput($event)\" (blur)=\"onBlurCsn()\">\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn3', 'required')\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n                <small class=\"p-error\" *ngIf=\"showErrorMsg('csn3', 'minlength')\" icTranslate=\"nspay2App.claim.validation.CLM-V011\"\r\n                    [translateValues]=\"{ field: 'CSN' }\"></small>\r\n            </div>\r\n            <!-- DUMMY BUTTON -->\r\n            <div class=\"col-auto\">\r\n                <button pButton (click)=\"setDummyCompany()\" label=\"Dummy\"></button>\r\n            </div>\r\n        </div>\r\n        <div class=\"field grid\" *ngIf=\"coyValid === true\">\r\n            <div class=\"col-2\"></div>\r\n            <div class=\"col\">\r\n                <label class=\"text-secondary\"> {{coyName}} {{coyDirectInd ? (coyDirectInd === 'Y' ? '(Direct)' : '(Non-Direct)') : ''}}</label>\r\n            </div>\r\n        </div>\r\n        <div class=\"field grid\" *ngIf=\"coyValid === false\">\r\n            <div class=\"col-2 col-form-label\"></div>\r\n            <div class=\"col\">\r\n                <small class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V012\"></small>\r\n            </div>\r\n        </div>\r\n        <!-- Company field END -->\r\n\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<!-- CLEAR & CREATE BUTTON -->\r\n<!-- <div class=\"col-6\"> -->\r\n    <div class=\"text-right\">\r\n        <button pButton type=\"submit\" (click)=\"consoleLog()\" label=\"LOG\"></button>\r\n        <button pButton type=\"submit\" (click)=\"clearForm()\" label=\"Clear All\"></button>\r\n        <button pButton type=\"submit\" [class]=\"checkFormValidColor(createFG.valid)\" [disabled]=\"!createFG.valid || coyValid === false\" label=\"Create Claim\" (click)=\"createClaim()\"></button>\r\n    </div>\r\n<!-- </div> -->\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EditProfileComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/core/auth/account.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/util/alert.service\"));\nconst i3 = tslib_1.__importStar(require(\"./maintain-profile.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i7 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i8 = tslib_1.__importStar(require(\"../../shared/language/translate.directive\"));\nconst i9 = tslib_1.__importStar(require(\"../../shared/alert/alert.component\"));\nconst i10 = tslib_1.__importStar(require(\"../../shared/alert/alert-error.component\"));\nconst i11 = tslib_1.__importStar(require(\"@ngx-translate/core\"));\nconst _c0 = function () {\n  return {\n    min: 3\n  };\n};\nconst _c1 = function () {\n  return {\n    max: 50\n  };\n};\nconst _c2 = function () {\n  return {\n    min: 5\n  };\n};\nconst _c3 = function () {\n  return {\n    max: 100\n  };\n};\nfunction EditProfileComponent_form_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 4, 5);\n    i0.ɵɵlistener(\"ngSubmit\", function EditProfileComponent_form_14_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.save());\n    });\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"label\", 7);\n    i0.ɵɵtext(6, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementStart(8, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function EditProfileComponent_form_14_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.currentAccount.firstName = $event);\n    });\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n          \");\n    i0.ɵɵelementStart(11, \"div\", 9);\n    i0.ɵɵtext(12, \"\\n            \");\n    i0.ɵɵelementStart(13, \"small\", 10);\n    i0.ɵɵtext(14, \"\\n              This field is required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"small\", 11);\n    i0.ɵɵtext(17, \"\\n              Minimum 3 characters required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n            \");\n    i0.ɵɵelementStart(19, \"small\", 12);\n    i0.ɵɵtext(20, \"\\n              This field cannot be longer than 50 characters.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n\\n        \");\n    i0.ɵɵelementStart(24, \"div\", 6);\n    i0.ɵɵtext(25, \"\\n          \");\n    i0.ɵɵelementStart(26, \"label\", 13);\n    i0.ɵɵtext(27, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n          \");\n    i0.ɵɵelementStart(29, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function EditProfileComponent_form_14_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.currentAccount.lastName = $event);\n    });\n    i0.ɵɵpipe(30, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n          \");\n    i0.ɵɵelementStart(32, \"div\", 9);\n    i0.ɵɵtext(33, \"\\n            \");\n    i0.ɵɵelementStart(34, \"small\", 10);\n    i0.ɵɵtext(35, \"\\n              This field is required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n            \");\n    i0.ɵɵelementStart(37, \"small\", 11);\n    i0.ɵɵtext(38, \"\\n              Minimum 3 characters required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n            \");\n    i0.ɵɵelementStart(40, \"small\", 12);\n    i0.ɵɵtext(41, \"\\n              This field cannot be longer than 50 characters.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44, \"\\n\\n        \");\n    i0.ɵɵelementStart(45, \"div\", 6);\n    i0.ɵɵtext(46, \"\\n          \");\n    i0.ɵɵelementStart(47, \"label\", 15);\n    i0.ɵɵtext(48, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n          \");\n    i0.ɵɵelementStart(50, \"input\", 16, 17);\n    i0.ɵɵlistener(\"ngModelChange\", function EditProfileComponent_form_14_Template_input_ngModelChange_50_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.currentAccount.email = $event);\n    });\n    i0.ɵɵpipe(52, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(53, \"\\n          \");\n    i0.ɵɵelementStart(54, \"div\", 9);\n    i0.ɵɵtext(55, \"\\n            \");\n    i0.ɵɵelementStart(56, \"small\", 10);\n    i0.ɵɵtext(57, \"\\n              This field is required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58, \"\\n            \");\n    i0.ɵɵelementStart(59, \"small\", 11);\n    i0.ɵɵtext(60, \"\\n              Minimum 5 characters required.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n            \");\n    i0.ɵɵelementStart(62, \"small\", 12);\n    i0.ɵɵtext(63, \"\\n              This field cannot be longer than 100 characters.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(65, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(66, \"\\n\\n        \");\n    i0.ɵɵelementStart(67, \"button\", 18);\n    i0.ɵɵtext(68, \"\\n          Save\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(69, \"\\n        \");\n    i0.ɵɵelementStart(70, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function EditProfileComponent_form_14_Template_button_click_70_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.gotoProfile());\n    });\n    i0.ɵɵtext(71, \"\\n          \");\n    i0.ɵɵelement(72, \"fa-icon\", 20);\n    i0.ɵɵtext(73, \"\\u00A0\");\n    i0.ɵɵelementStart(74, \"span\", 21);\n    i0.ɵɵtext(75, \"back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(76, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(77, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r1 = i0.ɵɵreference(1);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(9, 26, \"profile.form.firstname.placeholder\"));\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.currentAccount.firstName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !((_r1.controls.firstName == null ? null : _r1.controls.firstName.dirty) && (_r1.controls.firstName == null ? null : _r1.controls.firstName.invalid)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.firstName == null ? null : _r1.controls.firstName.errors == null ? null : _r1.controls.firstName.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.firstName == null ? null : _r1.controls.firstName.errors == null ? null : _r1.controls.firstName.errors.minlength))(\"translateValues\", i0.ɵɵpureFunction0(32, _c0));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.firstName == null ? null : _r1.controls.firstName.errors == null ? null : _r1.controls.firstName.errors.maxlength))(\"translateValues\", i0.ɵɵpureFunction0(33, _c1));\n    i0.ɵɵadvance(10);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(30, 28, \"profile.form.lastname.placeholder\"));\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.currentAccount.lastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !((_r1.controls.lastName == null ? null : _r1.controls.lastName.dirty) && (_r1.controls.lastName == null ? null : _r1.controls.lastName.invalid)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.lastName == null ? null : _r1.controls.lastName.errors == null ? null : _r1.controls.lastName.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.lastName == null ? null : _r1.controls.lastName.errors == null ? null : _r1.controls.lastName.errors.minlength))(\"translateValues\", i0.ɵɵpureFunction0(34, _c0));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.lastName == null ? null : _r1.controls.lastName.errors == null ? null : _r1.controls.lastName.errors.maxlength))(\"translateValues\", i0.ɵɵpureFunction0(35, _c1));\n    i0.ɵɵadvance(10);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(52, 30, \"global.form.email.placeholder\"));\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.currentAccount.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"hidden\", !((_r1.controls.email == null ? null : _r1.controls.email.dirty) && (_r1.controls.email == null ? null : _r1.controls.email.invalid)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.email == null ? null : _r1.controls.email.errors == null ? null : _r1.controls.email.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.email == null ? null : _r1.controls.email.errors == null ? null : _r1.controls.email.errors.minlength))(\"translateValues\", i0.ɵɵpureFunction0(36, _c2));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !(_r1.controls.email == null ? null : _r1.controls.email.errors == null ? null : _r1.controls.email.errors.maxlength))(\"translateValues\", i0.ɵɵpureFunction0(37, _c3));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", _r1.form.invalid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"icon\", \"ban\");\n  }\n}\nclass EditProfileComponent {\n  constructor(accountService, alertService, maintainProfileService, router) {\n    this.accountService = accountService;\n    this.alertService = alertService;\n    this.maintainProfileService = maintainProfileService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.accountService.identity().subscribe(account => {\n      this.originalAccount = this.copyAccount(account);\n      this.currentAccount = this.copyAccount(account);\n    });\n  }\n  save() {\n    if (this.isObjectEqual(this.currentAccount, this.originalAccount)) {\n      // this.alertService.addAlert({type: 'warning', translationKey: 'profile.messages.warning.nochanges', translationParams: { param: null }});\n      this.alertService.addAlert({\n        type: 'warning',\n        translationKey: 'profile.messages.warning.nochanges'\n      });\n      return;\n    }\n    this.maintainProfileService.save(this.currentAccount).subscribe(() => {\n      this.onSaveSuccess();\n    }, error => {\n      this.onSaveError(error);\n    });\n  }\n  copyAccount(account) {\n    return {\n      email: account.email,\n      firstName: account.firstName,\n      lastName: account.lastName\n    };\n  }\n  isObjectEqual(a, b) {\n    const aProps = Object.getOwnPropertyNames(a);\n    const bProps = Object.getOwnPropertyNames(b);\n    if (aProps.length !== bProps.length) {\n      return false;\n    }\n    for (let i = 0; i < aProps.length; i++) {\n      const propName = aProps[i];\n      if (a[propName] !== b[propName]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  gotoProfile() {\n    this.router.navigate(['account/profile']);\n  }\n  onSaveSuccess() {\n    this.accountService.identity(true).subscribe(account => {\n      this.originalAccount = this.copyAccount(account);\n      this.currentAccount = this.copyAccount(account);\n    });\n    this.alertService.addAlert({\n      type: 'success',\n      translationKey: 'profile.messages.success'\n    });\n  }\n  onSaveError(error) {\n    try {\n      error.json();\n    } catch (exception) {\n      error.message = error.text();\n    }\n    this.onError(error);\n  }\n  onError(error) {\n    this.alertService.addAlert({\n      type: 'danger',\n      translationKey: error.message\n    });\n  }\n}\nexports.EditProfileComponent = EditProfileComponent;\nEditProfileComponent.ɵfac = function EditProfileComponent_Factory(t) {\n  return new (t || EditProfileComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.MaintainProfileService), i0.ɵɵdirectiveInject(i4.Router));\n};\nEditProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditProfileComponent,\n  selectors: [[\"ic-edit-profile\"]],\n  decls: 19,\n  vars: 1,\n  consts: [[1, \"row\", \"justify-content-center\"], [1, \"col-md-8\"], [\"icTranslate\", \"profile.tab.edit\"], [\"name\", \"editProfileForm\", \"role\", \"form\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"name\", \"editProfileForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editProfileForm\", \"ngForm\"], [1, \"rounded-pill\"], [\"for\", \"firstName\", \"icTranslate\", \"profile.form.firstname\", 1, \"form-control-label\"], [\"type\", \"text\", \"id\", \"firstName\", \"name\", \"firstName\", \"minlength\", \"3\", \"maxlength\", \"50\", \"required\", \"\", 1, \"form-control\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [\"icTranslate\", \"entity.validation.minlength\", 1, \"form-text\", \"text-danger\", 3, \"hidden\", \"translateValues\"], [\"icTranslate\", \"entity.validation.maxlength\", 1, \"form-text\", \"text-danger\", 3, \"hidden\", \"translateValues\"], [\"for\", \"lastName\", \"icTranslate\", \"profile.form.lastname\", 1, \"form-control-label\"], [\"type\", \"text\", \"id\", \"lastName\", \"name\", \"lastName\", \"minlength\", \"3\", \"maxlength\", \"50\", \"required\", \"\", 1, \"form-control\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"for\", \"email\", \"icTranslate\", \"global.form.email.label\", 1, \"form-control-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"minlength\", \"5\", \"maxlength\", \"100\", \"email\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"emailInput\", \"ngModel\"], [\"type\", \"submit\", \"icTranslate\", \"profile.form.button\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [3, \"icon\"], [\"icTranslate\", \"profile.form.back\"]],\n  template: function EditProfileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"div\", 1);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵelementStart(6, \"h2\")(7, \"span\", 2);\n      i0.ɵɵtext(8, \"Edit Profile\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(9, \"\\n      \");\n      i0.ɵɵelement(10, \"ic-alert\");\n      i0.ɵɵtext(11, \"\\n      \");\n      i0.ɵɵelement(12, \"ic-alert-error\");\n      i0.ɵɵtext(13, \"\\n\\n      \");\n      i0.ɵɵtemplate(14, EditProfileComponent_form_14_Template, 78, 38, \"form\", 3);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentAccount);\n    }\n  },\n  dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinLengthValidator, i5.MaxLengthValidator, i5.EmailValidator, i5.NgModel, i5.NgForm, i6.NgIf, i7.FaIconComponent, i8.TranslateDirective, i9.AlertComponent, i10.AlertErrorComponent, i11.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","EditProfileComponent","constructor","accountService","alertService","maintainProfileService","router","ngOnInit","identity","subscribe","account","originalAccount","copyAccount","currentAccount","save","isObjectEqual","addAlert","type","translationKey","onSaveSuccess","error","onSaveError","email","firstName","lastName","a","b","aProps","Object","getOwnPropertyNames","bProps","length","i","propName","gotoProfile","navigate","json","exception","message","text","onError","exports","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\account\\profile\\edit-profile.component.html","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\account\\profile\\edit-profile.component.ts"],"sourcesContent":["<div>\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-8\">\r\n      <h2><span icTranslate=\"profile.tab.edit\">Edit Profile</span></h2>\r\n      <ic-alert></ic-alert>\r\n      <ic-alert-error></ic-alert-error>\r\n\r\n      <form name=\"editProfileForm\" role=\"form\" (ngSubmit)=\"save()\" #editProfileForm=\"ngForm\" *ngIf=\"currentAccount\" >\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"firstName\" icTranslate=\"profile.form.firstname\">First Name</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"firstName\"\r\n            name=\"firstName\"\r\n            placeholder=\"{{ 'profile.form.firstname.placeholder' | translate }}\"\r\n            [(ngModel)]=\"currentAccount.firstName\"\r\n            minlength=\"3\"\r\n            maxlength=\"50\"\r\n            required\r\n          />\r\n          <div [hidden]=\"!(editProfileForm.controls.firstName?.dirty && editProfileForm.controls.firstName?.invalid)\">\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.firstName?.errors?.required\"\r\n              icTranslate=\"entity.validation.required\"\r\n            >\r\n              This field is required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.firstName?.errors?.minlength\"\r\n              icTranslate=\"entity.validation.minlength\"\r\n              [translateValues]=\"{ min: 3 }\"\r\n            >\r\n              Minimum 3 characters required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.firstName?.errors?.maxlength\"\r\n              icTranslate=\"entity.validation.maxlength\"\r\n              [translateValues]=\"{ max: 50 }\"\r\n            >\r\n              This field cannot be longer than 50 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"lastName\" icTranslate=\"profile.form.lastname\">Last Name</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"lastName\"\r\n            name=\"lastName\"\r\n            placeholder=\"{{ 'profile.form.lastname.placeholder' | translate }}\"\r\n            [(ngModel)]=\"currentAccount.lastName\"\r\n            minlength=\"3\"\r\n            maxlength=\"50\"\r\n            required\r\n          />\r\n          <div [hidden]=\"!(editProfileForm.controls.lastName?.dirty && editProfileForm.controls.lastName?.invalid)\">\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.lastName?.errors?.required\"\r\n              icTranslate=\"entity.validation.required\"\r\n            >\r\n              This field is required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.lastName?.errors?.minlength\"\r\n              icTranslate=\"entity.validation.minlength\"\r\n              [translateValues]=\"{ min: 3 }\"\r\n            >\r\n              Minimum 3 characters required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.lastName?.errors?.maxlength\"\r\n              icTranslate=\"entity.validation.maxlength\"\r\n              [translateValues]=\"{ max: 50 }\"\r\n            >\r\n              This field cannot be longer than 50 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"email\" icTranslate=\"global.form.email.label\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"{{ 'global.form.email.placeholder' | translate }}\"\r\n            [(ngModel)]=\"currentAccount.email\"\r\n            minlength=\"5\"\r\n            maxlength=\"100\"\r\n            #emailInput=\"ngModel\"\r\n            email\r\n            required\r\n          />\r\n          <div [hidden]=\"!(editProfileForm.controls.email?.dirty && editProfileForm.controls.email?.invalid)\">\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.email?.errors?.required\"\r\n              icTranslate=\"entity.validation.required\"\r\n            >\r\n              This field is required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.email?.errors?.minlength\"\r\n              icTranslate=\"entity.validation.minlength\"\r\n              [translateValues]=\"{ min: 5 }\"\r\n            >\r\n              Minimum 5 characters required.\r\n            </small>\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              [hidden]=\"!editProfileForm.controls.email?.errors?.maxlength\"\r\n              icTranslate=\"entity.validation.maxlength\"\r\n              [translateValues]=\"{ max: 100 }\"\r\n            >\r\n              This field cannot be longer than 100 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <button type=\"submit\" [disabled]=\"editProfileForm.form.invalid\" class=\"btn btn-primary btn-sm\" icTranslate=\"profile.form.button\">\r\n          Save\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"gotoProfile()\">\r\n          <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"profile.form.back\">back</span>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertService } from 'app/core/util/alert.service';\r\nimport { MaintainProfileService } from './maintain-profile.service';\r\nimport { AccountService } from 'app/core/auth/account.service';\r\n\r\n@Component({\r\n  selector: 'ic-edit-profile',\r\n  templateUrl: './edit-profile.component.html',\r\n})\r\nexport class EditProfileComponent implements OnInit {\r\n  currentAccount: any | undefined;\r\n  originalAccount: any;\r\n\r\n  constructor(\r\n    private accountService: AccountService,\r\n    private alertService: AlertService,\r\n    private maintainProfileService: MaintainProfileService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.accountService.identity().subscribe(account => {\r\n      this.originalAccount = this.copyAccount(account);\r\n      this.currentAccount = this.copyAccount(account);\r\n    });\r\n  }\r\n\r\n  save(): void {\r\n    if (this.isObjectEqual(this.currentAccount, this.originalAccount)) {\r\n      // this.alertService.addAlert({type: 'warning', translationKey: 'profile.messages.warning.nochanges', translationParams: { param: null }});\r\n      this.alertService.addAlert({ type: 'warning', translationKey: 'profile.messages.warning.nochanges' });\r\n      return;\r\n    }\r\n    this.maintainProfileService.save(this.currentAccount).subscribe(\r\n      () => {\r\n        this.onSaveSuccess();\r\n      },\r\n      (error: any) => {\r\n        this.onSaveError(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  copyAccount(account: any): any {\r\n    return {\r\n      email: account.email,\r\n      firstName: account.firstName,\r\n      lastName: account.lastName,\r\n    };\r\n  }\r\n\r\n  isObjectEqual(a: any, b: any): boolean {\r\n    const aProps = Object.getOwnPropertyNames(a);\r\n    const bProps = Object.getOwnPropertyNames(b);\r\n\r\n    if (aProps.length !== bProps.length) {\r\n      return false;\r\n    }\r\n\r\n    for (let i = 0; i < aProps.length; i++) {\r\n      const propName = aProps[i];\r\n      if (a[propName] !== b[propName]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  gotoProfile(): void {\r\n    this.router.navigate(['account/profile']);\r\n  }\r\n\r\n  private onSaveSuccess(): void {\r\n    this.accountService.identity(true).subscribe(account => {\r\n      this.originalAccount = this.copyAccount(account);\r\n      this.currentAccount = this.copyAccount(account);\r\n    });\r\n    this.alertService.addAlert({ type: 'success', translationKey: 'profile.messages.success' });\r\n  }\r\n\r\n  private onSaveError(error: any): void {\r\n    try {\r\n      error.json();\r\n    } catch (exception) {\r\n      error.message = error.text();\r\n    }\r\n    this.onError(error);\r\n  }\r\n\r\n  private onError(error: any): void {\r\n    this.alertService.addAlert({ type: 'danger', translationKey: error.message });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewSerbReportComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i3 = tslib_1.__importStar(require(\"../../service/se-claim.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/service/file-upload.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i8 = tslib_1.__importStar(require(\"../../../../shared/pipe/default-string.pipe\"));\nfunction ViewSerbReportComponent_div_17_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"th\", 9);\n    i0.ɵɵtext(4, \"\\n                    \");\n    i0.ɵɵelementStart(5, \"div\", 10);\n    i0.ɵɵtext(6, \"\\n                        \");\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵtext(8, \"SERB Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                \");\n    i0.ɵɵelementStart(12, \"th\", 9);\n    i0.ɵɵtext(13, \"\\n                    \");\n    i0.ɵɵelementStart(14, \"div\", 10);\n    i0.ɵɵtext(15, \"\\n                        \");\n    i0.ɵɵelementStart(16, \"div\");\n    i0.ɵɵtext(17, \"Individual SERB Report\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                \");\n    i0.ɵɵelementStart(21, \"th\", 9);\n    i0.ɵɵtext(22, \"\\n                    \");\n    i0.ɵɵelementStart(23, \"div\", 10);\n    i0.ɵɵtext(24, \"\\n                        \");\n    i0.ɵɵelementStart(25, \"div\");\n    i0.ɵɵtext(26, \"Report Generation Date Time\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n                \");\n    i0.ɵɵelementStart(30, \"th\", 9);\n    i0.ɵɵtext(31, \"\\n                    \");\n    i0.ɵɵelementStart(32, \"div\", 10);\n    i0.ɵɵtext(33, \"\\n                        \");\n    i0.ɵɵelementStart(34, \"div\");\n    i0.ɵɵtext(35, \"Mass Approval Document\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n        \");\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3, \"Migrated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6, \"Migrated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9, \"Migrated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12, \"Migrated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_8_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const data_r7 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.openFileInNewTab(data_r7.serbReportFileId));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(data_r7.migratedInd ? \"Migrated\" : data_r7.serbReportFileName);\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_15_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const data_r7 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.openFileInNewTab(data_r7.massApprovalFileId));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(data_r7.migratedInd ? \"Migrated\" : data_r7.massApprovalFileName);\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        -\\n                    \");\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                    \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                    \");\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtemplate(8, ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_8_Template, 2, 1, \"a\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n                    \");\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                    \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtemplate(15, ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_a_15_Template, 2, 1, \"a\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                    \");\n    i0.ɵɵtemplate(17, ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_ng_template_17_Template, 1, 0, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n\\n            \");\n  }\n  if (rf & 2) {\n    const _r15 = i0.ɵɵreference(18);\n    const data_r7 = i0.ɵɵnextContext().$implicit;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, data_r7.serbDate));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !data_r7.migratedInd && data_r7.serbReportFileId)(\"ngIfElse\", _r15);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(data_r7.migratedInd ? \"Migrated\" : i0.ɵɵpipeBind1(12, 8, ctx_r12.dateUtilsService.convertUnixToDateString(data_r7.reportGenDate, ctx_r12.dateFormat)));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !data_r7.migratedInd && data_r7.serbReportFileId)(\"ngIfElse\", _r15);\n  }\n}\nfunction ViewSerbReportComponent_div_17_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵtemplate(1, ViewSerbReportComponent_div_17_ng_template_9_tr_1_Template, 14, 0, \"tr\", 2);\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵtemplate(3, ViewSerbReportComponent_div_17_ng_template_9_ng_template_3_Template, 21, 10, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtext(5, \"\\n        \");\n  }\n  if (rf & 2) {\n    const data_r7 = ctx.$implicit;\n    const _r11 = i0.ɵɵreference(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", data_r7.migratedInd)(\"ngIfElse\", _r11);\n  }\n}\nfunction ViewSerbReportComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"p-table\", 5, 6);\n    i0.ɵɵtext(6, \"\\n        \");\n    i0.ɵɵtemplate(7, ViewSerbReportComponent_div_17_ng_template_7_Template, 40, 0, \"ng-template\", 7);\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵtemplate(9, ViewSerbReportComponent_div_17_ng_template_9_Template, 6, 2, \"ng-template\", 8);\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"filterDelay\", 0)(\"loading\", ctx_r0.loading)(\"value\", ctx_r0.serbReportDetails);\n  }\n}\nfunction ViewSerbReportComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵelement(2, \"i\", 15);\n    i0.ɵɵtext(3, \"\\n        No records found.\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n\");\n  }\n}\nconst _c0 = function () {\n  return {\n    \"margin-bottom\": \"1em\"\n  };\n};\nclass ViewSerbReportComponent {\n  constructor(dateUtilsService, route, seClaimService, fileUploadService) {\n    this.dateUtilsService = dateUtilsService;\n    this.route = route;\n    this.seClaimService = seClaimService;\n    this.fileUploadService = fileUploadService;\n    this.serbReportDetails = [];\n    this.dateFormat = \"DD-MM-YYYY (HHmm)\";\n    console.log(\"test\");\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.params = params;\n      this.getSerbReportDetails(this.params.claimId);\n    });\n  }\n  getSerbReportDetails(claimId) {\n    setTimeout(() => {\n      let params = new http_1.HttpParams();\n      params = params.append('claimId', claimId);\n      this.seClaimService.getSerbReportDetails({\n        params\n      }).subscribe(resp => {\n        if (resp.body.data) {\n          this.serbReportDetails = resp.body.data;\n        }\n      });\n    });\n    this.loading = false;\n  }\n  openFileInNewTab(id) {\n    this.fileUploadService.downloadTxnId(id).subscribe(res => {\n      if (res) {\n        console.log('download res', res);\n        const data = res;\n        const contentDispositionHeader = data.headers.get('content-disposition');\n        const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\n        const blob = new Blob([data.body], {\n          type: data.headers.get('content-type')\n        });\n        const anchor = document.createElement(\"a\");\n        anchor.href = URL.createObjectURL(blob);\n        anchor.target = \"_blank\";\n        // anchor.rel=\"noopener noreferrer\";\n        anchor.click();\n        document.removeChild(anchor);\n      }\n    });\n  }\n}\nexports.ViewSerbReportComponent = ViewSerbReportComponent;\nViewSerbReportComponent.ɵfac = function ViewSerbReportComponent_Factory(t) {\n  return new (t || ViewSerbReportComponent)(i0.ɵɵdirectiveInject(i1.DateUtilsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.SEClaimService), i0.ɵɵdirectiveInject(i4.FileUploadService));\n};\nViewSerbReportComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ViewSerbReportComponent,\n  selectors: [[\"n2-view-serb-report\"]],\n  decls: 22,\n  vars: 8,\n  consts: [[1, \"grid\", \"col-4\"], [1, \"col\"], [4, \"ngIf\", \"ngIfElse\"], [\"emptymessage\", \"\"], [1, \"row\"], [\"styleClass\", \"p-datatable-gridlines p-datatable-striped\", \"responsiveLayout\", \"scroll\", 3, \"filterDelay\", \"loading\", \"value\"], [\"dt\", \"\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"scope\", \"col\", \"rowspan\", \"2\"], [1, \"p-d-flex\", \"p-jc-between\"], [\"notMigrated\", \"\"], [\"href\", \"javascript:\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"emptyString\", \"\"], [\"href\", \"javascript:\", 3, \"click\"], [1, \"pi\", \"pi-info-circle\"]],\n  template: function ViewSerbReportComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"div\", 1);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"div\", 1);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\");\n      i0.ɵɵelementStart(12, \"h6\");\n      i0.ɵɵtext(13, \"SERB Meetings\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n\");\n      i0.ɵɵelement(15, \"hr\");\n      i0.ɵɵtext(16, \"\\n\");\n      i0.ɵɵtemplate(17, ViewSerbReportComponent_div_17_Template, 13, 3, \"div\", 2);\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵtemplate(19, ViewSerbReportComponent_ng_template_19_Template, 5, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(21, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(20);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(7, _c0));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        NRIC: \", ctx.params.nric, \"\\n    \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        Name:  \", ctx.params.name, \"\\n    \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        Case ID: \", ctx.params.caseId, \"\\n    \");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.serbReportDetails.length !== 0)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i5.NgIf, i6.PrimeTemplate, i7.Table, i8.DefaultStringPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWV3LXNlcmItcmVwb3J0LmNvbXBvbmVudC5zY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvY2xhaW0vc2UtY2xhaW0vcG9wLXVwL3ZpZXctc2VyYi1yZXBvcnQvdmlldy1zZXJiLXJlcG9ydC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsZ0xBQWdMIiwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ViewSerbReportComponent","constructor","dateUtilsService","route","seClaimService","fileUploadService","console","log","ngOnInit","queryParams","subscribe","params","getSerbReportDetails","claimId","setTimeout","http_1","append","resp","body","data","serbReportDetails","loading","openFileInNewTab","id","downloadTxnId","res","contentDispositionHeader","headers","get","fileName","split","trim","replace","blob","Blob","type","anchor","document","createElement","href","URL","createObjectURL","target","click","removeChild","exports","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\pop-up\\view-serb-report\\view-serb-report.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\pop-up\\view-serb-report\\view-serb-report.component.html"],"sourcesContent":["import { HttpParams } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { FileUploadService } from 'app/shared/service/file-upload.service';\r\nimport { SEClaimService } from '../../service/se-claim.service';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-view-serb-report',\r\n  templateUrl: './view-serb-report.component.html',\r\n  styleUrls: ['./view-serb-report.component.scss']\r\n})\r\nexport class ViewSerbReportComponent implements OnInit {\r\n\r\n  params: any;\r\n  loading!: boolean;\r\n  serbReportDetails:any[] = [];\r\n  dateFormat = \"DD-MM-YYYY (HHmm)\";\r\n\r\n  constructor(\r\n    public dateUtilsService: DateUtilsService,\r\n    private route: ActivatedRoute,\r\n    private seClaimService: SEClaimService,\r\n    private fileUploadService: FileUploadService,\r\n  ) {\r\n    console.log(\"test\")\r\n\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.params = params;\r\n      this.getSerbReportDetails(this.params.claimId);\r\n    });\r\n  }\r\n\r\n  getSerbReportDetails(claimId: string):void{\r\n\r\n    setTimeout(() => {\r\n      let params = new HttpParams();\r\n      params = params.append('claimId', claimId);\r\n      this.seClaimService.getSerbReportDetails({params}).subscribe(resp => {\r\n        if (resp.body.data) {\r\n          this.serbReportDetails = resp.body.data;\r\n        }\r\n      });\r\n    });\r\n\r\n    this.loading = false;\r\n  }\r\n\r\n  openFileInNewTab(id:string): void {\r\n    this.fileUploadService.downloadTxnId(id).subscribe((res:any) => {\r\n      if (res) {\r\n        console.log('download res', res);\r\n        const data = res;\r\n        const contentDispositionHeader: string = data.headers.get('content-disposition');\r\n        const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\r\n        const blob = new Blob([data.body], { type: data.headers.get('content-type') });\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.href = URL.createObjectURL(blob);\r\n        anchor.target = \"_blank\";\r\n        // anchor.rel=\"noopener noreferrer\";\r\n        anchor.click();\r\n        document.removeChild(anchor);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class = \"grid col-4\" [style]=\"{'margin-bottom':'1em'}\">\r\n    <div class = \"col\">\r\n        NRIC: {{ params.nric }}\r\n    </div>\r\n    <div class = \"col\">\r\n        Name:  {{ params.name }}\r\n    </div>\r\n    <div class = \"col\">\r\n        Case ID: {{ params.caseId }}\r\n    </div>\r\n</div>\r\n<h6>SERB Meetings</h6>\r\n<hr>\r\n<div *ngIf=\"serbReportDetails.length!==0; else emptymessage\">\r\n    <div class=\"row\">\r\n        <p-table\r\n        [filterDelay]=\"0\"\r\n        [loading] = \"loading\"\r\n        styleClass=\"p-datatable-gridlines p-datatable-striped\"\r\n        responsiveLayout=\"scroll\"\r\n        [value]=\"serbReportDetails\"\r\n        #dt>\r\n        <ng-template pTemplate=\"header\" let-columns>\r\n            <tr>\r\n                <th scope=\"col\" rowspan=\"2\">\r\n                    <div class=\"p-d-flex p-jc-between\">\r\n                        <div>SERB Date</div>\r\n                    </div>\r\n                </th>\r\n                <th scope=\"col\" rowspan=\"2\">\r\n                    <div class=\"p-d-flex p-jc-between\">\r\n                        <div>Individual SERB Report</div>\r\n                    </div>\r\n                </th>\r\n                <th scope=\"col\" rowspan=\"2\">\r\n                    <div class=\"p-d-flex p-jc-between\">\r\n                        <div>Report Generation Date Time</div>\r\n                    </div>\r\n                </th>\r\n                <th scope=\"col\" rowspan=\"2\">\r\n                    <div class=\"p-d-flex p-jc-between\">\r\n                        <div>Mass Approval Document</div>\r\n                    </div>\r\n                </th>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-data let-rowIndex = \"rowIndex\" let-columns=\"columns\">\r\n            <tr *ngIf = \"data.migratedInd; else notMigrated\">\r\n                <td>Migrated</td>\r\n                <td>Migrated</td>\r\n                <td>Migrated</td>\r\n                <td>Migrated</td>\r\n            </tr>\r\n            <ng-template #notMigrated>\r\n                <tr>\r\n                    <td>{{ data.serbDate | defaultString}}</td>\r\n                    <td><a href='javascript:' (click)=\"openFileInNewTab(data.serbReportFileId)\" *ngIf=\"!data.migratedInd && data.serbReportFileId; else emptyString\">{{ data.migratedInd? \"Migrated\": data.serbReportFileName}}</a></td>\r\n                    <td>{{ data.migratedInd? \"Migrated\": dateUtilsService.convertUnixToDateString(data.reportGenDate, dateFormat) | defaultString}}</td>\r\n                    <td><a href='javascript:' (click)=\"openFileInNewTab(data.massApprovalFileId)\" *ngIf=\"!data.migratedInd && data.serbReportFileId; else emptyString\">{{ data.migratedInd? \"Migrated\": data.massApprovalFileName}}</a></td>\r\n                    <ng-template #emptyString>\r\n                        -\r\n                    </ng-template>\r\n                </tr>\r\n\r\n            </ng-template>\r\n        </ng-template>\r\n        </p-table>\r\n    </div>\r\n</div>\r\n<ng-template #emptymessage>\r\n    <span><i class=\"pi pi-info-circle\"></i>\r\n        No records found.\r\n    </span>\r\n</ng-template>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewEClaimComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst rxjs_1 = require(\"rxjs\");\nconst moment_1 = tslib_1.__importDefault(require(\"moment\"));\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/claim/ec-claim/service/ec-claim.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/claim/service/claim.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/toolbar\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/accordion\"));\nconst i8 = tslib_1.__importStar(require(\"./claim-section/view-eclaim-claim-section.component\"));\nconst i9 = tslib_1.__importStar(require(\"./company-section/view-eclaim-company-section.component\"));\nconst i10 = tslib_1.__importStar(require(\"./additional-info-section/view-eclaim-additional-info-section.component\"));\nconst _c0 = [\"viewClaimSection\"];\nconst _c1 = [\"companySection\"];\nconst _c2 = [\"additionalInfoSection\"];\nconst _c3 = function () {\n  return {\n    \"text-align\": \"center\",\n    \"margin-top\": \"0em\"\n  };\n};\nfunction ViewEClaimComponent_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(3, _c3));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.dueDate);\n  }\n}\nconst _c4 = function () {\n  return {\n    \"color\": \"red\",\n    \"text-align\": \"center\",\n    \"margin-top\": \"0em\"\n  };\n};\nfunction ViewEClaimComponent_ng_template_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(3, _c4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.dueDate);\n  }\n}\nfunction ViewEClaimComponent_n2_view_eclaim_claim_section_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"n2-view-eclaim-claim-section\", 15, 16);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"eClaim\", ctx_r3.eClaim)(\"claimItemDetail\", ctx_r3.claimItemDetail)(\"initialClaim\", ctx_r3.initialClaim);\n  }\n}\nfunction ViewEClaimComponent_n2_view_eclaim_company_section_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"n2-view-eclaim-company-section\", 17, 18);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"eClaim\", ctx_r4.eClaim);\n  }\n}\nfunction ViewEClaimComponent_n2_view_eclaim_additional_info_section_86_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"n2-view-eclaim-additional-info-section\", 17, 19);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"eClaim\", ctx_r5.eClaim);\n  }\n}\nconst _c5 = function () {\n  return {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  };\n};\nclass ViewEClaimComponent {\n  constructor(route, dateUtilsService, ecClaimService, claimService) {\n    this.route = route;\n    this.dateUtilsService = dateUtilsService;\n    this.ecClaimService = ecClaimService;\n    this.claimService = claimService;\n    this.caseId = \"\";\n    this.dto = {};\n    this.nsManNric = \"\";\n    this.nsManRank = \"\";\n    this.nsManName = \"\";\n    this.nsManPhoneNum = \"\";\n    this.nsManGender = \"\";\n    this.dueDate = \"\";\n    // switch buttons\n    this.nextButtonOptions = [];\n    this.saveSubmitButtonOptions = [];\n    this.showRemarksDialogMap = new Map();\n    this.isAppealCase = false;\n    this.nextClaimDto = {};\n    this.saveClaimDto = {};\n    this.nsInfo3 = \"\";\n    this.nsInfo4 = \"\";\n  }\n  ngOnInit() {\n    // this.empClaim = JSON.parse(localStorage.getItem('empClaim'));\n    // this.claimItemDetail = JSON.parse(localStorage.getItem('claimItemDetail'));\n    // localStorage.clear();\n    this.route.queryParams.subscribe(params => {\n      console.log('route params', params);\n      this.setUpClaimDetails(params);\n    });\n  }\n  setUpClaimDetails(params) {\n    const eClaimId = params['eClaimId'];\n    const role = params['role'];\n    let empClaimRequestParams = new http_1.HttpParams();\n    empClaimRequestParams = empClaimRequestParams.append(\"id\", eClaimId);\n    empClaimRequestParams = empClaimRequestParams.append(\"role\", role);\n    const empClaimRequestByEmpClaimId = this.ecClaimService.getEmpClaimRequestById(empClaimRequestParams);\n    const getItemDetailsByEmpClaimId = this.ecClaimService.getItemDetailsByEmpClaimId(eClaimId);\n    const getInitialEmpClaimByEmpClaimId = this.ecClaimService.getInitialEmpClaimByEmpClaimId(eClaimId);\n    const getUserLoginDetails = this.claimService.getUserLoginDetails();\n    (0, rxjs_1.zip)(empClaimRequestByEmpClaimId, getItemDetailsByEmpClaimId, getInitialEmpClaimByEmpClaimId, getUserLoginDetails).subscribe(([eClaimRes, itemDetailsRes, initialClaimRes, subjectRes]) => {\n      if (eClaimRes.body.data) {\n        this.eClaim = eClaimRes.body.data;\n        if (this.eClaim?.claimDto?.processDueDate) {\n          const processDueDate = (0, moment_1.default)(this.eClaim?.claimDto?.processDueDate);\n          this.dueDate = (0, moment_1.default)().isSame(processDueDate, 'day') ? 'Today' : (0, moment_1.default)().isAfter(processDueDate, 'day') ? 'Overdue' : processDueDate.format('DD-MMM (ddd)');\n        }\n      }\n      if (itemDetailsRes.body.data) {\n        this.claimItemDetail = itemDetailsRes.body.data;\n      }\n      if (initialClaimRes.body.data) {\n        this.initialClaim = initialClaimRes.body.data;\n      }\n      if (subjectRes.body.data) {\n        this.subject = subjectRes.body.data;\n      }\n      this.ecClaimService.getCabBlockByNric(this.eClaim?.claimDto.nric).subscribe(cabBlockRes => {\n        if (cabBlockRes.body.data) {\n          this.nsmanCab = 'Y';\n        } else {\n          this.nsmanCab = 'N';\n        }\n      });\n    });\n  }\n  consoleLog() {\n    console.log('PARENT CALLING eClaim', this.eClaim);\n    console.log('PARENT CALLING initialClaim', this.initialClaim);\n    console.log('PARENT CALLING claimItemDetail', this.claimItemDetail);\n  }\n}\nexports.ViewEClaimComponent = ViewEClaimComponent;\nViewEClaimComponent.ɵfac = function ViewEClaimComponent_Factory(t) {\n  return new (t || ViewEClaimComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DateUtilsService), i0.ɵɵdirectiveInject(i3.ECClaimService), i0.ɵɵdirectiveInject(i4.ClaimService));\n};\nViewEClaimComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ViewEClaimComponent,\n  selectors: [[\"n2-view-eclaim\"]],\n  viewQuery: function ViewEClaimComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewClaimSection = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.companySection = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.additionalInfoSection = _t.first);\n    }\n  },\n  decls: 89,\n  vars: 16,\n  consts: [[1, \"sticky-header\", 2, \"background-color\", \"white\"], [1, \"p-toolbar-group-left\", \"col-9\"], [1, \"col-4\"], [1, \"row\"], [1, \"col-2\"], [1, \"col-auto\"], [1, \"col-6\"], [\"href\", \"javascript:\", 3, \"click\"], [1, \"p-toolbar-group-right\", \"col-3\"], [1, \"col-12\", \"flex\", \"align-items-center\", \"flex-wrap\", \"justify-content-end\"], [1, \"flex\", \"align-items-center\"], [\"class\", \"flex align-items-center\", 4, \"ngIf\", \"ngIfElse\"], [\"overdueDate\", \"\"], [3, \"eClaim\", \"claimItemDetail\", \"initialClaim\", 4, \"ngIf\"], [3, \"eClaim\", 4, \"ngIf\"], [3, \"eClaim\", \"claimItemDetail\", \"initialClaim\"], [\"viewClaimSection\", \"\"], [3, \"eClaim\"], [\"companySection\", \"\"], [\"additionalInfoSection\", \"\"]],\n  template: function ViewEClaimComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"p-toolbar\");\n      i0.ɵɵtext(3, \"\\n        \");\n      i0.ɵɵelementStart(4, \"div\", 1);\n      i0.ɵɵtext(5, \"\\n            \");\n      i0.ɵɵelementStart(6, \"div\", 2);\n      i0.ɵɵtext(7, \"\\n                \");\n      i0.ɵɵelementStart(8, \"div\", 3);\n      i0.ɵɵtext(9, \"\\n                    \");\n      i0.ɵɵelementStart(10, \"h2\");\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n            \");\n      i0.ɵɵelementStart(15, \"div\", 4);\n      i0.ɵɵtext(16, \"\\n                \");\n      i0.ɵɵelementStart(17, \"div\", 3);\n      i0.ɵɵtext(18, \"\\n                    \");\n      i0.ɵɵelementStart(19, \"div\", 5);\n      i0.ɵɵtext(20, \"\\n                        \");\n      i0.ɵɵelementStart(21, \"span\");\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n                \");\n      i0.ɵɵelementStart(26, \"div\", 3);\n      i0.ɵɵtext(27, \"\\n                    \");\n      i0.ɵɵelementStart(28, \"div\", 5);\n      i0.ɵɵtext(29, \"\\n                        \");\n      i0.ɵɵelementStart(30, \"span\");\n      i0.ɵɵtext(31, \"\\n                            \");\n      i0.ɵɵelementStart(32, \"span\");\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n                        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \"\\n            \");\n      i0.ɵɵelementStart(39, \"div\", 6);\n      i0.ɵɵtext(40, \"\\n                \");\n      i0.ɵɵelementStart(41, \"div\", 3);\n      i0.ɵɵtext(42, \"\\n                    \");\n      i0.ɵɵelementStart(43, \"div\", 2);\n      i0.ɵɵtext(44, \"\\n                        \");\n      i0.ɵɵelementStart(45, \"span\");\n      i0.ɵɵtext(46, \"CAB: \");\n      i0.ɵɵelementStart(47, \"a\", 7);\n      i0.ɵɵlistener(\"click\", function ViewEClaimComponent_Template_a_click_47_listener() {\n        return ctx.consoleLog();\n      });\n      i0.ɵɵtext(48);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(49, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(50, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51, \"\\n                \");\n      i0.ɵɵelementStart(52, \"div\", 3);\n      i0.ɵɵtext(53, \"\\n                    \");\n      i0.ɵɵelementStart(54, \"div\", 5);\n      i0.ɵɵtext(55, \"\\n                        \");\n      i0.ɵɵelementStart(56, \"span\");\n      i0.ɵɵtext(57);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(58, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n        \");\n      i0.ɵɵelementStart(63, \"div\", 8);\n      i0.ɵɵtext(64, \"\\n            \");\n      i0.ɵɵelementStart(65, \"div\", 9);\n      i0.ɵɵtext(66, \"\\n                \");\n      i0.ɵɵelementStart(67, \"div\", 10);\n      i0.ɵɵtext(68, \"\\n                    Due:\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(69, \"\\n                \\u00A0\\u00A0\\n                \");\n      i0.ɵɵtemplate(70, ViewEClaimComponent_div_70_Template, 5, 4, \"div\", 11);\n      i0.ɵɵtext(71, \"\\n                \");\n      i0.ɵɵtemplate(72, ViewEClaimComponent_ng_template_72_Template, 7, 4, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(74, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(75, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(78, \"\\n\");\n      i0.ɵɵtext(79, \"\\n\");\n      i0.ɵɵelementStart(80, \"p-accordion\");\n      i0.ɵɵtext(81, \"\\n    \");\n      i0.ɵɵtemplate(82, ViewEClaimComponent_n2_view_eclaim_claim_section_82_Template, 2, 3, \"n2-view-eclaim-claim-section\", 13);\n      i0.ɵɵtext(83, \"\\n    \");\n      i0.ɵɵtemplate(84, ViewEClaimComponent_n2_view_eclaim_company_section_84_Template, 2, 1, \"n2-view-eclaim-company-section\", 14);\n      i0.ɵɵtext(85, \"\\n    \");\n      i0.ɵɵtemplate(86, ViewEClaimComponent_n2_view_eclaim_additional_info_section_86_Template, 2, 1, \"n2-view-eclaim-additional-info-section\", 14);\n      i0.ɵɵtext(87, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(88, \"\\n\\n\");\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(73);\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(15, _c5));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate2(\"\\n                        \", ctx.eClaim == null ? null : ctx.eClaim.claimDto == null ? null : ctx.eClaim.claimDto.caseId, \" \", ctx.eClaim == null ? null : ctx.eClaim.claimDto == null ? null : ctx.eClaim.claimDto.nric, \"\\n                    \");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate2(\"\", ctx.eClaim == null ? null : ctx.eClaim.nsManRank, \" \", ctx.eClaim == null ? null : ctx.eClaim.nsManName, \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate2(\"\", ctx.eClaim == null ? null : ctx.eClaim.nsManPhoneNum, \" (\", ctx.eClaim == null ? null : ctx.eClaim.nsManGender, \")\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate(ctx.nsmanCab);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\"\\n                            Overlapping attendance: \", ctx.nsInfo4, \" \\u00A0 and 4 more attd\\n                        \");\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngIf\", ctx.dueDate && ctx.dueDate !== \"Overdue\")(\"ngIfElse\", _r1);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngIf\", ctx.eClaim && ctx.claimItemDetail && ctx.initialClaim);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.eClaim);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.eClaim);\n    }\n  },\n  dependencies: [i5.NgIf, i6.Toolbar, i7.Accordion, i8.ViewEClaimSectionComponent, i9.ViewEClaimCompanySectionComponent, i10.ViewEClaimAdditionalInfoSectionComponent],\n  styles: [\".default-toolbar {\\n  margin: 0 auto;\\n  padding: 0;\\n  background-color: var(--surface-b) !important;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  width: 100vw;\\n  overflow: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZXctZWNsYWltLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXHByb2plY3RzJTIwMlxcbnNwYXlpaWFwcFxcc3JjXFxtYWluXFx3ZWJhcHBcXGFwcFxcY2xhaW1cXGVjLWNsYWltXFxwb3AtdXBcXHZpZXctZWNsYWltXFx2aWV3LWVjbGFpbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQTtFQUNFLGNBQUE7RUFDQSxVQUFBO0VBQ0EsNkNBQUE7QUNMRjs7QURRQTtFQUNFLGFBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQ0xGIiwiZmlsZSI6InZpZXctZWNsYWltLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gOjpuZy1kZWVwIC5wLXRvb2xiYXIudG9vbGJhclMge1xyXG4vLyAgICAgbWFyZ2luOiAwIGF1dG87XHJcbi8vICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbi8vICAgICB9XHJcblxyXG5cclxuOjpuZy1kZWVwIC5kZWZhdWx0LXRvb2xiYXJ7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbiAgcGFkZGluZzogMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXN1cmZhY2UtYikgIWltcG9ydGFudDtcclxufVxyXG5cclxuYm9keSB7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxuICB3aWR0aDogMTAwdnc7XHJcbiAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuIiwiOjpuZy1kZWVwIC5kZWZhdWx0LXRvb2xiYXIge1xuICBtYXJnaW46IDAgYXV0bztcbiAgcGFkZGluZzogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VyZmFjZS1iKSAhaW1wb3J0YW50O1xufVxuXG5ib2R5IHtcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBvdmVyZmxvdzogYXV0bztcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvY2xhaW0vZWMtY2xhaW0vcG9wLXVwL3ZpZXctZWNsYWltL3ZpZXctZWNsYWltLmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vcHJvamVjdHMlMjAyL25zcGF5aWlhcHAvc3JjL21haW4vd2ViYXBwL2FwcC9jbGFpbS9lYy1jbGFpbS9wb3AtdXAvdmlldy1lY2xhaW0vdmlldy1lY2xhaW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBTUE7RUFDRSxjQUFBO0VBQ0EsVUFBQTtFQUNBLDZDQUFBO0FDTEY7O0FEUUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUNMRjtBRENBLDRzQ0FBNHNDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gOjpuZy1kZWVwIC5wLXRvb2xiYXIudG9vbGJhclMge1xyXG4vLyAgICAgbWFyZ2luOiAwIGF1dG87XHJcbi8vICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbi8vICAgICB9XHJcblxyXG5cclxuOjpuZy1kZWVwIC5kZWZhdWx0LXRvb2xiYXJ7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbiAgcGFkZGluZzogMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXN1cmZhY2UtYikgIWltcG9ydGFudDtcclxufVxyXG5cclxuYm9keSB7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxuICB3aWR0aDogMTAwdnc7XHJcbiAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuIiwiOjpuZy1kZWVwIC5kZWZhdWx0LXRvb2xiYXIge1xuICBtYXJnaW46IDAgYXV0bztcbiAgcGFkZGluZzogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VyZmFjZS1iKSAhaW1wb3J0YW50O1xufVxuXG5ib2R5IHtcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBvdmVyZmxvdzogYXV0bztcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ViewEClaimComponent","constructor","route","dateUtilsService","ecClaimService","claimService","Map","ngOnInit","queryParams","subscribe","params","console","log","setUpClaimDetails","eClaimId","role","empClaimRequestParams","http_1","append","empClaimRequestByEmpClaimId","getEmpClaimRequestById","getItemDetailsByEmpClaimId","getInitialEmpClaimByEmpClaimId","getUserLoginDetails","eClaimRes","itemDetailsRes","initialClaimRes","subjectRes","body","data","eClaim","claimDto","processDueDate","dueDate","isSame","isAfter","format","claimItemDetail","initialClaim","subject","getCabBlockByNric","nric","cabBlockRes","nsmanCab","consoleLog","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\ec-claim\\pop-up\\view-eclaim\\view-eclaim.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\ec-claim\\pop-up\\view-eclaim\\view-eclaim.component.html"],"sourcesContent":["import { HttpParams } from '@angular/common/http';\r\nimport { Component, OnInit, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ECClaimService } from 'app/claim/ec-claim/service/ec-claim.service';\r\nimport { ClaimService } from 'app/claim/service/claim.service';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { DialogService } from 'primeng/dynamicdialog';\r\nimport { CodeView, IcCodeService } from 'app/ng-connect';\r\nimport { EmpClaimRequest, SaveEmpClaimRequest } from '../../model/EmpClaimRequest.model';\r\nimport { ViewEClaimSectionComponent } from './claim-section/view-eclaim-claim-section.component';\r\nimport { ClaimItemDetail } from '../../model/ClaimItemDetail.model';\r\nimport { zip } from 'rxjs';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { ViewEClaimCompanySectionComponent } from './company-section/view-eclaim-company-section.component';\r\nimport { ECClaimDataService } from 'app/claim/ec-claim/service/ec-claim-data.service';\r\nimport { InitialEmpClaim } from '../../model/initial-emp-claim.model';\r\nimport { ViewEClaimAdditionalInfoSectionComponent } from './additional-info-section/view-eclaim-additional-info-section.component';\r\nimport moment from 'moment';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-view-eclaim',\r\n  templateUrl: './view-eclaim.component.html',\r\n  styleUrls: ['./view-eclaim.component.scss']\r\n})\r\nexport class ViewEClaimComponent implements OnInit {\r\n\r\n  eClaim: EmpClaimRequest;\r\n  claimItemDetail: ClaimItemDetail[];\r\n  initialClaim: InitialEmpClaim;\r\n  actualTrgItem: any;\r\n  subject: any;\r\n  caseId = \"\";\r\n  dto: any ={};\r\n  nsManNric = \"\";\r\n  nsManRank = \"\";\r\n  nsManName = \"\";\r\n  nsManPhoneNum = \"\";\r\n  nsManGender = \"\";\r\n  code?: CodeView;\r\n  dueDate = \"\";\r\n\r\n  // switch buttons\r\n  nextButtonOptions: MenuItem[] =[];\r\n  saveSubmitButtonOptions: MenuItem[] =[];\r\n\r\n  showRemarksDialogMap: Map<string, boolean> = new Map();\r\n  isAppealCase = false;\r\n\r\n  nextClaimDto: any = {}\r\n\r\n  saveClaimDto: any ={};\r\n\r\n  nsmanCab: string;\r\n  nsInfo3 = \"\";\r\n  nsInfo4 = \"\";\r\n  \r\n  @ViewChild('viewClaimSection', {static: false})\r\n  public viewClaimSection?: ViewEClaimSectionComponent;\r\n  @ViewChild('companySection', {static: false})\r\n  public companySection?: ViewEClaimCompanySectionComponent;\r\n  @ViewChild('additionalInfoSection', {static: false})\r\n  public additionalInfoSection?: ViewEClaimAdditionalInfoSectionComponent;\r\n\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public dateUtilsService: DateUtilsService,\r\n    private ecClaimService: ECClaimService,\r\n    private claimService: ClaimService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // this.empClaim = JSON.parse(localStorage.getItem('empClaim'));\r\n    // this.claimItemDetail = JSON.parse(localStorage.getItem('claimItemDetail'));\r\n    // localStorage.clear();\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      console.log('route params', params);\r\n      this.setUpClaimDetails(params);\r\n    });\r\n  }\r\n\r\n  setUpClaimDetails(params: any){\r\n    const eClaimId = params['eClaimId'];\r\n    const role = params['role'];\r\n\r\n    let empClaimRequestParams = new HttpParams();\r\n    empClaimRequestParams = empClaimRequestParams.append(\"id\", eClaimId);\r\n    empClaimRequestParams = empClaimRequestParams.append(\"role\", role);\r\n\r\n    const empClaimRequestByEmpClaimId = this.ecClaimService.getEmpClaimRequestById(empClaimRequestParams);\r\n    const getItemDetailsByEmpClaimId = this.ecClaimService.getItemDetailsByEmpClaimId(eClaimId);\r\n    const getInitialEmpClaimByEmpClaimId = this.ecClaimService.getInitialEmpClaimByEmpClaimId(eClaimId);\r\n    const getUserLoginDetails = this.claimService.getUserLoginDetails();\r\n\r\n    zip(empClaimRequestByEmpClaimId,\r\n      getItemDetailsByEmpClaimId,\r\n      getInitialEmpClaimByEmpClaimId,\r\n      getUserLoginDetails).subscribe(([\r\n        eClaimRes,\r\n        itemDetailsRes,\r\n        initialClaimRes,\r\n        subjectRes\r\n      ]) => {\r\n      if (eClaimRes.body.data) {\r\n        this.eClaim = eClaimRes.body.data;\r\n        if (this.eClaim?.claimDto?.processDueDate) {\r\n          const processDueDate = moment(this.eClaim?.claimDto?.processDueDate);\r\n          this.dueDate = (moment().isSame(processDueDate, 'day')) ? 'Today' : (moment().isAfter(processDueDate, 'day')) ? 'Overdue' :\r\n            processDueDate.format('DD-MMM (ddd)');\r\n        }\r\n      }\r\n      if (itemDetailsRes.body.data) {\r\n        this.claimItemDetail = itemDetailsRes.body.data;\r\n      }\r\n      if (initialClaimRes.body.data) {\r\n        this.initialClaim = initialClaimRes.body.data;\r\n      }\r\n      if (subjectRes.body.data) {\r\n        this.subject = subjectRes.body.data;\r\n      }\r\n      this.ecClaimService.getCabBlockByNric(this.eClaim?.claimDto.nric).subscribe((cabBlockRes: any) => {\r\n        if (cabBlockRes.body.data) {\r\n            this.nsmanCab = 'Y';\r\n        } else {\r\n            this.nsmanCab = 'N';\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  consoleLog() {\r\n    console.log('PARENT CALLING eClaim', this.eClaim);\r\n    console.log('PARENT CALLING initialClaim', this.initialClaim);\r\n    console.log('PARENT CALLING claimItemDetail', this.claimItemDetail);\r\n  }\r\n\r\n}\r\n","<div class=\"sticky-header\" style=\"background-color: white\">\r\n    <p-toolbar>\r\n        <div class=\"p-toolbar-group-left col-9\">\r\n            <div class=\"col-4\" [style]=\"{'display':'flex', 'align-items':'center'}\">\r\n                <div class=\"row\">\r\n                    <h2>\r\n                        {{ eClaim?.claimDto?.caseId }} {{ eClaim?.claimDto?.nric }}\r\n                    </h2>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-2\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-auto\">\r\n                        <span>{{ eClaim?.nsManRank }} {{ eClaim?.nsManName }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-auto\">\r\n                        <span>\r\n                            <span>{{ eClaim?.nsManPhoneNum }} ({{ eClaim?.nsManGender }})</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-4\">\r\n                        <span>CAB: <a href='javascript:' (click)=\"consoleLog()\">{{nsmanCab}}</a></span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-auto\">\r\n                        <span>\r\n                            Overlapping attendance: {{nsInfo4}} &nbsp; and 4 more attd\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"p-toolbar-group-right col-3\">\r\n            <div class =\"col-12 flex align-items-center flex-wrap justify-content-end\">\r\n                <div class=\"flex align-items-center\">\r\n                    Due:\r\n                </div>\r\n                &nbsp;&nbsp;\r\n                <div class=\"flex align-items-center\" *ngIf=\"dueDate && dueDate !=='Overdue'; else overdueDate\">\r\n                    <h2 [style]=\"{'text-align': 'center','margin-top':'0em'}\">{{dueDate}}</h2>\r\n                </div>\r\n                <ng-template #overdueDate>\r\n                    <div class=\"flex align-items-center\">\r\n                        <h2 [style]=\"{'color': 'red', 'text-align': 'center','margin-top':'0em'}\">{{dueDate}}</h2>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </p-toolbar>\r\n</div>\r\n<!-- <div class = \"grid\" style=\"margin: 1em\">\r\n    <div class = \"col-6 flex justify-content-end gap-2\">\r\n        <button pButton label=\"LOG\" [style]=\"{'margin-bottom': '.5em', 'margin-left': '.5em'}\" (click)=\"consoleLog()\" (click)=\"$event.stopPropagation()\"></button> \r\n    </div>\r\n</div> -->\r\n<p-accordion>\r\n    <n2-view-eclaim-claim-section #viewClaimSection *ngIf=\"eClaim && claimItemDetail && initialClaim\" \r\n        [eClaim]=\"eClaim\" [claimItemDetail]=\"claimItemDetail\" [initialClaim]=\"initialClaim\"></n2-view-eclaim-claim-section>\r\n    <n2-view-eclaim-company-section #companySection *ngIf=\"eClaim\" [eClaim]=\"eClaim\"></n2-view-eclaim-company-section>\r\n    <n2-view-eclaim-additional-info-section #additionalInfoSection *ngIf=\"eClaim\" [eClaim]=\"eClaim\"></n2-view-eclaim-additional-info-section>\r\n</p-accordion>\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
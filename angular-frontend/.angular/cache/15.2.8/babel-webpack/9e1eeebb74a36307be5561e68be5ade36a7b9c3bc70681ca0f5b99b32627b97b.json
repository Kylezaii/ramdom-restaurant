{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ProtectedPayableEditRejectedComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst forms_1 = require(\"@angular/forms\");\nconst nspapp_constants_1 = require(\"app/shared/constants/nspapp.constants\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/payment/protected-payable/service/protected-payable.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/payment/overpayment/service/payment.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/checkbox\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/inputnumber\"));\nconst i12 = tslib_1.__importStar(require(\"../../../shared/component/file-upload/file-upload.component\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i14 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"supportingDocumentsUploadPanel\"];\nfunction ProtectedPayableEditRejectedComponent_span_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nclass ProtectedPayableEditRejectedComponent {\n  constructor(router, route, fb, toastService, nspConfirmService, protectedPayableService, paymentService) {\n    this.router = router;\n    this.route = route;\n    this.fb = fb;\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.protectedPayableService = protectedPayableService;\n    this.paymentService = paymentService;\n    this.editProtectedPayableForm = this.fb.group({\n      protectedAmt: new forms_1.FormControl(0.0, [forms_1.Validators.required, forms_1.Validators.min(1)]),\n      protectSP: new forms_1.FormControl(false),\n      supportingDocs: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")])\n    });\n    // Enumeration object for decoding common NSPAY2.0 statuses\n    this.n2StatusEnum = nspapp_constants_1.Ns2Status;\n    this.summary = {\n      nric: '',\n      name: '',\n      rank: '',\n      sex: '',\n      csn: '',\n      principalOS: 0,\n      interestOS: 0,\n      protectedPayableInd: '',\n      protectedPayableSPInd: '',\n      instalmentInd: ''\n    };\n  }\n  ngOnInit() {\n    this.setProtectedAmountOrServicePayValidation();\n    this.route.params.subscribe(params => {\n      this.protectedPayableService.getProtectedPayable(params['protectedPayableId']).subscribe(res => {\n        // Pipe response to an array of Interface model\n        this.rejectedProtectedPayable = res.body.data;\n        if (!res.body.data) {\n          this.toastService.info(\"Protected Payable record not found\");\n          this.router.navigate(['/inbox']);\n        } else if (this.n2StatusEnum[this.rejectedProtectedPayable?.status] !== nspapp_constants_1.Ns2Status.REJECTED) {\n          this.toastService.info(\"Protected Payable record is not Rejected\");\n          this.router.navigate(['/inbox']);\n        } else {\n          this.patchValues();\n        }\n      }, error => {\n        console.log(error.message);\n        if (error.status === 404 /* HttpStatusCode.NotFound */) {\n          this.toastService.error('No Protected Payable pending approval for the given Protected Payable ID');\n        }\n      });\n    });\n  }\n  patchValues() {\n    // Sequentially call other APIs using the NRIC for the Protected Payable\n    this.paymentService.getSummaryByNric(this.rejectedProtectedPayable?.nric).subscribe(summaryRes => {\n      this.summary = summaryRes.body.data;\n      console.log(this.summary);\n    });\n    // If the PP has no protected value, enable the checkbox\n    if (this.rejectedProtectedPayable.protectServicePayInd === 'Y') {\n      this.editProtectedPayableForm.patchValue({\n        'protectSP': true\n      });\n    } else {\n      console.log(\"this.rejectedProtectedPayable?.protectedAmt\", this.rejectedProtectedPayable?.protectedAmt);\n      this.editProtectedPayableForm.patchValue({\n        'protectedAmt': this.rejectedProtectedPayable?.protectedAmt\n      });\n    }\n    // TODO: Retrieve the supporting files uploaded, currently mocking\n    if (this.rejectedProtectedPayable?.supportingDocs) {\n      const txnIds = this.rejectedProtectedPayable?.supportingDocs.map(x => String(x.documentId));\n      this.supportDocsFileUploadComponent.preloadFiles(txnIds);\n    }\n  }\n  setProtectedAmountOrServicePayValidation() {\n    const protectedAmountControl = this.editProtectedPayableForm.get('protectedAmt');\n    const protectServicePayFlagControl = this.editProtectedPayableForm.get('protectSP');\n    protectServicePayFlagControl?.valueChanges.subscribe(protectServicePayFlagChecked => {\n      if (protectServicePayFlagChecked) {\n        protectedAmountControl?.setValidators(null);\n      } else {\n        // Unchecked, set validator onto protectedAmountControl\n        protectedAmountControl?.setValidators([forms_1.Validators.required, forms_1.Validators.min(1)]);\n      }\n      protectedAmountControl?.updateValueAndValidity();\n    });\n  }\n  onOpen(dialog) {\n    console.log('Opening dialog now');\n    dialog.display = true;\n  }\n  // Pop up the Confirmation dialog to Cancel current transaction\n  onCancel(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      // Define function that will be called upon confirmation of the cancellation dialog\n      // Will route back to Inbox upon cancellation in this case\n      this.logForm();\n      // this.router.navigate(['/inbox']);\n    });\n  }\n\n  onSubmit(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog);\n  }\n  onSubmitAmendment(event, key) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      // Create form data to be sent to Create API\n      const request = {\n        nric: this.rejectedProtectedPayable.nric,\n        protectedAmt: this.editProtectedPayableForm.get('protectedAmt').value,\n        protectServicePayInd: this.editProtectedPayableForm.get('protectSP').value,\n        supportingDocs: this.supportDocsFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id))\n      };\n      setTimeout(() => {\n        this.protectedPayableService.postCreateProtectedPayable(request).subscribe(res => {\n          if (res.body?.data) {\n            this.router.navigate(['/inbox']);\n            this.toastService.success(\"Protected Payable created successfully. Routed for approval\");\n          }\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      }, 1000);\n    });\n  }\n  logForm() {\n    console.log(\"form\", this.editProtectedPayableForm.value);\n  }\n}\nexports.ProtectedPayableEditRejectedComponent = ProtectedPayableEditRejectedComponent;\nProtectedPayableEditRejectedComponent.ɵfac = function ProtectedPayableEditRejectedComponent_Factory(t) {\n  return new (t || ProtectedPayableEditRejectedComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.NspConfirmationService), i0.ɵɵdirectiveInject(i5.ProtectedPayableService), i0.ɵɵdirectiveInject(i6.PaymentService));\n};\nProtectedPayableEditRejectedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProtectedPayableEditRejectedComponent,\n  selectors: [[\"n2-protected-payable-edit-rejected\"]],\n  viewQuery: function ProtectedPayableEditRejectedComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.supportDocsFileUploadComponent = _t.first);\n    }\n  },\n  decls: 130,\n  vars: 49,\n  consts: [[1, \"flex\", \"justify-content-center\"], [1, \"flex\", \"flex-column\", \"gap-4\", 2, \"width\", \"60vw\"], [\"header\", \"Personal Particulars\"], [1, \"particulars\"], [\"header\", \"Amend Protected Payable\"], [1, \"flex\", \"flex-column\", \"gap-4\", 3, \"formGroup\"], [1, \"grid\"], [1, \"col-12\"], [1, \"col-3\"], [1, \"col-9\", \"flex-auto\", \"flex\", \"align-items-center\", \"gap-4\"], [1, \"flex\", \"flex-column\", \"align-items-start\"], [\"formControlName\", \"protectedAmt\", \"id\", \"protectedAmt\", \"currency\", \"SGD\", 3, \"disabled\", \"minFractionDigits\"], [\"class\", \"p-error\", 4, \"ngIf\"], [1, \"flex\", \"gap-2\"], [\"formControlName\", \"protectSP\", \"id\", \"protectServicePayFlag\", 3, \"binary\"], [1, \"col-9\"], [\"formControlName\", \"supportingDocs\", \"id\", \"supportingDocs\", 1, \"flex-auto\", 3, \"contentHeight\"], [\"supportingDocumentsUploadPanel\", \"\"], [1, \"flex\", \"justify-content-end\", \"gap-2\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Remove with No Action\", 1, \"p-button-outlined\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"], [\"key\", \"editRejectedProtectedPayableCancel\"], [\"key\", \"editRejectedProtectedPayableRemoveWithNoAction\"], [\"key\", \"editRejectedProtectedPayableSubmit\"], [1, \"flex\", \"justify-content-center\", \"gap-2\"], [\"icon\", \"pi pi-chevron-left\", \"iconPos\", \"left\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Back\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", \"iconPos\", \"right\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Next\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", \"iconPos\", \"right\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Next Same Type\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [1, \"p-error\"]],\n  template: function ProtectedPayableEditRejectedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"p-panel\", 2);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵtext(7, \"\\n        \");\n      i0.ɵɵelementStart(8, \"h5\");\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"defaultString\");\n      i0.ɵɵpipe(11, \"defaultString\");\n      i0.ɵɵpipe(12, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n        \");\n      i0.ɵɵelementStart(14, \"span\");\n      i0.ɵɵtext(15, \"NSman (M)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n        \");\n      i0.ɵɵelementStart(17, \"span\");\n      i0.ɵɵtext(18, \"CAB:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"span\");\n      i0.ɵɵtext(20, \"Y\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(21, \"\\n        \");\n      i0.ɵɵelementStart(22, \"span\");\n      i0.ɵɵtext(23, \"Protected Payable:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"span\");\n      i0.ɵɵtext(25);\n      i0.ɵɵpipe(26, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(27, \"\\n        \");\n      i0.ɵɵelement(28, \"br\");\n      i0.ɵɵtext(29, \"\\n        \");\n      i0.ɵɵelementStart(30, \"span\");\n      i0.ɵɵtext(31, \"Outstanding Principal:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"span\");\n      i0.ɵɵtext(33);\n      i0.ɵɵpipe(34, \"defaultString\");\n      i0.ɵɵpipe(35, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n        \");\n      i0.ɵɵelementStart(37, \"span\");\n      i0.ɵɵtext(38, \"Outstanding Interest:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"span\");\n      i0.ɵɵtext(40);\n      i0.ɵɵpipe(41, \"defaultString\");\n      i0.ɵɵpipe(42, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n        \");\n      i0.ɵɵelementStart(44, \"span\");\n      i0.ɵɵtext(45, \"Instalment:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"span\");\n      i0.ɵɵtext(47);\n      i0.ɵɵpipe(48, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(49, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(50, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51, \"\\n\\n    \");\n      i0.ɵɵelementStart(52, \"p-panel\", 4);\n      i0.ɵɵtext(53, \"\\n      \");\n      i0.ɵɵelementStart(54, \"form\", 5);\n      i0.ɵɵtext(55, \"\\n        \");\n      i0.ɵɵelementStart(56, \"div\", 6);\n      i0.ɵɵtext(57, \"\\n          \");\n      i0.ɵɵelementStart(58, \"div\", 7);\n      i0.ɵɵtext(59);\n      i0.ɵɵpipe(60, \"defaultString\");\n      i0.ɵɵpipe(61, \"defaultString\");\n      i0.ɵɵpipe(62, \"date\");\n      i0.ɵɵpipe(63, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(64, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n        \");\n      i0.ɵɵelementStart(66, \"div\", 6);\n      i0.ɵɵtext(67, \"\\n          \");\n      i0.ɵɵelementStart(68, \"div\", 8);\n      i0.ɵɵtext(69, \"Protected Amount from Offset\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n          \");\n      i0.ɵɵelementStart(71, \"div\", 9);\n      i0.ɵɵtext(72, \"\\n            \");\n      i0.ɵɵelementStart(73, \"div\", 10);\n      i0.ɵɵtext(74, \"\\n              \");\n      i0.ɵɵelement(75, \"p-inputNumber\", 11);\n      i0.ɵɵtext(76, \"\\n              \");\n      i0.ɵɵtemplate(77, ProtectedPayableEditRejectedComponent_span_77_Template, 2, 0, \"span\", 12);\n      i0.ɵɵtext(78, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(79, \"\\n            \");\n      i0.ɵɵelementStart(80, \"div\", 13);\n      i0.ɵɵtext(81, \"\\n              \");\n      i0.ɵɵelementStart(82, \"div\");\n      i0.ɵɵtext(83, \"\\n                \");\n      i0.ɵɵelement(84, \"p-checkbox\", 14);\n      i0.ɵɵtext(85, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(86, \"\\n              Protect Service Pay\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(87, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(88, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(89, \"\\n        \");\n      i0.ɵɵelementStart(90, \"div\", 6);\n      i0.ɵɵtext(91, \"\\n          \");\n      i0.ɵɵelementStart(92, \"div\", 8);\n      i0.ɵɵtext(93, \"Supporting Documents\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(94, \"\\n          \");\n      i0.ɵɵelementStart(95, \"div\", 15);\n      i0.ɵɵtext(96, \"\\n            \");\n      i0.ɵɵelement(97, \"n2-file-upload\", 16, 17);\n      i0.ɵɵtext(99, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(100, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(101, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(103, \"\\n    \");\n      i0.ɵɵelementStart(104, \"div\", 18);\n      i0.ɵɵtext(105, \"\\n      \");\n      i0.ɵɵelementStart(106, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_106_listener($event) {\n        return ctx.onCancel($event, \"editRejectedProtectedPayableCancel\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(107, \"\\n      \");\n      i0.ɵɵelementStart(108, \"button\", 20);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_108_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedProtectedPayableRemoveWithNoAction\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(109, \"\\n      \");\n      i0.ɵɵelementStart(110, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_110_listener($event) {\n        return ctx.onSubmitAmendment($event, \"editRejectedProtectedPayableSubmit\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(111, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(112, \"\\n    \");\n      i0.ɵɵelement(113, \"p-confirmPopup\", 22);\n      i0.ɵɵtext(114, \"\\n    \");\n      i0.ɵɵelement(115, \"p-confirmPopup\", 23);\n      i0.ɵɵtext(116, \"\\n    \");\n      i0.ɵɵelement(117, \"p-confirmPopup\", 24);\n      i0.ɵɵtext(118, \"\\n    \");\n      i0.ɵɵelementStart(119, \"div\", 25);\n      i0.ɵɵtext(120, \"\\n      \");\n      i0.ɵɵelementStart(121, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_121_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedProtectedPayableBack\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(122, \"\\n      \");\n      i0.ɵɵelementStart(123, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_123_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedProtectedPayableNext\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(124, \"\\n      \");\n      i0.ɵɵelementStart(125, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function ProtectedPayableEditRejectedComponent_Template_button_click_125_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedProtectedPayableNextSameType\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(126, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(127, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(128, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(129, \"\\n\\n\");\n    }\n    if (rf & 2) {\n      let tmp_7_0;\n      let tmp_9_0;\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(10, 18, ctx.rejectedProtectedPayable == null ? null : ctx.rejectedProtectedPayable.nric), \"   \", i0.ɵɵpipeBind1(11, 20, ctx.summary == null ? null : ctx.summary.rank), \"   \", i0.ɵɵpipeBind1(12, 22, ctx.summary == null ? null : ctx.summary.name), \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵtextInterpolate2(\"\", (ctx.summary == null ? null : ctx.summary.protectedPayableInd) === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(26, 24, \"No\"), \" \", (ctx.summary == null ? null : ctx.summary.protectedPayableSPInd) === \"Y\" ? \"(Service Pay)\" : \"\", \"\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 26, i0.ɵɵpipeBind3(35, 28, ctx.summary == null ? null : ctx.summary.principalOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(41, 32, i0.ɵɵpipeBind3(42, 34, ctx.summary == null ? null : ctx.summary.interestOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.summary.instalmentInd === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(48, 38, \"No\"));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.editProtectedPayableForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate3(\"Rejected by \", i0.ɵɵpipeBind1(60, 40, ctx.rejectedProtectedPayable == null ? null : ctx.rejectedProtectedPayable.submissionReviewedBy), \"\\n            (\", i0.ɵɵpipeBind1(61, 42, i0.ɵɵpipeBind2(62, 44, ctx.rejectedProtectedPayable == null ? null : ctx.rejectedProtectedPayable.submissionReviewedDt, \"dd-MM-yyyy\")), \"),\\n            \", i0.ɵɵpipeBind1(63, 47, ctx.rejectedProtectedPayable == null ? null : ctx.rejectedProtectedPayable.reason), \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"disabled\", (tmp_7_0 = ctx.editProtectedPayableForm.get(\"protectSP\")) == null ? null : tmp_7_0.value)(\"minFractionDigits\", 2);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.editProtectedPayableForm == null ? null : (tmp_9_0 = ctx.editProtectedPayableForm.get(\"protectedAmt\")) == null ? null : tmp_9_0.hasError(\"required\")) && (ctx.editProtectedPayableForm == null ? null : (tmp_9_0 = ctx.editProtectedPayableForm.get(\"protectedAmt\")) == null ? null : tmp_9_0.dirty));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"binary\", true);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"contentHeight\", \"150px\");\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"disabled\", !ctx.editProtectedPayableForm.valid);\n    }\n  },\n  dependencies: [i7.NgIf, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i8.ButtonDirective, i9.Checkbox, i10.ConfirmPopup, i11.InputNumber, i12.FileUploadComponent, i13.Panel, i7.CurrencyPipe, i7.DatePipe, i14.DefaultStringPipe],\n  styles: [\"[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n\\n.particulars[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .particulars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  display: inline !important;\\n  padding: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3RlY3RlZC1wYXlhYmxlLWVkaXQtcmVqZWN0ZWQuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHBheW1lbnRcXHByb3RlY3RlZC1wYXlhYmxlXFxwcm90ZWN0ZWQtcGF5YWJsZS1lZGl0LXJlamVjdGVkXFxwcm90ZWN0ZWQtcGF5YWJsZS1lZGl0LXJlamVjdGVkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs0RUFBQTtBQUlBO0VBQ0Usb0NBQUE7QUNBRjs7QURHQTtFQUNFLDBCQUFBO0VBQ0EsYUFBQTtBQ0FGIiwiZmlsZSI6InByb3RlY3RlZC1wYXlhYmxlLWVkaXQtcmVqZWN0ZWQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59XHJcblxyXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcclxuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG59XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xufVxuXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDE2cHg7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9wcm90ZWN0ZWQtcGF5YWJsZS9wcm90ZWN0ZWQtcGF5YWJsZS1lZGl0LXJlamVjdGVkL3Byb3RlY3RlZC1wYXlhYmxlLWVkaXQtcmVqZWN0ZWQuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL3BheW1lbnQvcHJvdGVjdGVkLXBheWFibGUvcHJvdGVjdGVkLXBheWFibGUtZWRpdC1yZWplY3RlZC9wcm90ZWN0ZWQtcGF5YWJsZS1lZGl0LXJlamVjdGVkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs0RUFBQTtBQUlBO0VBQ0Usb0NBQUE7QUNBRjs7QURHQTtFQUNFLDBCQUFBO0VBQ0EsYUFBQTtBQ0FGO0FEQ0Esd3FEQUF3cUQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59XHJcblxyXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcclxuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG59XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xufVxuXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDE2cHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProtectedPayableEditRejectedComponent","constructor","router","route","fb","toastService","nspConfirmService","protectedPayableService","paymentService","group","protectedAmt","forms_1","required","min","protectSP","supportingDocs","fileupload2_directive_1","allowableExtension","nspapp_constants_1","nric","name","rank","sex","csn","principalOS","interestOS","protectedPayableInd","protectedPayableSPInd","instalmentInd","ngOnInit","setProtectedAmountOrServicePayValidation","params","subscribe","getProtectedPayable","res","rejectedProtectedPayable","body","data","info","navigate","n2StatusEnum","status","REJECTED","patchValues","error","console","log","message","getSummaryByNric","summaryRes","summary","protectServicePayInd","editProtectedPayableForm","patchValue","txnIds","map","x","String","documentId","supportDocsFileUploadComponent","preloadFiles","protectedAmountControl","get","protectServicePayFlagControl","valueChanges","protectServicePayFlagChecked","setValidators","updateValueAndValidity","onOpen","dialog","display","onCancel","event","key","onConfirmPopup","logForm","onSubmit","onSubmitAmendment","request","value","verifiedFiles","meta_data","id","setTimeout","postCreateProtectedPayable","success","error_desc","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\protected-payable\\protected-payable-edit-rejected\\protected-payable-edit-rejected.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\protected-payable\\protected-payable-edit-rejected\\protected-payable-edit-rejected.component.html"],"sourcesContent":["import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {IProtectedPayable} from 'app/payment/protected-payable/model/protected-payable.model';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ProtectedPayableService} from 'app/payment/protected-payable/service/protected-payable.service';\r\nimport {HttpErrorResponse, HttpResponse, HttpStatusCode} from '@angular/common/http';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {FileUploadComponent} from 'app/shared/component/file-upload/file-upload.component';\r\n\r\nimport {Ns2Status, NSPAppConstants} from 'app/shared/constants/nspapp.constants';\r\nimport {IOPSummary} from \"app/payment/overpayment/overpayment-info/overpayment-info.model\";\r\nimport {PaymentService} from \"app/payment/overpayment/service/payment.service\";\r\nimport {N2Status} from 'app/shared/model/ns2status-enum.model';\r\nimport { FileUploadValidator2 } from 'app/shared/validator/fileupload2.directive';\r\n\r\n@Component({\r\n  selector: 'n2-protected-payable-edit-rejected',\r\n  templateUrl: './protected-payable-edit-rejected.component.html',\r\n  styleUrls: ['./protected-payable-edit-rejected.component.scss']\r\n})\r\nexport class ProtectedPayableEditRejectedComponent implements OnInit {\r\n  rejectedProtectedPayable: IProtectedPayable;\r\n\r\n  editProtectedPayableForm: FormGroup = this.fb.group({\r\n    protectedAmt: new FormControl(0.0, [Validators.required, Validators.min(1)]),\r\n    protectSP: new FormControl(false),\r\n    supportingDocs: new FormControl([], [FileUploadValidator2.allowableExtension(\".pdf\")])\r\n  });\r\n\r\n  // Enumeration object for decoding common NSPAY2.0 statuses\r\n  n2StatusEnum: { [key: string]: Ns2Status } = Ns2Status\r\n\r\n  summary: IOPSummary = {\r\n    nric: '',\r\n    name: '',\r\n    rank: '',\r\n    sex: '',\r\n    csn: '',\r\n    principalOS: 0,\r\n    interestOS: 0,\r\n    protectedPayableInd: '',\r\n    protectedPayableSPInd: '',\r\n    instalmentInd: ''\r\n  };\r\n\r\n  @ViewChild('supportingDocumentsUploadPanel')\r\n  supportDocsFileUploadComponent: FileUploadComponent;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private fb: FormBuilder,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private protectedPayableService: ProtectedPayableService,\r\n    private paymentService: PaymentService) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setProtectedAmountOrServicePayValidation();\r\n    this.route.params.subscribe((params: any) => {\r\n      this.protectedPayableService.getProtectedPayable(params['protectedPayableId']).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          // Pipe response to an array of Interface model\r\n          this.rejectedProtectedPayable = res.body.data;\r\n          if (!res.body.data) {\r\n            this.toastService.info(\"Protected Payable record not found\")\r\n            this.router.navigate(['/inbox']);\r\n          } else if (this.n2StatusEnum[this.rejectedProtectedPayable?.status] !== Ns2Status.REJECTED) {\r\n            this.toastService.info(\"Protected Payable record is not Rejected\")\r\n            this.router.navigate(['/inbox']);\r\n          } else {\r\n            this.patchValues();\r\n          }\r\n\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          console.log(error.message);\r\n          if (error.status === HttpStatusCode.NotFound) {\r\n            this.toastService.error('No Protected Payable pending approval for the given Protected Payable ID');\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  patchValues(): void {\r\n            // Sequentially call other APIs using the NRIC for the Protected Payable\r\n            this.paymentService.getSummaryByNric(this.rejectedProtectedPayable?.nric).subscribe(\r\n              (summaryRes: HttpResponse<any>) => {\r\n                this.summary = summaryRes.body.data;\r\n                console.log(this.summary);\r\n              }\r\n            );\r\n            // If the PP has no protected value, enable the checkbox\r\n            if (this.rejectedProtectedPayable.protectServicePayInd === 'Y') {\r\n              this.editProtectedPayableForm.patchValue({'protectSP': true});\r\n            } else {\r\n              console.log(\"this.rejectedProtectedPayable?.protectedAmt\", this.rejectedProtectedPayable?.protectedAmt)\r\n              this.editProtectedPayableForm.patchValue({'protectedAmt': this.rejectedProtectedPayable?.protectedAmt});\r\n            }\r\n          \r\n            // TODO: Retrieve the supporting files uploaded, currently mocking\r\n            if(this.rejectedProtectedPayable?.supportingDocs) {\r\n              const txnIds: string[] = this.rejectedProtectedPayable?.supportingDocs.map(x => String(x.documentId));\r\n              this.supportDocsFileUploadComponent.preloadFiles(txnIds);\r\n            }\r\n  }\r\n\r\n  setProtectedAmountOrServicePayValidation(): void {\r\n    const protectedAmountControl = this.editProtectedPayableForm.get('protectedAmt');\r\n    const protectServicePayFlagControl = this.editProtectedPayableForm.get('protectSP');\r\n\r\n    protectServicePayFlagControl?.valueChanges.subscribe((protectServicePayFlagChecked: any) => {\r\n      if (protectServicePayFlagChecked) {\r\n        protectedAmountControl?.setValidators(null);\r\n      } else {\r\n        // Unchecked, set validator onto protectedAmountControl\r\n        protectedAmountControl?.setValidators([Validators.required, Validators.min(1)]);\r\n      }\r\n      protectedAmountControl?.updateValueAndValidity();\r\n    })\r\n  }\r\n\r\n  onOpen(dialog: any): void {\r\n    console.log('Opening dialog now');\r\n    dialog.display = true;\r\n  }\r\n\r\n  // Pop up the Confirmation dialog to Cancel current transaction\r\n  onCancel(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      // Define function that will be called upon confirmation of the cancellation dialog\r\n      // Will route back to Inbox upon cancellation in this case\r\n      this.logForm();\r\n      // this.router.navigate(['/inbox']);\r\n    });\r\n  }\r\n\r\n  onSubmit(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog);\r\n  }\r\n\r\n  onSubmitAmendment(event: Event, key: string): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      // Create form data to be sent to Create API\r\n      const request = {\r\n        nric: this.rejectedProtectedPayable.nric,\r\n        protectedAmt: this.editProtectedPayableForm.get('protectedAmt').value,\r\n        protectServicePayInd: this.editProtectedPayableForm.get('protectSP').value,\r\n        supportingDocs: this.supportDocsFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.protectedPayableService.postCreateProtectedPayable(request).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            if (res.body?.data) {\r\n              this.router.navigate(['/inbox']);\r\n              this.toastService.success(\"Protected Payable created successfully. Routed for approval\");\r\n            }\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      }, 1000);\r\n    });\r\n  }\r\n\r\n  logForm(): void {\r\n    console.log(\"form\", this.editProtectedPayableForm.value);\r\n  }\r\n}\r\n","<div class='flex justify-content-center'>\r\n  <div class='flex flex-column gap-4' style='width: 60vw'>\r\n    <p-panel header='Personal Particulars'>\r\n      <div class='particulars'>\r\n        <h5>{{rejectedProtectedPayable?.nric | defaultString}}   {{summary?.rank | defaultString}}   {{summary?.name | defaultString}}</h5>\r\n        <span>NSman (M)</span>\r\n        <span>CAB:</span><span>Y</span>\r\n        <span>Protected Payable:</span><span>{{summary?.protectedPayableInd === 'Y' ? 'Yes' : 'No' | defaultString}} {{summary?.protectedPayableSPInd === 'Y' ? '(Service Pay)' : ''}}</span>\r\n        <br/>\r\n        <span>Outstanding Principal:</span><span>{{summary?.principalOS | currency:'SGD':'' | defaultString}}</span>\r\n        <span>Outstanding Interest:</span><span>{{summary?.interestOS | currency:'SGD':'' | defaultString}}</span>\r\n        <span>Instalment:</span><span>{{summary.instalmentInd === 'Y' ? 'Yes' : 'No' | defaultString}}</span>\r\n      </div>\r\n    </p-panel>\r\n\r\n    <p-panel header='Amend Protected Payable'>\r\n      <form class='flex flex-column gap-4' [formGroup]='editProtectedPayableForm'>\r\n        <div class='grid'>\r\n          <div class='col-12'>Rejected by {{rejectedProtectedPayable?.submissionReviewedBy | defaultString}}\r\n            ({{rejectedProtectedPayable?.submissionReviewedDt | date:'dd-MM-yyyy' | defaultString}}),\r\n            {{rejectedProtectedPayable?.reason | defaultString}}</div>\r\n        </div>\r\n        <div class='grid'>\r\n          <div class='col-3'>Protected Amount from Offset</div>\r\n          <div class='col-9 flex-auto flex align-items-center gap-4'>\r\n            <div class='flex flex-column align-items-start'>\r\n              <p-inputNumber [disabled]='editProtectedPayableForm.get(\"protectSP\")?.value'\r\n                             formControlName='protectedAmt' id='protectedAmt'\r\n                             currency='SGD' [minFractionDigits]='2' ></p-inputNumber>\r\n              <span *ngIf=\"(editProtectedPayableForm?.get('protectedAmt')?.hasError('required')\r\n      && editProtectedPayableForm?.get('protectedAmt')?.dirty)\" class='p-error'>Required</span>\r\n            </div>\r\n            <div class='flex gap-2'>\r\n              <div>\r\n                <p-checkbox formControlName='protectSP' id='protectServicePayFlag'\r\n                            [binary]='true'></p-checkbox>\r\n              </div>\r\n              Protect Service Pay\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class='grid'>\r\n          <div class='col-3'>Supporting Documents</div>\r\n          <div class='col-9'>\r\n            <n2-file-upload #supportingDocumentsUploadPanel class='flex-auto' formControlName='supportingDocs' id='supportingDocs' [contentHeight]=\"'150px'\"></n2-file-upload>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </p-panel>\r\n    <div class='flex justify-content-end gap-2'>\r\n      <button class='p-button-danger' type='button' pButton label='Cancel'\r\n              (click)=\"onCancel($event, 'editRejectedProtectedPayableCancel', null)\"></button>\r\n      <button class='p-button-outlined' type='button' pButton label='Remove with No Action'\r\n              (click)=\"onSubmit($event, 'editRejectedProtectedPayableRemoveWithNoAction', null)\"></button>\r\n      <button type='button' pButton label='Submit' [disabled]='!editProtectedPayableForm.valid'\r\n              (click)=\"onSubmitAmendment($event, 'editRejectedProtectedPayableSubmit')\"></button>\r\n    </div>\r\n    <p-confirmPopup key='editRejectedProtectedPayableCancel'></p-confirmPopup>\r\n    <p-confirmPopup key='editRejectedProtectedPayableRemoveWithNoAction'></p-confirmPopup>\r\n    <p-confirmPopup key='editRejectedProtectedPayableSubmit'></p-confirmPopup>\r\n    <div class='flex justify-content-center gap-2'>\r\n      <button icon='pi pi-chevron-left' iconPos='left' class='p-button-outlined p-button-info' type='button' pButton\r\n              label='Back'\r\n              (click)=\"onSubmit($event, 'editRejectedProtectedPayableBack', null)\"\r\n      ></button>\r\n      <button icon='pi pi-chevron-right' iconPos='right' class='p-button-outlined p-button-info' type='button' pButton\r\n              label='Next'\r\n              (click)=\"onSubmit($event, 'editRejectedProtectedPayableNext', null)\"\r\n      ></button>\r\n      <button icon='pi pi-chevron-right' iconPos='right' class='p-button-outlined p-button-info' type='button' pButton\r\n              label='Next Same Type'\r\n              (click)=\"onSubmit($event, 'editRejectedProtectedPayableNextSameType', null)\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
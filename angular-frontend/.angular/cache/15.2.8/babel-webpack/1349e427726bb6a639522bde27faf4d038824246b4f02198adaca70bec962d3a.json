{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResourcePopupComponent = exports.ResourceCreateDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst resource_model_1 = require(\"./resource.model\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@ng-bootstrap/ng-bootstrap\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/util/alert.service\"));\nconst i3 = tslib_1.__importStar(require(\"./resource.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i9 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i10 = tslib_1.__importStar(require(\"./resource-popup.service\"));\nfunction ResourceCreateDialogComponent_option_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const applicationOption_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", applicationOption_r3.appId === (ctx_r1.resource.application == null ? null : ctx_r1.resource.application.appId) ? ctx_r1.resource.application : applicationOption_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n            \", applicationOption_r3.appName, \"\\n          \");\n  }\n}\nfunction ResourceCreateDialogComponent_option_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const resourceType_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", resourceType_r4.codeId === ctx_r2.resource.resourceType ? ctx_r2.resource.resourceType : resourceType_r4.codeId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n            \", resourceType_r4.codeDesc, \"\\n          \");\n  }\n}\nclass ResourceCreateDialogComponent {\n  constructor(activeModal, alertService, resourceService, eventManager, router) {\n    this.activeModal = activeModal;\n    this.alertService = alertService;\n    this.resourceService = resourceService;\n    this.eventManager = eventManager;\n    this.router = router;\n    this.resource = new resource_model_1.Resource();\n    this.applications = [];\n    this.resourceTypes = [{\n      codeId: 'URI',\n      codeDesc: 'URI'\n    }, {\n      codeId: 'WEBURI',\n      codeDesc: 'WEBURI'\n    }, {\n      codeId: 'PAGE_RES',\n      codeDesc: 'PAGE_RES'\n    }];\n  }\n  ngOnInit() {\n    this.isSaving = false;\n    this.resourceService.findAllApplication().subscribe(res => {\n      this.applications = res.body;\n    }, res => this.onError(res.body));\n  }\n  clear() {\n    this.activeModal.dismiss('cancel');\n    this.backToPrevious();\n  }\n  backToPrevious() {\n    window.history.back();\n  }\n  save() {\n    this.isSaving = true;\n    this.subscribeToSaveResponse(this.resourceService.create(this.resource));\n  }\n  subscribeToSaveResponse(result) {\n    result.subscribe(res => this.onSaveSuccess(res), res => this.onSaveError(res));\n  }\n  onSaveSuccess(result) {\n    this.isSaving = false;\n    this.eventManager.broadcast({\n      name: 'resourceListModification',\n      content: 'OK'\n    });\n    this.activeModal.dismiss(result);\n    this.backToPrevious();\n  }\n  onSaveError(error) {\n    this.isSaving = false;\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\n    document.getElementById('appDialogErrorMsg').innerHTML = appDialogErrorMsg;\n    document.getElementById('appDialogErrorMsg').style.display = 'block';\n  }\n  onError(error) {\n    this.alertService.addAlert({\n      type: 'danger',\n      translationKey: error.message\n    });\n  }\n}\nexports.ResourceCreateDialogComponent = ResourceCreateDialogComponent;\nResourceCreateDialogComponent.ɵfac = function ResourceCreateDialogComponent_Factory(t) {\n  return new (t || ResourceCreateDialogComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.ResourceService), i0.ɵɵdirectiveInject(i4.EventManager), i0.ɵɵdirectiveInject(i5.Router));\n};\nResourceCreateDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResourceCreateDialogComponent,\n  selectors: [[\"ic-resource-create-dialog\"]],\n  decls: 106,\n  vars: 19,\n  consts: [[\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editForm\", \"ngForm\"], [1, \"modal-header\"], [\"id\", \"myResourceLabel\", \"icTranslate\", \"acmAdmin.resource.home.createLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [\"id\", \"appDialogErrorMsg\", 1, \"alert-dismissible\", \"alert-danger\", \"alert\", 2, \"display\", \"none\"], [1, \"modal-body\"], [1, \"row\"], [1, \"rounded-pill\", \"col-md-6\"], [\"icTranslate\", \"acmAdmin.resource.application\", \"for\", \"field_application\", 1, \"form-control-label\"], [\"id\", \"field_application\", \"name\", \"application\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [\"icTranslate\", \"acmAdmin.resource.resourceType\", \"for\", \"field_resourceType\", 1, \"form-control-label\"], [\"id\", \"field_resourceType\", \"name\", \"resourceType\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"icTranslate\", \"acmAdmin.resource.resourceName\", \"for\", \"field_resourceName\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"resourceName\", \"id\", \"field_resourceName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"icTranslate\", \"acmAdmin.resource.resourcePath\", \"for\", \"field_resourcePath\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"resourcePath\", \"id\", \"field_resourcePath\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"id\", \"saveNewResource\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [3, \"icon\"], [\"icTranslate\", \"entity.action.save\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"icTranslate\", \"entity.action.cancel\"]],\n  template: function ResourceCreateDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function ResourceCreateDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(2, \"\\n  \");\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"h4\", 3);\n      i0.ɵɵtext(6, \"Create a Resource\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ResourceCreateDialogComponent_Template_button_click_8_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(9, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\\n  \");\n      i0.ɵɵelement(12, \"p\", 5);\n      i0.ɵɵtext(13, \"\\n\\n  \");\n      i0.ɵɵelementStart(14, \"div\", 6);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵtext(17, \"\\n      \");\n      i0.ɵɵelementStart(18, \"div\", 8);\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"label\", 9);\n      i0.ɵɵtext(21, \"Application\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n        \");\n      i0.ɵɵelementStart(23, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ResourceCreateDialogComponent_Template_select_ngModelChange_23_listener($event) {\n        return ctx.resource.application = $event;\n      });\n      i0.ɵɵtext(24, \"\\n          \");\n      i0.ɵɵelement(25, \"option\", 11);\n      i0.ɵɵtext(26, \"\\n          \");\n      i0.ɵɵtemplate(27, ResourceCreateDialogComponent_option_27_Template, 2, 2, \"option\", 12);\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n        \");\n      i0.ɵɵelementStart(30, \"div\", 13);\n      i0.ɵɵtext(31, \"\\n          \");\n      i0.ɵɵelementStart(32, \"small\", 14);\n      i0.ɵɵtext(33, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n\\n      \");\n      i0.ɵɵelementStart(37, \"div\", 8);\n      i0.ɵɵtext(38, \"\\n        \");\n      i0.ɵɵelementStart(39, \"label\", 15);\n      i0.ɵɵtext(40, \"Resource Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n        \");\n      i0.ɵɵelementStart(42, \"select\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function ResourceCreateDialogComponent_Template_select_ngModelChange_42_listener($event) {\n        return ctx.resource.resourceType = $event;\n      });\n      i0.ɵɵtext(43, \"\\n          \");\n      i0.ɵɵelement(44, \"option\", 11);\n      i0.ɵɵtext(45, \"\\n          \");\n      i0.ɵɵtemplate(46, ResourceCreateDialogComponent_option_46_Template, 2, 2, \"option\", 12);\n      i0.ɵɵtext(47, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(48, \"\\n        \");\n      i0.ɵɵelementStart(49, \"div\", 13);\n      i0.ɵɵtext(50, \"\\n          \");\n      i0.ɵɵelementStart(51, \"small\", 14);\n      i0.ɵɵtext(52, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(54, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(55, \"\\n\\n      \");\n      i0.ɵɵelementStart(56, \"div\", 8);\n      i0.ɵɵtext(57, \"\\n        \");\n      i0.ɵɵelementStart(58, \"label\", 17);\n      i0.ɵɵtext(59, \"Resource Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n        \");\n      i0.ɵɵelementStart(61, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function ResourceCreateDialogComponent_Template_input_ngModelChange_61_listener($event) {\n        return ctx.resource.resourceName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n        \");\n      i0.ɵɵelementStart(63, \"div\", 13);\n      i0.ɵɵtext(64, \"\\n          \");\n      i0.ɵɵelementStart(65, \"small\", 14);\n      i0.ɵɵtext(66, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(67, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(68, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(69, \"\\n\\n      \");\n      i0.ɵɵelementStart(70, \"div\", 8);\n      i0.ɵɵtext(71, \"\\n        \");\n      i0.ɵɵelementStart(72, \"label\", 19);\n      i0.ɵɵtext(73, \"Resource Path\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(74, \"\\n        \");\n      i0.ɵɵelementStart(75, \"input\", 20);\n      i0.ɵɵlistener(\"ngModelChange\", function ResourceCreateDialogComponent_Template_input_ngModelChange_75_listener($event) {\n        return ctx.resource.resourcePath = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n        \");\n      i0.ɵɵelementStart(77, \"div\", 13);\n      i0.ɵɵtext(78, \"\\n          \");\n      i0.ɵɵelementStart(79, \"small\", 14);\n      i0.ɵɵtext(80, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(81, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(82, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(83, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(84, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(85, \"\\n  \");\n      i0.ɵɵelementStart(86, \"div\", 21);\n      i0.ɵɵtext(87, \"\\n    \");\n      i0.ɵɵelementStart(88, \"button\", 22);\n      i0.ɵɵtext(89, \"\\n      \");\n      i0.ɵɵelement(90, \"fa-icon\", 23);\n      i0.ɵɵtext(91, \"\\u00A0\");\n      i0.ɵɵelementStart(92, \"span\", 24);\n      i0.ɵɵtext(93, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(94, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(95, \"\\n    \");\n      i0.ɵɵelementStart(96, \"button\", 25);\n      i0.ɵɵlistener(\"click\", function ResourceCreateDialogComponent_Template_button_click_96_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(97, \"\\n      \");\n      i0.ɵɵelement(98, \"fa-icon\", 23);\n      i0.ɵɵtext(99, \"\\u00A0\");\n      i0.ɵɵelementStart(100, \"span\", 26);\n      i0.ɵɵtext(101, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(103, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(104, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(105, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngModel\", ctx.resource.application);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.applications);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.application == null ? null : _r0.controls.application.dirty) && (_r0.controls.application == null ? null : _r0.controls.application.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.application == null ? null : _r0.controls.application.errors == null ? null : _r0.controls.application.errors.required));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.resource.resourceType);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.resourceTypes);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourceType == null ? null : _r0.controls.resourceType.dirty) && (_r0.controls.resourceType == null ? null : _r0.controls.resourceType.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceType == null ? null : _r0.controls.resourceType.errors == null ? null : _r0.controls.resourceType.errors.required));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.resource.resourceName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourceName == null ? null : _r0.controls.resourceName.dirty) && (_r0.controls.resourceName == null ? null : _r0.controls.resourceName.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceName == null ? null : _r0.controls.resourceName.errors == null ? null : _r0.controls.resourceName.errors.required));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.resource.resourcePath);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourcePath == null ? null : _r0.controls.resourcePath.dirty) && (_r0.controls.resourcePath == null ? null : _r0.controls.resourcePath.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourcePath == null ? null : _r0.controls.resourcePath.errors == null ? null : _r0.controls.resourcePath.errors.required));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", _r0.form.invalid || ctx.isSaving);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"icon\", \"save\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"icon\", \"ban\");\n    }\n  },\n  dependencies: [i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm, i7.NgForOf, i8.FaIconComponent, i9.TranslateDirective],\n  encapsulation: 2\n});\nclass ResourcePopupComponent {\n  constructor(route, resourcePopupService) {\n    this.route = route;\n    this.resourcePopupService = resourcePopupService;\n  }\n  ngOnInit() {\n    this.routeSub = this.route.params.subscribe(() => {\n      this.resourcePopupService.open(ResourceCreateDialogComponent);\n    });\n  }\n  ngOnDestroy() {\n    this.routeSub.unsubscribe();\n  }\n}\nexports.ResourcePopupComponent = ResourcePopupComponent;\nResourcePopupComponent.ɵfac = function ResourcePopupComponent_Factory(t) {\n  return new (t || ResourcePopupComponent)(i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i10.ResourcePopupService));\n};\nResourcePopupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResourcePopupComponent,\n  selectors: [[\"ic-resource-popup\"]],\n  decls: 0,\n  vars: 0,\n  template: function ResourcePopupComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","ResourceCreateDialogComponent","constructor","activeModal","alertService","resourceService","eventManager","router","resource_model_1","resourceTypes","codeId","codeDesc","ngOnInit","isSaving","findAllApplication","subscribe","res","applications","body","onError","clear","dismiss","backToPrevious","window","history","back","save","subscribeToSaveResponse","create","resource","result","onSaveSuccess","onSaveError","broadcast","name","content","error","appDialogErrorMsg","headers","get","document","getElementById","innerHTML","style","display","addAlert","type","translationKey","message","exports","selectors","decls","vars","consts","template","ctx","ResourcePopupComponent","route","resourcePopupService","routeSub","params","open","ngOnDestroy","unsubscribe","encapsulation"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\resource\\resource-create-dialog.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\resource\\resource-create-dialog.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { AlertService } from 'app/core/util/alert.service';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { Resource } from './resource.model';\r\nimport { Application } from '../application';\r\nimport { ResourceService } from './resource.service';\r\nimport { ResourcePopupService } from './resource-popup.service';\r\n\r\n@Component({\r\n  selector: 'ic-resource-create-dialog',\r\n  templateUrl: './resource-create-dialog.component.html',\r\n})\r\nexport class ResourceCreateDialogComponent implements OnInit {\r\n  resource: Resource = new Resource();\r\n  isSaving?: boolean;\r\n  applications: Application[] = [];\r\n  resourceTypes: any[];\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private alertService: AlertService,\r\n    private resourceService: ResourceService,\r\n    private eventManager: EventManager,\r\n    private router: Router\r\n  ) {\r\n    this.resourceTypes = [\r\n      { codeId: 'URI', codeDesc: 'URI' },\r\n      { codeId: 'WEBURI', codeDesc: 'WEBURI' },\r\n      { codeId: 'PAGE_RES', codeDesc: 'PAGE_RES' },\r\n    ];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.isSaving = false;\r\n    this.resourceService.findAllApplication().subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        this.applications = res.body;\r\n      },\r\n      (res: HttpResponse<any>) => this.onError(res.body)\r\n    );\r\n  }\r\n\r\n  clear(): void {\r\n    this.activeModal.dismiss('cancel');\r\n    this.backToPrevious();\r\n  }\r\n\r\n  backToPrevious(): void {\r\n    window.history.back();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    this.subscribeToSaveResponse(this.resourceService.create(this.resource));\r\n  }\r\n\r\n  private subscribeToSaveResponse(result: Observable<Resource>): void {\r\n    result.subscribe(\r\n      (res: Resource) => this.onSaveSuccess(res),\r\n      (res: HttpResponse<any>) => this.onSaveError(res)\r\n    );\r\n  }\r\n\r\n  private onSaveSuccess(result: Resource): void {\r\n    this.isSaving = false;\r\n    this.eventManager.broadcast({ name: 'resourceListModification', content: 'OK' });\r\n    this.activeModal.dismiss(result);\r\n    this.backToPrevious();\r\n  }\r\n\r\n  private onSaveError(error: any): void {\r\n    this.isSaving = false;\r\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\r\n    document.getElementById('appDialogErrorMsg')!.innerHTML = appDialogErrorMsg;\r\n    document.getElementById('appDialogErrorMsg')!.style.display = 'block';\r\n  }\r\n\r\n  private onError(error: any): void {\r\n    this.alertService.addAlert({ type: 'danger', translationKey: error.message });\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'ic-resource-popup',\r\n  template: '',\r\n})\r\nexport class ResourcePopupComponent implements OnInit, OnDestroy {\r\n  routeSub: any;\r\n\r\n  constructor(private route: ActivatedRoute, private resourcePopupService: ResourcePopupService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.routeSub = this.route.params.subscribe(() => {\r\n      this.resourcePopupService.open(ResourceCreateDialogComponent as Component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n}\r\n","<form name=\"editForm\" role=\"form\"  (ngSubmit)=\"save()\" #editForm=\"ngForm\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"myResourceLabel\" icTranslate=\"acmAdmin.resource.home.createLabel\">Create a Resource</h4>\r\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" (click)=\"clear()\">&times;</button>\r\n  </div>\r\n\r\n  <p style=\"display: none\" id=\"appDialogErrorMsg\" class=\"alert-dismissible alert-danger alert\"></p>\r\n\r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.resource.application\" for=\"field_application\">Application</label>\r\n        <select class=\"form-control\" id=\"field_application\" name=\"application\" [(ngModel)]=\"resource.application\" required>\r\n          <option [ngValue]=\"null\"></option>\r\n          <option\r\n            [ngValue]=\"applicationOption.appId === resource.application?.appId ? resource.application : applicationOption\"\r\n            *ngFor=\"let applicationOption of applications\"\r\n          >\r\n            {{ applicationOption.appName }}\r\n          </option>\r\n        </select>\r\n        <div [hidden]=\"!(editForm.controls.application?.dirty && editForm.controls.application?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.application?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.resource.resourceType\" for=\"field_resourceType\">Resource Type</label>\r\n        <select class=\"form-control\" id=\"field_resourceType\" name=\"resourceType\" [(ngModel)]=\"resource.resourceType\" required>\r\n          <option [ngValue]=\"null\"></option>\r\n          <option\r\n            [ngValue]=\"resourceType.codeId === resource.resourceType ? resource.resourceType : resourceType.codeId\"\r\n            *ngFor=\"let resourceType of resourceTypes\"\r\n          >\r\n            {{ resourceType.codeDesc }}\r\n          </option>\r\n        </select>\r\n        <div [hidden]=\"!(editForm.controls.resourceType?.dirty && editForm.controls.resourceType?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourceType?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.resource.resourceName\" for=\"field_resourceName\">Resource Name</label>\r\n        <input type=\"text\" class=\"form-control\" name=\"resourceName\" id=\"field_resourceName\" [(ngModel)]=\"resource.resourceName\" required />\r\n        <div [hidden]=\"!(editForm.controls.resourceName?.dirty && editForm.controls.resourceName?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourceName?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.resource.resourcePath\" for=\"field_resourcePath\">Resource Path</label>\r\n        <input type=\"text\" class=\"form-control\" name=\"resourcePath\" id=\"field_resourcePath\" [(ngModel)]=\"resource.resourcePath\" required />\r\n        <div [hidden]=\"!(editForm.controls.resourcePath?.dirty && editForm.controls.resourcePath?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourcePath?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button id=\"saveNewResource\" type=\"submit\" [disabled]=\"editForm.form.invalid || isSaving\" class=\"btn btn-primary btn-sm\">\r\n      <fa-icon [icon]=\"'save'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.save\">Save</span>\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-dismiss=\"modal\" (click)=\"clear()\">\r\n      <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
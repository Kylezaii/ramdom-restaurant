{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PayrollApproverInboxComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/workload/service/workload-inbox.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/dropdown\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/inputtextarea\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/confirmdialog\"));\nconst i14 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst i15 = tslib_1.__importStar(require(\"../../../shared/pipe/truncate-name.pipe\"));\nconst _c0 = [\"dataTable\"];\nconst _c1 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-right\": \".5em\"\n  };\n};\nconst _c2 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction PayrollApproverInboxComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"form\", 8);\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"div\", 13);\n    i0.ɵɵtext(4, \"\\n                    \");\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6, \"\\n                        \");\n    i0.ɵɵelement(7, \"p-button\", 15);\n    i0.ɵɵtext(8, \"\\n                        \");\n    i0.ɵɵelementStart(9, \"p-dropdown\", 16);\n    i0.ɵɵlistener(\"onChange\", function PayrollApproverInboxComponent_ng_template_4_Template_p_dropdown_onChange_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.applyFilter(\"claimantNRIC\", ctx_r8.captionGroup.get(\"selectedDupNric\").value));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementStart(12, \"div\", 17);\n    i0.ɵɵtext(13, \"\\n                        \");\n    i0.ɵɵelementStart(14, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function PayrollApproverInboxComponent_ng_template_4_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onOpen(ctx_r10.displayRejectDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.captionGroup);\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(9, _c1));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"options\", ctx_r1.nricWithMoreThanOneClaimOptions)(\"placeholder\", ctx_r1.duplicateNricPlaceHolder)(\"showClear\", true);\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c2));\n    i0.ɵɵproperty(\"disabled\", ctx_r1.selectedRows.length <= 0);\n  }\n}\nfunction PayrollApproverInboxComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"th\", 19);\n    i0.ɵɵelement(5, \"p-tableHeaderCheckbox\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementStart(7, \"th\", 20);\n    i0.ɵɵtext(8, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n                \");\n    i0.ɵɵelementStart(10, \"th\", 21);\n    i0.ɵɵtext(11, \"Txn No.\");\n    i0.ɵɵelement(12, \"p-sortIcon\", 22);\n    i0.ɵɵtext(13, \"\\n                    \");\n    i0.ɵɵelement(14, \"p-columnFilter\", 23);\n    i0.ɵɵtext(15, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                \");\n    i0.ɵɵelementStart(17, \"th\", 24);\n    i0.ɵɵtext(18, \"Type\");\n    i0.ɵɵelement(19, \"p-sortIcon\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                \");\n    i0.ɵɵelementStart(21, \"th\", 26);\n    i0.ɵɵtext(22, \"Name\");\n    i0.ɵɵelement(23, \"p-sortIcon\", 27);\n    i0.ɵɵtext(24, \"\\n                    \");\n    i0.ɵɵelement(25, \"p-columnFilter\", 28);\n    i0.ɵɵtext(26, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n                \");\n    i0.ɵɵelementStart(28, \"th\", 29);\n    i0.ɵɵtext(29, \"End\");\n    i0.ɵɵelement(30, \"p-sortIcon\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n                \");\n    i0.ɵɵelementStart(32, \"th\", 31);\n    i0.ɵɵtext(33, \"Rej Txn No.\");\n    i0.ɵɵelement(34, \"p-sortIcon\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n        \");\n  }\n}\nfunction PayrollApproverInboxComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n\\n        \");\n    i0.ɵɵelementStart(1, \"tr\", 33);\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"p-tableCheckbox\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"truncateName\");\n    i0.ɵɵelement(18, \"br\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n            \");\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n            \");\n    i0.ɵɵelementStart(27, \"td\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n    \");\n  }\n  if (rf & 2) {\n    const payrollApproverInbox_r12 = ctx.$implicit;\n    const rowIndex_r13 = ctx.rowIndex;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pSelectableRow\", payrollApproverInbox_r12);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", payrollApproverInbox_r12);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(rowIndex_r13 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(payrollApproverInbox_r12.txnNo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(payrollApproverInbox_r12.type);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(17, 10, payrollApproverInbox_r12.claimantName), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", payrollApproverInbox_r12.claimantNRIC, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", payrollApproverInbox_r12.submittedByInit, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(25, 12, ctx_r3.dateUtilsService.convertUnixToDateString(payrollApproverInbox_r12.submittedDate, ctx_r3.dateFormat)), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 14, payrollApproverInbox_r12.rejTxnNo));\n  }\n}\nfunction PayrollApproverInboxComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\", 35);\n    i0.ɵɵtext(4, \"No records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n  }\n}\nfunction PayrollApproverInboxComponent_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function PayrollApproverInboxComponent_ng_template_26_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.displayRejectDialog.display = false);\n    });\n    i0.ɵɵtext(2, \"\\n\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function PayrollApproverInboxComponent_ng_template_26_Template_button_click_4_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSubmit($event, \"confirmRejectReason\", ctx_r17.displayRejectDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c2));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c2));\n    i0.ɵɵproperty(\"disabled\", (tmp_2_0 = ctx_r7.createRejectForm.get(\"rejectReasonComment\")) == null ? null : tmp_2_0.hasError(\"required\"));\n  }\n}\nconst _c3 = function () {\n  return [10, 15, 20];\n};\nconst _c4 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nclass PayrollApproverInboxComponent {\n  constructor(workloadService, nspConfirmationService, dateUtilsService, ns2Http, toastService, formBuilder) {\n    this.workloadService = workloadService;\n    this.nspConfirmationService = nspConfirmationService;\n    this.dateUtilsService = dateUtilsService;\n    this.ns2Http = ns2Http;\n    this.toastService = toastService;\n    this.formBuilder = formBuilder;\n    this.selectedRows = [];\n    this.selectedRowsId = [];\n    this.selectAll = false;\n    this.totalRecords = 0;\n    this.cols = [];\n    this.duplicateNricPlaceHolder = \"0 Duplicates\";\n    this.enableChkBoxBtn = false;\n    this.createRejectForm = new forms_1.FormGroup({\n      rejectReasonComment: new forms_1.FormControl('', forms_1.Validators.required)\n    });\n    this.displayRejectDialog = {\n      display: false\n    };\n    this.dateFormat = \"DD-MM-YYYY\";\n    this.pageData = {\n      currentPage: 0\n    };\n    this.pageSize = 10;\n  }\n  ngOnInit() {\n    this.cols = [{\n      field: 'txnNo',\n      header: 'Txn No',\n      index: 1\n    }, {\n      field: 'type',\n      header: 'Type',\n      index: 2\n    }, {\n      field: 'name',\n      header: 'Name',\n      index: 3\n    }, {\n      field: 'submittedBy',\n      header: 'Submitted By',\n      index: 4\n    }, {\n      field: 'rejTxnNo',\n      header: 'Rej Txn No.',\n      index: 5\n    }];\n    this.captionGroup = this.formBuilder.group({\n      selectedDupNric: new forms_1.FormControl()\n    });\n  }\n  getPayRollApproverInboxData(event) {\n    this.loading = true;\n    this.lastTableLazyLoadEvent = event;\n    this.pageSize = event.rows;\n    setTimeout(() => {\n      const options = this.ns2Http.convertLazyEvent(event, this.pageData, this.pageSize);\n      this.workloadService.getPayRollApproverInboxData(options).subscribe(resp => {\n        console.log(resp);\n        if (resp.body.data.dtoList) {\n          this.payrollApproverDtoList = resp.body.data.dtoList;\n        }\n        this.totalRecords = resp.body.data.total_no_of_elems;\n        if (resp.body.data.duplicateNrics) {\n          this.nricWithMoreThanOneClaimOptions = resp.body.data.duplicateNrics;\n        }\n        this.duplicateNricPlaceHolder = `${this.nricWithMoreThanOneClaimOptions.length} Duplicates`;\n        this.loading = false;\n      });\n    }, 0);\n    return this.payrollApproverDtoList;\n  }\n  applyFilter(column, filterValue) {\n    this.table.filter(filterValue, column, 'equals');\n    this.pageData.currentPage = 0;\n    this.pageSize = 10;\n  }\n  onSelectAllChange(event) {\n    const checked = event.checked;\n    if (checked) {\n      this.selectedRows = this.payrollApproverDtoList;\n      this.selectAll = true;\n    } else {\n      this.selectedRows = [];\n      this.selectAll = false;\n    }\n  }\n  onOpen(dialog) {\n    dialog.display = true;\n  }\n  onSubmit(event, key, dialog) {\n    this.nspConfirmationService.onConfirmPopup(event, key, dialog, () => {\n      const req = {\n        txnList: this.selectedRows.map(x => x.txnNo),\n        rejectReason: this.createRejectForm.get('rejectReasonComment').value\n      };\n      setTimeout(() => {\n        this.workloadService.rejectPayRollTxn(req).subscribe(resp => {\n          if (resp && resp.ok) {\n            if (resp.body.data) {\n              if (resp.body.data.success) {\n                this.toastService.success(resp.body.data.success);\n              }\n              if (resp.body.data.error) {\n                this.toastService.error(resp.body.data.error);\n              }\n              this.resetDataTable();\n            }\n          }\n        }, error => {\n          console.log(\"error is\" + String(error?.error?.error_desc));\n          this.toastService.error(String(error?.error?.error_desc));\n        });\n      }, 0);\n    });\n  }\n  onPage(event) {\n    console.log(\"pageevent\", event);\n    this.pageData.currentPage = event.first / event.rows;\n  }\n  resetDataTable() {\n    this.selectAll = false;\n    this.selectedRows = [];\n    this.table.filters = {};\n    this.pageData.currentPage = 0;\n    this.pageSize = 10;\n    this.table.reset();\n  }\n}\nexports.PayrollApproverInboxComponent = PayrollApproverInboxComponent;\nPayrollApproverInboxComponent.ɵfac = function PayrollApproverInboxComponent_Factory(t) {\n  return new (t || PayrollApproverInboxComponent)(i0.ɵɵdirectiveInject(i1.WorkloadInboxService), i0.ɵɵdirectiveInject(i2.NspConfirmationService), i0.ɵɵdirectiveInject(i3.DateUtilsService), i0.ɵɵdirectiveInject(i4.Ns2HttpService), i0.ɵɵdirectiveInject(i5.CustomToastService), i0.ɵɵdirectiveInject(i6.FormBuilder));\n};\nPayrollApproverInboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PayrollApproverInboxComponent,\n  selectors: [[\"n2-payroll-approver-inbox\"]],\n  viewQuery: function PayrollApproverInboxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  decls: 31,\n  vars: 21,\n  consts: [[\"styleClass\", \"p-datatable-gridlines p-datatable-striped\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"responsiveLayout\", \"scroll\", \"sortField\", \"txnNo\", 3, \"value\", \"paginator\", \"rows\", \"lazy\", \"showCurrentPageReport\", \"selectAll\", \"totalRecords\", \"selection\", \"filterDelay\", \"loading\", \"rowsPerPageOptions\", \"selectAllChange\", \"onLazyLoad\", \"selectionChange\", \"onPage\"], [\"dataTable\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"header\", \"Reject Transaction\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"visibleChange\", \"onHide\"], [\"rejDialog\", \"\"], [3, \"formGroup\"], [\"rejectForm\", \"ngForm\"], [\"pInputTextarea\", \"\", \"formControlName\", \"rejectReasonComment\", \"type\", \"text\", \"id\", \"rejectReasonComment\", \"rows\", \"8\", 1, \"form-control\"], [\"pTemplate\", \"footer\"], [\"key\", \"confirmRejectReason\", \"header\", \"Confirmation\", \"icon\", \"fa fa-question-circle\", \"width\", \"425\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\"], [\"icon\", \"pi pi-file-o\"], [\"formControlName\", \"selectedDupNric\", 3, \"options\", \"placeholder\", \"showClear\", \"onChange\"], [1, \"col-6\", \"nsp-align-right\"], [\"pButton\", \"\", \"label\", \"Reject\", 1, \"p-button\", 3, \"disabled\", \"click\"], [\"scope\", \"col\", 2, \"width\", \"3%\"], [\"scope\", \"col\"], [\"scope\", \"col\", \"pSortableColumn\", \"txnNo\"], [\"field\", \"txnNo\"], [\"type\", \"text\", \"field\", \"txnNo\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"type\"], [\"field\", \"type\"], [\"scope\", \"col\", \"pSortableColumn\", \"claimantNRIC\"], [\"field\", \"claimantNRIC\"], [\"type\", \"text\", \"field\", \"claimantNRIC\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"submittedByInit\"], [\"field\", \"submittedByInit\"], [\"scope\", \"col\", \"pSortableColumn\", \"rejTxnNo\"], [\"field\", \"rejTxnNo\"], [3, \"pSelectableRow\"], [3, \"value\"], [\"colspan\", \"8\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"]],\n  template: function PayrollApproverInboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r18 = i0.ɵɵgetCurrentView();\n      i0.ɵɵtext(0, \"\\n\");\n      i0.ɵɵelementStart(1, \"p-table\", 0, 1);\n      i0.ɵɵlistener(\"selectAllChange\", function PayrollApproverInboxComponent_Template_p_table_selectAllChange_1_listener($event) {\n        return ctx.onSelectAllChange($event);\n      })(\"onLazyLoad\", function PayrollApproverInboxComponent_Template_p_table_onLazyLoad_1_listener($event) {\n        return ctx.getPayRollApproverInboxData($event);\n      })(\"selectionChange\", function PayrollApproverInboxComponent_Template_p_table_selectionChange_1_listener($event) {\n        return ctx.selectedRows = $event;\n      })(\"onPage\", function PayrollApproverInboxComponent_Template_p_table_onPage_1_listener($event) {\n        return ctx.onPage($event);\n      });\n      i0.ɵɵtext(3, \"\\n\\n        \");\n      i0.ɵɵtemplate(4, PayrollApproverInboxComponent_ng_template_4_Template, 19, 11, \"ng-template\", 2);\n      i0.ɵɵtext(5, \"\\n\\n        \");\n      i0.ɵɵtext(6, \"\\n        \");\n      i0.ɵɵtemplate(7, PayrollApproverInboxComponent_ng_template_7_Template, 37, 0, \"ng-template\", 3);\n      i0.ɵɵtext(8, \"\\n    \");\n      i0.ɵɵtemplate(9, PayrollApproverInboxComponent_ng_template_9_Template, 32, 16, \"ng-template\", 4);\n      i0.ɵɵtext(10, \"\\n    \");\n      i0.ɵɵtemplate(11, PayrollApproverInboxComponent_ng_template_11_Template, 7, 0, \"ng-template\", 5);\n      i0.ɵɵtext(12, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n\\n\");\n      i0.ɵɵelementStart(14, \"p-dialog\", 6, 7);\n      i0.ɵɵlistener(\"visibleChange\", function PayrollApproverInboxComponent_Template_p_dialog_visibleChange_14_listener($event) {\n        return ctx.displayRejectDialog.display = $event;\n      })(\"onHide\", function PayrollApproverInboxComponent_Template_p_dialog_onHide_14_listener() {\n        i0.ɵɵrestoreView(_r18);\n        const _r6 = i0.ɵɵreference(18);\n        return i0.ɵɵresetView(_r6.resetForm());\n      });\n      i0.ɵɵtext(16, \"\\n    \");\n      i0.ɵɵelementStart(17, \"form\", 8, 9);\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"h6\");\n      i0.ɵɵtext(21, \"Rejection Reason :\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n\\n        \");\n      i0.ɵɵelement(23, \"textarea\", 10);\n      i0.ɵɵtext(24, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n\\n    \");\n      i0.ɵɵtemplate(26, PayrollApproverInboxComponent_ng_template_26_Template, 6, 7, \"ng-template\", 11);\n      i0.ɵɵtext(27, \"\\n    \");\n      i0.ɵɵelement(28, \"p-confirmDialog\", 12);\n      i0.ɵɵtext(29, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(30, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"value\", ctx.payrollApproverDtoList)(\"paginator\", true)(\"rows\", ctx.pageSize)(\"lazy\", true)(\"showCurrentPageReport\", true)(\"selectAll\", ctx.selectAll)(\"totalRecords\", ctx.totalRecords)(\"selection\", ctx.selectedRows)(\"filterDelay\", 0)(\"loading\", ctx.loading)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(18, _c3));\n      i0.ɵɵadvance(13);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(19, _c4));\n      i0.ɵɵproperty(\"visible\", ctx.displayRejectDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(20, _c5))(\"draggable\", false)(\"resizable\", false);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.createRejectForm);\n    }\n  },\n  dependencies: [i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.PrimeTemplate, i8.ButtonDirective, i8.Button, i9.Table, i9.SortableColumn, i9.SelectableRow, i9.SortIcon, i9.TableCheckbox, i9.TableHeaderCheckbox, i9.ColumnFilter, i10.Dropdown, i11.Dialog, i12.InputTextarea, i13.ConfirmDialog, i14.DefaultStringPipe, i15.TruncateNamePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXlyb2xsLWFwcHJvdmVyLWluYm94LmNvbXBvbmVudC5zY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvd29ya2xvYWQvcGF5cm9sbC1hcHByb3Zlci9wYXlyb2xsLWFwcHJvdmVyLWluYm94L3BheXJvbGwtYXBwcm92ZXItaW5ib3guY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLHdMQUF3TCIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r8","PayrollApproverInboxComponent","constructor","workloadService","nspConfirmationService","dateUtilsService","ns2Http","toastService","formBuilder","forms_1","rejectReasonComment","required","display","currentPage","ngOnInit","cols","field","header","index","captionGroup","group","selectedDupNric","getPayRollApproverInboxData","event","loading","lastTableLazyLoadEvent","pageSize","rows","setTimeout","options","convertLazyEvent","pageData","subscribe","resp","console","log","body","data","dtoList","payrollApproverDtoList","totalRecords","total_no_of_elems","duplicateNrics","nricWithMoreThanOneClaimOptions","duplicateNricPlaceHolder","length","applyFilter","column","filterValue","table","filter","onSelectAllChange","checked","selectedRows","selectAll","onOpen","dialog","onSubmit","key","onConfirmPopup","req","txnList","map","x","txnNo","rejectReason","createRejectForm","get","value","rejectPayRollTxn","ok","success","error","resetDataTable","String","error_desc","onPage","first","filters","reset","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-approver\\payroll-approver-inbox\\payroll-approver-inbox.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-approver\\payroll-approver-inbox\\payroll-approver-inbox.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { Ns2HttpService } from 'app/shared/service/ns2-http.service';\r\nimport { WorkloadInboxService } from 'app/workload/service/workload-inbox.service';\r\nimport { LazyLoadEvent } from 'primeng/api';\r\nimport { Table } from 'primeng/table';\r\nimport { PayrollApproverInbox } from './payroll-approver-inbox.model';\r\n\r\n@Component({\r\n  selector: 'n2-payroll-approver-inbox',\r\n  templateUrl: './payroll-approver-inbox.component.html',\r\n  styleUrls: ['./payroll-approver-inbox.component.scss']\r\n})\r\nexport class PayrollApproverInboxComponent implements OnInit {\r\n\r\n  public payrollApproverDtoList!: PayrollApproverInbox[]\r\n  public selectedRows: PayrollApproverInbox[] = [];\r\n  selectedRowsId: string[] = [];\r\n\r\n  selectAll = false;\r\n  loading!: boolean;\r\n  totalRecords = 0;\r\n  public cols: any[] = [];\r\n\r\n  public testNRIC!: string;\r\n  public nricWithMoreThanOneClaimOptions!: string[];\r\n  duplicateNricPlaceHolder = \"0 Duplicates\";\r\n\r\n  public enableChkBoxBtn = false;\r\n  // public selectedDupNric:string;\r\n\r\n  captionGroup: FormGroup;\r\n\r\n  createRejectForm = new FormGroup({\r\n    rejectReasonComment: new FormControl('', Validators.required)\r\n  })\r\n\r\n  displayRejectDialog: any = { display: false };\r\n\r\n  dateFormat = \"DD-MM-YYYY\";\r\n  lastTableLazyLoadEvent: LazyLoadEvent;\r\n  pageData: { currentPage: number } = {\r\n    currentPage: 0\r\n  }\r\n  pageSize = 10;\r\n  @ViewChild('dataTable') table: Table;\r\n\r\n  constructor(\r\n    private workloadService: WorkloadInboxService,\r\n    private nspConfirmationService: NspConfirmationService,\r\n    public dateUtilsService: DateUtilsService,\r\n    private ns2Http: Ns2HttpService,\r\n    private toastService: CustomToastService,\r\n    private formBuilder: FormBuilder,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.cols = [\r\n      { field: 'txnNo', header: 'Txn No', index: 1 },\r\n      { field: 'type', header: 'Type', index: 2 },\r\n      { field: 'name', header: 'Name', index: 3 },\r\n      { field: 'submittedBy', header: 'Submitted By', index: 4 },\r\n      { field: 'rejTxnNo', header: 'Rej Txn No.', index: 5 },\r\n    ];\r\n    this.captionGroup = this.formBuilder.group({\r\n      selectedDupNric: new FormControl()\r\n    })\r\n\r\n  }\r\n\r\n  getPayRollApproverInboxData(event: LazyLoadEvent): any[] {\r\n    this.loading = true;\r\n    this.lastTableLazyLoadEvent = event;\r\n    this.pageSize = event.rows;\r\n\r\n    setTimeout(() => {\r\n      const options = this.ns2Http.convertLazyEvent(event, this.pageData, this.pageSize);\r\n      this.workloadService.getPayRollApproverInboxData(options).subscribe((resp: any) => {\r\n        console.log(resp);\r\n        if (resp.body.data.dtoList) {\r\n          this.payrollApproverDtoList = resp.body.data.dtoList;\r\n        }\r\n\r\n        this.totalRecords = resp.body.data.total_no_of_elems;\r\n        if (resp.body.data.duplicateNrics) {\r\n          this.nricWithMoreThanOneClaimOptions = resp.body.data.duplicateNrics;\r\n        }\r\n        this.duplicateNricPlaceHolder = `${this.nricWithMoreThanOneClaimOptions.length} Duplicates`\r\n\r\n        this.loading = false;\r\n      });\r\n    }, 0);\r\n\r\n    return this.payrollApproverDtoList;\r\n\r\n  }\r\n\r\n  applyFilter(column: string, filterValue: string): void {\r\n    this.table.filter(filterValue, column, 'equals');\r\n    this.pageData.currentPage = 0;\r\n    this.pageSize = 10;\r\n  }\r\n\r\n  onSelectAllChange(event: any): void {\r\n    const checked = event.checked;\r\n    if (checked) {\r\n      this.selectedRows = this.payrollApproverDtoList;\r\n      this.selectAll = true;\r\n    } else {\r\n      this.selectedRows = [];\r\n      this.selectAll = false;\r\n    }\r\n  }\r\n\r\n  onOpen(dialog: any): void {\r\n    dialog.display = true;\r\n  }\r\n\r\n  onSubmit(event: Event, key: string, dialog: any): void {\r\n\r\n    this.nspConfirmationService.onConfirmPopup(event, key, dialog,\r\n      () => {\r\n        const req = {\r\n          txnList: this.selectedRows.map(x => x.txnNo),\r\n          rejectReason: this.createRejectForm.get('rejectReasonComment').value\r\n        }\r\n        setTimeout(() => {\r\n          this.workloadService.rejectPayRollTxn(req).subscribe((resp: any) => {\r\n            if (resp && resp.ok) {\r\n              if (resp.body.data) {\r\n                if (resp.body.data.success) {\r\n                  this.toastService.success(resp.body.data.success);\r\n                }\r\n                if (resp.body.data.error) {\r\n                  this.toastService.error(resp.body.data.error);\r\n                }\r\n                this.resetDataTable();\r\n              }\r\n            }\r\n          },\r\n            (error: any) => {\r\n              console.log(\"error is\" + String(error?.error?.error_desc));\r\n              this.toastService.error(String(error?.error?.error_desc));\r\n            }\r\n          );\r\n        }, 0);\r\n      });\r\n  }\r\n\r\n  onPage(event: any): void {\r\n    console.log(\"pageevent\", event);\r\n    this.pageData.currentPage = event.first / event.rows;\r\n  }\r\n\r\n  resetDataTable(): void {\r\n    this.selectAll = false;\r\n    this.selectedRows = [];\r\n    this.table.filters = {};\r\n    this.pageData.currentPage = 0;\r\n    this.pageSize = 10;\r\n    this.table.reset();\r\n  }\r\n\r\n\r\n}\r\n","\r\n<p-table [value]=\"payrollApproverDtoList\"\r\n            [paginator]=\"true\"\r\n            [rows]=\"pageSize\"\r\n            [lazy] = \"true\"\r\n            [showCurrentPageReport]=\"true\"\r\n            [selectAll]=\"selectAll\"\r\n            (selectAllChange)=\"onSelectAllChange($event)\"\r\n            (onLazyLoad)=\"getPayRollApproverInboxData($event)\"\r\n            [totalRecords] = \"totalRecords\"\r\n            [(selection)] = \"selectedRows\"\r\n            [filterDelay]=\"0\"\r\n            [loading] = \"loading\"\r\n            styleClass=\"p-datatable-gridlines p-datatable-striped\"\r\n            [rowsPerPageOptions]=\"[10,15,20]\"\r\n            currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n            responsiveLayout=\"scroll\"\r\n            (onPage) = \"onPage($event)\"\r\n            sortField=\"txnNo\"\r\n            #dataTable\r\n\r\n            >\r\n\r\n        <ng-template pTemplate=\"caption\">\r\n            <form [formGroup] = \"captionGroup\">\r\n                <div class=\"grid\">\r\n                    <div class = \"col-6 nsp-align-left\">\r\n                        <p-button icon=\"pi pi-file-o\" [style]=\"{'margin-left': '.5em', 'margin-right': '.5em'}\"></p-button>\r\n                        <p-dropdown [options]=\"nricWithMoreThanOneClaimOptions\" formControlName=\"selectedDupNric\" [placeholder]=\"duplicateNricPlaceHolder\" [showClear]=\"true\"\r\n                        (onChange)=\"applyFilter('claimantNRIC', captionGroup.get('selectedDupNric').value)\"\r\n                        ></p-dropdown>\r\n                    </div>\r\n                    <div class = \"col-6 nsp-align-right\">\r\n                        <button pButton class =\"p-button\" label=\"Reject\"\r\n                        [disabled] = \"selectedRows.length<=0\"\r\n                        (click) = \"onOpen(displayRejectDialog)\" [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"\r\n                        ></button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </ng-template>\r\n\r\n        <!-- <ng-template pTemplate=\"header\" let-columns>\r\n            <tr>\r\n                <th style=\"width: 3rem\">\r\n                    <input type=\"checkbox\" [checked]=\"selectAll\" (change)=\"chkBoxSelectAll($event)\" id = \"masterCheckBox\">\r\n                        <label class=\"form-check-label\" for=\"selectAll\">\r\n                            <span class=\"fa fa-exclamation-triangle\" style=\"color:#FF4E00;\"></span>\r\n                        </label>\r\n                </th>\r\n                <th>SN</th>\r\n                <th *ngFor=\"let col of cols\" [pSortableColumn]=\"col.field\">\r\n                    {{col.header}}\r\n                    <p-sortIcon [field]=\"col.field\"></p-sortIcon>\r\n                </th>\r\n            </tr>\r\n        </ng-template> -->\r\n        <ng-template pTemplate=\"header\" let-columns>\r\n            <tr>\r\n                <!-- <th style=\"width: 3rem\">\r\n\r\n                    <input type=\"checkbox\" [checked]=\"selectAll\" (change)=\"chkBoxSelectAll($event)\" id = \"masterCheckBox\">\r\n                        <label class=\"form-check-label\" for=\"selectAll\">\r\n                            <span class=\"fa fa-exclamation-triangle\" style=\"color:#FF4E00;\"></span>\r\n                        </label>\r\n                </th> -->\r\n                <th scope=\"col\" style=\"width:3%\"><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>\r\n                <th scope=\"col\">SN</th>\r\n                <th scope=\"col\" pSortableColumn = \"txnNo\">Txn No.<p-sortIcon field=\"txnNo\"></p-sortIcon>\r\n                    <p-columnFilter type=\"text\" field=\"txnNo\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n                </th>\r\n                <th scope=\"col\" pSortableColumn =\"type\">Type<p-sortIcon field=\"type\"></p-sortIcon></th>\r\n                <th scope=\"col\" pSortableColumn = \"claimantNRIC\">Name<p-sortIcon field=\"claimantNRIC\"></p-sortIcon>\r\n                    <p-columnFilter type=\"text\" field=\"claimantNRIC\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n                </th>\r\n                <th scope=\"col\" pSortableColumn =\"submittedByInit\">End<p-sortIcon field=\"submittedByInit\"></p-sortIcon></th>\r\n                <th scope=\"col\" pSortableColumn =\"rejTxnNo\">Rej Txn No.<p-sortIcon field=\"rejTxnNo\"></p-sortIcon></th>\r\n            </tr>\r\n        </ng-template>\r\n    <ng-template pTemplate=\"body\" let-payrollApproverInbox let-rowIndex = \"rowIndex\" let-columns=\"columns\">\r\n\r\n        <tr [pSelectableRow]=\"payrollApproverInbox\">\r\n            <td><p-tableCheckbox [value]=\"payrollApproverInbox\"></p-tableCheckbox></td>\r\n            <td>{{ rowIndex + 1}}</td>\r\n            <td>{{payrollApproverInbox.txnNo}}</td>\r\n            <td>{{payrollApproverInbox.type }}</td>\r\n            <td>{{payrollApproverInbox.claimantName | truncateName}} <br/> {{ payrollApproverInbox.claimantNRIC}}</td>\r\n            <td>{{payrollApproverInbox.submittedByInit }} <br/> {{ this.dateUtilsService.convertUnixToDateString(payrollApproverInbox.submittedDate, dateFormat) | defaultString  }}</td>\r\n            <td>{{payrollApproverInbox.rejTxnNo | defaultString}}</td>\r\n        </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n            <td colspan=\"8\">No records found.</td>\r\n        </tr>\r\n    </ng-template>\r\n</p-table>\r\n\r\n<p-dialog header=\"Reject Transaction\"\r\n[(visible)]=\"displayRejectDialog.display\"\r\n[breakpoints]=\"{'960px': '75vw'}\"\r\n[style]=\"{width: '50vw'}\"\r\n#rejDialog\r\n(onHide) = \"rejectForm.resetForm()\"\r\n[draggable]=\"false\" [resizable]=\"false\">\r\n    <form  #rejectForm=\"ngForm\" [formGroup]=\"createRejectForm\">\r\n        <h6>Rejection Reason :</h6>\r\n\r\n        <textarea pInputTextarea  formControlName=\"rejectReasonComment\" type=\"text\" id=\"rejectReasonComment\" rows=\"8\" class = \"form-control\"></textarea>\r\n    </form>\r\n\r\n    <ng-template pTemplate=\"footer\">\r\n            <button pButton class =\"p-button-danger\" label=\"Cancel\"  (click)=\"displayRejectDialog.display=false\" [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\">\r\n\r\n            </button>\r\n        <button pButton  label=\"Submit\" [disabled]=\"createRejectForm.get('rejectReasonComment')?.hasError('required')\" (click)=\"onSubmit($event, 'confirmRejectReason', displayRejectDialog)\"  [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"\r\n        ></button>\r\n\r\n    </ng-template>\r\n    <p-confirmDialog key = \"confirmRejectReason\" header=\"Confirmation\" icon=\"fa fa-question-circle\" width=\"425\"></p-confirmDialog>\r\n\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
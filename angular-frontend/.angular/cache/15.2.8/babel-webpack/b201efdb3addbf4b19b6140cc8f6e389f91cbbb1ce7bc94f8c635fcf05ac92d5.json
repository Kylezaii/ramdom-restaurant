{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RefundHistoryComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst refund_history_model_1 = require(\"./refund-history.model\");\nconst overpayment_tab_model_1 = require(\"../overpayment-tab/overpayment-tab.model\");\nconst forms_1 = require(\"@angular/forms\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"../service/refund-history.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i5 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i12 = tslib_1.__importStar(require(\"../../../shared/component/file-upload/file-upload.component\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i14 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i15 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"invalidateSuppDoc\"];\nfunction RefundHistoryComponent_ng_template_49_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_49_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"th\", 17);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementStart(6, \"th\", 18);\n    i0.ɵɵtext(7, \"Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementStart(9, \"th\", 18);\n    i0.ɵɵtext(10, \"Principal Refunded\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                \");\n    i0.ɵɵelementStart(12, \"th\", 18);\n    i0.ɵɵtext(13, \"Interest Refunded\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n        \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\", 19);\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n                \");\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n        \");\n  }\n  if (rf & 2) {\n    const data_r15 = ctx.$implicit;\n    const i_r16 = ctx.rowIndex;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pRowToggler\", data_r15);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r16 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(8, 5, data_r15.principalAmt + data_r15.interestAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(12, 9, data_r15.principalAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(16, 13, data_r15.interestAmt, \"SGD\", \"\"));\n  }\n}\nfunction RefundHistoryComponent_ng_template_55_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                                \");\n    i0.ɵɵelementStart(3, \"th\", 18);\n    i0.ɵɵtext(4, \"Discovery Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                                \");\n    i0.ɵɵelementStart(6, \"th\", 18);\n    i0.ɵɵtext(7, \"Trg Start\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                                \");\n    i0.ɵɵelementStart(9, \"th\", 18);\n    i0.ɵɵtext(10, \"Trg End\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                                \");\n    i0.ɵɵelementStart(12, \"th\", 18);\n    i0.ɵɵtext(13, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                                \");\n    i0.ɵɵelementStart(15, \"th\", 18);\n    i0.ɵɵtext(16, \"Payment Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                                \");\n    i0.ɵɵelementStart(18, \"th\", 18);\n    i0.ɵɵtext(19, \"Case ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                                \");\n    i0.ɵɵelementStart(21, \"th\", 18);\n    i0.ɵɵtext(22, \"Original Amt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n                                \");\n    i0.ɵɵelementStart(24, \"th\", 18);\n    i0.ɵɵtext(25, \"Total O/S\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n                                \");\n    i0.ɵɵelementStart(27, \"th\", 18);\n    i0.ɵɵtext(28, \"Total Refund\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n                        \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_55_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                                \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                                \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                                \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                                \");\n    i0.ɵɵelementStart(12, \"td\", 21);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                                \");\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n                                \");\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n                                \");\n    i0.ɵɵelementStart(23, \"td\");\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n                                \");\n    i0.ɵɵelementStart(27, \"td\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n                                \");\n    i0.ɵɵelementStart(31, \"td\");\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n                        \");\n  }\n  if (rf & 2) {\n    const data_r18 = i0.ɵɵnextContext().$implicit;\n    const ctx_r20 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(data_r18.overpayment.discoveryDate);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(data_r18.overpayment.trgStart);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(data_r18.overpayment.trgEnd);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r20.OverpaymentType[data_r18.overpayment.overpaymentType]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 9, data_r18.overpayment.paymentType));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 11, data_r18.overpayment.caseId));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(25, 13, data_r18.overpayment.overpaymentAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(29, 17, data_r18.overpayment.outstandingPrincipalAmt + data_r18.overpayment.outstandingInterestAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(33, 21, data_r18.overpayment.totalRefund, \"SGD\", \"\"));\n  }\n}\nfunction RefundHistoryComponent_ng_template_55_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                                \");\n    i0.ɵɵelementStart(3, \"td\", 22);\n    i0.ɵɵtext(4, \"No overpayments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                        \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                \");\n    i0.ɵɵelementStart(3, \"td\", 20);\n    i0.ɵɵtext(4, \"\\n                    \");\n    i0.ɵɵelementStart(5, \"p-table\");\n    i0.ɵɵtext(6, \"\\n                        \");\n    i0.ɵɵtemplate(7, RefundHistoryComponent_ng_template_55_ng_template_7_Template, 31, 0, \"ng-template\", 5);\n    i0.ɵɵtext(8, \"\\n                        \");\n    i0.ɵɵtemplate(9, RefundHistoryComponent_ng_template_55_ng_template_9_Template, 36, 25, \"ng-template\", 6);\n    i0.ɵɵtext(10, \"\\n                        \");\n    i0.ɵɵtemplate(11, RefundHistoryComponent_ng_template_55_ng_template_11_Template, 7, 0, \"ng-template\", 12);\n    i0.ɵɵtext(12, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n        \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵtext(2, \"\\n                        Selected Refunds\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n                \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"th\", 17);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementStart(6, \"th\", 18);\n    i0.ɵɵtext(7, \"Transaction ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                        \");\n    i0.ɵɵelementStart(9, \"th\", 18);\n    i0.ɵɵtext(10, \"Supporting Document\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"tr\", 24);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                        \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10, \"\\n                            \");\n    i0.ɵɵelementStart(11, \"n2-file-upload\", 25, 26);\n    i0.ɵɵtext(13, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                \");\n  }\n  if (rf & 2) {\n    const refund_r23 = ctx.$implicit;\n    const i_r24 = ctx.rowIndex;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r24);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r24 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(refund_r23.value.transactionId);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"supportingDocs\", i_r24, \"\");\n    i0.ɵɵproperty(\"contentHeight\", \"150px\");\n  }\n}\nfunction RefundHistoryComponent_ng_template_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"td\", 27);\n    i0.ɵɵtext(4, \"No records selected\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_78_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 28);\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"div\", 29);\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_78_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.showInvalidateDialog = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelement(8, \"p-confirmPopup\", 31);\n    i0.ɵɵtext(9, \"\\n            \");\n    i0.ɵɵelementStart(10, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_78_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.invalidateRefunds());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n      \");\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"disabled\", !ctx_r8.invalidateForm.valid);\n  }\n}\nfunction RefundHistoryComponent_ng_template_83_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_83_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_83_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.showInvDialog());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n    \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"th\", 17);\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelement(5, \"p-tableHeaderCheckbox\");\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"th\", 17);\n    i0.ɵɵtext(9, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"th\", 34);\n    i0.ɵɵtext(12, \"Transaction ID\");\n    i0.ɵɵelement(13, \"p-sortIcon\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementStart(15, \"th\", 36);\n    i0.ɵɵtext(16, \"Amount\");\n    i0.ɵɵelement(17, \"p-sortIcon\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n            \");\n    i0.ɵɵelementStart(19, \"th\", 38);\n    i0.ɵɵtext(20, \"Type\");\n    i0.ɵɵelement(21, \"p-sortIcon\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n            \");\n    i0.ɵɵelementStart(23, \"th\", 40);\n    i0.ɵɵtext(24, \"Date\");\n    i0.ɵɵelement(25, \"p-sortIcon\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n            \");\n    i0.ɵɵelementStart(27, \"th\", 42);\n    i0.ɵɵtext(28, \"Payee\");\n    i0.ɵɵelement(29, \"p-sortIcon\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n            \");\n    i0.ɵɵelementStart(31, \"th\", 44);\n    i0.ɵɵtext(32, \"Pay Date\");\n    i0.ɵɵelement(33, \"p-sortIcon\", 45);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n            \");\n    i0.ɵɵelementStart(35, \"th\", 46);\n    i0.ɵɵtext(36, \"Principal Refunded\");\n    i0.ɵɵelement(37, \"p-sortIcon\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n            \");\n    i0.ɵɵelementStart(39, \"th\", 48);\n    i0.ɵɵtext(40, \"Interest Refunded\");\n    i0.ɵɵelement(41, \"p-sortIcon\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n            \");\n    i0.ɵɵelementStart(43, \"th\", 50);\n    i0.ɵɵtext(44, \"Created By\");\n    i0.ɵɵelement(45, \"p-sortIcon\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \"\\n            \");\n    i0.ɵɵelementStart(47, \"th\", 52);\n    i0.ɵɵtext(48, \"Invalidated By\");\n    i0.ɵɵelement(49, \"p-sortIcon\", 53);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n            \");\n    i0.ɵɵelementStart(51, \"th\", 54);\n    i0.ɵɵtext(52, \"Status\");\n    i0.ɵɵelement(53, \"p-sortIcon\", 55);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n    \");\n  }\n}\nfunction RefundHistoryComponent_ng_template_87_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelement(5, \"p-tableCheckbox\", 56);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementStart(9, \"a\", 57);\n    i0.ɵɵlistener(\"click\", function RefundHistoryComponent_ng_template_87_Template_a_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r35);\n      const refund_r32 = restoredCtx.$implicit;\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.showRefundDetails(refund_r32));\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n            \");\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n            \");\n    i0.ɵɵelementStart(20, \"td\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n            \");\n    i0.ɵɵelementStart(24, \"td\");\n    i0.ɵɵtext(25);\n    i0.ɵɵpipe(26, \"defaultString\");\n    i0.ɵɵpipe(27, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n            \");\n    i0.ɵɵelementStart(29, \"td\");\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n            \");\n    i0.ɵɵelementStart(33, \"td\");\n    i0.ɵɵtext(34);\n    i0.ɵɵpipe(35, \"defaultString\");\n    i0.ɵɵpipe(36, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n            \");\n    i0.ɵɵelementStart(38, \"td\");\n    i0.ɵɵtext(39);\n    i0.ɵɵpipe(40, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(41, \"\\n            \");\n    i0.ɵɵelementStart(42, \"td\");\n    i0.ɵɵtext(43);\n    i0.ɵɵpipe(44, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(45, \"\\n            \");\n    i0.ɵɵelementStart(46, \"td\");\n    i0.ɵɵtext(47);\n    i0.ɵɵpipe(48, \"defaultString\");\n    i0.ɵɵelement(49, \"br\");\n    i0.ɵɵtext(50);\n    i0.ɵɵpipe(51, \"defaultString\");\n    i0.ɵɵpipe(52, \"date\");\n    i0.ɵɵelement(53, \"br\");\n    i0.ɵɵtext(54);\n    i0.ɵɵelement(55, \"br\");\n    i0.ɵɵtext(56);\n    i0.ɵɵpipe(57, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58, \"\\n            \");\n    i0.ɵɵelementStart(59, \"td\");\n    i0.ɵɵtext(60);\n    i0.ɵɵpipe(61, \"defaultString\");\n    i0.ɵɵelement(62, \"br\");\n    i0.ɵɵtext(63);\n    i0.ɵɵpipe(64, \"defaultString\");\n    i0.ɵɵpipe(65, \"date\");\n    i0.ɵɵelement(66, \"br\");\n    i0.ɵɵtext(67);\n    i0.ɵɵelement(68, \"br\");\n    i0.ɵɵtext(69);\n    i0.ɵɵpipe(70, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(71, \"\\n            \");\n    i0.ɵɵelementStart(72, \"td\");\n    i0.ɵɵtext(73);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(74, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(75, \"\\n    \");\n  }\n  if (rf & 2) {\n    const refund_r32 = ctx.$implicit;\n    const i_r33 = ctx.rowIndex;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r11.isInvalidateAllowed(refund_r32))(\"value\", refund_r32);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i_r33 + 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(refund_r32.transactionId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(18, 20, refund_r32.refundActualAmt, \"SGD\", \"\", \".2-2\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(22, 25, ctx_r11.RefundType[refund_r32.refundType]));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 27, i0.ɵɵpipeBind2(27, 29, refund_r32.paydayDate, \"dd-MM-yyyy\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(31, 32, refund_r32.payee));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 34, i0.ɵɵpipeBind2(36, 36, refund_r32.payeePayDate, \"dd-MM-yyyy\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(40, 39, refund_r32.refundPrincipalAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(44, 43, refund_r32.refundInterestAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(48, 47, refund_r32.requestedBy), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\n                \", i0.ɵɵpipeBind1(51, 49, i0.ɵɵpipeBind2(52, 51, refund_r32.requestedDt, \"dd-MM-yyyy\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                \", refund_r32.requestReviewedBy, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n                \", i0.ɵɵpipeBind2(57, 54, refund_r32.requestReviewedDt, \"dd-MM-yyyy\"), \"\\n            \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(61, 57, refund_r32.invalidationRequestedBy), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\n                \", i0.ɵɵpipeBind1(64, 59, i0.ɵɵpipeBind2(65, 61, refund_r32.invalidationRequestedDt, \"dd-MM-yyyy\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                \", refund_r32.invalidationReviewedBy, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n                \", i0.ɵɵpipeBind2(70, 64, refund_r32.invalidationReviewedDt, \"dd-MM-yyyy\"), \"\\n            \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r11.RefundStatus[refund_r32.refundStatus]);\n  }\n}\nfunction RefundHistoryComponent_ng_template_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\", 58);\n    i0.ɵɵtext(4, \"No refunds\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n  }\n}\nconst _c1 = function () {\n  return [10, 25, 50];\n};\nclass RefundHistoryComponent {\n  constructor(refundService, toastService, n2httpService, fb) {\n    this.refundService = refundService;\n    this.toastService = toastService;\n    this.n2httpService = n2httpService;\n    this.fb = fb;\n    // tslint:disable-next-line:no-input-rename\n    // eslint-disable-next-line @angular-eslint/no-input-rename\n    this.selectedId = \"\";\n    // tslint:disable-next-line:no-input-rename\n    // eslint-disable-next-line @angular-eslint/no-input-rename\n    this.isNSman = true;\n    // Lazy loading\n    this.loading = false;\n    this.pageData = {\n      currentPage: 0\n    };\n    this.pageSize = 10;\n    // Enums\n    this.RefundStatus = refund_history_model_1.RefundStatus;\n    this.RefundType = refund_history_model_1.RefundType;\n    this.OverpaymentType = overpayment_tab_model_1.OverpaymentType;\n    // Invalidation\n    this.selectAll = false;\n    this.totalAllowInv = 0;\n    this.refundList = [];\n    this.selectedInvalidateRefundList = [];\n    this.invalidateForm = new forms_1.FormGroup({\n      refunds: new forms_1.FormArray([])\n    });\n    // Dialog\n    this.dialogLoading = false;\n    this.showInvalidateDialog = false;\n    // Display Refund\n    this.showRefundDialog = false;\n    this.isRowSelectable = this.isRowSelectable.bind(this);\n  }\n  get refundsFormArray() {\n    return this.invalidateForm.get('refunds');\n  }\n  ngOnInit() {\n    //\n  }\n  loadRefunds(event) {\n    this.loading = true;\n    console.log(\"loading refunds\");\n    if (this.isNSman) {\n      setTimeout(() => {\n        const options = this.n2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\n        this.refundService.getByNric(this.selectedId, options).subscribe(res => {\n          this.refundList = res.body.data.content;\n          this.totalRecords = res.body.data.totalElements;\n          this.loading = false;\n          this.totalAllowInv = this.refundList.filter(r => !this.isInvalidateAllowed(r)).length;\n        }, error => {\n          console.log(error);\n          this.toastService.add({\n            severity: 'error',\n            summary: 'Error',\n            detail: error.error.error_desc\n          });\n          this.loading = false;\n        });\n      }, 1000);\n    } else {\n      setTimeout(() => {\n        const options = this.n2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\n        this.refundService.getAllByCsn(this.selectedId, options).subscribe(res => {\n          this.refundList = res.body.data.content;\n          this.totalRecords = res.body.data.totalElements;\n          this.loading = false;\n          this.totalAllowInv = this.refundList.filter(r => !this.isInvalidateAllowed(r)).length;\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n          this.loading = false;\n        });\n      }, 1000);\n    }\n  }\n  onPage(event) {\n    this.pageSize = event.rows;\n    this.pageData.currentPage = event.first / event.rows;\n    this.selectedInvalidateRefundList = [];\n    this.selectAll = false;\n  }\n  showRefundDetails(refund) {\n    this.showRefundDialog = true;\n    this.selectedRefund = refund;\n    this.loadRefundDetails(refund.id);\n  }\n  loadRefundDetails(refundId) {\n    // TO-DO\n    console.log(\"Refund ID\", refundId);\n    this.dialogLoading = true;\n    setTimeout(() => {\n      this.refundService.getById(refundId).subscribe(res => {\n        console.log(\"Response\", res);\n        this.selectedRefundDetails = res.body.data;\n        this.dialogLoading = false;\n        console.log(\"Refund Details\", this.selectedRefundDetails);\n      }, error => {\n        console.log(error);\n        this.toastService.add({\n          severity: 'error',\n          summary: 'Error',\n          detail: error.error.error_desc\n        });\n        this.dialogLoading = false;\n      });\n    }, 1000);\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  isInvalidateAllowed(refund) {\n    return this.RefundType[refund.refundType] === refund_history_model_1.RefundType.WRITE_OFF || this.RefundType[refund.refundType] === refund_history_model_1.RefundType.SYSTEM_OFFSET || refund.refundExcessAmt > 0 || this.RefundStatus[refund.refundStatus] !== refund_history_model_1.RefundStatus.APP;\n  }\n  isRowSelectable(event) {\n    return !this.isInvalidateAllowed(event.data);\n  }\n  showInvDialog() {\n    this.showInvalidateDialog = true;\n    this.constructInvForm();\n  }\n  logInvForm() {\n    console.log(\"invForm\", this.invalidateForm.value);\n  }\n  constructInvForm() {\n    const invRefundArr = this.invalidateForm.get('refunds');\n    invRefundArr.clear();\n    this.selectedInvalidateRefundList.forEach(r => {\n      invRefundArr.push(this.fb.group({\n        transactionId: r.transactionId,\n        overpaymentRefundId: r.id,\n        supportingDocs: new forms_1.FormControl([], fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\"))\n      }));\n    });\n  }\n  prepareFormData(value) {\n    const request = {\n      refunds: value.map((r, index) => ({\n        overpaymentRefundId: r.overpaymentRefundId,\n        supportingDocs: this.fileUploadComponents.get(index).verifiedFiles?.map(x => String(x.meta_data.id))\n      }))\n    };\n    return request;\n  }\n  invalidateRefunds() {\n    // TODO change new implementation with supportingDocs\n    if (this.selectedInvalidateRefundList.length === 0) {\n      this.toastService.error(\"No records selected\");\n    } else {\n      this.refundService.postInvalidate(this.prepareFormData(this.refundsFormArray.value)).subscribe(res => {\n        if (res.ok) {\n          this.toastService.success(\"Records sent for approval\");\n          this.showInvalidateDialog = false;\n        }\n      }, error => {\n        this.toastService.error(error.error?.error_desc);\n      });\n    }\n  }\n  onSelectionChange(value = []) {\n    this.selectAll = value.length === this.totalAllowInv;\n    this.selectedInvalidateRefundList = value;\n  }\n  onSelectAllChange(event) {\n    const checked = event.checked;\n    if (checked) {\n      this.selectAll = true;\n      this.selectedInvalidateRefundList = this.refundList.filter(r => !this.isInvalidateAllowed(r));\n    } else {\n      this.selectedInvalidateRefundList = [];\n      this.selectAll = false;\n    }\n  }\n}\nexports.RefundHistoryComponent = RefundHistoryComponent;\nRefundHistoryComponent.ɵfac = function RefundHistoryComponent_Factory(t) {\n  return new (t || RefundHistoryComponent)(i0.ɵɵdirectiveInject(i1.RefundService), i0.ɵɵdirectiveInject(i2.CustomToastService), i0.ɵɵdirectiveInject(i3.Ns2HttpService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\nRefundHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RefundHistoryComponent,\n  selectors: [[\"n2-refund-history\"]],\n  viewQuery: function RefundHistoryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileUploadComponents = _t);\n    }\n  },\n  inputs: {\n    selectedId: \"selectedId\",\n    isNSman: [\"isNsman\", \"isNSman\"]\n  },\n  decls: 92,\n  vars: 53,\n  consts: [[\"header\", \"Refund Details\", \"appendTo\", \"body\", 3, \"visible\", \"modal\", \"visibleChange\"], [1, \"flex\", \"gap-5\"], [1, \"flex\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"selectionMode\", \"single\", \"expandableRows\", \"true\", \"dataKey\", \"overpaymentId\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", \"loading\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"rowexpansion\"], [\"header\", \"Invalidate Refund\", 3, \"visible\", \"modal\", \"visibleChange\"], [3, \"formGroup\"], [\"formArrayName\", \"refunds\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\"], [\"pTemplate\", \"emptymessage\"], [\"pTemplate\", \"footer\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"selection\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", \"lazy\", \"totalRecords\", \"loading\", \"rowSelectable\", \"selectAll\", \"selectionChange\", \"onLazyLoad\", \"onPage\", \"selectAllChange\"], [1, \"flex\", \"justify-content-between\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file\", \"pTooltip\", \"CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"scope\", \"col\", 2, \"width\", \"5%\"], [\"scope\", \"col\"], [3, \"pRowToggler\"], [\"colspan\", \"4\", 2, \"background-color\", \"var(--surface-c)\"], [2, \"white-space\", \"nowrap\", \"overflow\", \"hidden\", \"text-overflow\", \"ellipsis\"], [\"colspan\", \"9\"], [1, \"flex\", \"align-items-center\", \"justify-content-between\"], [3, \"formGroupName\"], [\"formControlName\", \"supportingDocs\", 3, \"id\", \"contentHeight\"], [\"invalidateSuppDoc\", \"\"], [\"colspan\", \"3\"], [1, \"flex\", \"justify-content-end\", \"align-items-center\", \"gap-3\"], [1, \"flex\", \"gap-1\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"confirmRefManPopup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Submit\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Invalidate\", 3, \"click\"], [\"scope\", \"col\", \"pSortableColumn\", \"transactionId\"], [\"field\", \"transactionId\"], [\"scope\", \"col\", \"pSortableColumn\", \"refundActualAmt\"], [\"field\", \"refundActualAmt\"], [\"scope\", \"col\", \"pSortableColumn\", \"refundType\"], [\"field\", \"refundType\"], [\"scope\", \"col\", \"pSortableColumn\", \"paydayDate\"], [\"field\", \"paydayDate\"], [\"scope\", \"col\", \"pSortableColumn\", \"payee\"], [\"field\", \"payee\"], [\"scope\", \"col\", \"pSortableColumn\", \"payeePayDate\"], [\"field\", \"payeePayDate\"], [\"scope\", \"col\", \"pSortableColumn\", \"refundPrincipalAmt\"], [\"field\", \"refundPrincipalAmt\"], [\"scope\", \"col\", \"pSortableColumn\", \"refundInterestAmt\"], [\"field\", \"refundInterestAmt\"], [\"scope\", \"col\", \"pSortableColumn\", \"requestedBy\"], [\"field\", \"requestedBy\"], [\"scope\", \"col\", \"pSortableColumn\", \"invalidationRequestedBy\"], [\"field\", \"invalidationRequestedBy\"], [\"scope\", \"col\", \"pSortableColumn\", \"status\"], [\"field\", \"status\"], [3, \"disabled\", \"value\"], [3, \"routerLink\", \"click\"], [\"colspan\", \"13\"]],\n  template: function RefundHistoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-dialog\", 0);\n      i0.ɵɵlistener(\"visibleChange\", function RefundHistoryComponent_Template_p_dialog_visibleChange_0_listener($event) {\n        return ctx.showRefundDialog = $event;\n      });\n      i0.ɵɵtext(1, \"\\n\\n    \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n        \");\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"span\");\n      i0.ɵɵtext(6, \"Transaction ID:\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \" \");\n      i0.ɵɵelementStart(8, \"span\");\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"defaultString\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(11, \"\\n        \");\n      i0.ɵɵelementStart(12, \"div\", 2)(13, \"span\");\n      i0.ɵɵtext(14, \"Total Amount:\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \" \");\n      i0.ɵɵelementStart(16, \"span\");\n      i0.ɵɵtext(17);\n      i0.ɵɵpipe(18, \"defaultString\");\n      i0.ɵɵpipe(19, \"currency\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(20, \"\\n        \");\n      i0.ɵɵelementStart(21, \"div\", 2)(22, \"span\");\n      i0.ɵɵtext(23, \"Type:\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \" \");\n      i0.ɵɵelementStart(25, \"span\");\n      i0.ɵɵtext(26);\n      i0.ɵɵpipe(27, \"defaultString\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementStart(29, \"div\", 2)(30, \"span\");\n      i0.ɵɵtext(31, \"Excess Refund:\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(32, \" \");\n      i0.ɵɵelementStart(33, \"span\");\n      i0.ɵɵtext(34);\n      i0.ɵɵpipe(35, \"defaultString\");\n      i0.ɵɵpipe(36, \"currency\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(37, \"\\n        \");\n      i0.ɵɵelementStart(38, \"div\", 2)(39, \"span\");\n      i0.ɵɵtext(40, \"Payee:\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \" \");\n      i0.ɵɵelementStart(42, \"span\");\n      i0.ɵɵtext(43);\n      i0.ɵɵpipe(44, \"defaultString\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(45, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \"\\n\\n    \");\n      i0.ɵɵelementStart(47, \"p-table\", 3);\n      i0.ɵɵtext(48, \"\\n\\n        \");\n      i0.ɵɵtemplate(49, RefundHistoryComponent_ng_template_49_Template, 6, 0, \"ng-template\", 4);\n      i0.ɵɵtext(50, \"\\n        \");\n      i0.ɵɵtemplate(51, RefundHistoryComponent_ng_template_51_Template, 16, 0, \"ng-template\", 5);\n      i0.ɵɵtext(52, \"\\n        \");\n      i0.ɵɵtemplate(53, RefundHistoryComponent_ng_template_53_Template, 19, 17, \"ng-template\", 6);\n      i0.ɵɵtext(54, \"\\n\\n        \");\n      i0.ɵɵtemplate(55, RefundHistoryComponent_ng_template_55_Template, 16, 0, \"ng-template\", 7);\n      i0.ɵɵtext(56, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(57, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(58, \"\\n\\n\");\n      i0.ɵɵelementStart(59, \"p-dialog\", 8);\n      i0.ɵɵlistener(\"visibleChange\", function RefundHistoryComponent_Template_p_dialog_visibleChange_59_listener($event) {\n        return ctx.showInvalidateDialog = $event;\n      });\n      i0.ɵɵtext(60, \"\\n\\n    \");\n      i0.ɵɵelementStart(61, \"form\", 9);\n      i0.ɵɵtext(62, \"\\n        \");\n      i0.ɵɵelementStart(63, \"div\", 10);\n      i0.ɵɵtext(64, \"\\n            \");\n      i0.ɵɵelementStart(65, \"p-table\", 11);\n      i0.ɵɵtext(66, \"\\n                \");\n      i0.ɵɵtemplate(67, RefundHistoryComponent_ng_template_67_Template, 4, 0, \"ng-template\", 4);\n      i0.ɵɵtext(68, \"\\n                \");\n      i0.ɵɵtemplate(69, RefundHistoryComponent_ng_template_69_Template, 13, 0, \"ng-template\", 5);\n      i0.ɵɵtext(70, \"\\n                \");\n      i0.ɵɵtemplate(71, RefundHistoryComponent_ng_template_71_Template, 17, 5, \"ng-template\", 6);\n      i0.ɵɵtext(72, \"\\n                \");\n      i0.ɵɵtemplate(73, RefundHistoryComponent_ng_template_73_Template, 7, 0, \"ng-template\", 12);\n      i0.ɵɵtext(74, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(75, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n\\n    \");\n      i0.ɵɵtemplate(78, RefundHistoryComponent_ng_template_78_Template, 14, 1, \"ng-template\", 13);\n      i0.ɵɵtext(79, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(80, \"\\n\\n\");\n      i0.ɵɵelementStart(81, \"p-table\", 14);\n      i0.ɵɵlistener(\"selectionChange\", function RefundHistoryComponent_Template_p_table_selectionChange_81_listener($event) {\n        return ctx.selectedInvalidateRefundList = $event;\n      })(\"onLazyLoad\", function RefundHistoryComponent_Template_p_table_onLazyLoad_81_listener($event) {\n        return ctx.loadRefunds($event);\n      })(\"onPage\", function RefundHistoryComponent_Template_p_table_onPage_81_listener($event) {\n        return ctx.onPage($event);\n      })(\"selectionChange\", function RefundHistoryComponent_Template_p_table_selectionChange_81_listener($event) {\n        return ctx.onSelectionChange($event);\n      })(\"selectAllChange\", function RefundHistoryComponent_Template_p_table_selectAllChange_81_listener($event) {\n        return ctx.onSelectAllChange($event);\n      });\n      i0.ɵɵtext(82, \"\\n    \");\n      i0.ɵɵtemplate(83, RefundHistoryComponent_ng_template_83_Template, 8, 0, \"ng-template\", 4);\n      i0.ɵɵtext(84, \"\\n    \");\n      i0.ɵɵtemplate(85, RefundHistoryComponent_ng_template_85_Template, 56, 0, \"ng-template\", 5);\n      i0.ɵɵtext(86, \"\\n    \");\n      i0.ɵɵtemplate(87, RefundHistoryComponent_ng_template_87_Template, 76, 67, \"ng-template\", 6);\n      i0.ɵɵtext(88, \"\\n    \");\n      i0.ɵɵtemplate(89, RefundHistoryComponent_ng_template_89_Template, 7, 0, \"ng-template\", 12);\n      i0.ɵɵtext(90, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(91, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"visible\", ctx.showRefundDialog)(\"modal\", true);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 32, ctx.selectedRefund == null ? null : ctx.selectedRefund.transactionId));\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 34, i0.ɵɵpipeBind3(19, 36, ctx.selectedRefund == null ? null : ctx.selectedRefund.refundActualAmt, \"SGD\", \"\")));\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(27, 40, ctx.selectedRefund == null ? null : ctx.selectedRefund.refundType));\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 42, i0.ɵɵpipeBind3(36, 44, ctx.selectedRefund == null ? null : ctx.selectedRefund.refundExcessAmt, \"SGD\", \"\")));\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(44, 48, ctx.selectedRefund == null ? null : ctx.selectedRefund.payee));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.selectedRefundDetails)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(50, _c1))(\"showCurrentPageReport\", true)(\"loading\", ctx.dialogLoading);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"visible\", ctx.showInvalidateDialog)(\"modal\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.invalidateForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.refundsFormArray.controls)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(51, _c1))(\"showCurrentPageReport\", true);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"value\", ctx.refundList)(\"selection\", ctx.selectedInvalidateRefundList)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(52, _c1))(\"showCurrentPageReport\", true)(\"lazy\", true)(\"totalRecords\", ctx.totalRecords)(\"loading\", ctx.loading)(\"rowSelectable\", ctx.isRowSelectable)(\"selectAll\", ctx.selectAll);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i4.FormGroupName, i4.FormArrayName, i5.PrimeTemplate, i6.ButtonDirective, i7.RouterLink, i8.Tooltip, i9.Table, i9.SortableColumn, i9.RowToggler, i9.SortIcon, i9.TableCheckbox, i9.TableHeaderCheckbox, i10.Dialog, i11.ConfirmPopup, i12.FileUploadComponent, i13.Ripple, i14.CurrencyPipe, i14.DatePipe, i15.DefaultStringPipe],\n  styles: [\"[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4) !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZnVuZC1oaXN0b3J5LmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFxwYXltZW50XFxvdmVycGF5bWVudFxccmVmdW5kLWhpc3RvcnlcXHJlZnVuZC1oaXN0b3J5LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs0RUFBQTtBQUlBO0VBQ0UsK0NBQUE7QUNBRiIsImZpbGUiOiJyZWZ1bmQtaGlzdG9yeS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDYgIWltcG9ydGFudDtcclxufSIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpICFpbXBvcnRhbnQ7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9vdmVycGF5bWVudC9yZWZ1bmQtaGlzdG9yeS9yZWZ1bmQtaGlzdG9yeS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9vdmVycGF5bWVudC9yZWZ1bmQtaGlzdG9yeS9yZWZ1bmQtaGlzdG9yeS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7NEVBQUE7QUFJQTtFQUNFLCtDQUFBO0FDQUY7QURDQSxnekNBQWd6QyIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDYgIWltcG9ydGFudDtcclxufSIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","RefundHistoryComponent","constructor","refundService","toastService","n2httpService","fb","currentPage","refund_history_model_1","overpayment_tab_model_1","forms_1","refunds","isRowSelectable","bind","refundsFormArray","invalidateForm","get","ngOnInit","loadRefunds","event","loading","console","log","isNSman","setTimeout","options","convertLazyEvent","pageData","pageSize","getByNric","selectedId","subscribe","res","refundList","body","data","content","totalRecords","totalElements","totalAllowInv","filter","r","isInvalidateAllowed","length","error","add","severity","summary","detail","error_desc","getAllByCsn","onPage","rows","first","selectedInvalidateRefundList","selectAll","showRefundDetails","refund","showRefundDialog","selectedRefund","loadRefundDetails","id","refundId","dialogLoading","getById","selectedRefundDetails","exportCSV","RefundType","refundType","WRITE_OFF","SYSTEM_OFFSET","refundExcessAmt","RefundStatus","refundStatus","APP","showInvDialog","showInvalidateDialog","constructInvForm","logInvForm","value","invRefundArr","clear","forEach","push","group","transactionId","overpaymentRefundId","supportingDocs","fileupload2_directive_1","allowableExtension","prepareFormData","request","map","index","fileUploadComponents","verifiedFiles","x","String","meta_data","invalidateRefunds","postInvalidate","ok","success","onSelectionChange","onSelectAllChange","checked","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\refund-history\\refund-history.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\refund-history\\refund-history.component.html"],"sourcesContent":["import {HttpErrorResponse, HttpResponse} from '@angular/common/http';\r\nimport {Component, Input, OnInit, QueryList, ViewChildren} from '@angular/core';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {Ns2HttpService} from 'app/shared/service/ns2-http.service';\r\nimport {LazyLoadEvent} from 'primeng/api';\r\nimport {IOverpaymentPay, IOverpaymentRefund, RefundStatus, RefundType} from './refund-history.model';\r\nimport {OverpaymentType} from '../overpayment-tab/overpayment-tab.model';\r\nimport {RefundService} from '../service/refund-history.service';\r\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport { FileUploadValidator2 } from 'app/shared/validator/fileupload2.directive';\r\nimport { FileUploadComponent } from 'app/shared/component/file-upload/file-upload.component';\r\nimport { rawListeners } from 'process';\r\n\r\n@Component({\r\n  selector: 'n2-refund-history',\r\n  templateUrl: './refund-history.component.html',\r\n  styleUrls: ['./refund-history.component.scss']\r\n})\r\nexport class RefundHistoryComponent implements OnInit {\r\n\r\n  // tslint:disable-next-line:no-input-rename\r\n  // eslint-disable-next-line @angular-eslint/no-input-rename\r\n  @Input('selectedId') selectedId = \"\";\r\n  // tslint:disable-next-line:no-input-rename\r\n  // eslint-disable-next-line @angular-eslint/no-input-rename\r\n  @Input('isNsman') isNSman = true;\r\n\r\n  // Lazy loading\r\n  loading = false;\r\n  totalRecords: number;\r\n  pageData: { currentPage: number } = {\r\n    currentPage: 0\r\n  }\r\n  pageSize = 10;\r\n\r\n  // Enums\r\n  RefundStatus: { [key: string]: RefundStatus } = RefundStatus\r\n  RefundType: { [key: string]: RefundType } = RefundType\r\n  OverpaymentType: { [key: string]: OverpaymentType } = OverpaymentType\r\n\r\n  // Invalidation\r\n  selectAll = false;\r\n  totalAllowInv = 0;\r\n\r\n  refundList: IOverpaymentRefund[] = [];\r\n  selectedInvalidateRefundList: IOverpaymentRefund[] = [];\r\n\r\n  invalidateForm = new FormGroup({\r\n    refunds: new FormArray([])\r\n  });\r\n\r\n  // Dialog\r\n  dialogLoading = false;\r\n  showInvalidateDialog = false;\r\n\r\n  // Display Refund\r\n  showRefundDialog = false;\r\n  selectedRefund: IOverpaymentRefund;\r\n  selectedRefundDetails: IOverpaymentPay[];\r\n\r\n  @ViewChildren('invalidateSuppDoc') \r\n  fileUploadComponents: QueryList<FileUploadComponent>\r\n\r\n  constructor(\r\n    private refundService: RefundService,\r\n    private toastService: CustomToastService,\r\n    private n2httpService: Ns2HttpService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.isRowSelectable = this.isRowSelectable.bind(this);\r\n  }\r\n\r\n  get refundsFormArray(): FormArray {\r\n    return this.invalidateForm.get('refunds') as FormArray;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //\r\n  }\r\n\r\n  loadRefunds(event: LazyLoadEvent): void {\r\n    this.loading = true;\r\n    console.log(\"loading refunds\")\r\n    \r\n    if(this.isNSman) {\r\n      setTimeout(() => {\r\n        const options = this.n2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\r\n  \r\n        this.refundService.getByNric(this.selectedId, options).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            this.refundList = res.body.data.content;\r\n            this.totalRecords = res.body.data.totalElements;\r\n            this.loading = false;\r\n            this.totalAllowInv = this.refundList.filter(r => !this.isInvalidateAllowed(r)).length;\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            console.log(error);\r\n            this.toastService.add({\r\n              severity: 'error',\r\n              summary: 'Error',\r\n              detail: error.error.error_desc\r\n            });\r\n  \r\n            this.loading = false;\r\n          }\r\n        );\r\n      }, 1000);\r\n    } else {\r\n      setTimeout(() => {\r\n        const options = this.n2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\r\n  \r\n        this.refundService.getAllByCsn(this.selectedId, options).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            this.refundList = res.body.data.content;\r\n            this.totalRecords = res.body.data.totalElements;\r\n            this.loading = false;\r\n            this.totalAllowInv = this.refundList.filter(r => !this.isInvalidateAllowed(r)).length;\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            this.toastService.error(error.error?.error_desc);\r\n            this.loading = false;\r\n          }\r\n        );\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  onPage(event: any): void {\r\n    this.pageSize = event.rows;\r\n    this.pageData.currentPage = event.first / event.rows;\r\n    this.selectedInvalidateRefundList = [];\r\n    this.selectAll = false;\r\n  }\r\n\r\n  showRefundDetails(refund: any): void {\r\n    this.showRefundDialog = true;\r\n    this.selectedRefund = refund;\r\n    this.loadRefundDetails(refund.id);\r\n  }\r\n\r\n  loadRefundDetails(refundId: string): void {\r\n    // TO-DO\r\n    console.log(\"Refund ID\", refundId);\r\n    this.dialogLoading = true;\r\n\r\n    setTimeout(() => {\r\n\r\n      this.refundService.getById(refundId).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          console.log(\"Response\", res);\r\n          this.selectedRefundDetails = res.body.data;\r\n          this.dialogLoading = false;\r\n\r\n          console.log(\"Refund Details\", this.selectedRefundDetails);\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          console.log(error);\r\n          this.toastService.add({\r\n            severity: 'error',\r\n            summary: 'Error',\r\n            detail: error.error.error_desc\r\n          });\r\n\r\n          this.dialogLoading = false;\r\n        }\r\n      );\r\n    }, 1000);\r\n\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  isInvalidateAllowed(refund: IOverpaymentRefund): boolean {\r\n    return this.RefundType[refund.refundType] === RefundType.WRITE_OFF\r\n      || this.RefundType[refund.refundType] === RefundType.SYSTEM_OFFSET\r\n      || refund.refundExcessAmt > 0\r\n      || this.RefundStatus[refund.refundStatus] !== RefundStatus.APP;\r\n  }\r\n\r\n  isRowSelectable(event: any): boolean {\r\n    return !this.isInvalidateAllowed(event.data);\r\n  }\r\n\r\n  showInvDialog(): void {\r\n    this.showInvalidateDialog = true;\r\n    this.constructInvForm();\r\n  }\r\n\r\n  logInvForm(): void {\r\n    console.log(\"invForm\", this.invalidateForm.value);\r\n  }\r\n\r\n  constructInvForm(): void {\r\n    const invRefundArr = this.invalidateForm.get('refunds') as FormArray;\r\n    invRefundArr.clear();\r\n\r\n    this.selectedInvalidateRefundList.forEach((r: IOverpaymentRefund) => {\r\n      invRefundArr.push(this.fb.group({\r\n        transactionId: r.transactionId,\r\n        overpaymentRefundId: r.id,\r\n        supportingDocs: new FormControl([], FileUploadValidator2.allowableExtension(\".pdf\")),\r\n      }))\r\n    });\r\n  }\r\n\r\n  prepareFormData(value: any): any {\r\n    const request = {\r\n      refunds: value.map((r: {overpaymentRefundId: string}, index: number) => ({\r\n        overpaymentRefundId: r.overpaymentRefundId, \r\n        supportingDocs: this.fileUploadComponents.get(index).verifiedFiles?.map(x => String(x.meta_data.id))\r\n        })\r\n      )\r\n    }\r\n    return request;\r\n  }\r\n\r\n  invalidateRefunds(): void {\r\n    // TODO change new implementation with supportingDocs\r\n    if (this.selectedInvalidateRefundList.length === 0) {\r\n      this.toastService.error(\"No records selected\");\r\n    } else {\r\n      this.refundService.postInvalidate(this.prepareFormData(this.refundsFormArray.value)).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          if (res.ok) {\r\n            this.toastService.success(\"Records sent for approval\");\r\n            this.showInvalidateDialog = false;\r\n          }\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          this.toastService.error(error.error?.error_desc);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  onSelectionChange(value: any[] = []): void {\r\n    this.selectAll = value.length === this.totalAllowInv;\r\n    this.selectedInvalidateRefundList = value;\r\n  }\r\n\r\n  onSelectAllChange(event: any): void {\r\n    const checked = event.checked;\r\n\r\n    if (checked) {\r\n      this.selectAll = true;\r\n      this.selectedInvalidateRefundList = this.refundList.filter(r => !this.isInvalidateAllowed(r));\r\n    } else {\r\n      this.selectedInvalidateRefundList = [];\r\n      this.selectAll = false;\r\n    }\r\n  }\r\n}\r\n","<p-dialog\r\n    header=\"Refund Details\"\r\n    [(visible)]=\"showRefundDialog\"\r\n    [modal]=\"true\"\r\n    appendTo=\"body\">\r\n\r\n    <div class=\"flex gap-5\">\r\n        <div class=\"flex\"><span>Transaction ID:&nbsp;</span> <span>{{selectedRefund?.transactionId | defaultString}}</span></div>\r\n        <div class=\"flex\"><span>Total Amount:&nbsp;</span> <span>{{selectedRefund?.refundActualAmt | currency:'SGD':'' | defaultString}}</span></div>\r\n        <div class=\"flex\"><span>Type:&nbsp;</span> <span>{{selectedRefund?.refundType | defaultString}}</span></div>\r\n        <div class=\"flex\"><span>Excess Refund:&nbsp;</span> <span>{{selectedRefund?.refundExcessAmt | currency:'SGD':'' | defaultString}}</span></div>\r\n        <div class=\"flex\"><span>Payee:&nbsp;</span> <span>{{selectedRefund?.payee | defaultString}}</span></div>\r\n    </div>\r\n\r\n    <p-table\r\n        [value]=\"selectedRefundDetails\"\r\n        styleClass=\"p-datatable-gridlines\"\r\n        [paginator]=\"true\"\r\n        [rows]=\"10\"\r\n        currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n        [rowsPerPageOptions]=\"[10,25,50]\"\r\n        [showCurrentPageReport]=\"true\"\r\n        [loading]=\"dialogLoading\"\r\n        selectionMode=\"single\"\r\n        expandableRows=\"true\"\r\n        dataKey=\"overpaymentId\">\r\n\r\n        <ng-template pTemplate=\"caption\">\r\n            <div class=\"flex justify-content-between\">\r\n                <button type=\"button\" pButton pRipple icon=\"pi pi-file\" (click)=\"exportCSV()\" pTooltip=\"CSV\" tooltipPosition=\"bottom\"></button>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n            <tr>\r\n                <th scope=\"col\" style=\"width: 5%\">SN</th>\r\n                <th scope=\"col\">Amount</th>\r\n                <th scope=\"col\">Principal Refunded</th>\r\n                <th scope=\"col\">Interest Refunded</th>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-data let-i=\"rowIndex\" let-expanded=\"expanded\">\r\n            <tr [pRowToggler]=\"data\">\r\n                <td>{{i+1}}</td>\r\n                <td>{{data.principalAmt + data.interestAmt | currency:'SGD':''}}</td>\r\n                <td>{{data.principalAmt | currency:'SGD':''}}</td>\r\n                <td>{{data.interestAmt | currency:'SGD':''}}</td>\r\n            </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"rowexpansion\" let-data>\r\n            <tr>\r\n                <td colspan=\"4\" style=\"background-color: var(--surface-c)\">\r\n                    <p-table>\r\n                        <ng-template pTemplate=\"header\">\r\n                            <tr>\r\n                                <th scope=\"col\">Discovery Date</th>\r\n                                <th scope=\"col\">Trg Start</th>\r\n                                <th scope=\"col\">Trg End</th>\r\n                                <th scope=\"col\">Type</th>\r\n                                <th scope=\"col\">Payment Type</th>\r\n                                <th scope=\"col\">Case ID</th>\r\n                                <th scope=\"col\">Original Amt</th>\r\n                                <th scope=\"col\">Total O/S</th>\r\n                                <th scope=\"col\">Total Refund</th>\r\n                            </tr>\r\n                        </ng-template>\r\n                        <ng-template pTemplate=\"body\">\r\n                            <tr>\r\n                                <td>{{data.overpayment.discoveryDate}}</td>\r\n                                <td>{{data.overpayment.trgStart}}</td>\r\n                                <td>{{data.overpayment.trgEnd}}</td>\r\n                                <td style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis\">{{ OverpaymentType[data.overpayment.overpaymentType] }}</td>\r\n                                <td>{{data.overpayment.paymentType | defaultString }}</td>\r\n                                <td>{{data.overpayment.caseId | defaultString}}</td>\r\n                                <td>{{data.overpayment.overpaymentAmt | currency:'SGD':''}}</td>\r\n                                <td>{{data.overpayment.outstandingPrincipalAmt + data.overpayment.outstandingInterestAmt | currency:'SGD':''}}</td>\r\n                                <td>{{data.overpayment.totalRefund | currency:'SGD':''}}</td>\r\n                            </tr>\r\n                        </ng-template>\r\n                        <ng-template pTemplate=\"emptymessage\">\r\n                            <tr>\r\n                                <td colspan=\"9\">No overpayments</td>\r\n                            </tr>\r\n                        </ng-template>\r\n                    </p-table>\r\n                </td>\r\n            </tr>\r\n        </ng-template>\r\n    </p-table>\r\n</p-dialog>\r\n\r\n<p-dialog header=\"Invalidate Refund\"\r\n    [(visible)]=\"showInvalidateDialog\"\r\n    [modal]=\"true\">\r\n\r\n    <form [formGroup]=\"invalidateForm\">\r\n        <div formArrayName=\"refunds\">\r\n            <p-table\r\n                [value]=\"refundsFormArray.controls\"\r\n                styleClass=\"p-datatable-gridlines\"\r\n                [paginator]=\"true\"\r\n                [rows]=\"10\"\r\n                currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n                [rowsPerPageOptions]=\"[10,25,50]\"\r\n                [showCurrentPageReport]=\"true\">\r\n                <ng-template pTemplate=\"caption\">\r\n                    <div class=\"flex align-items-center justify-content-between\">\r\n                        Selected Refunds\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"header\">\r\n                    <tr>\r\n                        <th scope=\"col\" style=\"width: 5%\">SN</th>\r\n                        <th scope=\"col\">Transaction ID</th>\r\n                        <th scope=\"col\">Supporting Document</th>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"body\" let-refund let-i=\"rowIndex\">\r\n                    <tr [formGroupName]=\"i\">\r\n                        <td>{{i+1}}</td>\r\n                        <td>{{refund.value.transactionId}}</td>\r\n                        <td>\r\n                            <n2-file-upload #invalidateSuppDoc id=\"supportingDocs{{i}}\" formControlName=\"supportingDocs\" [contentHeight]=\"'150px'\">\r\n                            </n2-file-upload>\r\n                        </td>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"emptymessage\">\r\n                    <tr>\r\n                        <td colspan=\"3\">No records selected</td>\r\n                    </tr>\r\n                </ng-template>\r\n            </p-table>\r\n        </div>\r\n    </form>\r\n\r\n    <ng-template pTemplate='footer'>\r\n        <div class=\"flex justify-content-end align-items-center gap-3\">\r\n          <div class='flex gap-1'>\r\n            <button pButton type=\"button\" label=\"Cancel\" (click)=\"showInvalidateDialog = false\" class=\"p-button-danger\"></button>\r\n            <!-- <button pButton type=\"button\" label=\"Cancel\" (click)=\"logInvForm()\" class=\"p-button-danger\"></button> -->\r\n            <p-confirmPopup key = \"confirmRefManPopup\"></p-confirmPopup>\r\n            <button pButton type=\"button\" label=\"Submit\" (click)=\"invalidateRefunds()\" [disabled]=\"!invalidateForm.valid\"></button>\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n</p-dialog>\r\n\r\n<p-table\r\n    [value]=\"refundList\"\r\n    [(selection)]=\"selectedInvalidateRefundList\"\r\n    styleClass=\"p-datatable-gridlines\"\r\n    [paginator]=\"true\"\r\n    [rows]=\"10\"\r\n    currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n    [rowsPerPageOptions]=\"[10,25,50]\"\r\n    [showCurrentPageReport]=\"true\"\r\n    [lazy]=\"true\"\r\n    [totalRecords]=\"totalRecords\"\r\n    [loading]=\"loading\"\r\n    (onLazyLoad)=\"loadRefunds($event)\"\r\n    (onPage) = \"onPage($event)\"\r\n    [rowSelectable]=\"isRowSelectable\"\r\n    (selectionChange)=\"onSelectionChange($event)\"\r\n    [selectAll]=\"selectAll\"\r\n    (selectAllChange)=\"onSelectAllChange($event)\">\r\n    <ng-template pTemplate=\"caption\">\r\n        <div class=\"flex justify-content-between\">\r\n            <button type=\"button\" pButton pRipple icon=\"pi pi-file\" (click)=\"exportCSV()\" pTooltip=\"CSV\" tooltipPosition=\"bottom\"></button>\r\n            <button type=\"button\" pButton label=\"Invalidate\" (click)=\"showInvDialog()\"></button>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"header\">\r\n        <tr>\r\n            <th scope=\"col\" style=\"width:5%\">\r\n                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th scope=\"col\" style=\"width: 5%\">SN</th>\r\n            <th scope=\"col\" pSortableColumn=\"transactionId\">Transaction ID<p-sortIcon field=\"transactionId\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"refundActualAmt\">Amount<p-sortIcon field=\"refundActualAmt\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"refundType\">Type<p-sortIcon field=\"refundType\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"paydayDate\">Date<p-sortIcon field=\"paydayDate\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"payee\">Payee<p-sortIcon field=\"payee\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"payeePayDate\">Pay Date<p-sortIcon field=\"payeePayDate\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"refundPrincipalAmt\">Principal Refunded<p-sortIcon field=\"refundPrincipalAmt\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"refundInterestAmt\">Interest Refunded<p-sortIcon field=\"refundInterestAmt\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"requestedBy\">Created By<p-sortIcon field=\"requestedBy\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"invalidationRequestedBy\">Invalidated By<p-sortIcon field=\"invalidationRequestedBy\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"status\">Status<p-sortIcon field=\"status\"></p-sortIcon></th>\r\n        </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-refund let-i=\"rowIndex\">\r\n        <tr>\r\n            <td>\r\n                <p-tableCheckbox [disabled]=\"isInvalidateAllowed(refund)\" [value]=\"refund\"></p-tableCheckbox></td>\r\n            <td>\r\n                <a [routerLink]=\"\" (click)=\"showRefundDetails(refund)\">{{i+1}}</a>\r\n            </td>\r\n            <td>{{refund.transactionId}}</td>\r\n            <td>{{refund.refundActualAmt | currency:'SGD':'':'.2-2'}}</td>\r\n            <td>{{RefundType[refund.refundType] | defaultString }}</td>\r\n            <td>{{refund.paydayDate | date:'dd-MM-yyyy' | defaultString}}</td>\r\n            <td>{{refund.payee | defaultString }}</td>\r\n            <td>{{refund.payeePayDate | date:'dd-MM-yyyy'  | defaultString }}</td>\r\n            <td>{{refund.refundPrincipalAmt | currency:'SGD':''}}</td>\r\n            <td>{{refund.refundInterestAmt | currency:'SGD':''}}</td>\r\n            <td>{{refund.requestedBy | defaultString}} <br>\r\n                {{refund.requestedDt | date:'dd-MM-yyyy' | defaultString}} <br>\r\n                {{refund.requestReviewedBy}} <br>\r\n                {{refund.requestReviewedDt | date:'dd-MM-yyyy'}}\r\n            </td>\r\n            <td>{{refund.invalidationRequestedBy | defaultString}} <br>\r\n                {{refund.invalidationRequestedDt | date:'dd-MM-yyyy' | defaultString}} <br>\r\n                {{refund.invalidationReviewedBy}} <br>\r\n                {{refund.invalidationReviewedDt | date:'dd-MM-yyyy'}}\r\n            </td>\r\n            <td>{{RefundStatus[refund.refundStatus]}}</td>\r\n        </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n            <td colspan=\"13\">No refunds</td>\r\n        </tr>\r\n    </ng-template>\r\n</p-table>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
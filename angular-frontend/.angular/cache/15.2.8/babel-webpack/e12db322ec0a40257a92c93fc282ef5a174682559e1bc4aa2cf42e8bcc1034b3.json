{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OverpaymentComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"./service/search-overpayment.service\"));\nconst i2 = tslib_1.__importStar(require(\"./service/mips-upload.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i13 = tslib_1.__importStar(require(\"../../shared/language/translate.directive\"));\nconst i14 = tslib_1.__importStar(require(\"../../shared/component/file-upload/file-upload.component\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i16 = tslib_1.__importStar(require(\"./search/search-overpayment.component\"));\nconst i17 = tslib_1.__importStar(require(\"./particulars/particulars.component\"));\nconst i18 = tslib_1.__importStar(require(\"./overpayment-info/overpayment-info.component\"));\nconst i19 = tslib_1.__importStar(require(\"./mips-upload-history/mips-upload-history.component\"));\nconst _c0 = [\"mipsFileUpload\"];\nconst _c1 = [\"mipsUploadHistory\"];\nconst _c2 = [\"searchOP\"];\nfunction OverpaymentComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelement(1, \"span\", 23);\n    i0.ɵɵtext(2, \"\\n      \");\n  }\n}\nfunction OverpaymentComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"p-panel\", 24);\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementStart(4, \"div\", 0);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementStart(6, \"div\", 25);\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementStart(8, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function OverpaymentComponent_div_38_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onOpen(ctx_r9.displayMipsFileUploadDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementStart(10, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function OverpaymentComponent_div_38_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onOpen(ctx_r11.displayMipsFileUploadHistoryDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelement(2, \"n2-particulars\", 28);\n    i0.ɵɵtext(3, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"selectedId\", ctx_r2.selectedId)(\"isNSman\", ctx_r2.isNsman);\n  }\n}\nfunction OverpaymentComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"n2-search-overpayment\", 30, 31);\n    i0.ɵɵlistener(\"selectEvent\", function OverpaymentComponent_div_45_Template_n2_search_overpayment_selectEvent_2_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.handleSearchSelect($event));\n    });\n    i0.ɵɵtext(4, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isNSman\", ctx_r3.isNsman)(\"searchInput\", ctx_r3.searchInput);\n  }\n}\nfunction OverpaymentComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"n2-overpayment-info\", 28);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"selectedId\", ctx_r4.selectedId)(\"isNSman\", ctx_r4.isNsman);\n  }\n}\nconst _c3 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction OverpaymentComponent_ng_template_58_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function OverpaymentComponent_ng_template_58_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.displayMipsFileUploadDialog.display = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n    \");\n    i0.ɵɵelement(3, \"p-confirmPopup\", 33);\n    i0.ɵɵtext(4, \"\\n    \");\n    i0.ɵɵelementStart(5, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function OverpaymentComponent_ng_template_58_Template_button_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onMipsFileSubmit($event, \"MipsFileUpload\", ctx_r17.displayMipsFileUploadDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c3));\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c3));\n    i0.ɵɵproperty(\"disabled\", !ctx_r6.mipsFileUploadForm.valid);\n  }\n}\nfunction OverpaymentComponent_ng_template_66_Template(rf, ctx) {}\nconst _c4 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nconst _c6 = function () {\n  return {\n    width: \"90vw\"\n  };\n};\nclass OverpaymentComponent {\n  constructor(searchOverpaymentService, mipsUploadService, toastService, nspConfirmService, n2httpService, fb) {\n    this.searchOverpaymentService = searchOverpaymentService;\n    this.mipsUploadService = mipsUploadService;\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.n2httpService = n2httpService;\n    this.fb = fb;\n    // Search Component\n    this.isSearching = false;\n    this.isByNRIC = true;\n    this.searchInput = \"\";\n    this.nricInput = \"\";\n    this.csnInput = \"\";\n    this.csnInput1 = \"\";\n    this.csnInput2 = \"\";\n    this.csnInput3 = \"\";\n    this.csnInput2Default = \"PTE\";\n    this.csnInput3Default = \"01\";\n    this.resultList = [];\n    // Display results\n    this.isNsman = true;\n    this.showDetail = false;\n    this.selectedId = \"\";\n    // variable to track open/close status of various Dialogs\n    this.displayMipsFileUploadDialog = {\n      display: false\n    };\n    this.displayMipsFileUploadHistoryDialog = {\n      display: false\n    };\n    //MIPS\n    this.fileUploadFileLimit = 1;\n    this.mipsFileUploadForm = this.fb.group({\n      file: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".xls,.xlsx\")])\n    });\n  }\n  ngOnInit() {\n    //\n  }\n  onFocus() {\n    console.log('onFocus');\n    if (this.csnInput2 === \"\" && this.csnInput3 === \"\") {\n      this.csnInput2 = this.csnInput2Default;\n      this.csnInput3 = this.csnInput3Default;\n    }\n  }\n  onBlur() {\n    console.log('onBlur');\n    //If first portion of csn is empty, onBlur set 2 and 3 empty\n    if (this.csnInput1 === \"\" && this.csnInput2 === this.csnInput2Default && this.csnInput3 === this.csnInput3Default) {\n      this.csnInput2 = \"\";\n      this.csnInput3 = \"\";\n    }\n  }\n  search() {\n    this.csnInput = this.csnInput1.concat(this.csnInput2, this.csnInput3);\n    if (this.csnInput.length > 0) {\n      this.isByNRIC = false;\n    }\n    console.log(\"Search\", this.isByNRIC);\n    if (this.nricInput || this.csnInput) {\n      if (this.isByNRIC) {\n        console.log(\"By NRIC\");\n        this.searchInput = this.nricInput;\n        this.isNsman = true;\n      } else {\n        console.log(\"By CSN\");\n        this.searchInput = this.csnInput;\n        this.isNsman = false;\n      }\n      this.isSearching = true;\n      this.showDetail = false;\n      this.searchOverpaymentComponent.refreshTable();\n    } else {\n      this.toastService.add({\n        severity: 'error',\n        summary: 'Error',\n        detail: \"Either NRIC or CSN is required\"\n      });\n    }\n  }\n  handleSearchSelect(event) {\n    console.log(\"Parent recieve\", event);\n    if (event) {\n      this.selectedId = event;\n      this.showDetail = true;\n      this.isSearching = false;\n    }\n  }\n  //MIPS\n  resetFile() {\n    this.mipsFileUploadForm.reset({\n      file: []\n    });\n    this.mipsFileUpload.clearAndReset();\n  }\n  onOpen(dialog) {\n    dialog.display = true;\n  }\n  onMipsFileSubmit(event, key, dialog) {\n    const fileTxnId = this.mipsFileUpload.verifiedFiles.map(x => String(x.meta_data.id))[0];\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      this.mipsUploadService.upload(fileTxnId).subscribe(res => {\n        this.toastService.success(\"MIPS file uploaded successfully\");\n        this.resetFile();\n        this.mipsUploadHistoryDialog.refresh();\n      }, error => {\n        console.log(error.error?.error_desc);\n      });\n    });\n  }\n}\nexports.OverpaymentComponent = OverpaymentComponent;\nOverpaymentComponent.ɵfac = function OverpaymentComponent_Factory(t) {\n  return new (t || OverpaymentComponent)(i0.ɵɵdirectiveInject(i1.SearchOverpaymentService), i0.ɵɵdirectiveInject(i2.MipsUploadService), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.NspConfirmationService), i0.ɵɵdirectiveInject(i5.Ns2HttpService), i0.ɵɵdirectiveInject(i6.FormBuilder));\n};\nOverpaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OverpaymentComponent,\n  selectors: [[\"n2-overpayment\"]],\n  viewQuery: function OverpaymentComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 7);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mipsFileUpload = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mipsUploadHistoryDialog = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchOverpaymentComponent = _t.first);\n    }\n  },\n  decls: 69,\n  vars: 30,\n  consts: [[1, \"grid\"], [1, \"col-6\"], [3, \"header\"], [\"pTemplate\", \"header\"], [1, \"col-4\", \"flex\", \"gap-2\", \"align-items-center\"], [\"for\", \"searchNricInput\"], [\"autofocus\", \"\", \"type\", \"text\", \"pInputText\", \"\", \"id\", \"searchNricInput\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [1, \"col-6\", \"flex\", \"gap-2\", \"align-items-center\"], [\"for\", \"searchCSNInput1\", \"id\", \"searchCSNInput\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"searchCSNInput1\", \"maxlength\", \"10\", 2, \"width\", \"40%\", 3, \"ngModel\", \"disabled\", \"ngModelChange\", \"focus\", \"blur\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"searchCSNInput2\", \"maxlength\", \"3\", 2, \"width\", \"20%\", 3, \"ngModel\", \"disabled\", \"ngModelChange\", \"focus\", \"blur\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"searchCSNInput3\", \"maxlength\", \"2\", 2, \"width\", \"20%\", 3, \"ngModel\", \"disabled\", \"ngModelChange\", \"focus\", \"blur\"], [1, \"col-2\", \"flex\", \"justify-content-end\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Search\", 3, \"click\"], [\"class\", \"col-6\", 4, \"ngIf\"], [\"class\", \"col-12\", 4, \"ngIf\"], [\"header\", \"Upload MIPS File\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\", \"onHide\"], [3, \"formGroup\"], [\"formControlName\", \"file\", 3, \"externalFileLimit\"], [\"mipsFileUpload\", \"\"], [\"pTemplate\", \"footer\"], [\"header\", \"MIPS File Upload History\", 3, \"visible\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"mipsFileUploadHistory\", \"\"], [\"icTranslate\", \"nspay2App.payment.overpayment.search.header\", 1, \"p-panel-title\"], [\"header\", \"Upload MIPS\"], [1, \"col-12\", \"flex\", \"gap-2\", \"align-items-center\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Upload MIPS File\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Upload History\", 3, \"click\"], [3, \"selectedId\", \"isNSman\"], [1, \"col-12\"], [3, \"isNSman\", \"searchInput\", \"selectEvent\"], [\"searchOP\", \"\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"MipsFileUpload\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"]],\n  template: function OverpaymentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"p-panel\", 2);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵtemplate(6, OverpaymentComponent_ng_template_6_Template, 3, 0, \"ng-template\", 3);\n      i0.ɵɵtext(7, \"\\n      \");\n      i0.ɵɵelementStart(8, \"div\", 0);\n      i0.ɵɵtext(9, \"\\n        \");\n      i0.ɵɵelementStart(10, \"div\", 4);\n      i0.ɵɵtext(11, \"\\n          \");\n      i0.ɵɵelementStart(12, \"label\", 5);\n      i0.ɵɵtext(13, \"NRIC\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n          \");\n      i0.ɵɵelementStart(15, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function OverpaymentComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.nricInput = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n        \");\n      i0.ɵɵelementStart(18, \"div\", 7);\n      i0.ɵɵtext(19, \"\\n          \");\n      i0.ɵɵelementStart(20, \"label\", 8);\n      i0.ɵɵtext(21, \"CSN\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n          \");\n      i0.ɵɵelementStart(23, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function OverpaymentComponent_Template_input_ngModelChange_23_listener($event) {\n        return ctx.csnInput1 = $event;\n      })(\"focus\", function OverpaymentComponent_Template_input_focus_23_listener() {\n        return ctx.onFocus();\n      })(\"blur\", function OverpaymentComponent_Template_input_blur_23_listener() {\n        return ctx.onBlur();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n          -\\n          \");\n      i0.ɵɵelementStart(25, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function OverpaymentComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.csnInput2 = $event;\n      })(\"focus\", function OverpaymentComponent_Template_input_focus_25_listener() {\n        return ctx.onFocus();\n      })(\"blur\", function OverpaymentComponent_Template_input_blur_25_listener() {\n        return ctx.onBlur();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n          -\\n          \");\n      i0.ɵɵelementStart(27, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function OverpaymentComponent_Template_input_ngModelChange_27_listener($event) {\n        return ctx.csnInput3 = $event;\n      })(\"focus\", function OverpaymentComponent_Template_input_focus_27_listener() {\n        return ctx.onFocus();\n      })(\"blur\", function OverpaymentComponent_Template_input_blur_27_listener() {\n        return ctx.onBlur();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n        \");\n      i0.ɵɵelementStart(30, \"div\", 12);\n      i0.ɵɵtext(31, \"\\n          \");\n      i0.ɵɵelementStart(32, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function OverpaymentComponent_Template_button_click_32_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(33, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n\\n  \");\n      i0.ɵɵtemplate(38, OverpaymentComponent_div_38_Template, 15, 0, \"div\", 14);\n      i0.ɵɵtext(39, \"\\n\\n  \");\n      i0.ɵɵtemplate(40, OverpaymentComponent_div_40_Template, 4, 2, \"div\", 14);\n      i0.ɵɵtext(41, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n\\n\");\n      i0.ɵɵelementStart(43, \"div\", 0);\n      i0.ɵɵtext(44, \"\\n  \");\n      i0.ɵɵtemplate(45, OverpaymentComponent_div_45_Template, 6, 2, \"div\", 15);\n      i0.ɵɵtext(46, \"\\n\\n  \");\n      i0.ɵɵtemplate(47, OverpaymentComponent_div_47_Template, 5, 2, \"div\", 15);\n      i0.ɵɵtext(48, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(49, \"\\n\\n\\n\");\n      i0.ɵɵelementStart(50, \"p-dialog\", 16);\n      i0.ɵɵlistener(\"visibleChange\", function OverpaymentComponent_Template_p_dialog_visibleChange_50_listener($event) {\n        return ctx.displayMipsFileUploadDialog.display = $event;\n      })(\"onHide\", function OverpaymentComponent_Template_p_dialog_onHide_50_listener() {\n        return ctx.resetFile();\n      });\n      i0.ɵɵtext(51, \"\\n\\n    \");\n      i0.ɵɵelementStart(52, \"form\", 17);\n      i0.ɵɵtext(53, \"\\n      \");\n      i0.ɵɵelement(54, \"n2-file-upload\", 18, 19);\n      i0.ɵɵtext(56, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(57, \"\\n\\n  \");\n      i0.ɵɵtemplate(58, OverpaymentComponent_ng_template_58_Template, 7, 7, \"ng-template\", 20);\n      i0.ɵɵtext(59, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n\\n\");\n      i0.ɵɵelementStart(61, \"p-dialog\", 21);\n      i0.ɵɵlistener(\"visibleChange\", function OverpaymentComponent_Template_p_dialog_visibleChange_61_listener($event) {\n        return ctx.displayMipsFileUploadHistoryDialog.display = $event;\n      });\n      i0.ɵɵtext(62, \"\\n\\n  \");\n      i0.ɵɵelement(63, \"n2-mips-upload-history\", null, 22);\n      i0.ɵɵtext(65, \"\\n\\n  \");\n      i0.ɵɵtemplate(66, OverpaymentComponent_ng_template_66_Template, 0, 0, \"ng-template\", 20);\n      i0.ɵɵtext(67, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(68, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngModel\", ctx.nricInput)(\"disabled\", ctx.csnInput1.length > 0 || ctx.csnInput2.length > 0 || ctx.csnInput3.length > 0);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.csnInput1)(\"disabled\", ctx.nricInput.length > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.csnInput2)(\"disabled\", ctx.nricInput.length > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.csnInput3)(\"disabled\", ctx.nricInput.length > 0);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showDetail);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showDetail && !ctx.isSearching);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSearching && !ctx.showDetail);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showDetail && !ctx.isSearching);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(27, _c4));\n      i0.ɵɵproperty(\"visible\", ctx.displayMipsFileUploadDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(28, _c5))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.mipsFileUploadForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"externalFileLimit\", ctx.fileUploadFileLimit);\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(29, _c6));\n      i0.ɵɵproperty(\"visible\", ctx.displayMipsFileUploadHistoryDialog.display)(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n    }\n  },\n  dependencies: [i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.MaxLengthValidator, i6.NgModel, i7.NgIf, i6.FormGroupDirective, i6.FormControlName, i8.PrimeTemplate, i9.ButtonDirective, i10.InputText, i11.Dialog, i12.ConfirmPopup, i13.TranslateDirective, i14.FileUploadComponent, i15.Panel, i16.SearchOverpaymentComponent, i17.ParticularsComponent, i18.OverpaymentInfoComponent, i19.MipsUploadHistoryComponent],\n  styles: [\"[_nghost-%COMP%]     .no-side-padding .p-tabview-panels {\\n  padding-left: 0px;\\n  padding-right: 0px;\\n}\\n\\n\\n[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm92ZXJwYXltZW50LmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHBheW1lbnRcXG92ZXJwYXltZW50XFxvdmVycGF5bWVudC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0VBQ0Esa0JBQUE7QUNDSjs7QURFQTs7NEVBQUE7QUFJQTtFQUNFLG9DQUFBO0FDQUYiLCJmaWxlIjoib3ZlcnBheW1lbnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCA6Om5nLWRlZXAgLm5vLXNpZGUtcGFkZGluZyAucC10YWJ2aWV3LXBhbmVscyB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDBweDtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDBweDtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwNjtcclxufSIsIjpob3N0IDo6bmctZGVlcCAubm8tc2lkZS1wYWRkaW5nIC5wLXRhYnZpZXctcGFuZWxzIHtcbiAgcGFkZGluZy1sZWZ0OiAwcHg7XG4gIHBhZGRpbmctcmlnaHQ6IDBweDtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9vdmVycGF5bWVudC9vdmVycGF5bWVudC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9vdmVycGF5bWVudC9vdmVycGF5bWVudC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0VBQ0Esa0JBQUE7QUNDSjs7QURFQTs7NEVBQUE7QUFJQTtFQUNFLG9DQUFBO0FDQUY7QURDQSxna0RBQWdrRCIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IDo6bmctZGVlcCAubm8tc2lkZS1wYWRkaW5nIC5wLXRhYnZpZXctcGFuZWxzIHtcclxuICAgIHBhZGRpbmctbGVmdDogMHB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogMHB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59IiwiOmhvc3QgOjpuZy1kZWVwIC5uby1zaWRlLXBhZGRpbmcgLnAtdGFidmlldy1wYW5lbHMge1xuICBwYWRkaW5nLWxlZnQ6IDBweDtcbiAgcGFkZGluZy1yaWdodDogMHB4O1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","OverpaymentComponent","constructor","searchOverpaymentService","mipsUploadService","toastService","nspConfirmService","n2httpService","fb","display","group","file","forms_1","fileupload2_directive_1","maxFileLimit","fileUploadFileLimit","allowableExtension","ngOnInit","onFocus","console","log","csnInput2","csnInput3","csnInput2Default","csnInput3Default","onBlur","csnInput1","search","csnInput","concat","length","isByNRIC","nricInput","searchInput","isNsman","isSearching","showDetail","searchOverpaymentComponent","refreshTable","add","severity","summary","detail","handleSearchSelect","event","selectedId","resetFile","mipsFileUploadForm","reset","mipsFileUpload","clearAndReset","onOpen","dialog","onMipsFileSubmit","key","fileTxnId","verifiedFiles","map","x","String","meta_data","id","onConfirmPopup","upload","subscribe","res","success","mipsUploadHistoryDialog","refresh","error","error_desc","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\overpayment.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\overpayment.component.html"],"sourcesContent":["import {HttpErrorResponse, HttpResponse} from '@angular/common/http';\r\nimport {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {ISearchOP} from './search/search-overpayment.model';\r\nimport {SearchOverpaymentService} from './service/search-overpayment.service';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {FileUploadComponent} from 'app/shared/component/file-upload/file-upload.component';\r\nimport {Ns2HttpService} from 'app/shared/service/ns2-http.service';\r\nimport {SearchOverpaymentComponent} from './search/search-overpayment.component';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MipsUploadService } from './service/mips-upload.service';\r\nimport { FileUploadValidator2 } from 'app/shared/validator/fileupload2.directive';\r\nimport { MipsUploadHistoryComponent } from './mips-upload-history/mips-upload-history.component';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-overpayment',\r\n  templateUrl: './overpayment.component.html',\r\n  styleUrls: ['./overpayment.component.scss']\r\n})\r\nexport class OverpaymentComponent implements OnInit {\r\n\r\n  // Search Component\r\n  isSearching = false;\r\n  isByNRIC = true;\r\n\r\n  searchInput = \"\";\r\n  nricInput = \"\";\r\n  csnInput = \"\";\r\n  csnInput1 = \"\";\r\n  csnInput2 = \"\"; \r\n  csnInput3 = \"\";\r\n  \r\n  csnInput2Default = \"PTE\";\r\n  csnInput3Default = \"01\";\r\n\r\n  resultList: ISearchOP[] = [];\r\n\r\n  // Display results\r\n  isNsman = true;\r\n  showDetail = false;\r\n  selectedId = \"\";\r\n\r\n  // variable to track open/close status of various Dialogs\r\n  displayMipsFileUploadDialog: any = {display: false};\r\n  displayMipsFileUploadHistoryDialog: any = {display: false};\r\n  \r\n  //MIPS\r\n  fileUploadFileLimit = 1;\r\n  mipsFileUploadForm: FormGroup = this.fb.group({\r\n    file: new FormControl([], [\r\n      FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit),\r\n      FileUploadValidator2.allowableExtension(\".xls,.xlsx\")])\r\n  });\r\n\r\n  @ViewChild(\"mipsFileUpload\")\r\n  private mipsFileUpload: FileUploadComponent;\r\n\r\n  @ViewChild(\"mipsUploadHistory\", { static: true })\r\n  private mipsUploadHistoryDialog: MipsUploadHistoryComponent;\r\n\r\n  //MIPS end\r\n\r\n\r\n  @ViewChild('searchOP', {static: false})\r\n  private searchOverpaymentComponent!: SearchOverpaymentComponent;\r\n\r\n  constructor(\r\n    private searchOverpaymentService: SearchOverpaymentService,\r\n    private mipsUploadService: MipsUploadService,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private n2httpService: Ns2HttpService,\r\n    private fb: FormBuilder\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //\r\n  }\r\n\r\n  onFocus(): void{\r\n    console.log('onFocus');\r\n\r\n    if(this.csnInput2 === \"\" && this.csnInput3 === \"\") {\r\n      this.csnInput2 = this.csnInput2Default;\r\n      this.csnInput3 = this.csnInput3Default;\r\n    }\r\n  }\r\n\r\n  onBlur(): void{\r\n    console.log('onBlur');\r\n\r\n    //If first portion of csn is empty, onBlur set 2 and 3 empty\r\n    if(this.csnInput1 === \"\" && \r\n      (this.csnInput2 === this.csnInput2Default && this.csnInput3 === this.csnInput3Default)) {\r\n      this.csnInput2 = \"\";\r\n      this.csnInput3 = \"\";\r\n    }\r\n  }\r\n\r\n  search(): void {\r\n    this.csnInput = this.csnInput1.concat(this.csnInput2, this.csnInput3);\r\n\r\n    if (this.csnInput.length > 0) {\r\n      this.isByNRIC = false;\r\n    }\r\n\r\n    console.log(\"Search\", this.isByNRIC);\r\n    if (this.nricInput || this.csnInput) {\r\n      if (this.isByNRIC) {\r\n        console.log(\"By NRIC\");\r\n        this.searchInput = this.nricInput;\r\n        this.isNsman = true;\r\n      } else {\r\n        console.log(\"By CSN\");\r\n        this.searchInput = this.csnInput;\r\n        this.isNsman = false;\r\n      }\r\n\r\n      this.isSearching = true;\r\n      this.showDetail = false;\r\n      this.searchOverpaymentComponent.refreshTable();\r\n    } else {\r\n      this.toastService.add({\r\n        severity: 'error',\r\n        summary: 'Error',\r\n        detail: \"Either NRIC or CSN is required\"\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSearchSelect(event: any): void {\r\n    console.log(\"Parent recieve\", event);\r\n    if (event) {\r\n      this.selectedId = event;\r\n      this.showDetail = true;\r\n      this.isSearching = false;\r\n    }\r\n  }\r\n\r\n  //MIPS\r\n  resetFile(): void {\r\n    this.mipsFileUploadForm.reset({file:[]})\r\n    this.mipsFileUpload.clearAndReset();\r\n  }\r\n\r\n  onOpen(dialog: any): void {\r\n    dialog.display = true;\r\n  }\r\n\r\n  onMipsFileSubmit(event: Event, key: string, dialog: any): void {\r\n    const fileTxnId = this.mipsFileUpload.verifiedFiles.map(x=>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      this.mipsUploadService.upload(fileTxnId).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          this.toastService.success(\"MIPS file uploaded successfully\");\r\n          this.resetFile();\r\n          this.mipsUploadHistoryDialog.refresh();\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          console.log(error.error?.error_desc);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n}\r\n","<div class='grid'>\r\n  <div class='col-6'>\r\n    <p-panel [header]=''>\r\n      <ng-template pTemplate='header'>\r\n        <span class='p-panel-title' icTranslate='nspay2App.payment.overpayment.search.header'></span>\r\n      </ng-template>\r\n      <div class='grid'>\r\n        <div class='col-4 flex gap-2 align-items-center'>\r\n          <label for='searchNricInput'>NRIC</label>\r\n          <input autofocus type='text' pInputText id='searchNricInput' [(ngModel)]='nricInput'\r\n          [disabled]=\"csnInput1.length > 0 || csnInput2.length > 0 || csnInput3.length > 0\">\r\n        </div>\r\n        <div class='col-6 flex gap-2 align-items-center'>\r\n          <label for='searchCSNInput1' id='searchCSNInput'>CSN</label>\r\n          <input type='text' pInputText id='searchCSNInput1' [(ngModel)]='csnInput1'  [disabled]=\"nricInput.length > 0\" (focus)=\"onFocus()\" (blur)=\"onBlur()\" maxlength='10' style='width: 40%' />\r\n          -\r\n          <input type='text' pInputText id='searchCSNInput2' [(ngModel)]='csnInput2' [disabled]=\"nricInput.length > 0\" (focus)=\"onFocus()\" (blur)=\"onBlur()\" maxlength='3' style='width: 20%' />\r\n          -\r\n          <input type='text' pInputText id='searchCSNInput3' [(ngModel)]='csnInput3' [disabled]=\"nricInput.length > 0\" (focus)=\"onFocus()\" (blur)=\"onBlur()\" maxlength='2' style='width: 20%' />\r\n        </div>\r\n        <div class='col-2 flex justify-content-end'>\r\n          <button pButton type='button' label='Search' (click)='search()'></button>\r\n        </div>\r\n      </div>\r\n    </p-panel>\r\n  </div>\r\n\r\n  <div class='col-6' *ngIf='!showDetail'>\r\n    <p-panel header='Upload MIPS'>\r\n      <div class='grid'>\r\n        <div class='col-12 flex gap-2 align-items-center'>\r\n          <button pButton type='button' label='Upload MIPS File' (click)='onOpen(displayMipsFileUploadDialog)'></button>\r\n          <button pButton type='button' label='Upload History' (click)='onOpen(displayMipsFileUploadHistoryDialog)'></button>\r\n        </div>\r\n      </div>\r\n    </p-panel>\r\n  </div>\r\n\r\n  <div class='col-6' *ngIf='showDetail && !isSearching'>\r\n    <n2-particulars [selectedId]='selectedId' [isNSman]=\"isNsman\"></n2-particulars>\r\n  </div>\r\n</div>\r\n\r\n<div class='grid'>\r\n  <div class='col-12' *ngIf='isSearching && !showDetail'>\r\n    <n2-search-overpayment #searchOP\r\n      [isNSman]='isNsman'\r\n      [searchInput]='searchInput'\r\n      (selectEvent)='handleSearchSelect($event)'>\r\n    </n2-search-overpayment>\r\n  </div>\r\n\r\n  <div class='col-12' *ngIf='showDetail && !isSearching'>\r\n    <n2-overpayment-info\r\n      [selectedId]='selectedId'\r\n      [isNSman]='isNsman'>\r\n    </n2-overpayment-info>\r\n  </div>\r\n</div>\r\n\r\n\r\n<p-dialog header='Upload MIPS File' [(visible)]='displayMipsFileUploadDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '50vw'}\" [draggable]='false' [resizable]='false' [modal]='true' (onHide)='resetFile()'>\r\n\r\n    <form [formGroup]=\"mipsFileUploadForm\">\r\n      <n2-file-upload #mipsFileUpload formControlName=\"file\" [externalFileLimit]=\"fileUploadFileLimit\"></n2-file-upload>\r\n    </form>\r\n\r\n  <ng-template pTemplate='footer'>\r\n    <button pButton class='p-button-danger' label='Cancel' (click)='displayMipsFileUploadDialog.display=false'\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n    <p-confirmPopup key='MipsFileUpload'></p-confirmPopup>\r\n    <button pButton label='Submit' (click)=\"onMipsFileSubmit($event, 'MipsFileUpload', displayMipsFileUploadDialog)\"\r\n            [disabled]=\"!mipsFileUploadForm.valid\"\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n  </ng-template>\r\n</p-dialog>\r\n\r\n<p-dialog header='MIPS File Upload History' [(visible)]='displayMipsFileUploadHistoryDialog.display'\r\n          [style]=\"{width: '90vw'}\" [draggable]='false' [resizable]='false' [modal]='true'>\r\n\r\n  <n2-mips-upload-history #mipsFileUploadHistory></n2-mips-upload-history>\r\n\r\n  <ng-template pTemplate='footer'></ng-template>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
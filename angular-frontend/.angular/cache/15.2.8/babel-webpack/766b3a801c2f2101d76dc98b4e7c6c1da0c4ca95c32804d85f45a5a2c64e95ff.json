{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReleaseKahRnsaByNricComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst nric_directive_1 = require(\"app/shared/validator/nric.directive\");\nconst nspapp_constants_1 = require(\"app/shared/constants/nspapp.constants\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i2 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i3 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i5 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i9 = tslib_1.__importStar(require(\"../../../../../shared/pipe/default-string.pipe\"));\nfunction ReleaseKahRnsaByNricComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.invalidNricMsg);\n  }\n}\nfunction ReleaseKahRnsaByNricComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"NRIC already added to list\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReleaseKahRnsaByNricComponent_ng_template_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ReleaseKahRnsaByNricComponent_ng_template_22_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n  \");\n  }\n}\nfunction ReleaseKahRnsaByNricComponent_ng_template_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"th\", 16);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"th\", 17);\n    i0.ɵɵtext(7, \"NRIC\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n      \");\n    i0.ɵɵelement(9, \"th\", 18);\n    i0.ɵɵtext(10, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n  \");\n  }\n}\nfunction ReleaseKahRnsaByNricComponent_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelementStart(11, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ReleaseKahRnsaByNricComponent_ng_template_26_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const nricToRelease_r8 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.removeRow(nricToRelease_r8));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n  \");\n  }\n  if (rf & 2) {\n    const nricToRelease_r8 = ctx.$implicit;\n    const i_r9 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r9 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(8, 2, nricToRelease_r8), \"\\n      \");\n  }\n}\nfunction ReleaseKahRnsaByNricComponent_ng_template_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\", 20);\n    i0.ɵɵtext(4, \"No KAH/RNSA records to be released.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n  }\n}\nconst _c0 = function () {\n  return {\n    \"padding-top\": \"3px\"\n  };\n};\nconst _c1 = function () {\n  return {\n    \"margin-left\": \"2rem\"\n  };\n};\nconst _c2 = function () {\n  return [10, 25, 50];\n};\nclass ReleaseKahRnsaByNricComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.invalidNricMsg = nspapp_constants_1.NSPAppConstants.INVALID_NRIC_FORMAT;\n    this.nricAlreadyExists = false;\n    this.releaseByNricForm = this.fb.group({\n      nricInputValue: new forms_1.FormControl(null, [(0, nric_directive_1.NRICValidator)(), forms_1.Validators.required])\n    });\n  }\n  ngOnInit() {\n    this.nricToReleaseMap = new Map();\n  }\n  exportCSV() {\n    console.log('Export CSV');\n  }\n  addStopPayment() {\n    // TODO: To call API endpoint to check if the NRIC exists in the current KAH/RNSA allowances list\n    const nricToRelease = this.releaseByNricForm.get('nricInputValue')?.value.toUpperCase();\n    // console.log('Checking if map contains nricToReleaseId: ' + nricToRelease);\n    if (!this.nricToReleaseMap.has(nricToRelease)) {\n      this.nricToReleaseMap.set(nricToRelease, nricToRelease);\n      this.releaseByNricForm.setValue({\n        'nricInputValue': ''\n      });\n      this.nricAlreadyExists = false;\n    } else {\n      // Ignore if NRIC already exists & display error span\n      this.nricAlreadyExists = true;\n    }\n  }\n  removeRow(nricToReleaseId) {\n    console.log('Removing row with ID: ' + nricToReleaseId);\n    this.nricToReleaseMap.delete(nricToReleaseId);\n  }\n  mapToArray(mapToConvert) {\n    return [...mapToConvert.values()];\n  }\n  resetNricAlreadyExists() {\n    this.nricAlreadyExists = false;\n  }\n  getNricList() {\n    return this.mapToArray(this.nricToReleaseMap);\n  }\n  reset() {\n    this.nricToReleaseMap.clear();\n    this.releaseByNricForm.reset();\n  }\n}\nexports.ReleaseKahRnsaByNricComponent = ReleaseKahRnsaByNricComponent;\nReleaseKahRnsaByNricComponent.ɵfac = function ReleaseKahRnsaByNricComponent_Factory(t) {\n  return new (t || ReleaseKahRnsaByNricComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nReleaseKahRnsaByNricComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReleaseKahRnsaByNricComponent,\n  selectors: [[\"n2-release-kah-rnsa-by-nric\"]],\n  decls: 31,\n  vars: 16,\n  consts: [[1, \"grid\", 3, \"formGroup\"], [1, \"col-6\", \"flex\", \"align-items-center\", \"justify-content-between\", \"gap-2\"], [\"formControlName\", \"nricInputValue\", \"type\", \"text\", \"pInputText\", \"\", \"maxlength\", \"\", 1, \"flex-auto\", 3, \"input\"], [1, \"col-4\", \"flex\", \"align-items-end\"], [\"class\", \"p-error\", 4, \"ngIf\"], [1, \"col-2\", \"flex\", \"justify-content-end\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Add\", 3, \"disabled\", \"click\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [1, \"p-error\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\", \"flex\", \"justify-content-start\", \"align-items-center\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file-o\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"scope\", \"col\", 1, \"sn-header\"], [\"scope\", \"col\", 1, \"nric-header\"], [\"scope\", \"col\", 1, \"remove-row-header\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-times\", \"pTooltip\", \"Remove row\", \"tooltipPosition\", \"left\", 3, \"click\"], [\"colspan\", \"3\"]],\n  template: function ReleaseKahRnsaByNricComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    NRIC \");\n      i0.ɵɵelementStart(4, \"input\", 2);\n      i0.ɵɵlistener(\"input\", function ReleaseKahRnsaByNricComponent_Template_input_input_4_listener() {\n        return ctx.resetNricAlreadyExists();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(5, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n  \");\n      i0.ɵɵelementStart(7, \"div\", 3);\n      i0.ɵɵtext(8, \"\\n     \");\n      i0.ɵɵtemplate(9, ReleaseKahRnsaByNricComponent_span_9_Template, 2, 1, \"span\", 4);\n      i0.ɵɵtext(10, \"\\n    \");\n      i0.ɵɵtemplate(11, ReleaseKahRnsaByNricComponent_span_11_Template, 2, 0, \"span\", 4);\n      i0.ɵɵtext(12, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n  \");\n      i0.ɵɵelementStart(14, \"div\", 5);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ReleaseKahRnsaByNricComponent_Template_button_click_16_listener() {\n        return ctx.addStopPayment();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\");\n      i0.ɵɵelementStart(20, \"p-table\", 7);\n      i0.ɵɵtext(21, \"\\n  \");\n      i0.ɵɵtemplate(22, ReleaseKahRnsaByNricComponent_ng_template_22_Template, 9, 0, \"ng-template\", 8);\n      i0.ɵɵtext(23, \"\\n  \");\n      i0.ɵɵtemplate(24, ReleaseKahRnsaByNricComponent_ng_template_24_Template, 12, 0, \"ng-template\", 9);\n      i0.ɵɵtext(25, \"\\n\\n  \");\n      i0.ɵɵtemplate(26, ReleaseKahRnsaByNricComponent_ng_template_26_Template, 15, 4, \"ng-template\", 10);\n      i0.ɵɵtext(27, \"\\n\\n  \");\n      i0.ɵɵtemplate(28, ReleaseKahRnsaByNricComponent_ng_template_28_Template, 7, 0, \"ng-template\", 11);\n      i0.ɵɵtext(29, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(30, \"\\n\");\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(13, _c0));\n      i0.ɵɵproperty(\"formGroup\", ctx.releaseByNricForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", (ctx.releaseByNricForm == null ? null : (tmp_2_0 = ctx.releaseByNricForm.get(\"nricInputValue\")) == null ? null : tmp_2_0.hasError(\"nric\")) && (ctx.releaseByNricForm == null ? null : (tmp_2_0 = ctx.releaseByNricForm.get(\"nricInputValue\")) == null ? null : tmp_2_0.dirty));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.nricAlreadyExists);\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(14, _c1));\n      i0.ɵɵproperty(\"disabled\", !(ctx.releaseByNricForm == null ? null : ctx.releaseByNricForm.valid));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.mapToArray(ctx.nricToReleaseMap))(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(15, _c2))(\"showCurrentPageReport\", true);\n    }\n  },\n  dependencies: [i2.ButtonDirective, i3.PrimeTemplate, i4.NgIf, i5.Tooltip, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, i6.Table, i7.InputText, i8.Ripple, i9.DefaultStringPipe],\n  styles: [\".sn-header[_ngcontent-%COMP%] {\\n  width: 3rem;\\n}\\n\\n.nric-header[_ngcontent-%COMP%] {\\n  width: 15rem;\\n}\\n\\n.remove-row-header[_ngcontent-%COMP%] {\\n  width: 3rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbGVhc2Uta2FoLXJuc2EtYnktbnJpYy5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFxwYXltZW50XFxiYW5rZmlsZS1zdG9wLXBheW1lbnRcXHN0b3AtcGF5bWVudFxca2FoLXJuc2EtcmVsZWFzZVxccmVsZWFzZS1rYWgtcm5zYS1ieS1ucmljXFxyZWxlYXNlLWthaC1ybnNhLWJ5LW5yaWMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0FDQ0YiLCJmaWxlIjoicmVsZWFzZS1rYWgtcm5zYS1ieS1ucmljLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNuLWhlYWRlciB7XHJcbiAgd2lkdGg6IDNyZW07XHJcbn1cclxuXHJcbi5ucmljLWhlYWRlciB7XHJcbiAgd2lkdGg6IDE1cmVtO1xyXG59XHJcblxyXG4ucmVtb3ZlLXJvdy1oZWFkZXIge1xyXG4gIHdpZHRoOiAzcmVtO1xyXG59XHJcbiIsIi5zbi1oZWFkZXIge1xuICB3aWR0aDogM3JlbTtcbn1cblxuLm5yaWMtaGVhZGVyIHtcbiAgd2lkdGg6IDE1cmVtO1xufVxuXG4ucmVtb3ZlLXJvdy1oZWFkZXIge1xuICB3aWR0aDogM3JlbTtcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9iYW5rZmlsZS1zdG9wLXBheW1lbnQvc3RvcC1wYXltZW50L2thaC1ybnNhLXJlbGVhc2UvcmVsZWFzZS1rYWgtcm5zYS1ieS1ucmljL3JlbGVhc2Uta2FoLXJuc2EtYnktbnJpYy5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9iYW5rZmlsZS1zdG9wLXBheW1lbnQvc3RvcC1wYXltZW50L2thaC1ybnNhLXJlbGVhc2UvcmVsZWFzZS1rYWgtcm5zYS1ieS1ucmljL3JlbGVhc2Uta2FoLXJuc2EtYnktbnJpYy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7QUNDRjtBRENBLDQ5QkFBNDlCIiwic291cmNlc0NvbnRlbnQiOlsiLnNuLWhlYWRlciB7XHJcbiAgd2lkdGg6IDNyZW07XHJcbn1cclxuXHJcbi5ucmljLWhlYWRlciB7XHJcbiAgd2lkdGg6IDE1cmVtO1xyXG59XHJcblxyXG4ucmVtb3ZlLXJvdy1oZWFkZXIge1xyXG4gIHdpZHRoOiAzcmVtO1xyXG59XHJcbiIsIi5zbi1oZWFkZXIge1xuICB3aWR0aDogM3JlbTtcbn1cblxuLm5yaWMtaGVhZGVyIHtcbiAgd2lkdGg6IDE1cmVtO1xufVxuXG4ucmVtb3ZlLXJvdy1oZWFkZXIge1xuICB3aWR0aDogM3JlbTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ReleaseKahRnsaByNricComponent","constructor","fb","nspapp_constants_1","INVALID_NRIC_FORMAT","group","nricInputValue","forms_1","required","ngOnInit","nricToReleaseMap","Map","exportCSV","console","log","addStopPayment","nricToRelease","releaseByNricForm","get","value","toUpperCase","has","set","setValue","nricAlreadyExists","removeRow","nricToReleaseId","delete","mapToArray","mapToConvert","values","resetNricAlreadyExists","getNricList","reset","clear","exports","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\bankfile-stop-payment\\stop-payment\\kah-rnsa-release\\release-kah-rnsa-by-nric\\release-kah-rnsa-by-nric.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\bankfile-stop-payment\\stop-payment\\kah-rnsa-release\\release-kah-rnsa-by-nric\\release-kah-rnsa-by-nric.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NRICValidator } from 'app/shared/validator/nric.directive';\r\nimport { NSPAppConstants } from 'app/shared/constants/nspapp.constants';\r\n\r\n@Component({\r\n  selector: 'n2-release-kah-rnsa-by-nric',\r\n  templateUrl: './release-kah-rnsa-by-nric.component.html',\r\n  styleUrls: ['./release-kah-rnsa-by-nric.component.scss']\r\n})\r\nexport class ReleaseKahRnsaByNricComponent implements OnInit {\r\n  invalidNricMsg: string = NSPAppConstants.INVALID_NRIC_FORMAT;\r\n  nricAlreadyExists = false;\r\n\r\n  nricToReleaseMap: Map<string, string>;\r\n  releaseByNricForm: FormGroup = this.fb.group({\r\n    nricInputValue: new FormControl(null, [NRICValidator(), Validators.required])\r\n  });\r\n\r\n  constructor(\r\n    private fb: FormBuilder\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.nricToReleaseMap = new Map<string, string>();\r\n  }\r\n\r\n  exportCSV(): void {\r\n    console.log('Export CSV');\r\n  }\r\n\r\n  addStopPayment(): void {\r\n    // TODO: To call API endpoint to check if the NRIC exists in the current KAH/RNSA allowances list\r\n    const nricToRelease = this.releaseByNricForm.get('nricInputValue')?.value.toUpperCase();\r\n    // console.log('Checking if map contains nricToReleaseId: ' + nricToRelease);\r\n    if (!this.nricToReleaseMap.has(nricToRelease)) {\r\n      this.nricToReleaseMap.set(nricToRelease, nricToRelease);\r\n      this.releaseByNricForm.setValue({ 'nricInputValue': '' });\r\n      this.nricAlreadyExists = false;\r\n    } else {\r\n      // Ignore if NRIC already exists & display error span\r\n      this.nricAlreadyExists = true;\r\n    }\r\n  }\r\n\r\n  removeRow(nricToReleaseId: string): void {\r\n    console.log('Removing row with ID: ' + nricToReleaseId);\r\n    this.nricToReleaseMap.delete(nricToReleaseId);\r\n  }\r\n\r\n  mapToArray(mapToConvert: Map<string, string>): string[] {\r\n    return [...mapToConvert.values()];\r\n  }\r\n\r\n  resetNricAlreadyExists(): void{\r\n    this.nricAlreadyExists = false;\r\n  }\r\n\r\n  getNricList(): string[] {\r\n    return this.mapToArray(this.nricToReleaseMap);\r\n  }\r\n\r\n  reset(): void {\r\n    this.nricToReleaseMap.clear();\r\n    this.releaseByNricForm.reset();\r\n  }\r\n}\r\n","<div [formGroup]='releaseByNricForm' class='grid' [style]=\"{'padding-top': '3px'}\">\r\n  <div class='col-6 flex align-items-center justify-content-between gap-2'>\r\n    NRIC <input (input)='resetNricAlreadyExists()'  class='flex-auto' formControlName='nricInputValue' type='text' pInputText maxlength=''/>\r\n  </div>\r\n  <div class='col-4 flex align-items-end'>\r\n     <span *ngIf=\"(releaseByNricForm?.get('nricInputValue')?.hasError('nric')\r\n      && releaseByNricForm?.get('nricInputValue')?.dirty)\" class='p-error'>{{invalidNricMsg}}</span>\r\n    <span *ngIf=\"nricAlreadyExists\" class='p-error'>NRIC already added to list</span>\r\n  </div>\r\n  <div class='col-2 flex justify-content-end'>\r\n    <button type='button' pButton pRipple label='Add' [disabled]='!releaseByNricForm?.valid' (click)='addStopPayment()'\r\n            [style]=\"{'margin-left': '2rem'}\"></button>\r\n  </div>\r\n</div>\r\n<p-table [value]='mapToArray(nricToReleaseMap)' styleClass='p-datatable-gridlines' [paginator]='true' [rows]='5'\r\n         [rowsPerPageOptions]='[10,25,50]'\r\n         [showCurrentPageReport]='true'\r\n         currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'>\r\n  <ng-template pTemplate='caption'>\r\n    <div class='grid'>\r\n      <div class='col-6 nsp-align-left flex justify-content-start align-items-center'>\r\n        <button type='button' pButton pRipple icon='pi pi-file-o' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                tooltipPosition='bottom'></button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template pTemplate='header'>\r\n    <tr>\r\n      <th scope=\"col\" class='sn-header'>SN</th>\r\n      <th scope=\"col\" class='nric-header'>NRIC</th>\r\n      <th scope=\"col\" class='remove-row-header'></th>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='body' let-nricToRelease let-i='rowIndex'>\r\n    <tr>\r\n      <td>{{i + 1}}</td>\r\n      <td>{{nricToRelease | defaultString}}\r\n      <td>\r\n        <button type='button' pButton pRipple icon='pi pi-times' (click)='removeRow(nricToRelease)'\r\n                pTooltip='Remove row'\r\n                tooltipPosition='left'></button>\r\n      </td>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='emptymessage'>\r\n    <tr>\r\n      <td colspan='3'>No KAH/RNSA records to be released.</td>\r\n    </tr>\r\n  </ng-template>\r\n</p-table>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ScheduleAdhocDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst schedule_model_1 = require(\"./schedule.model\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"./schedule.service\"));\nconst i2 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i3 = tslib_1.__importStar(require(\"app/ng-connect\"));\nconst i4 = tslib_1.__importStar(require(\"@ng-bootstrap/ng-bootstrap\"));\nconst i5 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/core/util/alert.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i9 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/confirmdialog\"));\nconst i11 = tslib_1.__importStar(require(\"../../shared/language/translate.directive\"));\nconst i12 = tslib_1.__importStar(require(\"../../ng-connect/i18n/ic-code-i18n.pipe\"));\nfunction ScheduleAdhocDialogComponent_ng_template_46_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"icCodeI18n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const jobParam_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", jobParam_r4.codeId, \": \", i0.ɵɵpipeBind1(4, 2, jobParam_r4.label), \"\");\n  }\n}\nfunction ScheduleAdhocDialogComponent_ng_template_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵtemplate(1, ScheduleAdhocDialogComponent_ng_template_46_div_1_Template, 6, 4, \"div\", 28);\n    i0.ɵɵtext(2, \"\\n          \");\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.jobParamList);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nclass ScheduleAdhocDialogComponent {\n  constructor(scheduleService, confirmationService, codeService, activeModal, eventManager, alertService) {\n    this.scheduleService = scheduleService;\n    this.confirmationService = confirmationService;\n    this.codeService = codeService;\n    this.activeModal = activeModal;\n    this.eventManager = eventManager;\n    this.alertService = alertService;\n    this.job = new schedule_model_1.Job();\n  }\n  ngOnInit() {\n    this.codeService.gets('batch_job_param').subscribe(codes => {\n      this.jobParamList = codes[0];\n    });\n    this.scheduleService.find(this.jobId).subscribe(res => {\n      this.job = res;\n      this.job.startDt = new Date(this.job.startDt);\n      if (this.job.endDt) {\n        this.job.endDt = new Date(this.job.endDt);\n      }\n      this.job.parameter = 'processDate=TODAY;';\n    });\n  }\n  cancel() {\n    this.activeModal.dismiss();\n  }\n  confirmRunAdhocJob(job) {\n    this.confirmationService.confirm({\n      message: 'Are you sure that you want to run this adhoc job?',\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      key: 'run-adhoc',\n      accept: () => {\n        this.runAdhocJob(job);\n      }\n    });\n  }\n  runAdhocJob(job) {\n    this.scheduleService.startAdhocJob(job).subscribe(() => {\n      this.activeModal.close();\n    }, res => {\n      this.alertService.addAlert({\n        type: 'danger',\n        translationKey: res.headers.get('X-Nspay2App-alert'),\n        translationParams: {\n          param: res.headers.get('X-Nspay2App-params')\n        }\n      });\n      this.activeModal.close(res);\n    });\n  }\n}\nexports.ScheduleAdhocDialogComponent = ScheduleAdhocDialogComponent;\nScheduleAdhocDialogComponent.ɵfac = function ScheduleAdhocDialogComponent_Factory(t) {\n  return new (t || ScheduleAdhocDialogComponent)(i0.ɵɵdirectiveInject(i1.ScheduleService), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i3.IcCodeService), i0.ɵɵdirectiveInject(i4.NgbActiveModal), i0.ɵɵdirectiveInject(i5.EventManager), i0.ɵɵdirectiveInject(i6.AlertService));\n};\nScheduleAdhocDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ScheduleAdhocDialogComponent,\n  selectors: [[\"ic-schedule-adhoc-dialog\"]],\n  decls: 89,\n  vars: 12,\n  consts: [[\"name\", \"runAdhocForm\", 3, \"ngSubmit\"], [\"adhocScheduleForm\", \"ngForm\"], [1, \"modal-header\"], [\"icTranslate\", \"schedule.home.runAdhoc\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [1, \"modal-body\"], [1, \"container-fluid\"], [1, \"row\", \"g-3\", \"gy-2\"], [1, \"col-sm-3\", \"form-control-label\"], [\"icTranslate\", \"schedule.home.name\"], [1, \"col-sm-9\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"maxlength\", \"255\", 1, \"form-control\", 3, \"ngModel\", \"readonly\", \"ngModelChange\"], [\"icTranslate\", \"schedule.home.description\"], [\"type\", \"text\", \"id\", \"description\", \"name\", \"description\", \"maxlength\", \"255\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"icTranslate\", \"schedule.home.parameter\"], [\"type\", \"button\", \"placement\", \"bottom\", \"triggers\", \"click:blur\", 1, \"btn\", \"btn-info\", \"btn-sm\", 3, \"ngbTooltip\"], [3, \"icon\"], [\"paramList\", \"\"], [\"type\", \"text\", \"pattern\", \"^([^=;\\\\s]+={1}[^=;\\\\s]+;)*$\", \"id\", \"parameter\", \"name\", \"parameter\", \"maxlength\", \"255\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"hidden\"], [1, \"form-text\", \"text-danger\"], [\"id\", \"parameterHelp\", 1, \"form-text\", \"text-muted\"], [1, \"modal-footer\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\"], [\"icTranslate\", \"schedule.btn.start\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"icTranslate\", \"entity.action.cancel\"], [\"header\", \"Confirmation\", \"key\", \"run-adhoc\", \"icon\", \"pi pi-exclamation-triangle\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function ScheduleAdhocDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function ScheduleAdhocDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.confirmRunAdhocJob(ctx.job);\n      });\n      i0.ɵɵtext(2, \"\\n  \");\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"h4\", 3);\n      i0.ɵɵtext(6, \"Run Adhoc Job\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ScheduleAdhocDialogComponent_Template_button_click_8_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(9, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\\n  \");\n      i0.ɵɵelementStart(12, \"div\", 5);\n      i0.ɵɵtext(13, \"\\n    \");\n      i0.ɵɵelementStart(14, \"div\", 6);\n      i0.ɵɵtext(15, \"\\n      \");\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵtext(17, \"\\n        \");\n      i0.ɵɵelementStart(18, \"label\", 8)(19, \"span\", 9);\n      i0.ɵɵtext(20, \"Job Name\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(21, \"\\n        \");\n      i0.ɵɵelementStart(22, \"div\", 10);\n      i0.ɵɵtext(23, \"\\n          \");\n      i0.ɵɵelementStart(24, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function ScheduleAdhocDialogComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.job.name = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n        \");\n      i0.ɵɵelementStart(27, \"label\", 8)(28, \"span\", 12);\n      i0.ɵɵtext(29, \"Schedule Description\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(30, \"\\n        \");\n      i0.ɵɵelementStart(31, \"div\", 10);\n      i0.ɵɵtext(32, \"\\n          \");\n      i0.ɵɵelementStart(33, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function ScheduleAdhocDialogComponent_Template_input_ngModelChange_33_listener($event) {\n        return ctx.job.description = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n        \");\n      i0.ɵɵelementStart(36, \"label\", 8);\n      i0.ɵɵtext(37, \"\\n          \");\n      i0.ɵɵelementStart(38, \"span\", 14);\n      i0.ɵɵtext(39, \"Job Parameter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n          \");\n      i0.ɵɵelementStart(41, \"button\", 15);\n      i0.ɵɵtext(42, \"\\n            \");\n      i0.ɵɵelement(43, \"fa-icon\", 16);\n      i0.ɵɵtext(44, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(45, \"\\n          \");\n      i0.ɵɵtemplate(46, ScheduleAdhocDialogComponent_ng_template_46_Template, 3, 1, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(48, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(49, \"\\n        \");\n      i0.ɵɵelementStart(50, \"div\", 10);\n      i0.ɵɵtext(51, \"\\n          \");\n      i0.ɵɵelementStart(52, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function ScheduleAdhocDialogComponent_Template_input_ngModelChange_52_listener($event) {\n        return ctx.job.parameter = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n          \");\n      i0.ɵɵelementStart(54, \"div\", 19);\n      i0.ɵɵtext(55, \"\\n            \");\n      i0.ɵɵelementStart(56, \"small\", 20);\n      i0.ɵɵtext(57, \"\\n              Pattern validation failed.\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(58, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n          \");\n      i0.ɵɵelementStart(60, \"small\", 21);\n      i0.ɵɵtext(61, \"Please use key=value format separate by semicolon(;)\\n            e.g. foo=bar;foo2=bar2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(64, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(66, \"\\n\\n  \");\n      i0.ɵɵelementStart(67, \"div\", 22);\n      i0.ɵɵtext(68, \"\\n    \");\n      i0.ɵɵelementStart(69, \"button\", 23);\n      i0.ɵɵtext(70, \"\\n      \");\n      i0.ɵɵelement(71, \"fa-icon\", 16);\n      i0.ɵɵtext(72, \"\\u00A0\");\n      i0.ɵɵelementStart(73, \"span\", 24);\n      i0.ɵɵtext(74, \"Start Scheduling\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(75, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n    \");\n      i0.ɵɵelementStart(77, \"button\", 25);\n      i0.ɵɵlistener(\"click\", function ScheduleAdhocDialogComponent_Template_button_click_77_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(78, \"\\n      \");\n      i0.ɵɵelement(79, \"fa-icon\", 16);\n      i0.ɵɵtext(80, \"\\u00A0\");\n      i0.ɵɵelementStart(81, \"span\", 26);\n      i0.ɵɵtext(82, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(83, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(84, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(85, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(86, \"\\n\");\n      i0.ɵɵelement(87, \"p-confirmDialog\", 27);\n      i0.ɵɵtext(88, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      const _r1 = i0.ɵɵreference(47);\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngModel\", ctx.job.name)(\"readonly\", true);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.job.description);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngbTooltip\", _r1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"icon\", \"info-circle\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.job.parameter);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.parameter == null ? null : _r0.controls.parameter.invalid));\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"icon\", \"play\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"icon\", \"ban\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(11, _c0));\n    }\n  },\n  dependencies: [i7.NgForOf, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.MaxLengthValidator, i8.PatternValidator, i8.NgModel, i8.NgForm, i4.NgbTooltip, i9.FaIconComponent, i10.ConfirmDialog, i11.TranslateDirective, i12.IcCodeI18nPipe],\n  styles: [\".icon[_ngcontent-%COMP%] {\\n  pointer-events: none;\\n  border-radius: 15px;\\n  background-color: rgba(245, 7, 30, 0.7019607843);\\n  border-color: rgba(245, 7, 30, 0.7019607843);\\n  transform: scale(0.9);\\n}\\n\\n.status-col[_ngcontent-%COMP%] {\\n  padding: 0.55rem;\\n  position: relative;\\n  vertical-align: middle;\\n  text-align: left;\\n}\\n\\n.status-label[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0.8rem;\\n}\\n\\n.float-end[_ngcontent-%COMP%] {\\n  margin-right: 1rem;\\n}\\n\\n.btn-ready[_ngcontent-%COMP%] {\\n  color: #fff;\\n  background-color: rgba(22, 245, 7, 0.7019607843);\\n  border-color: rgba(22, 245, 7, 0.7019607843);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXGFkbWluXFxzY2hlZHVsZVxcc2NoZWR1bGUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0RBQUE7RUFDQSw0Q0FBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxnQkFBQTtBQ0NGOztBREVBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtFQUNBLGdEQUFBO0VBQ0EsNENBQUE7QUNDRiIsImZpbGUiOiJzY2hlZHVsZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29uIHtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNTA3MWViMztcclxuICBib3JkZXItY29sb3I6ICNmNTA3MWViMztcclxuICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XHJcbn1cclxuXHJcbi5zdGF0dXMtY29sIHtcclxuICBwYWRkaW5nOiAwLjU1cmVtO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuXHJcbi5zdGF0dXMtbGFiZWwge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDAuOHJlbTtcclxufVxyXG5cclxuLmZsb2F0LWVuZCB7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xyXG59XHJcblxyXG4uYnRuLXJlYWR5IHtcclxuICBjb2xvcjogI2ZmZjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTZmNTA3YjM7XHJcbiAgYm9yZGVyLWNvbG9yOiAjMTZmNTA3YjM7XHJcbn1cclxuIiwiLmljb24ge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDUsIDcsIDMwLCAwLjcwMTk2MDc4NDMpO1xuICBib3JkZXItY29sb3I6IHJnYmEoMjQ1LCA3LCAzMCwgMC43MDE5NjA3ODQzKTtcbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjkpO1xufVxuXG4uc3RhdHVzLWNvbCB7XG4gIHBhZGRpbmc6IDAuNTVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbn1cblxuLnN0YXR1cy1sYWJlbCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwLjhyZW07XG59XG5cbi5mbG9hdC1lbmQge1xuICBtYXJnaW4tcmlnaHQ6IDFyZW07XG59XG5cbi5idG4tcmVhZHkge1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMiwgMjQ1LCA3LCAwLjcwMTk2MDc4NDMpO1xuICBib3JkZXItY29sb3I6IHJnYmEoMjIsIDI0NSwgNywgMC43MDE5NjA3ODQzKTtcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvYWRtaW4vc2NoZWR1bGUvc2NoZWR1bGUuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL2FkbWluL3NjaGVkdWxlL3NjaGVkdWxlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdEQUFBO0VBQ0EsNENBQUE7RUFDQSxxQkFBQTtBQ0NGOztBREVBO0VBQ0UsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7QUNDRjs7QURFQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtBQ0NGOztBREVBO0VBQ0Usa0JBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7RUFDQSxnREFBQTtFQUNBLDRDQUFBO0FDQ0Y7QURDQSw0aUVBQTRpRSIsInNvdXJjZXNDb250ZW50IjpbIi5pY29uIHtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNTA3MWViMztcclxuICBib3JkZXItY29sb3I6ICNmNTA3MWViMztcclxuICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XHJcbn1cclxuXHJcbi5zdGF0dXMtY29sIHtcclxuICBwYWRkaW5nOiAwLjU1cmVtO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuXHJcbi5zdGF0dXMtbGFiZWwge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDAuOHJlbTtcclxufVxyXG5cclxuLmZsb2F0LWVuZCB7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xyXG59XHJcblxyXG4uYnRuLXJlYWR5IHtcclxuICBjb2xvcjogI2ZmZjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTZmNTA3YjM7XHJcbiAgYm9yZGVyLWNvbG9yOiAjMTZmNTA3YjM7XHJcbn1cclxuIiwiLmljb24ge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDUsIDcsIDMwLCAwLjcwMTk2MDc4NDMpO1xuICBib3JkZXItY29sb3I6IHJnYmEoMjQ1LCA3LCAzMCwgMC43MDE5NjA3ODQzKTtcbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjkpO1xufVxuXG4uc3RhdHVzLWNvbCB7XG4gIHBhZGRpbmc6IDAuNTVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbn1cblxuLnN0YXR1cy1sYWJlbCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwLjhyZW07XG59XG5cbi5mbG9hdC1lbmQge1xuICBtYXJnaW4tcmlnaHQ6IDFyZW07XG59XG5cbi5idG4tcmVhZHkge1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMiwgMjQ1LCA3LCAwLjcwMTk2MDc4NDMpO1xuICBib3JkZXItY29sb3I6IHJnYmEoMjIsIDI0NSwgNywgMC43MDE5NjA3ODQzKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;AAIA;;;;;;;;;;;;;;;;ICmBYA,2BAA2C;IACzCA;IAAAA,4BAAM;IAAAA,YAAoD;;IAAAA,iBAAO;IACnEA;IAAAA,iBAAM;;;;IADEA,eAAoD;IAApDA,gGAAoD;;;;;IAD5DA;IAAAA,6FAEM;IACRA;;;;IAH4BA,eAAe;IAAfA,6CAAe;;;;;;;;ADdrD,MAKaC,4BAA4B;EAKvCC,YAAsBC,eAAgC,EAAUC,mBAAwC,EAAUC,WAA0B,EAASC,WAA2B,EAAYC,YAA0B,EAAUC,YAA0B;IAApO,oBAAe,GAAfL,eAAe;IAA2B,wBAAmB,GAAnBC,mBAAmB;IAA+B,gBAAW,GAAXC,WAAW;IAAwB,gBAAW,GAAXC,WAAW;IAA4B,iBAAY,GAAZC,YAAY;IAAwB,iBAAY,GAAZC,YAAY;IAH5O,QAAG,GAAQ,IAAIC,oBAAG,EAAE;EAGyO;EAE7PC,QAAQ;IACN,IAAI,CAACL,WAAW,CAACM,IAAI,CAAC,iBAAiB,CAAC,CAACC,SAAS,CAAEC,KAAY,IAAI;MAClE,IAAI,CAACC,YAAY,GAAGD,KAAK,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC;IACF,IAAI,CAACV,eAAe,CAACY,IAAI,CAAC,IAAI,CAACC,KAAK,CAAC,CAACJ,SAAS,CAACK,GAAG,IAAG;MACpD,IAAI,CAACC,GAAG,GAAGD,GAAG;MACd,IAAI,CAACC,GAAG,CAACC,OAAO,GAAG,IAAIC,IAAI,CAAC,IAAI,CAACF,GAAG,CAACC,OAAc,CAAC;MACpD,IAAI,IAAI,CAACD,GAAG,CAACG,KAAK,EAAE;QAClB,IAAI,CAACH,GAAG,CAACG,KAAK,GAAG,IAAID,IAAI,CAAC,IAAI,CAACF,GAAG,CAACG,KAAY,CAAC;;MAElD,IAAI,CAACH,GAAG,CAACI,SAAS,GAAG,oBAAoB;IAC3C,CAAC,CAAC;EACJ;EAEAC,MAAM;IACJ,IAAI,CAACjB,WAAW,CAACkB,OAAO,EAAE;EAC5B;EAEOC,kBAAkB,CAACP,GAAQ;IAChC,IAAI,CAACd,mBAAmB,CAACsB,OAAO,CAAC;MAC/BC,OAAO,EAAE,mDAAmD;MAC5DC,MAAM,EAAE,cAAc;MACtBC,IAAI,EAAE,4BAA4B;MAClCC,GAAG,EAAE,WAAW;MAChBC,MAAM,EAAE,MAAK;QACX,IAAI,CAACC,WAAW,CAACd,GAAG,CAAC;MACvB;KACD,CAAC;EACJ;EAEAc,WAAW,CAACd,GAAQ;IAClB,IAAI,CAACf,eAAe,CAAC8B,aAAa,CAACf,GAAG,CAAC,CAACN,SAAS,CAAC,MAAK;MACrD,IAAI,CAACN,WAAW,CAAC4B,KAAK,EAAE;IAC1B,CAAC,EAAGjB,GAAG,IAAI;MACT,IAAI,CAACT,YAAY,CAAC2B,QAAQ,CAAC;QAAEC,IAAI,EAAE,QAAQ;QACzCC,cAAc,EAAEpB,GAAG,CAACqB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;QACpDC,iBAAiB,EAAE;UAACC,KAAK,EAAExB,GAAG,CAACqB,OAAO,CAACC,GAAG,CAAC,oBAAoB;QAAC;MAAC,CAAC,CAAC;MACrE,IAAI,CAACjC,WAAW,CAAC4B,KAAK,CAACjB,GAAG,CAAC;IAC7B,CAAC,CAAC;EACJ;;AAnDFyB;;mBAKazC,4BAA4B;AAAA;;QAA5BA,4BAA4B;EAAA0C;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCdzC/C,kCAA4F;MAAlEA;QAAA,OAAYgD,+BAAwB;MAAA,EAAC;MAC7DhD;MAAAA,8BAA0B;MACxBA;MAAAA,6BAA6D;MAAAA,6BAAa;MAAAA,iBAAK;MAC/EA;MAAAA,iCAA+F;MAAnBA;QAAA,OAASgD,YAAQ;MAAA,EAAC;MAAChD,sBAAO;MAAAA,iBAAS;MACjHA;MAAAA,iBAAM;MAENA;MAAAA,+BAAwB;MACtBA;MAAAA,+BAA6B;MAC3BA;MAAAA,+BAA0B;MACxBA;MAAAA,iCAA2C;MAAuCA,yBAAQ;MAAAA,iBAAO;MACjGA;MAAAA,gCAAsB;MACpBA;MAAAA,kCAAwH;MAAhFA;QAAA;MAAA,EAAsB;MAA9DA,iBAAwH;MAC1HA;MAAAA,iBAAM;MACNA;MAAAA,iCAA2C;MAA8CA,qCAAoB;MAAAA,iBAAO;MACpHA;MAAAA,gCAAsB;MACpBA;MAAAA,kCAA4H;MAApFA;QAAA;MAAA,EAA6B;MAArEA,iBAA4H;MAC9HA;MAAAA,iBAAM;MACNA;MAAAA,iCAA2C;MACzCA;MAAAA,iCAA4C;MAAAA,8BAAa;MAAAA,iBAAO;MAChEA;MAAAA,mCAAoH;MAClHA;MAAAA,+BAA0C;MAC5CA;MAAAA,iBAAS;MACTA;MAAAA,iIAIc;MAChBA;MAAAA,iBAAQ;MACRA;MAAAA,gCAAuB;MACrBA;MAAAA,kCAA2J;MAA9EA;QAAA;MAAA,EAA2B;MAAxGA,iBAA2J;MAC3JA;MAAAA,gCAA+D;MAC7DA;MAAAA,kCAAqC;MACnCA,yEACF;MAAAA,iBAAQ;MACVA;MAAAA,iBAAM;MACNA;MAAAA,kCAAuD;MAAAA,yGAC/B;MAAAA,iBAAQ;MAClCA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MAENA;MAAAA,gCAA0B;MACxBA;MAAAA,mCAAqD;MACnDA;MAAAA,+BAAmC;MAAAA,uBAAM;MAAAA,iCAAuC;MAAAA,iCAAgB;MAAAA,iBAAO;MACzGA;MAAAA,iBAAS;MACTA;MAAAA,mCAA+F;MAAnBA;QAAA,OAASgD,YAAQ;MAAA,EAAC;MAC5FhD;MAAAA,+BAAkC;MAAAA,uBAAM;MAAAA,iCAAyC;MAAAA,uBAAM;MAAAA,iBAAO;MAChGA;MAAAA,iBAAS;MACXA;MAAAA,iBAAM;MACRA;MAAAA,iBAAO;MACPA;MAAAA,uCAAuI;MACvIA;;;;;MAzCkDA,gBAAsB;MAAtBA,sCAAsB;MAItBA,eAA6B;MAA7BA,6CAA6B;MAIAA,eAAwB;MAAxBA,gCAAwB;MAClFA,eAAsB;MAAtBA,oCAAsB;MAS4CA,eAA2B;MAA3BA,2CAA2B;MACnGA,eAAyD;MAAzDA,kGAAyD;MAczDA,gBAAe;MAAfA,6BAAe;MAGfA,eAAc;MAAdA,4BAAc;MAI0BA,eAA2B;MAA3BA,0CAA2B","names":["i0","ScheduleAdhocDialogComponent","constructor","scheduleService","confirmationService","codeService","activeModal","eventManager","alertService","schedule_model_1","ngOnInit","gets","subscribe","codes","jobParamList","find","jobId","res","job","startDt","Date","endDt","parameter","cancel","dismiss","confirmRunAdhocJob","confirm","message","header","icon","key","accept","runAdhocJob","startAdhocJob","close","addAlert","type","translationKey","headers","get","translationParams","param","exports","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\schedule\\schedule-adhoc-dialog.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\schedule\\schedule-adhoc-dialog.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { ScheduleService } from './schedule.service';\r\nimport { Job } from './schedule.model';\r\nimport { AlertService } from 'app/core/util/alert.service';\r\nimport { CodeView, IcCodeService } from 'app/ng-connect';\r\nimport { ConfirmationService } from 'primeng/api';\r\n\r\n@Component({\r\n  selector: 'ic-schedule-adhoc-dialog',\r\n  templateUrl: './schedule-adhoc-dialog.component.html',\r\n  styleUrls: ['./schedule.component.scss'],\r\n})\r\nexport class ScheduleAdhocDialogComponent implements OnInit {\r\n  jobId?: string;\r\n  job: Job = new Job();\r\n  jobParamList?: CodeView[];\r\n\r\n  constructor(protected scheduleService: ScheduleService, private confirmationService: ConfirmationService, private codeService: IcCodeService, public activeModal: NgbActiveModal, protected eventManager: EventManager, private alertService: AlertService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.codeService.gets('batch_job_param').subscribe((codes: any[]) => {\r\n      this.jobParamList = codes[0];\r\n    });\r\n    this.scheduleService.find(this.jobId).subscribe(res => {\r\n      this.job = res;\r\n      this.job.startDt = new Date(this.job.startDt as any);\r\n      if (this.job.endDt) {\r\n        this.job.endDt = new Date(this.job.endDt as any);\r\n      }\r\n      this.job.parameter = 'processDate=TODAY;';\r\n    });\r\n  }\r\n\r\n  cancel(): void {\r\n    this.activeModal.dismiss();\r\n  }\r\n\r\n  public confirmRunAdhocJob(job: Job): void {\r\n    this.confirmationService.confirm({\r\n      message: 'Are you sure that you want to run this adhoc job?',\r\n      header: 'Confirmation',\r\n      icon: 'pi pi-exclamation-triangle',\r\n      key: 'run-adhoc',\r\n      accept: () => {\r\n        this.runAdhocJob(job);\r\n      },\r\n    });\r\n  }\r\n\r\n  runAdhocJob(job: Job): void {\r\n    this.scheduleService.startAdhocJob(job).subscribe(() => {\r\n      this.activeModal.close();\r\n    }, (res) => {\r\n      this.alertService.addAlert({ type: 'danger',\r\n        translationKey: res.headers.get('X-Nspay2App-alert'),\r\n        translationParams: {param: res.headers.get('X-Nspay2App-params')}});\r\n      this.activeModal.close(res);\r\n    });\r\n  }\r\n}\r\n","<form name=\"runAdhocForm\" (ngSubmit)=\"confirmRunAdhocJob(job!)\" #adhocScheduleForm=\"ngForm\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" icTranslate=\"schedule.home.runAdhoc\">Run Adhoc Job</h4>\r\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" (click)=\"cancel()\">&times;</button>\r\n  </div>\r\n\r\n  <div class=\"modal-body\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row g-3 gy-2\">\r\n        <label class=\"col-sm-3 form-control-label\"><span icTranslate=\"schedule.home.name\">Job Name</span></label>\r\n        <div class=\"col-sm-9\">\r\n          <input type=\"text\" class=\"form-control\" [(ngModel)]=\"job.name\" id=\"name\" name=\"name\" maxlength=\"255\" [readonly]=\"true\"/>\r\n        </div>\r\n        <label class=\"col-sm-3 form-control-label\"><span icTranslate=\"schedule.home.description\">Schedule Description</span></label>\r\n        <div class=\"col-sm-9\">\r\n          <input type=\"text\" class=\"form-control\" [(ngModel)]=\"job.description\" id=\"description\" name=\"description\" maxlength=\"255\" />\r\n        </div>\r\n        <label class=\"col-sm-3 form-control-label\">\r\n          <span icTranslate=\"schedule.home.parameter\">Job Parameter</span>\r\n          <button type=\"button\" class=\"btn btn-info btn-sm\" placement=\"bottom\" [ngbTooltip]=\"paramList\" triggers=\"click:blur\">\r\n            <fa-icon [icon]=\"'info-circle'\"></fa-icon>\r\n          </button>\r\n          <ng-template #paramList>\r\n            <div *ngFor=\"let jobParam of jobParamList\">\r\n              <span>{{jobParam.codeId}}: {{jobParam.label | icCodeI18n}}</span>\r\n            </div>\r\n          </ng-template>\r\n        </label>\r\n        <div class=\"col-sm-9\" >\r\n          <input type=\"text\" class=\"form-control\" pattern=\"^([^=;\\s]+={1}[^=;\\s]+;)*$\" [(ngModel)]=\"job.parameter\" id=\"parameter\" name=\"parameter\" maxlength=\"255\" />\r\n          <div [hidden]=\"!adhocScheduleForm.controls.parameter?.invalid\">\r\n            <small class=\"form-text text-danger\">\r\n              Pattern validation failed.\r\n            </small>\r\n          </div>\r\n          <small id=\"parameterHelp\" class=\"form-text text-muted\">Please use key=value format separate by semicolon(;)\r\n            e.g. foo=bar;foo2=bar2</small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"modal-footer\">\r\n    <button type=\"submit\" class=\"btn btn-primary btn-sm\">\r\n      <fa-icon [icon]=\"'play'\"></fa-icon>&nbsp;<span icTranslate=\"schedule.btn.start\">Start Scheduling</span>\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-dismiss=\"modal\" (click)=\"cancel()\">\r\n      <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n<p-confirmDialog header=\"Confirmation\" key=\"run-adhoc\" [style]=\"{ width: '50vw' }\" icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
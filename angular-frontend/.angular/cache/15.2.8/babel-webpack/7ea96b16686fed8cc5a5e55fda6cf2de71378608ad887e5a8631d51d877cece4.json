{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MainComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst router_1 = require(\"@angular/router\");\nconst dayjs_1 = tslib_1.__importDefault(require(\"dayjs\"));\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/core/auth/account.service\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/platform-browser\"));\nconst i3 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i4 = tslib_1.__importStar(require(\"../sidebar/global.state\"));\nconst i5 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i6 = tslib_1.__importStar(require(\"@ngx-translate/core\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i8 = tslib_1.__importStar(require(\"../service/customtoast.service\"));\nconst i9 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/toast\"));\nconst i11 = tslib_1.__importStar(require(\"../footer/footer.component\"));\nconst i12 = tslib_1.__importStar(require(\"../sidebar/sidebar.component\"));\nconst _c0 = function (a0, a1) {\n  return {\n    \"col-xs\": a0,\n    \"\": a1\n  };\n};\nclass MainComponent {\n  constructor(accountService, titleService, router, _state, eventManager, translateService, messageService, toastService, rootRenderer) {\n    this.accountService = accountService;\n    this.titleService = titleService;\n    this.router = router;\n    this._state = _state;\n    this.eventManager = eventManager;\n    this.translateService = translateService;\n    this.messageService = messageService;\n    this.toastService = toastService;\n    this.isMenuCollapsed = false;\n    this.isShowMenu = false;\n    this.renderer = rootRenderer.createRenderer(document.querySelector('html'), null);\n    this._state.subscribe('menu.isCollapsed', isCollapsed => {\n      this.isMenuCollapsed = isCollapsed;\n    });\n  }\n  ngOnInit() {\n    // try to log in automatically\n    this.accountService.identity().subscribe();\n    this.router.events.subscribe(event => {\n      if (event instanceof router_1.NavigationEnd) {\n        this.updateTitle();\n      }\n      if (event instanceof router_1.NavigationError && event.error.status === 404) {\n        this.router.navigate(['/404']);\n      }\n    });\n    this.eventManager.subscribe('accountDataBack', () => {\n      this.menusStyle = this.accountService.getMenusStyle();\n    });\n    this.translateService.onLangChange.subscribe(langChangeEvent => {\n      this.updateTitle();\n      dayjs_1.default.locale(langChangeEvent.lang);\n      this.renderer.setAttribute(document.querySelector('html'), 'lang', langChangeEvent.lang);\n    });\n    this.toastService.listen.subscribe(res => this.messageService.add(res));\n  }\n  showcaseMenu() {\n    if (this.accountService.isAuthenticated()) {\n      const menus = this.accountService.getMenus();\n      if (menus && menus.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return false;\n  }\n  getPageTitle(routeSnapshot) {\n    let title = routeSnapshot.data['pageTitle'] ?? '';\n    if (routeSnapshot.firstChild) {\n      title = this.getPageTitle(routeSnapshot.firstChild) || title;\n    }\n    return title;\n  }\n  updateTitle() {\n    let pageTitle = this.getPageTitle(this.router.routerState.snapshot.root);\n    if (!pageTitle) {\n      pageTitle = 'global.title';\n    }\n    this.translateService.get(pageTitle).subscribe(title => this.titleService.setTitle(title));\n  }\n}\nexports.MainComponent = MainComponent;\nMainComponent.ɵfac = function MainComponent_Factory(t) {\n  return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.GlobalState), i0.ɵɵdirectiveInject(i5.EventManager), i0.ɵɵdirectiveInject(i6.TranslateService), i0.ɵɵdirectiveInject(i7.MessageService), i0.ɵɵdirectiveInject(i8.CustomToastService), i0.ɵɵdirectiveInject(i0.RendererFactory2));\n};\nMainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MainComponent,\n  selectors: [[\"ic-main\"]],\n  decls: 30,\n  vars: 8,\n  consts: [[3, \"baseZIndex\"], [\"name\", \"navbar\"], [1, \"container-fluid\", 2, \"padding-left\", \"34px\", \"float\", \"right\"], [1, \"card\", 2, \"padding-bottom\", \"15px\", \"display\", \"block\"], [\"id\", \"hiddenMenu\", 1, \"col-sm-3\", \"col-md-2\", \"sidebar-lg-block\", \"d-lg-block\"], [3, \"showMenu\"], [1, \"ms-sm-auto\", \"ms-md-auto\", \"al-main\", 2, \"margin-top\", \"80px\", \"margin-left\", \"1rem !important\", \"padding-left\", \"15px\", \"padding-right\", \"15px\", 3, \"ngClass\"], [\"name\", \"popup\"], [1, \"\"]],\n  template: function MainComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"p-toast\", 0);\n      i0.ɵɵtext(1, \"\\n\\n\");\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵtext(3, \"\\n  \");\n      i0.ɵɵelement(4, \"router-outlet\", 1);\n      i0.ɵɵtext(5, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n\\n\");\n      i0.ɵɵelementStart(7, \"div\", 2);\n      i0.ɵɵtext(8, \"\\n  \");\n      i0.ɵɵelementStart(9, \"div\", 3);\n      i0.ɵɵtext(10, \"\\n    \");\n      i0.ɵɵelementStart(11, \"nav\", 4);\n      i0.ɵɵtext(12, \"\\n      \");\n      i0.ɵɵelement(13, \"ic-sidebar\", 5);\n      i0.ɵɵtext(14, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"div\", 6);\n      i0.ɵɵtext(17, \"\\n      \");\n      i0.ɵɵelement(18, \"router-outlet\");\n      i0.ɵɵtext(19, \"\\n      \");\n      i0.ɵɵelement(20, \"router-outlet\", 7);\n      i0.ɵɵtext(21, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n  \");\n      i0.ɵɵelementStart(24, \"div\", 8);\n      i0.ɵɵtext(25, \"\\n    \");\n      i0.ɵɵelement(26, \"ic-footer\");\n      i0.ɵɵtext(27, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"baseZIndex\", 9999);\n      i0.ɵɵadvance(7);\n      i0.ɵɵclassProp(\"menu-collapsed\", ctx.isMenuCollapsed);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"showMenu\", ctx.showcaseMenu());\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, ctx.isMenuCollapsed, !ctx.isMenuCollapsed));\n    }\n  },\n  dependencies: [i9.NgClass, i3.RouterOutlet, i10.Toast, i11.FooterComponent, i12.IcSidebarComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["MainComponent","constructor","accountService","titleService","router","_state","eventManager","translateService","messageService","toastService","rootRenderer","renderer","createRenderer","document","querySelector","subscribe","isCollapsed","isMenuCollapsed","ngOnInit","identity","events","event","router_1","updateTitle","error","status","navigate","menusStyle","getMenusStyle","onLangChange","langChangeEvent","dayjs_1","locale","lang","setAttribute","listen","res","add","showcaseMenu","isAuthenticated","menus","getMenus","length","getPageTitle","routeSnapshot","title","data","firstChild","pageTitle","routerState","snapshot","root","get","setTitle","exports","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\layouts\\main\\main.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\layouts\\main\\main.component.html"],"sourcesContent":["import { Component, OnInit, RendererFactory2, Renderer2 } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { Router, ActivatedRouteSnapshot, NavigationEnd, NavigationError } from '@angular/router';\r\nimport { TranslateService, LangChangeEvent } from '@ngx-translate/core';\r\nimport dayjs from 'dayjs';\r\nimport { GlobalState } from '../sidebar/global.state';\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { MessageService } from 'primeng/api';\r\nimport { CustomToastService } from '../service/customtoast.service';\r\n\r\n@Component({\r\n  selector: 'ic-main',\r\n  templateUrl: './main.component.html',\r\n})\r\nexport class MainComponent implements OnInit {\r\n  isMenuCollapsed = false;\r\n  public isShowMenu = false;\r\n  public menusStyle: string | undefined;\r\n  private renderer: Renderer2;\r\n\r\n  constructor(\r\n    private accountService: AccountService,\r\n    private titleService: Title,\r\n    private router: Router,\r\n    private _state: GlobalState,\r\n    private eventManager: EventManager,\r\n    private translateService: TranslateService,\r\n    private messageService: MessageService,\r\n    private toastService: CustomToastService,\r\n    rootRenderer: RendererFactory2\r\n  ) {\r\n    this.renderer = rootRenderer.createRenderer(document.querySelector('html'), null);\r\n    this._state.subscribe('menu.isCollapsed', (isCollapsed: boolean) => {\r\n      this.isMenuCollapsed = isCollapsed;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // try to log in automatically\r\n    this.accountService.identity().subscribe();\r\n\r\n    this.router.events.subscribe(event => {\r\n      if (event instanceof NavigationEnd) {\r\n        this.updateTitle();\r\n      }\r\n      if (event instanceof NavigationError && event.error.status === 404) {\r\n        this.router.navigate(['/404']);\r\n      }\r\n    });\r\n\r\n    this.eventManager.subscribe('accountDataBack', () => {\r\n      this.menusStyle = this.accountService.getMenusStyle();\r\n    });\r\n    this.translateService.onLangChange.subscribe((langChangeEvent: LangChangeEvent) => {\r\n      this.updateTitle();\r\n      dayjs.locale(langChangeEvent.lang);\r\n      this.renderer.setAttribute(document.querySelector('html'), 'lang', langChangeEvent.lang);\r\n    });\r\n\r\n    this.toastService.listen.subscribe(res => this.messageService.add(res));\r\n  }\r\n\r\n  showcaseMenu(): boolean {\r\n    if (this.accountService.isAuthenticated()) {\r\n      const menus: any = this.accountService.getMenus();\r\n      if (menus && menus.length > 0) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private getPageTitle(routeSnapshot: ActivatedRouteSnapshot): string {\r\n    let title: string = routeSnapshot.data['pageTitle'] ?? '';\r\n    if (routeSnapshot.firstChild) {\r\n      title = this.getPageTitle(routeSnapshot.firstChild) || title;\r\n    }\r\n    return title;\r\n  }\r\n\r\n  private updateTitle(): void {\r\n    let pageTitle = this.getPageTitle(this.router.routerState.snapshot.root);\r\n    if (!pageTitle) {\r\n      pageTitle = 'global.title';\r\n    }\r\n    this.translateService.get(pageTitle).subscribe(title => this.titleService.setTitle(title));\r\n  }\r\n}\r\n","<p-toast [baseZIndex]=\"9999\"></p-toast>\r\n\r\n<div>\r\n  <router-outlet name=\"navbar\"></router-outlet>\r\n</div>\r\n\r\n<div class=\"container-fluid\" [class.menu-collapsed]=\"isMenuCollapsed\" style=\"padding-left:34px; float:right\">\r\n  <div class=\"card\" style=\"padding-bottom: 15px; display: block\">\r\n    <nav class=\"col-sm-3 col-md-2 sidebar-lg-block d-lg-block\" id=\"hiddenMenu\">\r\n      <ic-sidebar [showMenu]=\"showcaseMenu()\"></ic-sidebar>\r\n    </nav>\r\n    <div\r\n      class=\"ms-sm-auto ms-md-auto al-main\"\r\n      [ngClass]=\"{ 'col-xs': isMenuCollapsed, '': !isMenuCollapsed }\"\r\n      style=\"margin-top: 80px; margin-left: 1rem !important;padding-left: 15px; padding-right: 15px\"\r\n    >\r\n      <router-outlet></router-outlet>\r\n      <router-outlet name=\"popup\"></router-outlet>\r\n    </div>\r\n  </div>\r\n  <div class=\"\">\r\n    <ic-footer></ic-footer>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
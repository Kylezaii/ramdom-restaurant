{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InstalmentApprovalComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/payment/instalment/service/instalment.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/payment/overpayment/service/payment.service\"));\nconst i7 = tslib_1.__importStar(require(\"app/shared/service/file-upload.service\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i15 = tslib_1.__importStar(require(\"app/shared/component/rejection-reason/rejection-reason.component\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i18 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"rejectionReasonDialog\"];\nfunction InstalmentApprovalComponent_p_table_44_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"div\", 29);\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_p_table_44_ng_template_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"defaultString\");\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Estimated Plan Computed on \", i0.ɵɵpipeBind1(7, 1, i0.ɵɵpipeBind2(8, 3, ctx_r12.instalmentPlan == null ? null : ctx_r12.instalmentPlan.computedDate, \"dd-MM-yyyy\")), \"\");\n  }\n}\nfunction InstalmentApprovalComponent_p_table_44_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"th\", 31);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"th\", 32);\n    i0.ɵɵtext(7, \"Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementStart(9, \"th\", 32);\n    i0.ɵɵtext(10, \"Principal O/S\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementStart(12, \"th\", 32);\n    i0.ɵɵtext(13, \"Payment Per Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementStart(15, \"th\", 32);\n    i0.ɵɵtext(16, \"Interest Per Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n        \");\n  }\n}\nfunction InstalmentApprovalComponent_p_table_44_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"defaultString\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"defaultString\");\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"defaultString\");\n    i0.ɵɵpipe(19, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n            \");\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"defaultString\");\n    i0.ɵɵpipe(24, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n        \");\n  }\n  if (rf & 2) {\n    const instalmentRefundRecord_r18 = ctx.$implicit;\n    const i_r19 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r19 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, i0.ɵɵpipeBind2(9, 7, instalmentRefundRecord_r18 == null ? null : instalmentRefundRecord_r18.paymentMonth, \"MM-yyyy\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 10, i0.ɵɵpipeBind3(14, 12, instalmentRefundRecord_r18 == null ? null : instalmentRefundRecord_r18.principalOSBalance, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 16, i0.ɵɵpipeBind3(19, 18, instalmentRefundRecord_r18 == null ? null : instalmentRefundRecord_r18.paymentAmount, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 22, i0.ɵɵpipeBind3(24, 24, instalmentRefundRecord_r18 == null ? null : instalmentRefundRecord_r18.interestAmount, \"SGD\", \"\")));\n  }\n}\nfunction InstalmentApprovalComponent_p_table_44_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\", 33);\n    i0.ɵɵtext(4, \"No Computed Instalment Payments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n  }\n}\nconst _c1 = function () {\n  return [10, 25, 50];\n};\nfunction InstalmentApprovalComponent_p_table_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\", 14);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, InstalmentApprovalComponent_p_table_44_ng_template_2_Template, 11, 6, \"ng-template\", 28);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵtemplate(4, InstalmentApprovalComponent_p_table_44_ng_template_4_Template, 19, 0, \"ng-template\", 15);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵtemplate(6, InstalmentApprovalComponent_p_table_44_ng_template_6_Template, 27, 28, \"ng-template\", 16);\n    i0.ɵɵtext(7, \"\\n\\n        \");\n    i0.ɵɵtemplate(8, InstalmentApprovalComponent_p_table_44_ng_template_8_Template, 7, 0, \"ng-template\", 17);\n    i0.ɵɵtext(9, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", ctx_r0.instalmentPlan == null ? null : ctx_r0.instalmentPlan.instalmentComputedPaymentList)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(5, _c1))(\"showCurrentPageReport\", true);\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_122_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"th\", 34);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"th\", 32);\n    i0.ɵɵtext(7, \"Filename\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n              \");\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_124_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"td\")(7, \"a\", 35);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_ng_template_124_Template_a_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const supportingDocument_r20 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.downloadFromDMS(supportingDocument_r20.documentId));\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n              \");\n  }\n  if (rf & 2) {\n    const supportingDocument_r20 = ctx.$implicit;\n    const i_r21 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r21 + 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 2, supportingDocument_r20.filename));\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_126_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\", 36);\n    i0.ɵɵtext(4, \"No Supporting Documents found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n              \");\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_132_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"th\", 34);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"th\", 32);\n    i0.ɵɵtext(7, \"Filename\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n              \");\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_134_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"td\")(7, \"a\", 35);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_ng_template_134_Template_a_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const supportingDocument_r24 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.downloadFromDMS(supportingDocument_r24.documentId));\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n              \");\n  }\n  if (rf & 2) {\n    const supportingDocument_r24 = ctx.$implicit;\n    const i_r25 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r25 + 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 2, supportingDocument_r24.filename));\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_136_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\", 36);\n    i0.ɵɵtext(4, \"No Supporting Documents found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n              \");\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_142_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"th\", 34);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"th\", 32);\n    i0.ɵɵtext(7, \"Filename\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n              \");\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_144_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"td\")(7, \"a\", 35);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_ng_template_144_Template_a_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const supportingDocument_r28 = restoredCtx.$implicit;\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.downloadFromDMS(supportingDocument_r28.documentId));\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n              \");\n  }\n  if (rf & 2) {\n    const supportingDocument_r28 = ctx.$implicit;\n    const i_r29 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r29 + 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 2, supportingDocument_r28.filename));\n  }\n}\nfunction InstalmentApprovalComponent_ng_template_146_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\", 36);\n    i0.ɵɵtext(4, \"No Supporting Documents found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n              \");\n  }\n}\nconst _c2 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction InstalmentApprovalComponent_ng_template_173_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_ng_template_173_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.displayRejectionReasonDialog.display = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n    \");\n    i0.ɵɵelementStart(3, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_ng_template_173_Template_button_click_3_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.onSubmit(false, $event, \"instalmentPlanRejectConfirmation\", ctx_r34.displayRejectionReasonDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c2));\n    i0.ɵɵproperty(\"disabled\", !ctx_r11.isFormValid());\n  }\n}\nconst _c3 = function () {\n  return [5, 10, 25, 50];\n};\nconst _c4 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nclass InstalmentApprovalComponent {\n  constructor(router, fb, route, nspConfirmService, toastService, instalmentService, paymentService, fileUploadService) {\n    this.router = router;\n    this.fb = fb;\n    this.route = route;\n    this.nspConfirmService = nspConfirmService;\n    this.toastService = toastService;\n    this.instalmentService = instalmentService;\n    this.paymentService = paymentService;\n    this.fileUploadService = fileUploadService;\n    this.displayRejectionReasonDialog = {\n      display: false\n    };\n    this.summary = {\n      nric: '',\n      name: '',\n      rank: '',\n      sex: '',\n      csn: '',\n      principalOS: 0,\n      interestOS: 0,\n      protectedPayableInd: '',\n      protectedPayableSPInd: '',\n      instalmentInd: '',\n      cabInd: ''\n    };\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.instalmentId = params['id'];\n      this.loadInstalment();\n    });\n  }\n  loadInstalment() {\n    // Call API endpoint to retrieve a previously computed Instalment Plan\n    this.instalmentService.getPendingInstalment(this.instalmentId).subscribe(res => {\n      if (res.body?.data) {\n        this.instalmentPlan = res.body?.data;\n        this.prepareSupportingDocs();\n        if (this.instalmentPlan.nric) {\n          this.loadSummary();\n        }\n      } else {\n        this.toastService.error(\"No record pending approval found for given id\");\n        this.router.navigate(['/inbox']);\n      }\n    }, error => {\n      this.toastService.error(error.error?.error_desc);\n      this.router.navigate(['/inbox']);\n    });\n  }\n  loadSummary() {\n    this.paymentService.getSummaryByNric(this.instalmentPlan.nric).subscribe(res => {\n      this.summary = res.body?.data;\n    });\n  }\n  onSubmit(approve, event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      console.log(\"approve \", approve);\n      if (approve) {\n        const request = {\n          approve: true\n        };\n        this.instalmentService.approve(this.instalmentId, request).subscribe(res => {\n          if (res) {\n            this.toastService.success(\"Instalment Plan approved successfully\");\n            this.router.navigate(['/inbox']);\n          }\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      } else {\n        // reject\n        const request = {\n          approve: false,\n          reason: this.rejectionDialog.getReason()\n        };\n        this.instalmentService.approve(this.instalmentId, request).subscribe(res => {\n          if (res) {\n            this.toastService.success(\"Instalment Plan rejected successfully\");\n            this.router.navigate(['/inbox']);\n          }\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      }\n    });\n  }\n  // Pop up the Confirmation dialog to Cancel current transaction\n  onCancel(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      // Define function that will be called upon confirmation of the cancellation dialog\n      // Will route back to Inbox upon cancellation in this case\n      this.router.navigate(['/inbox']);\n    });\n  }\n  onOpen(dialog) {\n    // console.log(\"Opening dialog now\")\n    dialog.display = true;\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  downloadFromDMS(fileId) {\n    console.log(\"fileId\", fileId);\n    if (fileId) {\n      this.fileUploadService.downloadTxnId(fileId).subscribe(res => {\n        if (res) {\n          const data = res;\n          const contentDispositionHeader = data.headers.get('content-disposition');\n          const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\n          const blob = new Blob([data.body], {\n            type: data.headers.get('content-type')\n          });\n          const anchor = document.createElement(\"a\");\n          anchor.href = URL.createObjectURL(blob);\n          anchor.download = fileName;\n          anchor.click();\n        }\n      }, error => {\n        if (error.HttpStatusCode === 404 /* HttpStatusCode.NotFound */) {\n          this.toastService.error(error.error?.error_desc);\n        }\n      });\n    }\n  }\n  prepareSupportingDocs() {\n    this.approvalEmail = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"APP\");\n    this.nsmanLetter = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"NSM\");\n    this.bankLetter = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"BNK\");\n  }\n  isFormValid() {\n    return this.rejectionDialog.isValid();\n  }\n}\nexports.InstalmentApprovalComponent = InstalmentApprovalComponent;\nInstalmentApprovalComponent.ɵfac = function InstalmentApprovalComponent_Factory(t) {\n  return new (t || InstalmentApprovalComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.NspConfirmationService), i0.ɵɵdirectiveInject(i4.CustomToastService), i0.ɵɵdirectiveInject(i5.InstalmentService), i0.ɵɵdirectiveInject(i6.PaymentService), i0.ɵɵdirectiveInject(i7.FileUploadService));\n};\nInstalmentApprovalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InstalmentApprovalComponent,\n  selectors: [[\"n2-instalment-approval\"]],\n  viewQuery: function InstalmentApprovalComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.rejectionDialog = _t.first);\n    }\n  },\n  decls: 178,\n  vars: 82,\n  consts: [[1, \"grid\"], [1, \"col-6\", \"flex\"], [\"header\", \"Create Instalment\", 1, \"flex-auto\", \"flex\", \"create-instalment\"], [1, \"flex\", \"gap-8\"], [1, \"flex\", \"gap-2\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", 4, \"ngIf\"], [1, \"col-6\"], [1, \"flex\", \"flex-column\", \"gap-2\"], [\"header\", \"Personal Particulars\"], [1, \"particulars\"], [\"header\", \"Supporting Documents\"], [1, \"flex\", \"gap-4\"], [1, \"flex\", \"flex-shrink-0\", \"flex-column\", \"justify-content-around\", \"gap-2\"], [1, \"flex-auto\", \"flex\", \"flex-column\", \"justify-content-around\", \"gap-2\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [1, \"flex\", \"align-items-start\", \"justify-content-end\", \"gap-2\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Reject\", 1, \"p-button-outlined\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Approve\", 3, \"disabled\", \"click\"], [\"key\", \"createInstalmentCancel\"], [\"key\", \"createInstalmentSubmit\"], [\"header\", \"Reject Instalment Plan\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"rejectionReasonDialog\", \"\"], [\"pTemplate\", \"footer\"], [\"key\", \"instalmentPlanRejectConfirmation\"], [\"pTemplate\", \"caption\"], [1, \"flex\", \"align-items-center\", \"gap-2\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"scope\", \"col\", 2, \"width\", \"10%\"], [\"scope\", \"col\"], [\"colspan\", \"5\"], [\"scope\", \"col\", 2, \"width\", \"20%\"], [\"href\", \"javascript:void(0)\", 3, \"click\"], [\"colspan\", \"2\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"]],\n  template: function InstalmentApprovalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"p-panel\", 2);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵtext(7, \"\\n        \");\n      i0.ɵɵelementStart(8, \"div\", 4);\n      i0.ɵɵtext(9, \"\\n          \");\n      i0.ɵɵelementStart(10, \"span\");\n      i0.ɵɵtext(11, \"Monthly Instalment Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n          \");\n      i0.ɵɵelementStart(13, \"span\");\n      i0.ɵɵtext(14);\n      i0.ɵɵpipe(15, \"defaultString\");\n      i0.ɵɵpipe(16, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n        \");\n      i0.ɵɵelementStart(19, \"div\", 4);\n      i0.ɵɵtext(20, \"\\n          \");\n      i0.ɵɵelementStart(21, \"span\");\n      i0.ɵɵtext(22, \"First month:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n          \");\n      i0.ɵɵelementStart(24, \"span\");\n      i0.ɵɵtext(25);\n      i0.ɵɵpipe(26, \"defaultString\");\n      i0.ɵɵpipe(27, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n        \");\n      i0.ɵɵelementStart(30, \"div\", 4);\n      i0.ɵɵtext(31, \"\\n          \");\n      i0.ɵɵelementStart(32, \"span\");\n      i0.ɵɵtext(33, \"Interest:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n          \");\n      i0.ɵɵelementStart(35, \"span\");\n      i0.ɵɵtext(36);\n      i0.ɵɵpipe(37, \"defaultString\");\n      i0.ɵɵpipe(38, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n      \");\n      i0.ɵɵelement(42, \"br\");\n      i0.ɵɵtext(43, \"\\n      \");\n      i0.ɵɵtemplate(44, InstalmentApprovalComponent_p_table_44_Template, 10, 6, \"p-table\", 5);\n      i0.ɵɵtext(45, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(47, \"\\n  \");\n      i0.ɵɵelementStart(48, \"div\", 6);\n      i0.ɵɵtext(49, \"\\n    \");\n      i0.ɵɵelementStart(50, \"div\", 7);\n      i0.ɵɵtext(51, \"\\n      \");\n      i0.ɵɵelementStart(52, \"p-panel\", 8);\n      i0.ɵɵtext(53, \"\\n        \");\n      i0.ɵɵelementStart(54, \"div\", 9);\n      i0.ɵɵtext(55, \"\\n          \");\n      i0.ɵɵelementStart(56, \"h5\");\n      i0.ɵɵtext(57);\n      i0.ɵɵpipe(58, \"defaultString\");\n      i0.ɵɵpipe(59, \"defaultString\");\n      i0.ɵɵpipe(60, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n          \");\n      i0.ɵɵelementStart(62, \"span\");\n      i0.ɵɵtext(63, \"NSman (M)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(64, \"\\n          \");\n      i0.ɵɵelementStart(65, \"span\");\n      i0.ɵɵtext(66, \"CAB:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"span\");\n      i0.ɵɵtext(68);\n      i0.ɵɵpipe(69, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n          \");\n      i0.ɵɵelementStart(71, \"span\");\n      i0.ɵɵtext(72, \"Protected Payable:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"span\");\n      i0.ɵɵtext(74);\n      i0.ɵɵpipe(75, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n          \");\n      i0.ɵɵelement(77, \"br\");\n      i0.ɵɵtext(78, \"\\n          \");\n      i0.ɵɵelementStart(79, \"span\");\n      i0.ɵɵtext(80, \"Outstanding Principal:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(81, \"span\");\n      i0.ɵɵtext(82);\n      i0.ɵɵpipe(83, \"defaultString\");\n      i0.ɵɵpipe(84, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(85, \"\\n          \");\n      i0.ɵɵelementStart(86, \"span\");\n      i0.ɵɵtext(87, \"Outstanding Interest:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(88, \"span\");\n      i0.ɵɵtext(89);\n      i0.ɵɵpipe(90, \"defaultString\");\n      i0.ɵɵpipe(91, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(92, \"\\n          \");\n      i0.ɵɵelementStart(93, \"span\");\n      i0.ɵɵtext(94, \"Instalment:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(95, \"span\");\n      i0.ɵɵtext(96);\n      i0.ɵɵpipe(97, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(98, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(99, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(100, \"\\n      \");\n      i0.ɵɵelementStart(101, \"p-panel\", 10);\n      i0.ɵɵtext(102, \"\\n        \");\n      i0.ɵɵelementStart(103, \"div\", 11);\n      i0.ɵɵtext(104, \"\\n          \");\n      i0.ɵɵelementStart(105, \"div\", 12);\n      i0.ɵɵtext(106, \"\\n            \");\n      i0.ɵɵelementStart(107, \"span\");\n      i0.ɵɵtext(108, \"Approval Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(109, \"\\n            \");\n      i0.ɵɵelementStart(110, \"span\");\n      i0.ɵɵtext(111, \"Return Letter from Bank\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(112, \"\\n            \");\n      i0.ɵɵelementStart(113, \"span\");\n      i0.ɵɵtext(114, \"Return Letter from NSman\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(115, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(116, \"\\n          \");\n      i0.ɵɵelementStart(117, \"div\", 13);\n      i0.ɵɵtext(118, \"\\n\\n            \");\n      i0.ɵɵtext(119, \"\\n            \");\n      i0.ɵɵelementStart(120, \"p-table\", 14);\n      i0.ɵɵtext(121, \"\\n\\n              \");\n      i0.ɵɵtemplate(122, InstalmentApprovalComponent_ng_template_122_Template, 10, 0, \"ng-template\", 15);\n      i0.ɵɵtext(123, \"\\n\\n              \");\n      i0.ɵɵtemplate(124, InstalmentApprovalComponent_ng_template_124_Template, 12, 4, \"ng-template\", 16);\n      i0.ɵɵtext(125, \"\\n\\n              \");\n      i0.ɵɵtemplate(126, InstalmentApprovalComponent_ng_template_126_Template, 7, 0, \"ng-template\", 17);\n      i0.ɵɵtext(127, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(128, \"\\n\\n            \");\n      i0.ɵɵtext(129, \"\\n            \");\n      i0.ɵɵelementStart(130, \"p-table\", 14);\n      i0.ɵɵtext(131, \"\\n\\n              \");\n      i0.ɵɵtemplate(132, InstalmentApprovalComponent_ng_template_132_Template, 10, 0, \"ng-template\", 15);\n      i0.ɵɵtext(133, \"\\n\\n              \");\n      i0.ɵɵtemplate(134, InstalmentApprovalComponent_ng_template_134_Template, 12, 4, \"ng-template\", 16);\n      i0.ɵɵtext(135, \"\\n\\n              \");\n      i0.ɵɵtemplate(136, InstalmentApprovalComponent_ng_template_136_Template, 7, 0, \"ng-template\", 17);\n      i0.ɵɵtext(137, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(138, \"\\n\\n            \");\n      i0.ɵɵtext(139, \"\\n            \");\n      i0.ɵɵelementStart(140, \"p-table\", 14);\n      i0.ɵɵtext(141, \"\\n\\n              \");\n      i0.ɵɵtemplate(142, InstalmentApprovalComponent_ng_template_142_Template, 10, 0, \"ng-template\", 15);\n      i0.ɵɵtext(143, \"\\n\\n              \");\n      i0.ɵɵtemplate(144, InstalmentApprovalComponent_ng_template_144_Template, 12, 4, \"ng-template\", 16);\n      i0.ɵɵtext(145, \"\\n\\n              \");\n      i0.ɵɵtemplate(146, InstalmentApprovalComponent_ng_template_146_Template, 7, 0, \"ng-template\", 17);\n      i0.ɵɵtext(147, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(148, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(149, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(150, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(151, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(152, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(153, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(154, \"\\n\");\n      i0.ɵɵelementStart(155, \"div\", 18);\n      i0.ɵɵtext(156, \"\\n  \");\n      i0.ɵɵelementStart(157, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_Template_button_click_157_listener($event) {\n        return ctx.onCancel($event, \"createInstalmentCancel\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(158, \"\\n  \");\n      i0.ɵɵelementStart(159, \"button\", 20);\n      i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_Template_button_click_159_listener() {\n        return ctx.onOpen(ctx.displayRejectionReasonDialog);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(160, \"\\n  \");\n      i0.ɵɵelementStart(161, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function InstalmentApprovalComponent_Template_button_click_161_listener($event) {\n        return ctx.onSubmit(true, $event, \"createInstalmentSubmit\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(162, \"\\n  \");\n      i0.ɵɵelement(163, \"p-confirmPopup\", 22);\n      i0.ɵɵtext(164, \"\\n  \");\n      i0.ɵɵelement(165, \"p-confirmPopup\", 23);\n      i0.ɵɵtext(166, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(167, \"\\n\\n\\n\");\n      i0.ɵɵelementStart(168, \"p-dialog\", 24);\n      i0.ɵɵlistener(\"visibleChange\", function InstalmentApprovalComponent_Template_p_dialog_visibleChange_168_listener($event) {\n        return ctx.displayRejectionReasonDialog.display = $event;\n      });\n      i0.ɵɵtext(169, \"\\n\\n  \");\n      i0.ɵɵelement(170, \"n2-rejection-reason\", null, 25);\n      i0.ɵɵtext(172, \"\\n\\n  \");\n      i0.ɵɵtemplate(173, InstalmentApprovalComponent_ng_template_173_Template, 5, 7, \"ng-template\", 26);\n      i0.ɵɵtext(174, \"\\n  \");\n      i0.ɵɵelement(175, \"p-confirmPopup\", 27);\n      i0.ɵɵtext(176, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(177, \"\\n\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(15, 37, i0.ɵɵpipeBind3(16, 39, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.monthlyAmount, \"SGD\", \"\")));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 43, i0.ɵɵpipeBind2(27, 45, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.effectiveDate, \"MM-yyyy\")));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(37, 48, i0.ɵɵpipeBind2(38, 50, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.compInterestRate, \"1.2-2\")), \"%\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.instalmentPlan);\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(58, 53, ctx.summary == null ? null : ctx.summary.nric), \"   \", i0.ɵɵpipeBind1(59, 55, ctx.summary == null ? null : ctx.summary.rank), \"   \", i0.ɵɵpipeBind1(60, 57, ctx.summary == null ? null : ctx.summary.name), \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(69, 59, ctx.summary == null ? null : ctx.summary.cabInd));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate2(\"\", (ctx.summary == null ? null : ctx.summary.protectedPayableInd) === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(75, 61, \"No\"), \" \", (ctx.summary == null ? null : ctx.summary.protectedPayableSPInd) === \"Y\" ? \"(Service Pay)\" : \"\", \"\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(83, 63, i0.ɵɵpipeBind3(84, 65, ctx.summary == null ? null : ctx.summary.principalOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(90, 69, i0.ɵɵpipeBind3(91, 71, ctx.summary == null ? null : ctx.summary.interestOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.summary.instalmentInd === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(97, 75, \"No\"));\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"value\", ctx.approvalEmail)(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(77, _c3))(\"showCurrentPageReport\", true);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"value\", ctx.nsmanLetter)(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(78, _c3))(\"showCurrentPageReport\", true);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"value\", ctx.bankLetter)(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(79, _c3))(\"showCurrentPageReport\", true);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"disabled\", !ctx.instalmentPlan);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.instalmentPlan);\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(80, _c4));\n      i0.ɵɵproperty(\"visible\", ctx.displayRejectionReasonDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(81, _c5))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n    }\n  },\n  dependencies: [i8.NgIf, i9.PrimeTemplate, i10.ButtonDirective, i11.Tooltip, i12.Table, i13.Dialog, i14.ConfirmPopup, i15.RejectionReasonComponent, i16.Panel, i17.Ripple, i8.DecimalPipe, i8.CurrencyPipe, i8.DatePipe, i18.DefaultStringPipe],\n  styles: [\"[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n\\n\\n\\n  .create-instalment > .p-panel.p-component {\\n  display: flex;\\n  flex-direction: column;\\n  flex: auto;\\n}\\n\\n  .create-instalment > .p-panel.p-component > .p-toggleable-content {\\n  display: flex;\\n  flex: auto;\\n}\\n\\n  .create-instalment > .p-panel.p-component > .p-toggleable-content > .p-panel-content {\\n  flex: auto;\\n}\\n\\n\\n\\n  .nsManLetterCalendar > .p-calendar {\\n  flex: auto;\\n}\\n\\n\\n.particulars[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .particulars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  display: inline !important;\\n  padding: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhbG1lbnQtYXBwcm92YWwuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHBheW1lbnRcXGluc3RhbG1lbnRcXGluc3RhbG1lbnQtYXBwcm92YWxcXGluc3RhbG1lbnQtYXBwcm92YWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OzRFQUFBO0FBSUE7RUFDRSxvQ0FBQTtBQ0FGOztBREVBLDRFQUFBO0FBRUE7O2dGQUFBO0FBR0E7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxVQUFBO0FDQUY7O0FER0E7RUFDRSxhQUFBO0VBQ0EsVUFBQTtBQ0FGOztBREdBO0VBQ0UsVUFBQTtBQ0FGOztBREVBLGdGQUFBO0FBR0E7O21GQUFBO0FBR0E7RUFDRSxVQUFBO0FDREY7O0FER0EsbUZBQUE7QUFFQTtFQUNFLDBCQUFBO0VBQ0EsYUFBQTtBQ0RGIiwiZmlsZSI6Imluc3RhbG1lbnQtYXBwcm92YWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59XHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuQ3VzdG9tIFByaW1lTkcgUC1wYW5lbCBDU1MgLSBNYWtlIGNvbnRlbnQgcGFuZWwgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCBoZWlnaHRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGZsZXg6IGF1dG87XHJcbn1cclxuXHJcbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcblxyXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQgPiAucC10b2dnbGVhYmxlLWNvbnRlbnQgPiAucC1wYW5lbC1jb250ZW50IHtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5DdXN0b20gUHJpbWVORyBQLWNhbGVuZGFyIENTUyAtIE1ha2UgQ2FsZW5kYXIgaW5wdXQgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCB3aWR0aFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuOjpuZy1kZWVwIC5uc01hbkxldHRlckNhbGVuZGFyID4gLnAtY2FsZW5kYXIge1xyXG4gIGZsZXg6IGF1dG87XHJcbn1cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcclxuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG59XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBEaWFsb2cgbWFzayBDU1MgLSBDaGFuZ2UgZnJvbSBUcmFuc3BhcmVudCBiYWNrIHRvIGJsYWNrXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5DdXN0b20gUHJpbWVORyBQLXBhbmVsIENTUyAtIE1ha2UgY29udGVudCBwYW5lbCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IGhlaWdodFxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4OiBhdXRvO1xufVxuXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQgPiAucC10b2dnbGVhYmxlLWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiBhdXRvO1xufVxuXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQgPiAucC10b2dnbGVhYmxlLWNvbnRlbnQgPiAucC1wYW5lbC1jb250ZW50IHtcbiAgZmxleDogYXV0bztcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkN1c3RvbSBQcmltZU5HIFAtY2FsZW5kYXIgQ1NTIC0gTWFrZSBDYWxlbmRhciBpbnB1dCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IHdpZHRoXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjo6bmctZGVlcCAubnNNYW5MZXR0ZXJDYWxlbmRhciA+IC5wLWNhbGVuZGFyIHtcbiAgZmxleDogYXV0bztcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDE2cHg7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9pbnN0YWxtZW50L2luc3RhbG1lbnQtYXBwcm92YWwvaW5zdGFsbWVudC1hcHByb3ZhbC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9pbnN0YWxtZW50L2luc3RhbG1lbnQtYXBwcm92YWwvaW5zdGFsbWVudC1hcHByb3ZhbC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7NEVBQUE7QUFJQTtFQUNFLG9DQUFBO0FDQUY7O0FERUEsNEVBQUE7QUFFQTs7Z0ZBQUE7QUFHQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFVBQUE7QUNBRjs7QURHQTtFQUNFLGFBQUE7RUFDQSxVQUFBO0FDQUY7O0FER0E7RUFDRSxVQUFBO0FDQUY7O0FERUEsZ0ZBQUE7QUFHQTs7bUZBQUE7QUFHQTtFQUNFLFVBQUE7QUNERjs7QURHQSxtRkFBQTtBQUVBO0VBQ0UsMEJBQUE7RUFDQSxhQUFBO0FDREY7QURDQSxvOUpBQW85SiIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDY7XHJcbn1cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5DdXN0b20gUHJpbWVORyBQLXBhbmVsIENTUyAtIE1ha2UgY29udGVudCBwYW5lbCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IGhlaWdodFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZmxleDogYXV0bztcclxufVxyXG5cclxuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50ID4gLnAtdG9nZ2xlYWJsZS1jb250ZW50IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXg6IGF1dG87XHJcbn1cclxuXHJcbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCA+IC5wLXBhbmVsLWNvbnRlbnQge1xyXG4gIGZsZXg6IGF1dG87XHJcbn1cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbkN1c3RvbSBQcmltZU5HIFAtY2FsZW5kYXIgQ1NTIC0gTWFrZSBDYWxlbmRhciBpbnB1dCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IHdpZHRoXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46Om5nLWRlZXAgLm5zTWFuTGV0dGVyQ2FsZW5kYXIgPiAucC1jYWxlbmRhciB7XHJcbiAgZmxleDogYXV0bztcclxufVxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbi5wYXJ0aWN1bGFycyBoNSwgLnBhcnRpY3VsYXJzIHNwYW4ge1xyXG4gIGRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbn1cclxuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkN1c3RvbSBQcmltZU5HIFAtcGFuZWwgQ1NTIC0gTWFrZSBjb250ZW50IHBhbmVsIGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgaGVpZ2h0XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZsZXg6IGF1dG87XG59XG5cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IGF1dG87XG59XG5cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCA+IC5wLXBhbmVsLWNvbnRlbnQge1xuICBmbGV4OiBhdXRvO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQ3VzdG9tIFByaW1lTkcgUC1jYWxlbmRhciBDU1MgLSBNYWtlIENhbGVuZGFyIGlucHV0IGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgd2lkdGhcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOjpuZy1kZWVwIC5uc01hbkxldHRlckNhbGVuZGFyID4gLnAtY2FsZW5kYXIge1xuICBmbGV4OiBhdXRvO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi5wYXJ0aWN1bGFycyBoNSwgLnBhcnRpY3VsYXJzIHNwYW4ge1xuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMTZweDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;ICmBUA;IAAAA,+BAA2C;IACzCA;IAAAA,kCACiC;IADuBA;MAAAA;MAAA;MAAA,OAASA,kCAAW;IAAA,EAAC;IAC5CA,iBAAS;IAC1CA;IAAAA,4BAAM;IAAAA,YAA+F;;;IAAAA,iBAAO;IAC9GA;IAAAA,iBAAM;IACRA;;;;IAFUA,eAA+F;IAA/FA,+LAA+F;;;;;IAIvGA;IAAAA,0BAAI;IACFA;IAAAA,8BAAmC;IAAAA,kBAAE;IAAAA,iBAAK;IAC1CA;IAAAA,8BAAgB;IAAAA,qBAAK;IAAAA,iBAAK;IAC1BA;IAAAA,8BAAgB;IAAAA,8BAAa;IAAAA,iBAAK;IAClCA;IAAAA,+BAAgB;IAAAA,kCAAiB;IAAAA,iBAAK;IACtCA;IAAAA,+BAAgB;IAAAA,mCAAkB;IAAAA,iBAAK;IACzCA;IAAAA,iBAAK;IACPA;;;;;IAEEA;IAAAA,0BAAI;IACFA;IAAAA,0BAAI;IAAAA,YAAS;IAAAA,iBAAK;IAClBA;IAAAA,0BAAI;IAAAA,YAAyE;;;IAAAA,iBAAK;IAClFA;IAAAA,2BAAI;IAAAA,aAAkF;;;IAAAA,iBAAK;IAC3FA;IAAAA,2BAAI;IAAAA,aAA6E;;;IAAAA,iBAAK;IACtFA;IAAAA,2BAAI;IAAAA,aAA8E;;;IAAAA,iBAAK;IACzFA;IAAAA,iBAAK;IACPA;;;;;IANQA,eAAS;IAATA,+BAAS;IACTA,eAAyE;IAAzEA,gKAAyE;IACzEA,eAAkF;IAAlFA,0KAAkF;IAClFA,eAA6E;IAA7EA,qKAA6E;IAC7EA,eAA8E;IAA9EA,sKAA8E;;;;;IAKpFA;IAAAA,0BAAI;IACFA;IAAAA,8BAAgB;IAAAA,+CAA+B;IAAAA,iBAAK;IACtDA;IAAAA,iBAAK;IACPA;;;;;;;;IApCFA,mCAK0E;IACxEA;IAAAA,yGAMc;IACdA;IAAAA,yGAQc;IACdA;IAAAA,0GAQc;IAEdA;IAAAA,wGAIc;IAChBA;IAAAA,iBAAU;;;;IApCDA,kHAAwD;;;;;IAuEvDA;IAAAA,0BAAI;IACFA;IAAAA,8BAAmC;IAAAA,kBAAE;IAAAA,iBAAK;IAC1CA;IAAAA,8BAAgB;IAAAA,wBAAQ;IAAAA,iBAAK;IAC/BA;IAAAA,iBAAK;IACPA;;;;;;IAGEA;IAAAA,0BAAI;IACFA;IAAAA,0BAAI;IAAAA,YAAS;IAAAA,iBAAK;IAClBA;IAAAA,0BAAI;IAA6BA;MAAA;MAAA;MAAA;MAAA,OAASA,yEAA8C;IAAA,EAAC;IAACA,YAA+C;;IAAAA,iBAAI;IAC/IA;IAAAA,iBAAK;IACPA;;;;;IAHQA,eAAS;IAATA,+BAAS;IAC6EA,eAA+C;IAA/CA,2EAA+C;;;;;IAK3IA;IAAAA,0BAAI;IACFA;IAAAA,8BAAgB;IAAAA,6CAA6B;IAAAA,iBAAK;IACpDA;IAAAA,iBAAK;IACPA;;;;;IAYEA;IAAAA,0BAAI;IACFA;IAAAA,8BAAmC;IAAAA,kBAAE;IAAAA,iBAAK;IAC1CA;IAAAA,8BAAgB;IAAAA,wBAAQ;IAAAA,iBAAK;IAC/BA;IAAAA,iBAAK;IACPA;;;;;;IAGEA;IAAAA,0BAAI;IACFA;IAAAA,0BAAI;IAAAA,YAAS;IAAAA,iBAAK;IAClBA;IAAAA,0BAAI;IAA6BA;MAAA;MAAA;MAAA;MAAA,OAASA,yEAA8C;IAAA,EAAC;IAACA,YAA+C;;IAAAA,iBAAI;IAC/IA;IAAAA,iBAAK;IACPA;;;;;IAHQA,eAAS;IAATA,+BAAS;IAC6EA,eAA+C;IAA/CA,2EAA+C;;;;;IAK3IA;IAAAA,0BAAI;IACFA;IAAAA,8BAAgB;IAAAA,6CAA6B;IAAAA,iBAAK;IACpDA;IAAAA,iBAAK;IACPA;;;;;IAYEA;IAAAA,0BAAI;IACFA;IAAAA,8BAAmC;IAAAA,kBAAE;IAAAA,iBAAK;IAC1CA;IAAAA,8BAAgB;IAAAA,wBAAQ;IAAAA,iBAAK;IAC/BA;IAAAA,iBAAK;IACPA;;;;;;IAGEA;IAAAA,0BAAI;IACFA;IAAAA,0BAAI;IAAAA,YAAS;IAAAA,iBAAK;IAClBA;IAAAA,0BAAI;IAA6BA;MAAA;MAAA;MAAA;MAAA,OAASA,yEAA8C;IAAA,EAAC;IAACA,YAA+C;;IAAAA,iBAAI;IAC/IA;IAAAA,iBAAK;IACPA;;;;;IAHQA,eAAS;IAATA,+BAAS;IAC6EA,eAA+C;IAA/CA,2EAA+C;;;;;IAK3IA;IAAAA,0BAAI;IACFA;IAAAA,8BAAgB;IAAAA,6CAA6B;IAAAA,iBAAK;IACpDA;IAAAA,iBAAK;IACPA;;;;;;;;;;;;IA6BVA;IAAAA,kCACoE;IADbA;MAAAA;MAAA;MAAA,OAASA,8DAAqC,KAAK;IAAA,EAAC;IACvCA,iBAAS;IAC7EA;IAAAA,kCAEoC;IAFLA;MAAAA;MAAA;MAAA,OAASA,gCAAS,KAAK,UAAU,kCAAkC,uCAA+B;IAAA,EAAC;IAE9FA,iBAAS;IAC/CA;;;;IAJUA,eAA2D;IAA3DA,yCAA2D;IAE3DA,eAA2D;IAA3DA,yCAA2D;IAC3DA,iDAA2B;;;;;;;;;;;;;;;;ADxLvC,MAKaC,2BAA2B;EA2BtCC,YACUC,MAAc,EACdC,EAAe,EACfC,KAAqB,EACrBC,iBAAyC,EACzCC,YAAgC,EAChCC,iBAAoC,EACpCC,cAA8B,EAC9BC,iBAAoC;IAPpC,WAAM,GAANP,MAAM;IACN,OAAE,GAAFC,EAAE;IACF,UAAK,GAALC,KAAK;IACL,sBAAiB,GAAjBC,iBAAiB;IACjB,iBAAY,GAAZC,YAAY;IACZ,sBAAiB,GAAjBC,iBAAiB;IACjB,mBAAc,GAAdC,cAAc;IACd,sBAAiB,GAAjBC,iBAAiB;IAjC3B,iCAA4B,GAAQ;MAACC,OAAO,EAAE;IAAK,CAAC;IAQpD,YAAO,GAAe;MACpBC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,GAAG,EAAE,EAAE;MACPC,GAAG,EAAE,EAAE;MACPC,WAAW,EAAE,CAAC;MACdC,UAAU,EAAE,CAAC;MACbC,mBAAmB,EAAE,EAAE;MACvBC,qBAAqB,EAAE,EAAE;MACzBC,aAAa,EAAE,EAAE;MACjBC,MAAM,EAAE;KACT;EAeD;EAEAC,QAAQ;IACN,IAAI,CAAClB,KAAK,CAACmB,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACnC,IAAI,CAACE,YAAY,GAAGF,MAAM,CAAC,IAAI,CAAC;MAEhC,IAAI,CAACG,cAAc,EAAE;IACvB,CAAC,CAAC;EACJ;EAEAA,cAAc;IACZ;IACA,IAAI,CAACnB,iBAAiB,CAACoB,oBAAoB,CAAC,IAAI,CAACF,YAAY,CAAC,CAACD,SAAS,CACtEI,GAAG,IAAG;MACJ,IAAIA,GAAG,CAACC,IAAI,EAAEC,IAAI,EAAE;QAClB,IAAI,CAACC,cAAc,GAAGH,GAAG,CAACC,IAAI,EAAEC,IAAI;QACpC,IAAI,CAACE,qBAAqB,EAAE;QAC5B,IAAI,IAAI,CAACD,cAAc,CAACpB,IAAI,EAAE;UAC5B,IAAI,CAACsB,WAAW,EAAE;;OAErB,MAAM;QACL,IAAI,CAAC3B,YAAY,CAAC4B,KAAK,CAAC,+CAA+C,CAAC;QACxE,IAAI,CAAChC,MAAM,CAACiC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAEpC,CAAC,EACDD,KAAK,IAAG;MACN,IAAI,CAAC5B,YAAY,CAAC4B,KAAK,CAACA,KAAK,CAACA,KAAK,EAAEE,UAAU,CAAC;MAChD,IAAI,CAAClC,MAAM,CAACiC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC,CACF;EACH;EAEAF,WAAW;IACT,IAAI,CAACzB,cAAc,CAAC6B,gBAAgB,CAAC,IAAI,CAACN,cAAc,CAACpB,IAAI,CAAC,CAACa,SAAS,CACrEI,GAAsB,IAAI;MACzB,IAAI,CAACU,OAAO,GAAGV,GAAG,CAACC,IAAI,EAAEC,IAAI;IAC/B,CAAC,CACF;EACH;EAEAS,QAAQ,CAACC,OAAgB,EAAEC,KAAY,EAAEC,GAAW,EAAEC,MAAW;IAC/D,IAAI,CAACtC,iBAAiB,CAACuC,cAAc,CAACH,KAAK,EAAEC,GAAG,EAAEC,MAAM,EAAE,MAAK;MAC7DE,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEN,OAAO,CAAC;MAEhC,IAAIA,OAAO,EAAE;QACX,MAAMO,OAAO,GAAG;UACdP,OAAO,EAAE;SACV;QAED,IAAI,CAACjC,iBAAiB,CAACiC,OAAO,CAAC,IAAI,CAACf,YAAY,EAAEsB,OAAO,CAAC,CAACvB,SAAS,CAClEI,GAAG,IAAG;UACJ,IAAIA,GAAG,EAAE;YACP,IAAI,CAACtB,YAAY,CAAC0C,OAAO,CAAC,uCAAuC,CAAC;YAClE,IAAI,CAAC9C,MAAM,CAACiC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;QAEpC,CAAC,EAAED,KAAK,IAAG;UACT,IAAI,CAAC5B,YAAY,CAAC4B,KAAK,CAACA,KAAK,CAACA,KAAK,EAAEE,UAAU,CAAC;QAClD,CAAC,CACF;OACF,MAAM;QACL;QACA,MAAMW,OAAO,GAAG;UACdP,OAAO,EAAE,KAAK;UACdS,MAAM,EAAE,IAAI,CAACC,eAAe,CAACC,SAAS;SACvC;QAED,IAAI,CAAC5C,iBAAiB,CAACiC,OAAO,CAAC,IAAI,CAACf,YAAY,EAAEsB,OAAO,CAAC,CAACvB,SAAS,CAClEI,GAAG,IAAG;UACJ,IAAIA,GAAG,EAAE;YACP,IAAI,CAACtB,YAAY,CAAC0C,OAAO,CAAC,uCAAuC,CAAC;YAClE,IAAI,CAAC9C,MAAM,CAACiC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;QAEpC,CAAC,EAAED,KAAK,IAAG;UACT,IAAI,CAAC5B,YAAY,CAAC4B,KAAK,CAACA,KAAK,CAACA,KAAK,EAAEE,UAAU,CAAC;QAClD,CAAC,CACF;;IAGL,CAAC,CAAC;EACJ;EAEA;EACAgB,QAAQ,CAACX,KAAY,EAAEC,GAAW,EAAEC,MAAW;IAC7C,IAAI,CAACtC,iBAAiB,CAACuC,cAAc,CAACH,KAAK,EAAEC,GAAG,EAAEC,MAAM,EAAE,MAAK;MAC7D;MACA;MACA,IAAI,CAACzC,MAAM,CAACiC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC,CAAC;EACJ;EAEAkB,MAAM,CAACV,MAAW;IAChB;IACAA,MAAM,CAACjC,OAAO,GAAG,IAAI;EACvB;EAEA4C,SAAS;IACP;EAAA;EAGFC,eAAe,CAACC,MAAc;IAC5BX,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEU,MAAM,CAAC;IAC7B,IAAIA,MAAM,EAAE;MACV,IAAI,CAAC/C,iBAAiB,CAACgD,aAAa,CAACD,MAAM,CAAC,CAAChC,SAAS,CACpDI,GAAG,IAAG;QACJ,IAAIA,GAAG,EAAE;UACP,MAAME,IAAI,GAAGF,GAAG;UAChB,MAAM8B,wBAAwB,GAAW5B,IAAI,CAAC6B,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;UAChF,MAAMC,QAAQ,GAAGH,wBAAwB,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,CAACD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;UAC9F,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACpC,IAAI,CAACD,IAAI,CAAC,EAAE;YAACsC,IAAI,EAAErC,IAAI,CAAC6B,OAAO,CAACC,GAAG,CAAC,cAAc;UAAC,CAAC,CAAC;UAC5E,MAAMQ,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;UAC1CF,MAAM,CAACG,IAAI,GAAGC,GAAG,CAACC,eAAe,CAACR,IAAI,CAAC;UACvCG,MAAM,CAACM,QAAQ,GAAGb,QAAQ;UAC1BO,MAAM,CAACO,KAAK,EAAE;;MAElB,CAAC,EACDzC,KAAK,IAAG;QACN,IAAIA,KAAK,CAAC0C,cAAc,wCAA8B;UACpD,IAAI,CAACtE,YAAY,CAAC4B,KAAK,CAACA,KAAK,CAACA,KAAK,EAAEE,UAAU,CAAC;;MAEpD,CAAC,CACF;;EAEL;EAEAJ,qBAAqB;IACnB,IAAI,CAAC6C,aAAa,GAAG,IAAI,CAAC9C,cAAc,CAAC+C,cAAc,EAAEC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,YAAY,KAAK,KAAK,CAAC;IAC9F,IAAI,CAACC,WAAW,GAAG,IAAI,CAACnD,cAAc,CAAC+C,cAAc,EAAEC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,YAAY,KAAK,KAAK,CAAC;IAC5F,IAAI,CAACE,UAAU,GAAG,IAAI,CAACpD,cAAc,CAAC+C,cAAc,EAAEC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,YAAY,KAAK,KAAK,CAAC;EAC7F;EAEAG,WAAW;IACT,OAAO,IAAI,CAAClC,eAAe,CAACmC,OAAO,EAAE;EACvC;;AA9KFC;;mBAKatF,2BAA2B;AAAA;;QAA3BA,2BAA2B;EAAAuF;EAAAC;IAAA;;;;;;;;;;;;;MCnBxCzF,8BAAkB;MAChBA;MAAAA,8BAAwB;MACtBA;MAAAA,kCAA6E;MAC3EA;MAAAA,8BAAwB;MACtBA;MAAAA,8BAAwB;MACtBA;MAAAA,6BAAM;MAAAA,2CAA0B;MAAAA,iBAAO;MACvCA;MAAAA,6BAAM;MAAAA,aAAsE;;;MAAAA,iBAAO;MACrFA;MAAAA,iBAAM;MACNA;MAAAA,+BAAwB;MACtBA;MAAAA,6BAAM;MAAAA,6BAAY;MAAAA,iBAAO;MACzBA;MAAAA,6BAAM;MAAAA,aAAkE;;;MAAAA,iBAAO;MACjFA;MAAAA,iBAAM;MACNA;MAAAA,+BAAwB;MACtBA;MAAAA,6BAAM;MAAAA,0BAAS;MAAAA,iBAAO;MACtBA;MAAAA,6BAAM;MAAAA,aAAsE;;;MAAAA,iBAAO;MACrFA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACNA;MAAAA,sBAAI;MACJA;MAAAA,uFAqCU;MACZA;MAAAA,iBAAU;MACZA;MAAAA,iBAAM;MACNA;MAAAA,+BAAmB;MACjBA;MAAAA,+BAAoC;MAClCA;MAAAA,mCAAuC;MACrCA;MAAAA,+BAAyB;MACvBA;MAAAA,2BAAI;MAAAA,aAAyG;;;;MAAAA,iBAAK;MAClHA;MAAAA,6BAAM;MAAAA,0BAAS;MAAAA,iBAAO;MACtBA;MAAAA,6BAAM;MAAAA,qBAAI;MAAAA,iBAAO;MAAAA,6BAAM;MAAAA,aAAmC;;MAAAA,iBAAO;MACjEA;MAAAA,6BAAM;MAAAA,mCAAkB;MAAAA,iBAAO;MAAAA,6BAAM;MAAAA,aAAyI;;MAAAA,iBAAO;MACrLA;MAAAA,sBAAK;MACLA;MAAAA,6BAAM;MAAAA,uCAAsB;MAAAA,iBAAO;MAAAA,6BAAM;MAAAA,aAA4D;;;MAAAA,iBAAO;MAC5GA;MAAAA,6BAAM;MAAAA,sCAAqB;MAAAA,iBAAO;MAAAA,6BAAM;MAAAA,aAA2D;;;MAAAA,iBAAO;MAC1GA;MAAAA,6BAAM;MAAAA,4BAAW;MAAAA,iBAAO;MAAAA,6BAAM;MAAAA,aAAgE;;MAAAA,iBAAO;MACvGA;MAAAA,iBAAM;MACRA;MAAAA,iBAAU;MACVA;MAAAA,qCAAuC;MACrCA;MAAAA,iCAAwB;MACtBA;MAAAA,iCAAyE;MACvEA;MAAAA,8BAAM;MAAAA,gCAAc;MAAAA,iBAAO;MAC3BA;MAAAA,8BAAM;MAAAA,yCAAuB;MAAAA,iBAAO;MACpCA;MAAAA,8BAAM;MAAAA,0CAAwB;MAAAA,iBAAO;MACvCA;MAAAA,iBAAM;MACNA;MAAAA,iCAAqE;MAEnEA;MACAA;MAAAA,qCAKyF;MAEvFA;MAAAA,kGAKc;MAEdA;MAAAA,kGAKc;MAEdA;MAAAA,iGAIc;MAChBA;MAAAA,iBAAU;MAEVA;MACAA;MAAAA,qCAKyF;MAEvFA;MAAAA,kGAKc;MAEdA;MAAAA,kGAKc;MAEdA;MAAAA,iGAIc;MAChBA;MAAAA,iBAAU;MAEVA;MACAA;MAAAA,qCAKyF;MAEvFA;MAAAA,kGAKc;MAEdA;MAAAA,kGAKc;MAEdA;MAAAA,iGAIc;MAChBA;MAAAA,iBAAU;MACZA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACRA;MAAAA,iBAAU;MACZA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACRA;MAAAA,iBAAM;MACNA;MAAAA,iCAA8D;MAC5DA;MAAAA,oCAC0D;MAA1DA;QAAA,OAAS0F,qBAAgB,wBAAwB,EAAE,IAAI,CAAC;MAAA,EAAC;MAAC1F,iBAAS;MACnEA;MAAAA,oCAE6B;MAD7BA;QAAA,OAAS0F,4CAAoC;MAAA,EAAC;MACjB1F,iBAAS;MACtCA;MAAAA,oCAE6B;MAD7BA;QAAA,OAAS0F,aAAS,IAAI,UAAS,wBAAwB,EAAE,IAAI,CAAC;MAAA,EAAC;MAClC1F,iBAAS;MACtCA;MAAAA,uCAA8D;MAC9DA;MAAAA,uCAA8D;MAChEA;MAAAA,iBAAM;MAGNA;MAAAA,sCAE2F;MAFjDA;QAAA;MAAA,EAAkD;MAI1FA;MAAAA,kDAAkE;MAElEA;MAAAA,iGAMc;MACdA;MAAAA,uCAAwE;MAC1EA;MAAAA,iBAAW;MAEXA;;;MArMgBA,gBAAsE;MAAtEA,qJAAsE;MAItEA,gBAAkE;MAAlEA,qJAAkE;MAIlEA,gBAAsE;MAAtEA,gKAAsE;MAItEA,eAAoB;MAApBA,yCAAoB;MA4CtBA,gBAAyG;MAAzGA,gQAAyG;MAEtFA,gBAAmC;MAAnCA,6FAAmC;MACrBA,eAAyI;MAAzIA,kPAAyI;MAErIA,eAA4D;MAA5DA,qIAA4D;MAC7DA,eAA2D;MAA3DA,oIAA2D;MACrEA,eAAgE;MAAhEA,8FAAgE;MAanFA,gBAAuB;MAAvBA,yCAAuB;MA6BvBA,gBAAqB;MAArBA,uCAAqB;MA6BrBA,gBAAoB;MAApBA,sCAAoB;MAsCvCA,gBAA4B;MAA5BA,8CAA4B;MAG5BA,eAA4B;MAA5BA,8CAA4B;MAQpBA,eAAyB;MAAzBA,0CAAyB;MAFOA,kEAAkD","names":["i0","InstalmentApprovalComponent","constructor","router","fb","route","nspConfirmService","toastService","instalmentService","paymentService","fileUploadService","display","nric","name","rank","sex","csn","principalOS","interestOS","protectedPayableInd","protectedPayableSPInd","instalmentInd","cabInd","ngOnInit","params","subscribe","instalmentId","loadInstalment","getPendingInstalment","res","body","data","instalmentPlan","prepareSupportingDocs","loadSummary","error","navigate","error_desc","getSummaryByNric","summary","onSubmit","approve","event","key","dialog","onConfirmPopup","console","log","request","success","reason","rejectionDialog","getReason","onCancel","onOpen","exportCSV","downloadFromDMS","fileId","downloadTxnId","contentDispositionHeader","headers","get","fileName","split","trim","replace","blob","Blob","type","anchor","document","createElement","href","URL","createObjectURL","download","click","HttpStatusCode","approvalEmail","supportingDocs","filter","d","documentType","nsmanLetter","bankLetter","isFormValid","isValid","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-approval\\instalment-approval.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-approval\\instalment-approval.component.html"],"sourcesContent":["import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder} from '@angular/forms';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {InstalmentService} from 'app/payment/instalment/service/instalment.service';\r\nimport {HttpResponse, HttpStatusCode} from '@angular/common/http';\r\nimport {IInstalmentPlan} from '../model/instalment-plan.model';\r\nimport {IOPSummary} from 'app/payment/overpayment/overpayment-info/overpayment-info.model';\r\nimport {PaymentService} from 'app/payment/overpayment/service/payment.service';\r\nimport {ISupportingDocument} from '../model/supporting-documents.model';\r\nimport {RejectionReasonComponent} from 'app/shared/component/rejection-reason/rejection-reason.component';\r\nimport {FileUploadService} from 'app/shared/service/file-upload.service';\r\n\r\n@Component({\r\n  selector: 'n2-instalment-approval',\r\n  templateUrl: './instalment-approval.component.html',\r\n  styleUrls: ['./instalment-approval.component.scss']\r\n})\r\nexport class InstalmentApprovalComponent implements OnInit {\r\n\r\n  displayRejectionReasonDialog: any = {display: false};\r\n  instalmentPlan: IInstalmentPlan;\r\n\r\n  instalmentId: string;\r\n  approvalEmail: ISupportingDocument[];\r\n  nsmanLetter: ISupportingDocument[];\r\n  bankLetter: ISupportingDocument[];\r\n\r\n  summary: IOPSummary = {\r\n    nric: '',\r\n    name: '',\r\n    rank: '',\r\n    sex: '',\r\n    csn: '',\r\n    principalOS: 0,\r\n    interestOS: 0,\r\n    protectedPayableInd: '',\r\n    protectedPayableSPInd: '',\r\n    instalmentInd: '',\r\n    cabInd: ''\r\n  };\r\n\r\n  @ViewChild('rejectionReasonDialog')\r\n  private rejectionDialog: RejectionReasonComponent;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private fb: FormBuilder,\r\n    private route: ActivatedRoute,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private toastService: CustomToastService,\r\n    private instalmentService: InstalmentService,\r\n    private paymentService: PaymentService,\r\n    private fileUploadService: FileUploadService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.params.subscribe(params => {\r\n      this.instalmentId = params['id'];\r\n\r\n      this.loadInstalment();\r\n    });\r\n  }\r\n\r\n  loadInstalment(): void {\r\n    // Call API endpoint to retrieve a previously computed Instalment Plan\r\n    this.instalmentService.getPendingInstalment(this.instalmentId).subscribe(\r\n      res => {\r\n        if (res.body?.data) {\r\n          this.instalmentPlan = res.body?.data;\r\n          this.prepareSupportingDocs();\r\n          if (this.instalmentPlan.nric) {\r\n            this.loadSummary();\r\n          }\r\n        } else {\r\n          this.toastService.error(\"No record pending approval found for given id\");\r\n          this.router.navigate(['/inbox']);\r\n        }\r\n      },\r\n      error => {\r\n        this.toastService.error(error.error?.error_desc);\r\n        this.router.navigate(['/inbox']);\r\n      }\r\n    );\r\n  }\r\n\r\n  loadSummary(): void {\r\n    this.paymentService.getSummaryByNric(this.instalmentPlan.nric).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        this.summary = res.body?.data;\r\n      }\r\n    );\r\n  }\r\n\r\n  onSubmit(approve: boolean, event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      console.log(\"approve \", approve);\r\n\r\n      if (approve) {\r\n        const request = {\r\n          approve: true\r\n        };\r\n\r\n        this.instalmentService.approve(this.instalmentId, request).subscribe(\r\n          res => {\r\n            if (res) {\r\n              this.toastService.success(\"Instalment Plan approved successfully\");\r\n              this.router.navigate(['/inbox']);\r\n            }\r\n          }, error => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      } else {\r\n        // reject\r\n        const request = {\r\n          approve: false,\r\n          reason: this.rejectionDialog.getReason()\r\n        };\r\n\r\n        this.instalmentService.approve(this.instalmentId, request).subscribe(\r\n          res => {\r\n            if (res) {\r\n              this.toastService.success(\"Instalment Plan rejected successfully\");\r\n              this.router.navigate(['/inbox']);\r\n            }\r\n          }, error => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  // Pop up the Confirmation dialog to Cancel current transaction\r\n  onCancel(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      // Define function that will be called upon confirmation of the cancellation dialog\r\n      // Will route back to Inbox upon cancellation in this case\r\n      this.router.navigate(['/inbox']);\r\n    });\r\n  }\r\n\r\n  onOpen(dialog: any): void {\r\n    // console.log(\"Opening dialog now\")\r\n    dialog.display = true;\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  downloadFromDMS(fileId: string): void {\r\n    console.log(\"fileId\", fileId);\r\n    if (fileId) {\r\n      this.fileUploadService.downloadTxnId(fileId).subscribe(\r\n        res => {\r\n          if (res) {\r\n            const data = res;\r\n            const contentDispositionHeader: string = data.headers.get('content-disposition');\r\n            const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\r\n            const blob = new Blob([data.body], {type: data.headers.get('content-type')});\r\n            const anchor = document.createElement(\"a\");\r\n            anchor.href = URL.createObjectURL(blob);\r\n            anchor.download = fileName;\r\n            anchor.click();\r\n          }\r\n        },\r\n        error => {\r\n          if (error.HttpStatusCode === HttpStatusCode.NotFound) {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  prepareSupportingDocs(): void {\r\n    this.approvalEmail = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"APP\");\r\n    this.nsmanLetter = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"NSM\");\r\n    this.bankLetter = this.instalmentPlan.supportingDocs?.filter(d => d.documentType === \"BNK\");\r\n  }\r\n\r\n  isFormValid(): boolean {\r\n    return this.rejectionDialog.isValid();\r\n  }\r\n}\r\n","<div class='grid'>\r\n  <div class='col-6 flex'>\r\n    <p-panel class='flex-auto flex create-instalment' header='Create Instalment'>\r\n      <div class='flex gap-8'>\r\n        <div class='flex gap-2'>\r\n          <span>Monthly Instalment Amount:</span>\r\n          <span>{{instalmentPlan?.monthlyAmount  | currency:'SGD':'' | defaultString}}</span>\r\n        </div>\r\n        <div class='flex gap-2'>\r\n          <span>First month:</span>\r\n          <span>{{instalmentPlan?.effectiveDate | date:\"MM-yyyy\" | defaultString}}</span>\r\n        </div>\r\n        <div class='flex gap-2'>\r\n          <span>Interest:</span>\r\n          <span>{{instalmentPlan?.compInterestRate | number:'1.2-2' | defaultString}}%</span>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <p-table *ngIf='instalmentPlan'\r\n               [value]='instalmentPlan?.instalmentComputedPaymentList!' styleClass='p-datatable-gridlines'\r\n               [paginator]='true'\r\n               [rows]='10'\r\n               currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'\r\n               [rowsPerPageOptions]='[10,25,50]' [showCurrentPageReport]='true'>\r\n        <ng-template pTemplate='caption'>\r\n          <div class='flex align-items-center gap-2'>\r\n            <button type='button' pButton pRipple icon='pi pi-file' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                    tooltipPosition='bottom'></button>\r\n            <span>Estimated Plan Computed on {{instalmentPlan?.computedDate | date:'dd-MM-yyyy' | defaultString}}</span>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate='header'>\r\n          <tr>\r\n            <th scope=\"col\" style='width: 10%'>SN</th>\r\n            <th scope=\"col\">Month</th>\r\n            <th scope=\"col\">Principal O/S</th>\r\n            <th scope=\"col\">Payment Per Month</th>\r\n            <th scope=\"col\">Interest Per Month</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate='body' let-instalmentRefundRecord let-i='rowIndex'>\r\n          <tr>\r\n            <td>{{i + 1}}</td>\r\n            <td>{{instalmentRefundRecord?.paymentMonth | date:'MM-yyyy' | defaultString}}</td>\r\n            <td>{{instalmentRefundRecord?.principalOSBalance | currency:'SGD':'' | defaultString}}</td>\r\n            <td>{{instalmentRefundRecord?.paymentAmount | currency:'SGD':'' | defaultString}}</td>\r\n            <td>{{instalmentRefundRecord?.interestAmount | currency:'SGD':'' | defaultString}}</td>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate='emptymessage'>\r\n          <tr>\r\n            <td colspan='5'>No Computed Instalment Payments</td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </p-panel>\r\n  </div>\r\n  <div class='col-6'>\r\n    <div class='flex flex-column gap-2'>\r\n      <p-panel header='Personal Particulars'>\r\n        <div class='particulars'>\r\n          <h5>{{summary?.nric | defaultString}}   {{summary?.rank | defaultString}}   {{summary?.name | defaultString}}</h5>\r\n          <span>NSman (M)</span>\r\n          <span>CAB:</span><span>{{summary?.cabInd | defaultString}}</span>\r\n          <span>Protected Payable:</span><span>{{summary?.protectedPayableInd === 'Y' ? 'Yes' : 'No' | defaultString}} {{summary?.protectedPayableSPInd === 'Y' ? '(Service Pay)' : ''}}</span>\r\n          <br/>\r\n          <span>Outstanding Principal:</span><span>{{summary?.principalOS | currency:'SGD':'' | defaultString}}</span>\r\n          <span>Outstanding Interest:</span><span>{{summary?.interestOS | currency:'SGD':'' | defaultString}}</span>\r\n          <span>Instalment:</span><span>{{summary.instalmentInd === 'Y' ? 'Yes' : 'No' | defaultString}}</span>\r\n        </div>\r\n      </p-panel>\r\n      <p-panel header='Supporting Documents'>\r\n        <div class='flex gap-4'>\r\n          <div class='flex flex-shrink-0 flex-column justify-content-around gap-2'>\r\n            <span>Approval Email</span>\r\n            <span>Return Letter from Bank</span>\r\n            <span>Return Letter from NSman</span>\r\n          </div>\r\n          <div class='flex-auto flex flex-column justify-content-around gap-2'>\r\n\r\n            <!-- APPROVAL EMAIL -->\r\n            <p-table [value]='approvalEmail'\r\n                     styleClass='p-datatable-gridlines' [paginator]='true'\r\n                     [rows]='5'\r\n                     [rowsPerPageOptions]='[5,10,25,50]'\r\n                     [showCurrentPageReport]='true'\r\n                     currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'>\r\n\r\n              <ng-template pTemplate='header'>\r\n                <tr>\r\n                  <th scope=\"col\" style='width: 20%'>SN</th>\r\n                  <th scope=\"col\">Filename</th>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='body' let-supportingDocument let-i='rowIndex'>\r\n                <tr>\r\n                  <td>{{i + 1}}</td>\r\n                  <td><a href=\"javascript:void(0)\" (click)=\"downloadFromDMS(supportingDocument.documentId)\">{{supportingDocument.filename | defaultString}}</a></td>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='emptymessage'>\r\n                <tr>\r\n                  <td colspan='2'>No Supporting Documents found</td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n\r\n            <!-- RETURN LETTER FROM BANK -->\r\n            <p-table [value]=\"nsmanLetter\"\r\n                     styleClass='p-datatable-gridlines' [paginator]='true'\r\n                     [rows]='5'\r\n                     [rowsPerPageOptions]='[5,10,25,50]'\r\n                     [showCurrentPageReport]='true'\r\n                     currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'>\r\n\r\n              <ng-template pTemplate='header'>\r\n                <tr>\r\n                  <th scope=\"col\" style='width: 20%'>SN</th>\r\n                  <th scope=\"col\">Filename</th>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='body' let-supportingDocument let-i='rowIndex'>\r\n                <tr>\r\n                  <td>{{i + 1}}</td>\r\n                  <td><a href=\"javascript:void(0)\" (click)=\"downloadFromDMS(supportingDocument.documentId)\">{{supportingDocument.filename | defaultString}}</a></td>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='emptymessage'>\r\n                <tr>\r\n                  <td colspan='2'>No Supporting Documents found</td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n\r\n            <!-- RETURN LETTER FROM NSMAN -->\r\n            <p-table [value]='bankLetter'\r\n                     styleClass='p-datatable-gridlines' [paginator]='true'\r\n                     [rows]='5'\r\n                     [rowsPerPageOptions]='[5,10,25,50]'\r\n                     [showCurrentPageReport]='true'\r\n                     currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'>\r\n\r\n              <ng-template pTemplate='header'>\r\n                <tr>\r\n                  <th scope=\"col\" style='width: 20%'>SN</th>\r\n                  <th scope=\"col\">Filename</th>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='body' let-supportingDocument let-i='rowIndex'>\r\n                <tr>\r\n                  <td>{{i + 1}}</td>\r\n                  <td><a href=\"javascript:void(0)\" (click)=\"downloadFromDMS(supportingDocument.documentId)\">{{supportingDocument.filename | defaultString}}</a></td>\r\n                </tr>\r\n              </ng-template>\r\n\r\n              <ng-template pTemplate='emptymessage'>\r\n                <tr>\r\n                  <td colspan='2'>No Supporting Documents found</td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </div>\r\n      </p-panel>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class='flex align-items-start justify-content-end gap-2'>\r\n  <button class='p-button-danger' type='button' pButton label='Cancel'\r\n  (click)=\"onCancel($event,'createInstalmentCancel', null)\"></button>\r\n  <button class='p-button-outlined' type='button' pButton label='Reject'\r\n  (click)=\"onOpen(displayRejectionReasonDialog)\"\r\n  [disabled]=\"!instalmentPlan\"></button>\r\n  <button type='button' pButton label='Approve'\r\n  (click)=\"onSubmit(true, $event,'createInstalmentSubmit', null)\"\r\n  [disabled]=\"!instalmentPlan\"></button>\r\n  <p-confirmPopup key='createInstalmentCancel'></p-confirmPopup>\r\n  <p-confirmPopup key='createInstalmentSubmit'></p-confirmPopup>\r\n</div>\r\n\r\n\r\n<p-dialog header='Reject Instalment Plan' [(visible)]='displayRejectionReasonDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '50vw'}\" [draggable]='false' [resizable]='false' [modal]='true'>\r\n\r\n  <n2-rejection-reason #rejectionReasonDialog></n2-rejection-reason>\r\n\r\n  <ng-template pTemplate='footer'>\r\n    <button pButton class='p-button-danger' label='Cancel' (click)='displayRejectionReasonDialog.display=false'\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n    <button pButton label='Submit' (click)=\"onSubmit(false, $event, 'instalmentPlanRejectConfirmation', displayRejectionReasonDialog)\"\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"\r\n            [disabled]=\"!isFormValid()\"></button>\r\n  </ng-template>\r\n  <p-confirmPopup key='instalmentPlanRejectConfirmation'></p-confirmPopup>\r\n</p-dialog>\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
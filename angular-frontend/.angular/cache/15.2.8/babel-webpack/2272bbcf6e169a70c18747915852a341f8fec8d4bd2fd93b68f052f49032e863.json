{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VerifierAvailabilityComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst forms_1 = require(\"@angular/forms\");\nconst moment_1 = tslib_1.__importDefault(require(\"moment\"));\nconst rxjs_1 = require(\"rxjs\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"../service/workload-inbox.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/auth/account.service\"));\nconst i3 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i7 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/checkbox\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/radiobutton\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/calendar\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/chip\"));\nconst _c0 = [\"dataTable\"];\nconst _c1 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-right\": \".5em\"\n  };\n};\nfunction VerifierAvailabilityComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 26);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"div\", 27);\n    i0.ɵɵtext(4, \"\\n                            \");\n    i0.ɵɵelement(5, \"p-button\", 28);\n    i0.ɵɵtext(6, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                        \");\n    i0.ɵɵelementStart(8, \"div\", 29);\n    i0.ɵɵtext(9, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nconst _c2 = function () {\n  return {\n    \"width\": \"25%\"\n  };\n};\nfunction VerifierAvailabilityComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"th\", 30);\n    i0.ɵɵtext(4, \"\\n                            \");\n    i0.ɵɵelementStart(5, \"div\", 31);\n    i0.ɵɵtext(6, \"\\n                                \");\n    i0.ɵɵtext(7, \"\\n                                \");\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵtext(9, \"Verifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                        \");\n    i0.ɵɵelementStart(13, \"th\", 32);\n    i0.ɵɵtext(14, \"\\n                            \");\n    i0.ɵɵelementStart(15, \"div\", 31);\n    i0.ɵɵtext(16, \"\\n                                Auto Routing\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n                        \");\n    i0.ɵɵelementStart(19, \"th\", 30);\n    i0.ɵɵtext(20, \"\\n                            \");\n    i0.ɵɵelementStart(21, \"div\", 31);\n    i0.ɵɵtext(22, \"\\n                                Period of Absence\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n                        \");\n    i0.ɵɵelementStart(25, \"th\", 30);\n    i0.ɵɵtext(26, \"\\n                            \");\n    i0.ɵɵelementStart(27, \"div\", 31);\n    i0.ɵɵtext(28, \"\\n                                Amendment\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n                        \");\n    i0.ɵɵelementStart(31, \"th\", 30);\n    i0.ɵɵtext(32, \"\\n\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n                    \");\n    i0.ɵɵtext(35, \"\\n                        \");\n    i0.ɵɵelementStart(36, \"tr\");\n    i0.ɵɵtext(37, \"\\n\\n                        \");\n    i0.ɵɵelementStart(38, \"th\", 33);\n    i0.ɵɵtext(39, \"\\n                            \");\n    i0.ɵɵelementStart(40, \"div\", 31);\n    i0.ɵɵtext(41, \"\\n                                EC New\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n                        \");\n    i0.ɵɵelementStart(44, \"th\", 33);\n    i0.ɵɵtext(45, \"\\n                            \");\n    i0.ɵɵelementStart(46, \"div\", 31);\n    i0.ɵɵtext(47, \"\\n                                EC SD\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n                        \");\n    i0.ɵɵelementStart(50, \"th\", 33);\n    i0.ɵɵtext(51, \"\\n                            \");\n    i0.ɵɵelementStart(52, \"div\", 31);\n    i0.ɵɵtext(53, \"\\n                                SE New\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n                        \");\n    i0.ɵɵelementStart(56, \"th\", 33);\n    i0.ɵɵtext(57, \"\\n                            \");\n    i0.ɵɵelementStart(58, \"div\", 31);\n    i0.ɵɵtext(59, \"\\n                                EC SD\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(62, \"\\n                \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(19);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c2));\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c2));\n  }\n}\nfunction VerifierAvailabilityComponent_ng_template_12_p_chip_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-chip\", 43);\n    i0.ɵɵlistener(\"onRemove\", function VerifierAvailabilityComponent_ng_template_12_p_chip_22_Template_p_chip_onRemove_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const chip_r14 = restoredCtx.$implicit;\n      const rowIndex_r10 = i0.ɵɵnextContext().rowIndex;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.onRemoveChip(chip_r14, rowIndex_r10));\n    });\n    i0.ɵɵtext(1, \"\\n                                \");\n    i0.ɵɵelementStart(2, \"label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const chip_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"removable\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(chip_r14.chip);\n  }\n}\nfunction VerifierAvailabilityComponent_ng_template_12_p_chip_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-chip\", 44);\n    i0.ɵɵlistener(\"onRemove\", function VerifierAvailabilityComponent_ng_template_12_p_chip_30_Template_p_chip_onRemove_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const chip_r18 = restoredCtx.$implicit;\n      const rowIndex_r10 = i0.ɵɵnextContext().rowIndex;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.onRemoveAmendmentChip(chip_r18, rowIndex_r10));\n    });\n    i0.ɵɵtext(1, \"\\n                                    \");\n    i0.ɵɵelementStart(2, \"label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const chip_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"styleClass\", chip_r18.type == \"deduct\" ? \"deduct-chip\" : \"add-chip\")(\"removable\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(chip_r18.chip);\n  }\n}\nfunction VerifierAvailabilityComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n\\n                \");\n    i0.ɵɵelementStart(1, \"tr\", 34);\n    i0.ɵɵtext(2, \"\\n\\n                    \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵelement(7, \"p-checkbox\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"p-checkbox\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵelement(13, \"p-checkbox\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                    \");\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵelement(16, \"p-checkbox\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                    \");\n    i0.ɵɵelementStart(18, \"td\");\n    i0.ɵɵtext(19, \"\\n                        \");\n    i0.ɵɵelementStart(20, \"div\");\n    i0.ɵɵtext(21, \"\\n                            \");\n    i0.ɵɵtemplate(22, VerifierAvailabilityComponent_ng_template_12_p_chip_22_Template, 5, 2, \"p-chip\", 39);\n    i0.ɵɵtext(23, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n                    \");\n    i0.ɵɵelementStart(26, \"td\");\n    i0.ɵɵtext(27, \"\\n                        \");\n    i0.ɵɵelementStart(28, \"div\");\n    i0.ɵɵtext(29, \"\\n                            \");\n    i0.ɵɵtemplate(30, VerifierAvailabilityComponent_ng_template_12_p_chip_30_Template, 5, 3, \"p-chip\", 40);\n    i0.ɵɵtext(31, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n\\n                    \");\n    i0.ɵɵelementStart(34, \"td\");\n    i0.ɵɵtext(35, \"\\n                        \");\n    i0.ɵɵelementStart(36, \"div\", 31);\n    i0.ɵɵtext(37, \"\\n                            \");\n    i0.ɵɵelementStart(38, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function VerifierAvailabilityComponent_ng_template_12_Template_button_click_38_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const rowIndex_r10 = restoredCtx.rowIndex;\n      const verifierAvail_r9 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.onOpen(ctx_r22.displayAddPOADialog, rowIndex_r10, verifierAvail_r9.value.subjectId));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n                            \");\n    i0.ɵɵelementStart(40, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function VerifierAvailabilityComponent_ng_template_12_Template_button_click_40_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const rowIndex_r10 = restoredCtx.rowIndex;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.onConfirmAmendment($event, \"amendment\", rowIndex_r10));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(41, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44, \"\\n            \");\n  }\n  if (rf & 2) {\n    const verifierAvail_r9 = ctx.$implicit;\n    const rowIndex_r10 = ctx.rowIndex;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", rowIndex_r10);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(verifierAvail_r9.value.verifierName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", verifierAvail_r9.value.ecNew)(\"binary\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", verifierAvail_r9.value.ecSD)(\"binary\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", verifierAvail_r9.value.seNew)(\"binary\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", verifierAvail_r9.value.seSD)(\"binary\", true);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", verifierAvail_r9.value.periodOfAbsence);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", verifierAvail_r9.value.amendment);\n  }\n}\nfunction VerifierAvailabilityComponent_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                    \");\n    i0.ɵɵelementStart(3, \"td\", 45);\n    i0.ɵɵtext(4, \"No records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n  }\n}\nconst _c3 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction VerifierAvailabilityComponent_ng_template_81_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function VerifierAvailabilityComponent_ng_template_81_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.displayAddPOADialog.display = false);\n    });\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function VerifierAvailabilityComponent_ng_template_81_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.onSubmit(\"confirmAddPOA\", ctx_r27.displayAddPOADialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n\\n    \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c3));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c3));\n  }\n}\nconst _c4 = function () {\n  return {\n    width: \"40vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nconst _c6 = function () {\n  return {\n    width: \"80%\"\n  };\n};\nclass VerifierAvailabilityComponent {\n  get personalAvailArray() {\n    return this.personalAvailForm?.get('personalAvailArray');\n  }\n  constructor(workloadService, account, fb, nspConfirmService, formBuilder, toastService, ns2Http, dateUtilsService) {\n    this.workloadService = workloadService;\n    this.account = account;\n    this.fb = fb;\n    this.nspConfirmService = nspConfirmService;\n    this.formBuilder = formBuilder;\n    this.toastService = toastService;\n    this.ns2Http = ns2Http;\n    this.dateUtilsService = dateUtilsService;\n    this.verifierAvailList = [];\n    this.amendList = [];\n    this.poaList = [];\n    this.dateFormat = \"dd-mm-yy\";\n    this.hdDateFormat = \"dd-mm-yy (H)\";\n    this.momentDateFormat = \"DD-MM-YYYY\";\n    this.displayAddPOADialog = {\n      display: false,\n      rowIndex: 0,\n      subjectId: \"\"\n    };\n    this.personalAvailForm = this.fb.group({\n      personalAvailArray: this.fb.array([])\n    });\n    // TODO: Shaun to fix\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    this.account.identity().subscribe(account => {\n      this.currentAccount = this.copyAccount(account);\n    });\n    this.subscription = new rxjs_1.Subscription();\n  }\n  ngOnInit() {\n    console.log(\"this curr\" + String(this.currentAccount.login));\n    // tempo //will be getting from user auth\n    this.roleList = [\"role-cv\"];\n    const reqRoles = [\"role-ca\", \"role-cv\"];\n    if (this.roleList.some(r => reqRoles.includes(r))) {\n      this.refreshVerifierAvail();\n    }\n    this.initPOA();\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  initPOA() {\n    this.poaForm = this.formBuilder.group({\n      selectedDateRange: new forms_1.FormControl([new Date(), new Date()]),\n      selectedMdDate: new forms_1.FormControl([new Date()]),\n      selectedHdDate: new forms_1.FormControl(new Date()),\n      selectedCategory: ['range', []]\n    });\n  }\n  refreshVerifierAvail() {\n    this.loading = true;\n    let unsortedList;\n    setTimeout(() => {\n      let params = new http_1.HttpParams();\n      this.roleList.forEach(role => {\n        params = params.append(\"roleList\", role);\n      });\n      this.workloadService.getVerifierAvailability({\n        params\n      }).subscribe(resp => {\n        if (resp.body.data) {\n          unsortedList = resp.body.data;\n          this.verifierAvailList = unsortedList.sort(this.sortVerifiers());\n          this.constructForm();\n        }\n        this.loading = false;\n      });\n    }, 0);\n  }\n  copyAccount(account) {\n    return {\n      email: account.email,\n      firstName: account.firstName,\n      lastName: account.lastName,\n      login: account.username,\n      authorities: account.authorities,\n      groups: account.groups\n    };\n  }\n  sortVerifiers() {\n    const currentLogin = this.currentAccount.login;\n    return function (a, b) {\n      if (a.subjectId === b.subjectId) {\n        return 0;\n      } else if (a.subjectId === currentLogin) {\n        return -1;\n      } else if (b.subjectId === currentLogin) {\n        return 1;\n      } else {\n        return a.fullName < b.fullName ? -1 : 1;\n      }\n    };\n  }\n  constructForm() {\n    const arr = this.personalAvailForm.get('personalAvailArray');\n    arr.clear();\n    this.verifierAvailList.forEach((data, index) => {\n      this.poaList[index] = data.date;\n      arr.push(this.fb.group({\n        subjectId: data.subjectId,\n        loginName: data.loginName,\n        verifierName: data.fullName,\n        ecNew: new forms_1.FormControl(data.ecNewInd === 1 ? true : false),\n        ecSD: new forms_1.FormControl(data.ecSDInd === 1 ? true : false),\n        seNew: new forms_1.FormControl(data.seNewInd === 1 ? true : false),\n        seSD: new forms_1.FormControl(data.seSDInd === 1 ? true : false),\n        periodOfAbsence: new forms_1.FormControl(this.consolidatePOA(data), forms_1.Validators.required),\n        amendment: new forms_1.FormControl([])\n      }));\n    });\n  }\n  consolidatePOA(data) {\n    let poaDate = [];\n    if (data.blockedDates) {\n      poaDate = poaDate.concat(this.processBlockDates(data.blockedDates, false, data.subjectId));\n    }\n    if (data.halfDates) {\n      poaDate = poaDate.concat(this.processBlockDates(data.halfDates, true, data.subjectId));\n    }\n    return poaDate;\n  }\n  processBlockDates(date, halfday, subjectId) {\n    const unixArr = date.split(\",\");\n    return unixArr.map(x => {\n      const dateArr = x.split(\" - \");\n      let chip = \"\";\n      let status = \"\";\n      if (!halfday) {\n        status = \"B\";\n        if (dateArr[0].trim() === dateArr[1].trim()) {\n          chip = dateArr[0];\n        } else {\n          chip = dateArr[0].concat(\" - \").concat(dateArr[1]);\n        }\n      } else {\n        status = \"H\";\n        if (dateArr[0].trim() === dateArr[1].trim()) {\n          chip = dateArr[0].concat(\"(H)\");\n        } else {\n          chip = dateArr[0].concat(\" - \").concat(dateArr[1]).concat(\"(H)\");\n        }\n      }\n      return {\n        subjectId,\n        chip,\n        status\n      };\n    });\n  }\n  onRemoveChip(chip, index) {\n    console.log(\"chip is\", chip);\n    const fa = this.personalAvailForm.get('personalAvailArray');\n    const poaList = fa.at(index).get('periodOfAbsence').value.filter(x => x !== chip);\n    const amendList = fa.at(index).get('amendment').value;\n    chip['type'] = \"deduct\";\n    console.log(\"new chip,\", chip);\n    amendList.push(chip);\n    fa.controls[index].get('amendment')?.setValue(amendList);\n    fa.controls[index].get('periodOfAbsence')?.setValue(poaList);\n    console.log(\"amendment\", fa.controls[index].get('amendment')?.value);\n    console.log(\"periodOfAbsence\", fa.controls[index].get('periodOfAbsence')?.value);\n  }\n  onRemoveAmendmentChip(chip, index) {\n    const fa = this.personalAvailForm.get('personalAvailArray');\n    const poaList = fa.at(index).get('periodOfAbsence').value;\n    const amendList = fa.at(index).get('amendment').value.filter(x => x !== chip);\n    if (chip.type === \"deduct\") {\n      poaList.push(chip);\n    }\n    fa.controls[index].get('periodOfAbsence')?.setValue(poaList);\n    fa.controls[index].get('amendment')?.setValue(amendList);\n    console.log(\"amendment\", fa.controls[index].get('amendment')?.value);\n    console.log(\"periodOfAbsence\", fa.controls[index].get('periodOfAbsence')?.value);\n  }\n  onOpen(dialog, rowIndex, subjectId) {\n    dialog.display = true;\n    dialog.rowIndex = rowIndex;\n    dialog.subjectId = subjectId;\n  }\n  onSubmit(key, dialog) {\n    const fa = this.personalAvailForm.get('personalAvailArray');\n    const amendList = fa.at(dialog.rowIndex).get('amendment').value;\n    console.log(\"dialog index\", dialog.rowIndex);\n    let date = \"\";\n    let status = \"\";\n    const dates = [];\n    switch (this.poaForm.get('selectedCategory')?.value) {\n      case 'range':\n        {\n          status = \"B\";\n          const momentRange = this.poaForm.get('selectedDateRange')?.value?.map(x => (0, moment_1.default)(x).format(this.momentDateFormat).toString());\n          if (momentRange[0] !== momentRange[1]) {\n            date = momentRange.join(' - ');\n          } else date = momentRange[0];\n          dates.push(date);\n        }\n        break;\n      case 'md':\n        status = \"B\";\n        if (this.poaForm.get('selectedMdDate')?.value) {\n          this.poaForm.get('selectedMdDate')?.value.forEach(x => {\n            dates.push((0, moment_1.default)(x).format(this.momentDateFormat).toString());\n          });\n        }\n        break;\n      case 'hd':\n        status = \"H\";\n        date = (0, moment_1.default)(this.poaForm.get('selectedHdDate')?.value).format(this.momentDateFormat).toString();\n        dates.push(date);\n        break;\n      default:\n        break;\n    }\n    dialog.display = false;\n    dates.forEach(chip => {\n      amendList.push({\n        chip,\n        type: \"add\",\n        status,\n        subjectId: dialog.subjectId\n      });\n    });\n    fa.controls[dialog.rowIndex].get('amendment')?.setValue(amendList);\n  }\n  onConfirmAmendment(event, key, rowIndex) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.editVerifierAvail(rowIndex);\n    });\n  }\n  editVerifierAvail(rowIndex) {\n    const fa = this.personalAvailForm.get('personalAvailArray');\n    const fg = fa.at(rowIndex);\n    const poa = fg.get('amendment').value.map(x => {\n      return {\n        subjectId: x.subjectId,\n        status: x.status,\n        type: x.type,\n        date: x.chip.replace(\" - \", \"|\").replace(\"(H)\", \"\").trim()\n      };\n    });\n    this.workloadService.editVerifierAvail({\n      subjectId: fg.get('subjectId').value,\n      ecNewInd: fg.get('ecNew').value ? 1 : 0,\n      ecSDInd: fg.get('ecSD').value ? 1 : 0,\n      seNewInd: fg.get('seNew').value ? 1 : 0,\n      seSDInd: fg.get('seSD').value ? 1 : 0,\n      poa\n    }).subscribe(resp => {\n      if (resp && resp.ok) {\n        this.toastService.success(resp.body.success_message);\n        this.refreshVerifierAvail();\n      }\n    }, error => {\n      console.log(\"error is\" + String(error?.error?.error_desc));\n      this.toastService.error(String(error?.error?.error_desc));\n    });\n  }\n}\nexports.VerifierAvailabilityComponent = VerifierAvailabilityComponent;\nVerifierAvailabilityComponent.ɵfac = function VerifierAvailabilityComponent_Factory(t) {\n  return new (t || VerifierAvailabilityComponent)(i0.ɵɵdirectiveInject(i1.WorkloadInboxService), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.NspConfirmationService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i5.CustomToastService), i0.ɵɵdirectiveInject(i6.Ns2HttpService), i0.ɵɵdirectiveInject(i7.DateUtilsService));\n};\nVerifierAvailabilityComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VerifierAvailabilityComponent,\n  selectors: [[\"n2-verifier-availability\"]],\n  viewQuery: function VerifierAvailabilityComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  decls: 88,\n  vars: 43,\n  consts: [[3, \"formGroup\"], [\"formArrayName\", \"personalAvailArray\"], [\"styleClass\", \"p-datatable-gridlines p-datatable-striped\", \"responsiveLayout\", \"scroll\", 3, \"value\", \"showCurrentPageReport\", \"filterDelay\", \"loading\"], [\"dataTable\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"emptyRecords\", \"\"], [\"header\", \"Add Period of Absence\", 3, \"visible\", \"breakpoints\", \"autoZIndex\", \"baseZIndex\", \"draggable\", \"modal\", \"visibleChange\", \"onHide\"], [\"poaFormRef\", \"ngForm\"], [1, \"field\", \"grid\"], [1, \"p-field-radiobutton\", \"col-3\"], [\"name\", \"selectedCategory\", \"value\", \"range\", \"formControlName\", \"selectedCategory\", \"inputId\", \"range\"], [\"for\", \"range\"], [1, \"col-9\", \"input\"], [\"appendTo\", \"body\", \"inputId\", \"rangeDateId\", \"selectionMode\", \"range\", \"formControlName\", \"selectedDateRange\", 3, \"readonlyInput\", \"showOtherMonths\", \"selectOtherMonths\", \"dateFormat\", \"disabled\"], [\"name\", \"selectedCategory\", \"value\", \"md\", \"formControlName\", \"selectedCategory\", \"inputId\", \"md\"], [\"for\", \"md\"], [\"appendTo\", \"body\", \"inputId\", \"mdDateId\", \"formControlName\", \"selectedMdDate\", \"selectionMode\", \"multiple\", 3, \"readonlyInput\", \"showOtherMonths\", \"selectOtherMonths\", \"dateFormat\", \"disabled\"], [\"name\", \"selectedCategory\", \"value\", \"hd\", \"formControlName\", \"selectedCategory\", \"inputId\", \"hd\"], [\"for\", \"hd\"], [\"appendTo\", \"body\", \"inputId\", \"hdDateId\", \"formControlName\", \"selectedHdDate\", 3, \"readonlyInput\", \"showOtherMonths\", \"selectOtherMonths\", \"dateFormat\", \"disabled\"], [\"pTemplate\", \"footer\"], [\"key\", \"confirmAddPOA\", \"header\", \"Confirmation\", \"icon\", \"fa fa-question-circle\", \"width\", \"425\"], [\"key\", \"amendment\", \"header\", \"Confirmation\", \"icon\", \"fa fa-question-circle\", \"width\", \"425\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\"], [\"icon\", \"pi pi-file-o\"], [1, \"col-6\", \"nsp-align-right\"], [\"scope\", \"col\", \"rowspan\", \"2\"], [1, \"p-d-flex\", \"p-jc-between\", \"nsp-align-center\"], [\"scope\", \"colgroup\", \"colspan\", \"4\"], [\"scope\", \"col\"], [3, \"formGroupName\"], [\"formControlName\", \"ecNew\", 3, \"value\", \"binary\"], [\"formControlName\", \"ecSD\", 3, \"value\", \"binary\"], [\"formControlName\", \"seNew\", 3, \"value\", \"binary\"], [\"formControlName\", \"seSD\", 3, \"value\", \"binary\"], [\"styleClass\", \"p-mr-2\", \"removeIcon\", \"pi pi-times\", 3, \"removable\", \"onRemove\", 4, \"ngFor\", \"ngForOf\"], [\"removeIcon\", \"pi pi-times\", 3, \"styleClass\", \"removable\", \"onRemove\", 4, \"ngFor\", \"ngForOf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"icon\", \"pi pi-plus\", 1, \"p-button-rounded\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"icon\", \"pi pi-save\", 1, \"p-button-rounded\", \"p-button-warning\", 3, \"click\"], [\"styleClass\", \"p-mr-2\", \"removeIcon\", \"pi pi-times\", 3, \"removable\", \"onRemove\"], [\"removeIcon\", \"pi pi-times\", 3, \"styleClass\", \"removable\", \"onRemove\"], [\"colspan\", \"8\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Add\", 3, \"click\"]],\n  template: function VerifierAvailabilityComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \"\\n\");\n      i0.ɵɵelementStart(1, \"form\", 0);\n      i0.ɵɵtext(2, \"\\n    \");\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtext(4, \"\\n        \");\n      i0.ɵɵelementStart(5, \"p-table\", 2, 3);\n      i0.ɵɵtext(7, \"\\n\\n                \");\n      i0.ɵɵtemplate(8, VerifierAvailabilityComponent_ng_template_8_Template, 12, 3, \"ng-template\", 4);\n      i0.ɵɵtext(9, \"\\n\\n                \");\n      i0.ɵɵtemplate(10, VerifierAvailabilityComponent_ng_template_10_Template, 63, 6, \"ng-template\", 5);\n      i0.ɵɵtext(11, \"\\n            \");\n      i0.ɵɵtemplate(12, VerifierAvailabilityComponent_ng_template_12_Template, 45, 12, \"ng-template\", 6);\n      i0.ɵɵtext(13, \"\\n            \");\n      i0.ɵɵtemplate(14, VerifierAvailabilityComponent_ng_template_14_Template, 7, 0, \"ng-template\", 7, 8, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(16, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\\n\");\n      i0.ɵɵelementStart(20, \"p-dialog\", 9);\n      i0.ɵɵlistener(\"visibleChange\", function VerifierAvailabilityComponent_Template_p_dialog_visibleChange_20_listener($event) {\n        return ctx.displayAddPOADialog.display = $event;\n      })(\"onHide\", function VerifierAvailabilityComponent_Template_p_dialog_onHide_20_listener() {\n        return ctx.initPOA();\n      });\n      i0.ɵɵtext(21, \"\\n\\n    \");\n      i0.ɵɵelementStart(22, \"h6\");\n      i0.ɵɵtext(23, \"Please select period of absence to add\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n\\n    \");\n      i0.ɵɵelementStart(25, \"form\", 0, 10);\n      i0.ɵɵtext(27, \"\\n\\n        \");\n      i0.ɵɵelementStart(28, \"div\", 11);\n      i0.ɵɵtext(29, \"\\n            \");\n      i0.ɵɵelementStart(30, \"div\", 12);\n      i0.ɵɵtext(31, \"\\n                \");\n      i0.ɵɵelement(32, \"p-radioButton\", 13);\n      i0.ɵɵtext(33, \"\\n                \");\n      i0.ɵɵelementStart(34, \"label\", 14);\n      i0.ɵɵtext(35, \"Range\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n            \");\n      i0.ɵɵelementStart(38, \"div\", 15);\n      i0.ɵɵtext(39, \"\\n                \");\n      i0.ɵɵelementStart(40, \"p-calendar\", 16);\n      i0.ɵɵtext(41, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(44, \"\\n\\n        \");\n      i0.ɵɵelementStart(45, \"div\", 11);\n      i0.ɵɵtext(46, \"\\n            \");\n      i0.ɵɵelementStart(47, \"div\", 12);\n      i0.ɵɵtext(48, \"\\n                \");\n      i0.ɵɵelement(49, \"p-radioButton\", 17);\n      i0.ɵɵtext(50, \"\\n                \");\n      i0.ɵɵelementStart(51, \"label\", 18);\n      i0.ɵɵtext(52, \"Multiple Dates\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(54, \"\\n            \");\n      i0.ɵɵelementStart(55, \"div\", 15);\n      i0.ɵɵtext(56, \"\\n                \");\n      i0.ɵɵelementStart(57, \"p-calendar\", 19);\n      i0.ɵɵtext(58, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n\\n        \");\n      i0.ɵɵelementStart(62, \"div\", 11);\n      i0.ɵɵtext(63, \"\\n            \");\n      i0.ɵɵelementStart(64, \"div\", 12);\n      i0.ɵɵtext(65, \"\\n                \");\n      i0.ɵɵelement(66, \"p-radioButton\", 20);\n      i0.ɵɵtext(67, \"\\n                \");\n      i0.ɵɵelementStart(68, \"label\", 21);\n      i0.ɵɵtext(69, \"Half-Day\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(71, \"\\n            \");\n      i0.ɵɵelementStart(72, \"div\", 15);\n      i0.ɵɵtext(73, \"\\n                \");\n      i0.ɵɵelementStart(74, \"p-calendar\", 22);\n      i0.ɵɵtext(75, \"\\n                \");\n      i0.ɵɵtext(76, \"\\n\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(78, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(79, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(80, \"\\n\\n    \");\n      i0.ɵɵtemplate(81, VerifierAvailabilityComponent_ng_template_81_Template, 6, 6, \"ng-template\", 23);\n      i0.ɵɵtext(82, \"\\n    \");\n      i0.ɵɵelement(83, \"p-confirmPopup\", 24);\n      i0.ɵɵtext(84, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(85, \"\\n\");\n      i0.ɵɵelement(86, \"p-confirmPopup\", 25);\n      i0.ɵɵtext(87, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.personalAvailForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.personalAvailArray.controls)(\"showCurrentPageReport\", true)(\"filterDelay\", 0)(\"loading\", ctx.loading);\n      i0.ɵɵadvance(15);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(38, _c4));\n      i0.ɵɵproperty(\"visible\", ctx.displayAddPOADialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(39, _c5))(\"autoZIndex\", false)(\"baseZIndex\", 99999)(\"draggable\", false)(\"modal\", true);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.poaForm);\n      i0.ɵɵadvance(15);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(40, _c6));\n      i0.ɵɵproperty(\"readonlyInput\", true)(\"showOtherMonths\", true)(\"selectOtherMonths\", true)(\"dateFormat\", ctx.dateFormat)(\"readonlyInput\", true)(\"disabled\", ctx.poaForm.controls[\"selectedCategory\"].value !== \"range\");\n      i0.ɵɵadvance(17);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(41, _c6));\n      i0.ɵɵproperty(\"readonlyInput\", true)(\"showOtherMonths\", true)(\"selectOtherMonths\", true)(\"dateFormat\", ctx.dateFormat)(\"readonlyInput\", true)(\"disabled\", ctx.poaForm.controls[\"selectedCategory\"].value !== \"md\");\n      i0.ɵɵadvance(17);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(42, _c6));\n      i0.ɵɵproperty(\"readonlyInput\", true)(\"showOtherMonths\", true)(\"selectOtherMonths\", true)(\"dateFormat\", ctx.hdDateFormat)(\"readonlyInput\", true)(\"disabled\", ctx.poaForm.controls[\"selectedCategory\"].value !== \"hd\");\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.NgControlStatus, i3.NgControlStatusGroup, i8.NgForOf, i3.FormGroupDirective, i3.FormControlName, i3.FormGroupName, i3.FormArrayName, i9.PrimeTemplate, i10.ButtonDirective, i10.Button, i11.Checkbox, i12.Table, i13.Dialog, i14.ConfirmPopup, i15.RadioButton, i16.Calendar, i17.Chip],\n  styles: [\"[_nghost-%COMP%]     .deduct-chip {\\n  background-color: red;\\n  color: white;\\n  border-radius: 4px;\\n}\\n\\n[_nghost-%COMP%]     .add-chip {\\n  background-color: green;\\n  color: white;\\n  border-radius: 4px;\\n}\\n\\n  .p-chip {\\n  border-radius: 4px;\\n  background: #14B8A6;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlcmlmaWVyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFx3b3JrbG9hZFxcdmVyaWZpZXItYXZhaWxhYmlsaXR5XFx2ZXJpZmllci1hdmFpbGFiaWxpdHkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtBQ0NKOztBREdBO0VBQ0ksdUJBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUNBSjs7QURHQTtFQUNJLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0FDQUoiLCJmaWxlIjoidmVyaWZpZXItYXZhaWxhYmlsaXR5LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3QgOjpuZy1kZWVwICAuZGVkdWN0LWNoaXB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgfVxyXG5cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuYWRkLWNoaXB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICB9XHJcblxyXG46Om5nLWRlZXAgLnAtY2hpcHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGJhY2tncm91bmQ6ICMxNEI4QTY7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcblxyXG59IiwiOmhvc3QgOjpuZy1kZWVwIC5kZWR1Y3QtY2hpcCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbjpob3N0IDo6bmctZGVlcCAuYWRkLWNoaXAge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbjo6bmctZGVlcCAucC1jaGlwIHtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBiYWNrZ3JvdW5kOiAjMTRCOEE2O1xuICBjb2xvcjogd2hpdGU7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvd29ya2xvYWQvdmVyaWZpZXItYXZhaWxhYmlsaXR5L3ZlcmlmaWVyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvd29ya2xvYWQvdmVyaWZpZXItYXZhaWxhYmlsaXR5L3ZlcmlmaWVyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FER0E7RUFDSSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtBQ0FKOztBREdBO0VBQ0ksa0JBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUNBSjtBRENBLHc5Q0FBdzlDIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3QgOjpuZy1kZWVwICAuZGVkdWN0LWNoaXB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgfVxyXG5cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuYWRkLWNoaXB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICB9XHJcblxyXG46Om5nLWRlZXAgLnAtY2hpcHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGJhY2tncm91bmQ6ICMxNEI4QTY7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcblxyXG59IiwiOmhvc3QgOjpuZy1kZWVwIC5kZWR1Y3QtY2hpcCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbjpob3N0IDo6bmctZGVlcCAuYWRkLWNoaXAge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbjo6bmctZGVlcCAucC1jaGlwIHtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBiYWNrZ3JvdW5kOiAjMTRCOEE2O1xuICBjb2xvcjogd2hpdGU7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","VerifierAvailabilityComponent","personalAvailArray","personalAvailForm","get","constructor","workloadService","account","fb","nspConfirmService","formBuilder","toastService","ns2Http","dateUtilsService","display","rowIndex","subjectId","group","array","identity","subscribe","currentAccount","copyAccount","subscription","rxjs_1","ngOnInit","console","log","String","login","roleList","reqRoles","some","r","includes","refreshVerifierAvail","initPOA","ngOnDestroy","unsubscribe","poaForm","selectedDateRange","forms_1","Date","selectedMdDate","selectedHdDate","selectedCategory","loading","unsortedList","setTimeout","params","http_1","forEach","role","append","getVerifierAvailability","resp","body","data","verifierAvailList","sort","sortVerifiers","constructForm","email","firstName","lastName","username","authorities","groups","currentLogin","a","b","fullName","arr","clear","index","poaList","date","push","loginName","verifierName","ecNew","ecNewInd","ecSD","ecSDInd","seNew","seNewInd","seSD","seSDInd","periodOfAbsence","consolidatePOA","required","amendment","poaDate","blockedDates","concat","processBlockDates","halfDates","halfday","unixArr","split","map","x","dateArr","chip","status","trim","onRemoveChip","fa","at","value","filter","amendList","controls","setValue","onRemoveAmendmentChip","type","onOpen","dialog","onSubmit","key","dates","momentRange","format","momentDateFormat","toString","join","onConfirmAmendment","event","onConfirmPopup","editVerifierAvail","fg","poa","replace","ok","success","success_message","error","error_desc","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\verifier-availability\\verifier-availability.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\verifier-availability\\verifier-availability.component.html"],"sourcesContent":["import { HttpParams } from '@angular/common/http';\r\nimport {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { Ns2HttpService } from 'app/shared/service/ns2-http.service';\r\nimport  moment from 'moment';\r\nimport { Table } from 'primeng/table';\r\nimport { Subscription } from 'rxjs';\r\nimport { VerifierAvailDto } from '../personal-availability/verifier-avail.model';\r\nimport { WorkloadInboxService } from '../service/workload-inbox.service';\r\n\r\n@Component({\r\n  selector: 'n2-verifier-availability',\r\n  templateUrl: './verifier-availability.component.html',\r\n  styleUrls: ['./verifier-availability.component.scss']\r\n})\r\nexport class VerifierAvailabilityComponent implements OnInit, OnDestroy {\r\n\r\n  public verifierAvailList : any[] = [];\r\n\r\n  loading!: boolean;\r\n  currentAccount: any;\r\n  roleList!: string[];\r\n  amendList: any[][]=[];\r\n  poaList: string[][]=[];\r\n  dateFormat= \"dd-mm-yy\"\r\n  hdDateFormat= \"dd-mm-yy (H)\"\r\n  momentDateFormat= \"DD-MM-YYYY\"\r\n\r\n  rangeDate!: Date[];\r\n  mdDate!: Date;\r\n  hdDate!: Date;\r\n  poaForm!:  FormGroup;\r\n  displayAddPOADialog: any =\r\n  {\r\n    display: false,\r\n    rowIndex: 0,\r\n    subjectId: \"\"\r\n\r\n  };\r\n  @ViewChild('dataTable') table: Table;\r\n\r\n\r\n  personalAvailForm: FormGroup = this.fb.group({\r\n    personalAvailArray: this.fb.array([]),\r\n  })\r\n\r\n  private subscription: Subscription;\r\n\r\n  get personalAvailArray(): FormArray { return this.personalAvailForm?.get('personalAvailArray') as FormArray }\r\n\r\n  constructor(  private workloadService: WorkloadInboxService,\r\n    private account: AccountService,\r\n    private fb:FormBuilder,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private formBuilder: FormBuilder,\r\n    private toastService: CustomToastService,\r\n    private ns2Http: Ns2HttpService,\r\n    public dateUtilsService: DateUtilsService,\r\n    ) {\r\n    // TODO: Shaun to fix\r\n    // eslint-disable-next-line @typescript-eslint/no-shadow\r\n      this.account.identity().subscribe((account: any) => {\r\n        this.currentAccount = this.copyAccount(account);\r\n      });\r\n      this.subscription = new Subscription();\r\n     }\r\n\r\n  ngOnInit(): void {\r\n\r\n    console.log(\"this curr\" + String(this.currentAccount.login));\r\n    // tempo //will be getting from user auth\r\n    this.roleList = [\"role-cv\"];\r\n\r\n    const reqRoles = [\"role-ca\", \"role-cv\"];\r\n\r\n    if(this.roleList.some(r => reqRoles.includes(r))){\r\n      this.refreshVerifierAvail();\r\n    }\r\n\r\n      this.initPOA();\r\n\r\n  }\r\n\r\n  ngOnDestroy(): void{\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  initPOA(): void{\r\n    this.poaForm = this.formBuilder.group({\r\n      selectedDateRange: new FormControl([new Date(), new Date()]),\r\n      selectedMdDate: new FormControl([new Date()]),\r\n      selectedHdDate: new FormControl(new Date()),\r\n      selectedCategory: ['range',[]],\r\n    });\r\n  }\r\n\r\n  refreshVerifierAvail(): void {\r\n    this.loading =  true;\r\n    let unsortedList;\r\n    setTimeout(() => {\r\n      let params = new HttpParams();\r\n      this.roleList.forEach(role=>{\r\n        params = params.append(\"roleList\", role);\r\n      })\r\n\r\n      this.workloadService.getVerifierAvailability({params}).subscribe((resp: any) => {\r\n        if (resp.body.data) {\r\n          unsortedList = resp.body.data;\r\n          this.verifierAvailList = unsortedList.sort(this.sortVerifiers());\r\n          this.constructForm();\r\n        }\r\n        this.loading = false;\r\n      });\r\n    }, 0);\r\n  }\r\n\r\n  copyAccount(account: any): any {\r\n    return {\r\n      email: account.email,\r\n      firstName: account.firstName,\r\n      lastName: account.lastName,\r\n      login: account.username,\r\n      authorities: account.authorities,\r\n      groups: account.groups,\r\n    };\r\n  }\r\n\r\n  sortVerifiers(): any{\r\n    const currentLogin = this.currentAccount.login;\r\n    return function (a:VerifierAvailDto,b:VerifierAvailDto){\r\n\r\n      if(a.subjectId === b.subjectId){\r\n        return 0;\r\n      }else if (a.subjectId === currentLogin){\r\n        return -1;\r\n      }else if (b.subjectId ===  currentLogin){\r\n        return 1;\r\n      }else {\r\n        return a.fullName<b.fullName?-1:1;\r\n      }\r\n    }\r\n  }\r\n\r\n  constructForm():void {\r\n    const arr = this.personalAvailForm.get('personalAvailArray') as FormArray;\r\n    arr.clear();\r\n\r\n    this.verifierAvailList.forEach((data, index) => {\r\n      this.poaList[index] = data.date;\r\n      arr.push(\r\n          this.fb.group({\r\n            subjectId: data.subjectId,\r\n            loginName: data.loginName,\r\n            verifierName: data.fullName,\r\n            ecNew: new FormControl(data.ecNewInd===1? true: false),\r\n            ecSD: new FormControl(data.ecSDInd===1? true: false),\r\n            seNew: new FormControl(data.seNewInd===1? true: false),\r\n            seSD: new FormControl(data.seSDInd===1? true: false),\r\n            periodOfAbsence: new FormControl(this.consolidatePOA(data), Validators.required),\r\n            amendment: new FormControl([]),\r\n\r\n          }),\r\n        );\r\n      }\r\n    );\r\n\r\n  }\r\n\r\n  consolidatePOA(data: any): any[]{\r\n    let poaDate: any[] = [];\r\n    if(data.blockedDates){\r\n      poaDate = poaDate.concat(this.processBlockDates(data.blockedDates, false, data.subjectId))\r\n    }\r\n    if(data.halfDates){\r\n      poaDate = poaDate.concat(this.processBlockDates(data.halfDates, true, data.subjectId))\r\n    }\r\n    return poaDate;\r\n  }\r\n\r\n  processBlockDates(date: string, halfday: boolean, subjectId: string): any[] {\r\n    const unixArr: string[] = date.split(\",\");\r\n    return unixArr.map(x=>{\r\n      const dateArr = x.split(\" - \");\r\n      let chip = \"\";\r\n      let status = \"\";\r\n      if(!halfday){\r\n        status = \"B\";\r\n        if(dateArr[0].trim()===dateArr[1].trim()){\r\n          chip = dateArr[0];\r\n        }else {\r\n          chip = dateArr[0].concat(\" - \").concat(dateArr[1]);\r\n        }\r\n      }\r\n      else {\r\n        status = \"H\";\r\n        if(dateArr[0].trim()===dateArr[1].trim()){\r\n          chip = dateArr[0].concat(\"(H)\");\r\n        }\r\n        else{\r\n          chip = dateArr[0]\r\n          .concat(\" - \").concat(dateArr[1]).concat(\"(H)\");\r\n        }\r\n      }\r\n      return {\r\n        subjectId,\r\n        chip,\r\n        status\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  onRemoveChip(chip: any, index: number): void {\r\n    console.log(\"chip is\", chip);\r\n    const fa = this.personalAvailForm.get('personalAvailArray') as FormArray;\r\n    const poaList = fa.at(index).get('periodOfAbsence').value.filter((x: any) => x !== chip);\r\n    const amendList = fa.at(index).get('amendment').value;\r\n    chip['type'] = \"deduct\";\r\n    console.log(\"new chip,\", chip); \r\n    amendList.push(chip);\r\n    fa.controls[index].get('amendment')?.setValue(amendList);\r\n    fa.controls[index].get('periodOfAbsence')?.setValue(poaList);\r\n\r\n    console.log(\"amendment\", fa.controls[index].get('amendment')?.value);\r\n    console.log(\"periodOfAbsence\", fa.controls[index].get('periodOfAbsence')?.value);\r\n\r\n  }\r\n\r\n  onRemoveAmendmentChip(chip: any, index: number): void {\r\n\r\n    const fa = this.personalAvailForm.get('personalAvailArray') as FormArray;\r\n    const poaList = fa.at(index).get('periodOfAbsence').value;\r\n    const amendList = fa.at(index).get('amendment').value.filter((x: any) => x !== chip);\r\n\r\n    if (chip.type === \"deduct\") {\r\n      poaList.push(chip);\r\n    }\r\n    fa.controls[index].get('periodOfAbsence')?.setValue(poaList);\r\n    fa.controls[index].get('amendment')?.setValue(amendList);\r\n\r\n    console.log(\"amendment\", fa.controls[index].get('amendment')?.value);\r\n    console.log(\"periodOfAbsence\", fa.controls[index].get('periodOfAbsence')?.value);\r\n\r\n  }\r\n\r\n  onOpen(dialog: any, rowIndex: number, subjectId: string): void {\r\n    dialog.display = true;\r\n    dialog.rowIndex = rowIndex;\r\n    dialog.subjectId = subjectId;\r\n  }\r\n\r\n  onSubmit(key: string, dialog: any): void {\r\n    const fa = this.personalAvailForm.get('personalAvailArray') as FormArray;\r\n    const amendList = fa.at(dialog.rowIndex).get('amendment').value;\r\n\r\n    console.log(\"dialog index\", dialog.rowIndex);\r\n    let date = \"\";\r\n    let status = \"\";\r\n    const dates: string[] = [];\r\n    switch (this.poaForm.get('selectedCategory')?.value) {\r\n      case 'range': {\r\n        status = \"B\";\r\n        const momentRange: string[] = this.poaForm.get('selectedDateRange')?.value?.map((x: Date) =>\r\n          moment(x).format(this.momentDateFormat).toString()\r\n        )\r\n        if(momentRange[0]!==momentRange[1]){\r\n          date = momentRange.join(' - ');\r\n        }else date = momentRange[0];\r\n        dates.push(date);\r\n      }\r\n        break;\r\n      case 'md':\r\n        status = \"B\";\r\n        if(this.poaForm.get('selectedMdDate')?.value){\r\n          this.poaForm.get('selectedMdDate')?.value.forEach((x:any)=>{\r\n            dates.push(moment(x).format(this.momentDateFormat).toString())\r\n          })\r\n        }\r\n        break;\r\n      case 'hd':\r\n        status = \"H\";\r\n    \r\n        date = moment(this.poaForm.get('selectedHdDate')?.value).format(this.momentDateFormat).toString();\r\n        dates.push(date);\r\n\r\n        break;\r\n      default:\r\n        break;\r\n\r\n    }\r\n    dialog.display = false;\r\n    dates.forEach(chip=>{\r\n      amendList.push({chip, type: \"add\", status, subjectId: dialog.subjectId});\r\n    })\r\n    fa.controls[dialog.rowIndex].get('amendment')?.setValue(amendList);\r\n  }\r\n\r\n  onConfirmAmendment(event: Event, key: any, rowIndex: number):void{\r\n\r\n    this.nspConfirmService.onConfirmPopup(event, key, null,\r\n      ()=>{\r\n          this.editVerifierAvail(rowIndex);\r\n      }\r\n    );\r\n\r\n  }\r\n\r\n  editVerifierAvail(rowIndex: number): void {\r\n    const fa = this.personalAvailForm.get('personalAvailArray') as FormArray; \r\n    const fg =   fa.at(rowIndex);\r\n\r\n    const poa = fg.get('amendment').value.map((x:any)=>{\r\n      return {\r\n        subjectId: x.subjectId,\r\n        status:x.status,\r\n        type: x.type,\r\n        date: x.chip.replace( \" - \", \"|\").replace(\"(H)\",\"\").trim()\r\n      }\r\n    });\r\n    this.workloadService.editVerifierAvail(\r\n      {\r\n        subjectId: fg.get('subjectId').value,\r\n        ecNewInd: fg.get('ecNew').value? 1: 0,\r\n        ecSDInd: fg.get('ecSD').value? 1: 0,\r\n        seNewInd: fg.get('seNew').value? 1: 0,\r\n        seSDInd: fg.get('seSD').value? 1: 0,\r\n        poa\r\n      }\r\n      ).subscribe((resp: any) => {\r\n      if (resp && resp.ok) {\r\n        this.toastService.success(resp.body.success_message);\r\n        this.refreshVerifierAvail();\r\n      }\r\n    },\r\n    (error: any) => {\r\n      console.log(\"error is\" + String(error?.error?.error_desc));\r\n      this.toastService.error(String(error?.error?.error_desc));\r\n    }\r\n  ); \r\n  }\r\n\r\n\r\n}\r\n","<!-- *ngIf=\"!role.includes('DEF-func-vw-claim-approver-inbox')\" -->\r\n<form [formGroup]=\"personalAvailForm\">\r\n    <div formArrayName=\"personalAvailArray\">\r\n        <p-table\r\n        [value]=\"personalAvailArray.controls\"\r\n                    [showCurrentPageReport]=\"true\"\r\n                    [filterDelay]=\"0\"\r\n                    [loading] = \"loading\"\r\n                    styleClass=\"p-datatable-gridlines p-datatable-striped\"\r\n                    responsiveLayout=\"scroll\"\r\n                    #dataTable\r\n                    >\r\n\r\n                <ng-template pTemplate=\"caption\">\r\n                    <div class=\"grid\">\r\n                        <div class = \"col-6 nsp-align-left\">\r\n                            <p-button icon=\"pi pi-file-o\" [style]=\"{'margin-left': '.5em', 'margin-right': '.5em'}\"></p-button>\r\n                        </div>\r\n                        <div class = \"col-6 nsp-align-right\">\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n\r\n                <ng-template pTemplate=\"header\" let-columns>\r\n                    <tr>\r\n                        <th scope=\"col\" rowspan=\"2\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                <!-- <div *ngIf=\"!role.includes('DEF-func-vw-claim-approver-inbox')\">Verifier</div> -->\r\n                                <div>Verifier</div>\r\n\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"colgroup\" colspan=\"4\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                Auto Routing\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\" rowspan=\"2\" [style] = \"{'width': '25%'}\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                Period of Absence\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\" rowspan=\"2\" [style] = \"{'width': '25%'}\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                Amendment\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\" rowspan=\"2\">\r\n\r\n                        </th>\r\n                    </tr>\r\n                    <!-- <tr *ngIf=\"!role.includes('DEF-func-vw-claim-approver-inbox')\"> -->\r\n                        <tr>\r\n\r\n                        <th scope=\"col\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                EC New\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                EC SD\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                SE New\r\n                            </div>\r\n                        </th>\r\n                        <th scope=\"col\">\r\n                            <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                                EC SD\r\n                            </div>\r\n                        </th>\r\n\r\n                    </tr>\r\n                </ng-template>\r\n            <ng-template pTemplate=\"body\" let-verifierAvail let-rowIndex = \"rowIndex\" let-columns=\"columns\">\r\n\r\n                <tr [formGroupName]=\"rowIndex\">\r\n\r\n                    <td>{{verifierAvail.value.verifierName}}</td>\r\n                    <td><p-checkbox formControlName = \"ecNew\"\r\n                          [value]=\"verifierAvail.value.ecNew\" [binary]=\"true\"></p-checkbox></td>\r\n                    <td><p-checkbox formControlName = \"ecSD\"\r\n                         [value]=\"verifierAvail.value.ecSD\" [binary]=\"true\"></p-checkbox></td>\r\n                    <td><p-checkbox formControlName = \"seNew\"\r\n                         [value]=\"verifierAvail.value.seNew\" [binary]=\"true\"></p-checkbox></td>\r\n                    <td><p-checkbox formControlName = \"seSD\"\r\n                         [value]=\"verifierAvail.value.seSD\" [binary]=\"true\"></p-checkbox></td>\r\n                    <td>\r\n                        <div>\r\n                            <p-chip *ngFor = \"let chip of verifierAvail.value.periodOfAbsence\"\r\n                            styleClass=\"p-mr-2\" [removable]=\"true\" removeIcon = \"pi pi-times\" (onRemove)=\"onRemoveChip(chip, rowIndex)\"\r\n                            >\r\n                                <label>{{chip.chip}}</label>\r\n                            </p-chip>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <div>\r\n                            <p-chip [styleClass] = \"chip.type=='deduct'? 'deduct-chip':'add-chip'\"\r\n                            *ngFor = \"let chip of verifierAvail.value.amendment\"\r\n                            [removable]=\"true\" removeIcon = \"pi pi-times\" (onRemove)=\"onRemoveAmendmentChip(chip, rowIndex)\">\r\n                                    <label>{{chip.chip}}</label>\r\n                            </p-chip>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <td>\r\n                        <div class=\"p-d-flex p-jc-between nsp-align-center\">\r\n                            <button pButton pRipple type=\"button\" icon=\"pi pi-plus\" class=\"p-button-rounded\" (click) = \"onOpen(displayAddPOADialog, rowIndex, verifierAvail.value.subjectId)\"\r\n                            ></button>\r\n                            <button pButton pRipple type=\"button\" icon=\"pi pi-save\" class=\"p-button-rounded p-button-warning\" (click) = \"onConfirmAmendment($event, 'amendment', rowIndex)\"\r\n                            ></button>\r\n                        </div>\r\n                    </td>\r\n\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\" #emptyRecords>\r\n                <tr>\r\n                    <td colspan=\"8\">No records found.</td>\r\n                </tr>\r\n            </ng-template>\r\n        </p-table>\r\n    </div>\r\n</form>\r\n\r\n<p-dialog header=\"Add Period of Absence\"\r\n[(visible)]=\"displayAddPOADialog.display\"\r\n[breakpoints]=\"{'960px': '75vw'}\"\r\n[autoZIndex] = \"false\"\r\n[baseZIndex] = 99999\r\n[draggable]=\"false\"\r\n[style]=\"{width: '40vw'}\"\r\n[modal]=\"true\"\r\n(onHide) = \"initPOA()\"\r\n>\r\n\r\n    <h6>Please select period of absence to add</h6>\r\n\r\n    <form  #poaFormRef=\"ngForm\" [formGroup]=\"poaForm\">\r\n\r\n        <div class=\"field grid\">\r\n            <div class=\"p-field-radiobutton col-3\">\r\n                <p-radioButton name=\"selectedCategory\" value=\"range\" formControlName=\"selectedCategory\" inputId=\"range\"></p-radioButton>\r\n                <label for=\"range\">Range</label>\r\n            </div>\r\n            <div class=\"col-9 input\">\r\n                <p-calendar\r\n                appendTo=\"body\"\r\n                inputId=\"rangeDateId\"\r\n                [readonlyInput]=\"true\"\r\n                [showOtherMonths] = \"true\"\r\n                [selectOtherMonths] = \"true\"\r\n                [style]=\"{width: '80%'}\"\r\n                [dateFormat]=\"dateFormat\"\r\n                selectionMode=\"range\"\r\n                [readonlyInput]=\"true\"\r\n                formControlName = \"selectedDateRange\"\r\n                [disabled] = \"poaForm.controls['selectedCategory'].value !== 'range'\"\r\n\r\n                >\r\n                </p-calendar>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <div class=\"p-field-radiobutton col-3\">\r\n                <p-radioButton name=\"selectedCategory\" value=\"md\" formControlName=\"selectedCategory\" inputId=\"md\"></p-radioButton>\r\n                <label for=\"md\">Multiple Dates</label>\r\n            </div>\r\n            <div class=\"col-9 input\">\r\n                <p-calendar\r\n                appendTo=\"body\"\r\n                inputId=\"mdDateId\"\r\n                [readonlyInput]=\"true\"\r\n                [showOtherMonths] = \"true\"\r\n                [selectOtherMonths] = \"true\"\r\n                [style]=\"{width: '80%'}\"\r\n                [dateFormat]=\"dateFormat\"\r\n                [readonlyInput]=\"true\"\r\n                formControlName = \"selectedMdDate\"\r\n                selectionMode=\"multiple\"\r\n                [disabled] = \"poaForm.controls['selectedCategory'].value!== 'md'\"\r\n\r\n                >\r\n                </p-calendar>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <div class=\"p-field-radiobutton col-3\">\r\n                <p-radioButton name=\"selectedCategory\" value=\"hd\" formControlName=\"selectedCategory\" inputId=\"hd\"></p-radioButton>\r\n                <label for=\"hd\">Half-Day</label>\r\n            </div>\r\n            <div class=\"col-9 input\">\r\n                <p-calendar\r\n                appendTo=\"body\"\r\n                inputId=\"hdDateId\"\r\n                [readonlyInput]=\"true\"\r\n                [showOtherMonths] = \"true\"\r\n                [selectOtherMonths] = \"true\"\r\n                [style]=\"{width: '80%'}\"\r\n                [dateFormat]=\"hdDateFormat\"\r\n                [readonlyInput]=\"true\"\r\n                formControlName = \"selectedHdDate\"\r\n                [disabled] = \"poaForm.controls['selectedCategory'].value!== 'hd'\"\r\n                >\r\n                <!-- <ng-template pTemplate=\"date\" let-date>\r\n                    <span>{{date}} (H)</span>\r\n                </ng-template> -->\r\n\r\n                </p-calendar>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <ng-template pTemplate=\"footer\">\r\n        <button pButton class =\"p-button-danger\" label=\"Cancel\"  (click)=\"displayAddPOADialog.display=false\" [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\">\r\n        </button>\r\n        <button pButton  label=\"Add\"  (click)=\"onSubmit('confirmAddPOA', displayAddPOADialog)\"\r\n        [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"\r\n        ></button>\r\n\r\n    </ng-template>\r\n    <p-confirmPopup key = \"confirmAddPOA\" header=\"Confirmation\" icon=\"fa fa-question-circle\" width=\"425\"></p-confirmPopup>\r\n\r\n</p-dialog>\r\n<p-confirmPopup key = \"amendment\" header=\"Confirmation\" icon=\"fa fa-question-circle\" width=\"425\"></p-confirmPopup>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
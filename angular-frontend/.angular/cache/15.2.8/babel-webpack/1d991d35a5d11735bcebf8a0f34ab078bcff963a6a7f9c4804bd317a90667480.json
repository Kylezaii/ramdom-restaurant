{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileUpload3Component = void 0;\nconst tslib_1 = require(\"tslib\");\nconst core_1 = require(\"@angular/core\");\nconst nspapp_constants_1 = require(\"app/shared/constants/nspapp.constants\");\nconst api_1 = require(\"primeng/api\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst angular_cacheable_1 = require(\"angular-cacheable\");\nconst forms_1 = require(\"@angular/forms\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i2 = tslib_1.__importStar(require(\"app/shared/service/file-upload.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/fileupload\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/progressbar\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst _c0 = [\"pfileUpload\"];\nconst _c1 = function () {\n  return {\n    \"height\": \"6px\"\n  };\n};\nfunction FileUpload3Component_ng_template_3_p_progressBar_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-progressBar\", 6);\n  }\n  if (rf & 2) {\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nconst _c2 = function () {\n  return {\n    \"background-color\": \"white\"\n  };\n};\nfunction FileUpload3Component_ng_template_3_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵelementStart(2, \"p-messages\", 8);\n    i0.ɵɵlistener(\"valueChange\", function FileUpload3Component_ng_template_3_span_13_Template_p_messages_valueChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.errMsg = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(5, _c2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r4.errMsg)(\"showTransitionOptions\", \"0ms\")(\"hideTransitionOptions\", \"0ms\")(\"closable\", false);\n  }\n}\nfunction FileUpload3Component_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n      \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelement(7, \"br\")(8, \"br\");\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵtemplate(10, FileUpload3Component_ng_template_3_p_progressBar_10_Template, 1, 3, \"p-progressBar\", 4);\n    i0.ɵɵtext(11, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵtemplate(13, FileUpload3Component_ng_template_3_span_13_Template, 4, 6, \"span\", 5);\n    i0.ɵɵtext(14, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" Files selected:  \", ctx_r1.selectedFiles.length, \"\\n        \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Files uploaded:  \", ctx_r1.verifiedFiles.length, \"\\n        \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getFormValidationErrors() && ctx_r1.ngControl.control.dirty);\n  }\n}\nfunction FileUpload3Component_ng_template_5_ul_1_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const file_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", file_r9.meta_data.fileName, \"\\n        - \", i0.ɵɵpipeBind2(2, 2, file_r9.meta_data.fileSize / 1024, \"1.2-2\"), \" KB\\n      \");\n  }\n}\nfunction FileUpload3Component_ng_template_5_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵtemplate(2, FileUpload3Component_ng_template_5_ul_1_li_2_Template, 3, 5, \"li\", 10);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.verifiedFiles);\n  }\n}\nfunction FileUpload3Component_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵtemplate(1, FileUpload3Component_ng_template_5_ul_1_Template, 4, 1, \"ul\", 9);\n    i0.ɵɵtext(2, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.verifiedFiles.length);\n  }\n}\nclass FileUpload3Component {\n  constructor(messageService, fileUploadService, toastService, ngControl) {\n    this.messageService = messageService;\n    this.fileUploadService = fileUploadService;\n    this.toastService = toastService;\n    this.ngControl = ngControl;\n    this.verifiedFiles = [];\n    this.selectedFiles = [];\n    this.fileFormat = nspapp_constants_1.NSPAppConstants.FILE_FORMAT;\n    this.isMultiple = true;\n    this.loading = false;\n    this.submitInd = this.verifiedFiles.length !== 0;\n    this.errMsg = [{\n      severity: 'error',\n      summary: 'Error',\n      detail: 'Message Content'\n    }];\n    this.hasErrors = false;\n    this.txnIdListEvent = new core_1.EventEmitter();\n    this.closeEvent = new core_1.EventEmitter();\n    this.fileEventEvent = new core_1.EventEmitter();\n    this.defaultParam = {\n      fileLimit: nspapp_constants_1.NSPAppConstants.MAXIMUM_FILES,\n      maxMultiFileSize: nspapp_constants_1.NSPAppConstants.MAXIMUM_MULTI_FILE_SIZE,\n      maxSingleFileSize: nspapp_constants_1.NSPAppConstants.MAXIMUM_SINGLE_FILE_SIZE // in MB Override this if db fetches value or cache value\n    };\n    // Control Value Accessor related methods\n    this.onChange = () => {\n      console.log(\"onChange\");\n    };\n    this.onTouch = () => {\n      console.log(\"onTouch\");\n    };\n    if (this.ngControl) {\n      this.ngControl.valueAccessor = this;\n    }\n    this.subscription = new rxjs_1.Subscription();\n  }\n  ngOnInit() {\n    this.preloadDMSParams();\n  }\n  getFormValidationErrors() {\n    if (this.ngControl.control?.errors) {\n      this.errMsg = Object.values(this.ngControl.control?.errors).map(msg => ({\n        severity: 'error',\n        summary: 'Error',\n        detail: msg\n      }));\n    }\n    return this.ngControl.control?.errors != null;\n  }\n  preloadFiles(fileArr) {\n    // Clear underlying files\n    this.pFileUpload.clear();\n    fileArr.forEach(element => {\n      this.pFileUpload.files.push(element);\n    });\n    this.selectedFiles = this.pFileUpload.files;\n    this.onChange(this.pFileUpload.files);\n  }\n  logControl() {\n    console.log(this.ngControl.control.errors);\n  }\n  onSelect(event) {\n    console.log('onSelect() of NSPAY2.0 file-upload component', event.currentFiles);\n    this.selectedFiles = event.currentFiles;\n    this.fileEventEvent.emit(this.selectedFiles);\n    this.onChange(event.currentFiles);\n  }\n  onProgress(event) {\n    this.pFileUpload.progress = event;\n  }\n  onRemove(event) {\n    console.log('removed files', event);\n    let filesToEmit = this.pFileUpload.files;\n    // Filters away the just-removed file and emit out the file list\n    filesToEmit = filesToEmit.filter(item => item !== event.file);\n    this.onChange(filesToEmit);\n  }\n  onRemoveAll() {\n    console.log('removing all files', this.selectedFiles);\n    this.pFileUpload.clear();\n    this.selectedFiles = [];\n    this.onChange(this.pFileUpload.files);\n  }\n  onClose() {\n    console.log('before', this.selectedFiles);\n    const closure = this.selectedFiles;\n    this.closeEvent.emit(closure);\n  }\n  ngOnDestroy() {\n    console.log('destroyed');\n  }\n  clearCustomFileArrays() {\n    this.selectedFiles = [];\n    this.onChange(this.pFileUpload.files);\n  }\n  writeValue(obj) {\n    this.pFileUpload.clear();\n    this.selectedFiles = [];\n    this.verifiedFiles = [];\n  }\n  // Upon UI element value changes, this method gets triggered\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  seeChange(event) {\n    console.log(\"whats the change\", event);\n    console.log(\"whats the change\", this.selectedFiles);\n  }\n  // Upon touching the element, this method gets triggered\n  registerOnTouched(fn) {\n    // console.log('Function called: registerOnTouched');\n    this.onTouch = fn;\n  }\n  setDisabledState(isDisabled) {\n    console.log(\"disabledState\", isDisabled);\n  }\n  preloadDMSParams() {\n    this.fileUploadService.preloadDMSParam(null).subscribe(resp => {\n      if (resp.body.data) {\n        const preloadedParams = resp.body.data;\n        console.log('preloaded', preloadedParams);\n        this.defaultParam.maxMultiFileSize = preloadedParams.dms_multiple_file_max_size;\n        this.defaultParam.maxSingleFileSize = preloadedParams.dms_single_file_max_size;\n        this.defaultParam.fileLimit = preloadedParams.dms_max_number_files;\n        const baseValidator = forms_1.Validators.compose([fileupload2_directive_1.FileUploadValidator2.maxFileLimit(this.defaultParam.fileLimit), fileupload2_directive_1.FileUploadValidator2.maxSingleFileSize(this.defaultParam.maxSingleFileSize)]);\n        // const baseValidator: ValidatorFn[] = [FileUploadValidator2.maxFileLimit(this.defaultParam.fileLimit),\n        //   FileUploadValidator2.maxSingleFileSize(this.defaultParam.maxSingleFileSize)\n        // ];\n        const mergedValidator = forms_1.Validators.compose([baseValidator, this.ngControl.control.validator]);\n        this.ngControl.control.setValidators(mergedValidator);\n        this.ngControl.control.updateValueAndValidity();\n        // if(this.ngControl.control.hasValidator){\n        //   console.log('outer have');\n        //   const outerValidator = this.ngControl.control.validator;\n        //   this.ngControl.control.clearValidators;\n        //   this.ngControl.control.updateValueAndValidity;\n        //   const arr = baseValidator.concat([outerValidator]);\n        //   this.ngControl.control.setValidators(arr);\n        // }else {\n        //   console.log('outer dont have');\n        //   this.ngControl.control.setValidators(baseValidator);\n        // }\n      }\n    });\n  }\n  /**\r\n   *\r\n   * @param module -> TODO: Update definition of param\r\n   * @param useCase -> TODO: Update definition of param\r\n   */\n  fileUploadHandler(module, useCase) {\n    const eventFiles = this.selectedFiles;\n    console.log('uploading files:', this.selectedFiles);\n    this.loading = true;\n    this.subscription.add();\n    this.fileUploadService.generateProcInst(null).pipe((0, operators_1.concatMap)(procIdResp => {\n      if (procIdResp && procIdResp.status === 200) {\n        if (!this.isMultiple) {\n          return this.fileUploadService.uploadSingle(eventFiles[0], procIdResp.body.data, module, useCase);\n        } else {\n          return this.fileUploadService.uploadMultiple(eventFiles, procIdResp.body.data, module, useCase);\n        }\n      } else {\n        throw new Error('Failed to generate Process Instance');\n      }\n    })).subscribe(resp => {\n      if (resp) {\n        if (!this.isMultiple) {\n          if (resp.status === 200) {\n            const txnIdList = [];\n            if (!resp.body.data.err_id) {\n              this.verifiedFiles.push(resp.body.data.meta_data);\n              this.toastService.success(resp.body.success_message);\n              txnIdList.push(resp.body.data.meta_data.id);\n              this.txnIdListEvent.emit(txnIdList);\n            } else {\n              this.toastService.error(String(resp.body.data.err_id) + ': ' + String(resp.body.data.err_msg));\n            }\n            this.loading = false;\n          }\n        } else {\n          if (resp.status === 200) {\n            // for(let file of resp.body.data.file_upload_resp_list) {\n            //   this.verifiedFiles.push(file.meta_data);\n            // }\n            this.verifiedFiles = resp.body.data.file_upload_resp_list.filter(x => x.err_id == null);\n            const txnIdList = this.verifiedFiles.map(x => String(x.meta_data.id));\n            console.log('verified list', this.verifiedFiles);\n            this.txnIdListEvent.emit(txnIdList);\n            if (!resp.body.data.error_map || resp.body.data.error_map && Object.keys(resp.body.data.error_map).length === 0) {\n              this.toastService.success(resp.body.success_message);\n            } else {\n              const errList = Object.entries(resp.body.data.error_map).map(([key, value]) => ({\n                errId: key,\n                value\n              }));\n              console.log('erroList is ', errList);\n              let errorMsg = '';\n              errList.forEach(x => {\n                errorMsg = errorMsg.concat(x.errId).concat(': ').concat(x.value).concat('</br>');\n              });\n              console.log('errMsg is ' + errorMsg);\n              this.toastService.error(errorMsg);\n            }\n            // txnIdList = resp.body.data.file_upload_resp_list.map(x=>{return x.meta_data.id});\n            this.loading = false;\n          }\n        }\n      }\n    }, error => {\n      console.log(\"error is \" + String(error));\n      this.loading = false;\n    });\n    this.onRemoveAll();\n  }\n}\nFileUpload3Component.ɵfac = function FileUpload3Component_Factory(t) {\n  return new (t || FileUpload3Component)(i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.FileUploadService), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.NgControl, 10));\n};\nFileUpload3Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FileUpload3Component,\n  selectors: [[\"n2-file-upload3\"]],\n  viewQuery: function FileUpload3Component_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pFileUpload = _t.first);\n    }\n  },\n  outputs: {\n    txnIdListEvent: \"txnIdListEvent\",\n    closeEvent: \"closeEvent\",\n    fileEventEvent: \"fileEventEvent\"\n  },\n  features: [i0.ɵɵProvidersFeature([api_1.MessageService\n  // {\n  //   provide: NG_VALUE_ACCESSOR,\n  //   useExisting: forwardRef(() =>FileUploadComponent),\n  //   multi: true\n  // }\n  ])],\n  decls: 8,\n  vars: 3,\n  consts: [[\"name\", \"fileupload[]\", \"cancelLabel\", \"Remove All\", \"uploadLabel\", \"Verify File\", 3, \"multiple\", \"showUploadButton\", \"customUpload\", \"onSelect\", \"onRemove\", \"onProgress\", \"onClear\"], [\"pfileUpload\", \"\"], [\"pTemplate\", \"toolbar\"], [\"pTemplate\", \"content\"], [\"mode\", \"indeterminate\", 3, \"style\", 4, \"ngIf\"], [3, \"ngStyle\", 4, \"ngIf\"], [\"mode\", \"indeterminate\"], [3, \"ngStyle\"], [3, \"value\", \"showTransitionOptions\", \"hideTransitionOptions\", \"closable\", \"valueChange\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function FileUpload3Component_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-fileUpload\", 0, 1);\n      i0.ɵɵlistener(\"onSelect\", function FileUpload3Component_Template_p_fileUpload_onSelect_0_listener($event) {\n        return ctx.onSelect($event);\n      })(\"onRemove\", function FileUpload3Component_Template_p_fileUpload_onRemove_0_listener($event) {\n        return ctx.onRemove($event);\n      })(\"onProgress\", function FileUpload3Component_Template_p_fileUpload_onProgress_0_listener($event) {\n        return ctx.onProgress($event);\n      })(\"onClear\", function FileUpload3Component_Template_p_fileUpload_onClear_0_listener() {\n        return ctx.clearCustomFileArrays();\n      });\n      i0.ɵɵtext(2, \"\\n    \");\n      i0.ɵɵtemplate(3, FileUpload3Component_ng_template_3_Template, 15, 4, \"ng-template\", 2);\n      i0.ɵɵtext(4, \"\\n\\n  \\n\\n  \");\n      i0.ɵɵtemplate(5, FileUpload3Component_ng_template_5_Template, 3, 1, \"ng-template\", 3);\n      i0.ɵɵtext(6, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n\\n\\n\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"multiple\", ctx.isMultiple)(\"showUploadButton\", false)(\"customUpload\", true);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i5.NgStyle, i1.PrimeTemplate, i6.FileUpload, i7.ProgressBar, i8.Messages, i5.DecimalPipe],\n  styles: [\".custom-fileupload-remove-button.p-button.p-button-rounded {\\n  width: 1.5rem;\\n}\\n\\n  .custom-fileupload-remove-button.p-button.p-button-icon-only.p-button-rounded {\\n  height: 1.5rem;\\n}\\n\\n  .p-button.p-button-sm .p-button-icon {\\n  border: 3px;\\n}\\n\\n  .p-button.p-button-sm .p-button-danger {\\n  font-size: 0.6rem;\\n}\\n\\n  .p-fileupload-files {\\n  display: none !important;\\n}\\n\\n  .p-fileupload-content .p-progressbar {\\n  display: none !important;\\n}\\n\\n.n2-file-upload-content[_ngcontent-%COMP%] {\\n  overflow: auto;\\n  height: 400px;\\n  max-width: 100%;\\n  overflow-x: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtdXBsb2FkLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFxzaGFyZWRcXGNvbXBvbmVudFxcZmlsZS11cGxvYWRcXGZpbGUtdXBsb2FkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBRUksYUFBQTtBQ0ZKOztBREtBO0VBQ0ksY0FBQTtBQ0ZKOztBREtBO0VBQ0ksV0FBQTtBQ0ZKOztBREtBO0VBQ0ksaUJBQUE7QUNGSjs7QURLQTtFQUNJLHdCQUFBO0FDRko7O0FES0E7RUFDSSx3QkFBQTtBQ0ZKOztBRFNBO0VBQ0ksY0FBQTtFQUNBLGFBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7QUNOSiIsImZpbGUiOiJmaWxlLXVwbG9hZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuOjpuZy1kZWVwIC5jdXN0b20tZmlsZXVwbG9hZC1yZW1vdmUtYnV0dG9uLnAtYnV0dG9uLnAtYnV0dG9uLXJvdW5kZWQge1xyXG5cclxuICAgIHdpZHRoOiAxLjVyZW07XHJcbn1cclxuXHJcbjo6bmctZGVlcCAuY3VzdG9tLWZpbGV1cGxvYWQtcmVtb3ZlLWJ1dHRvbi5wLWJ1dHRvbi5wLWJ1dHRvbi1pY29uLW9ubHkucC1idXR0b24tcm91bmRlZHtcclxuICAgIGhlaWdodDogMS41cmVtO1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1pY29uIHtcclxuICAgIGJvcmRlcjogM3B4O1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1kYW5nZXIge1xyXG4gICAgZm9udC1zaXplOiAwLjZyZW07XHJcbn1cclxuXHJcbjo6bmctZGVlcCAucC1maWxldXBsb2FkLWZpbGVze1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtZmlsZXVwbG9hZC1jb250ZW50IC5wLXByb2dyZXNzYmFye1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vLyA6Om5nLWRlZXAgLnAtZmlsZXVwbG9hZC1jaG9vc2V7XHJcbi8vICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XHJcbi8vIH1cclxuXHJcbi5uMi1maWxlLXVwbG9hZC1jb250ZW50IHtcclxuICAgIG92ZXJmbG93OiBhdXRvOyBcclxuICAgIGhlaWdodDogNDAwcHg7IFxyXG4gICAgbWF4LXdpZHRoOiAxMDAlOyBcclxuICAgIG92ZXJmbG93LXg6IGhpZGRlblxyXG59IiwiOjpuZy1kZWVwIC5jdXN0b20tZmlsZXVwbG9hZC1yZW1vdmUtYnV0dG9uLnAtYnV0dG9uLnAtYnV0dG9uLXJvdW5kZWQge1xuICB3aWR0aDogMS41cmVtO1xufVxuXG46Om5nLWRlZXAgLmN1c3RvbS1maWxldXBsb2FkLXJlbW92ZS1idXR0b24ucC1idXR0b24ucC1idXR0b24taWNvbi1vbmx5LnAtYnV0dG9uLXJvdW5kZWQge1xuICBoZWlnaHQ6IDEuNXJlbTtcbn1cblxuOjpuZy1kZWVwIC5wLWJ1dHRvbi5wLWJ1dHRvbi1zbSAucC1idXR0b24taWNvbiB7XG4gIGJvcmRlcjogM3B4O1xufVxuXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1kYW5nZXIge1xuICBmb250LXNpemU6IDAuNnJlbTtcbn1cblxuOjpuZy1kZWVwIC5wLWZpbGV1cGxvYWQtZmlsZXMge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCAucC1maWxldXBsb2FkLWNvbnRlbnQgLnAtcHJvZ3Jlc3NiYXIge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5cbi5uMi1maWxlLXVwbG9hZC1jb250ZW50IHtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGhlaWdodDogNDAwcHg7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvc2hhcmVkL2NvbXBvbmVudC9maWxlLXVwbG9hZC9maWxlLXVwbG9hZC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvc2hhcmVkL2NvbXBvbmVudC9maWxlLXVwbG9hZC9maWxlLXVwbG9hZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUVJLGFBQUE7QUNGSjs7QURLQTtFQUNJLGNBQUE7QUNGSjs7QURLQTtFQUNJLFdBQUE7QUNGSjs7QURLQTtFQUNJLGlCQUFBO0FDRko7O0FES0E7RUFDSSx3QkFBQTtBQ0ZKOztBREtBO0VBQ0ksd0JBQUE7QUNGSjs7QURTQTtFQUNJLGNBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0FDTko7QURDQSxnZ0ZBQWdnRiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuOjpuZy1kZWVwIC5jdXN0b20tZmlsZXVwbG9hZC1yZW1vdmUtYnV0dG9uLnAtYnV0dG9uLnAtYnV0dG9uLXJvdW5kZWQge1xyXG5cclxuICAgIHdpZHRoOiAxLjVyZW07XHJcbn1cclxuXHJcbjo6bmctZGVlcCAuY3VzdG9tLWZpbGV1cGxvYWQtcmVtb3ZlLWJ1dHRvbi5wLWJ1dHRvbi5wLWJ1dHRvbi1pY29uLW9ubHkucC1idXR0b24tcm91bmRlZHtcclxuICAgIGhlaWdodDogMS41cmVtO1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1pY29uIHtcclxuICAgIGJvcmRlcjogM3B4O1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1kYW5nZXIge1xyXG4gICAgZm9udC1zaXplOiAwLjZyZW07XHJcbn1cclxuXHJcbjo6bmctZGVlcCAucC1maWxldXBsb2FkLWZpbGVze1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG46Om5nLWRlZXAgLnAtZmlsZXVwbG9hZC1jb250ZW50IC5wLXByb2dyZXNzYmFye1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vLyA6Om5nLWRlZXAgLnAtZmlsZXVwbG9hZC1jaG9vc2V7XHJcbi8vICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XHJcbi8vIH1cclxuXHJcbi5uMi1maWxlLXVwbG9hZC1jb250ZW50IHtcclxuICAgIG92ZXJmbG93OiBhdXRvOyBcclxuICAgIGhlaWdodDogNDAwcHg7IFxyXG4gICAgbWF4LXdpZHRoOiAxMDAlOyBcclxuICAgIG92ZXJmbG93LXg6IGhpZGRlblxyXG59IiwiOjpuZy1kZWVwIC5jdXN0b20tZmlsZXVwbG9hZC1yZW1vdmUtYnV0dG9uLnAtYnV0dG9uLnAtYnV0dG9uLXJvdW5kZWQge1xuICB3aWR0aDogMS41cmVtO1xufVxuXG46Om5nLWRlZXAgLmN1c3RvbS1maWxldXBsb2FkLXJlbW92ZS1idXR0b24ucC1idXR0b24ucC1idXR0b24taWNvbi1vbmx5LnAtYnV0dG9uLXJvdW5kZWQge1xuICBoZWlnaHQ6IDEuNXJlbTtcbn1cblxuOjpuZy1kZWVwIC5wLWJ1dHRvbi5wLWJ1dHRvbi1zbSAucC1idXR0b24taWNvbiB7XG4gIGJvcmRlcjogM3B4O1xufVxuXG46Om5nLWRlZXAgLnAtYnV0dG9uLnAtYnV0dG9uLXNtIC5wLWJ1dHRvbi1kYW5nZXIge1xuICBmb250LXNpemU6IDAuNnJlbTtcbn1cblxuOjpuZy1kZWVwIC5wLWZpbGV1cGxvYWQtZmlsZXMge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCAucC1maWxldXBsb2FkLWNvbnRlbnQgLnAtcHJvZ3Jlc3NiYXIge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5cbi5uMi1maWxlLXVwbG9hZC1jb250ZW50IHtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGhlaWdodDogNDAwcHg7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\ntslib_1.__decorate([(0, angular_cacheable_1.Cacheable)({\n  key: 'dms-param'\n})], FileUpload3Component.prototype, \"preloadDMSParams\", null);\nexports.FileUpload3Component = FileUpload3Component;","map":{"version":3,"mappings":"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","names":["i0","FileUpload3Component","constructor","messageService","fileUploadService","toastService","ngControl","nspapp_constants_1","FILE_FORMAT","verifiedFiles","length","severity","summary","detail","core_1","fileLimit","MAXIMUM_FILES","maxMultiFileSize","MAXIMUM_MULTI_FILE_SIZE","maxSingleFileSize","MAXIMUM_SINGLE_FILE_SIZE","console","log","valueAccessor","subscription","rxjs_1","ngOnInit","preloadDMSParams","getFormValidationErrors","control","errors","errMsg","Object","values","map","msg","preloadFiles","fileArr","pFileUpload","clear","forEach","element","files","push","selectedFiles","onChange","logControl","onSelect","event","currentFiles","fileEventEvent","emit","onProgress","progress","onRemove","filesToEmit","filter","item","file","onRemoveAll","onClose","closure","closeEvent","ngOnDestroy","clearCustomFileArrays","writeValue","obj","registerOnChange","fn","seeChange","registerOnTouched","onTouch","setDisabledState","isDisabled","preloadDMSParam","subscribe","resp","body","data","preloadedParams","defaultParam","dms_multiple_file_max_size","dms_single_file_max_size","dms_max_number_files","baseValidator","forms_1","compose","fileupload2_directive_1","maxFileLimit","mergedValidator","validator","setValidators","updateValueAndValidity","fileUploadHandler","module","useCase","eventFiles","loading","add","generateProcInst","pipe","procIdResp","status","isMultiple","uploadSingle","uploadMultiple","Error","txnIdList","err_id","meta_data","success","success_message","id","txnIdListEvent","error","String","err_msg","file_upload_resp_list","x","error_map","keys","errList","entries","key","value","errId","errorMsg","concat","selectors","viewQuery","api_1","decls","vars","consts","template","ctx","tslib_1","exports"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\shared\\component\\file-upload\\file-upload3.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\shared\\component\\file-upload\\file-upload3.component.html"],"sourcesContent":["import {Component, EventEmitter, OnDestroy, OnInit, Optional, Output, Self, ViewChild} from '@angular/core';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {NSPAppConstants} from 'app/shared/constants/nspapp.constants';\r\nimport {FileUploadService} from 'app/shared/service/file-upload.service';\r\nimport {Message, MessageService} from 'primeng/api';\r\nimport {FileUpload} from 'primeng/fileupload';\r\nimport {Subscription} from 'rxjs';\r\nimport {concatMap} from 'rxjs/operators';\r\nimport {Cacheable} from 'angular-cacheable';\r\nimport {ControlValueAccessor, FormControl, NgControl, ValidatorFn, Validators} from '@angular/forms';\r\nimport {FileUploadValidator2} from 'app/shared/validator/fileupload2.directive';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-file-upload3',\r\n  templateUrl: './file-upload3.component.html',\r\n  styleUrls: ['./file-upload.component.scss'],\r\n  providers: [\r\n    MessageService,\r\n    // {\r\n    //   provide: NG_VALUE_ACCESSOR,\r\n    //   useExisting: forwardRef(() =>FileUploadComponent),\r\n    //   multi: true\r\n    // }\r\n  ]\r\n})\r\nexport class FileUpload3Component implements ControlValueAccessor, OnInit, OnDestroy {\r\n\r\n  verifiedFiles: any[] = [];\r\n  selectedFiles: any[] = [];\r\n  // fileLimit: number = NSPAppConstants.MAXIMUM_FILES; // Override this in implemented components if value differs\r\n  // maxFileSize: number = NSPAppConstants.MAXIMUM_FILE_SIZE; //in bytes\r\n\r\n  fileLimit: number;\r\n  maxFileSize: number;\r\n\r\n  fileFormat: string = NSPAppConstants.FILE_FORMAT;\r\n  isMultiple = true;\r\n  loading = false;\r\n  submitInd = this.verifiedFiles.length !== 0;\r\n  // Validator\r\n  validatorFnList: ValidatorFn[];\r\n  form: FormControl;\r\n\r\n  @ViewChild('pfileUpload', {static: true})\r\n  public pFileUpload!: FileUpload;\r\n\r\n  errMsg: Message[] = [{severity: 'error', summary: 'Error', detail: 'Message Content'}];\r\n  hasErrors = false;\r\n\r\n  @Output() txnIdListEvent = new EventEmitter<any>();\r\n\r\n  @Output() closeEvent = new EventEmitter<any>();\r\n\r\n  @Output() fileEventEvent = new EventEmitter<any>();\r\n\r\n\r\n  private subscription: Subscription;\r\n\r\n  private defaultParam: any = {\r\n    fileLimit: NSPAppConstants.MAXIMUM_FILES, // in units Override this if db fetches value or cache value\r\n    maxMultiFileSize: NSPAppConstants.MAXIMUM_MULTI_FILE_SIZE, // in MB Override this if db fetches value or cache value\r\n    maxSingleFileSize: NSPAppConstants.MAXIMUM_SINGLE_FILE_SIZE // in MB Override this if db fetches value or cache value\r\n\r\n  }\r\n\r\n\r\n  constructor(\r\n    private messageService: MessageService,\r\n    private fileUploadService: FileUploadService,\r\n    private toastService: CustomToastService,\r\n    @Optional() @Self() public ngControl: NgControl\r\n  ) {\r\n    if (this.ngControl) {\r\n      this.ngControl.valueAccessor = this;\r\n    }\r\n    this.subscription = new Subscription();\r\n\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.preloadDMSParams();\r\n  }\r\n\r\n  getFormValidationErrors(): boolean {\r\n    if (this.ngControl.control?.errors) {\r\n      this.errMsg = Object.values(this.ngControl.control?.errors).map(msg => ({\r\n        severity: 'error',\r\n        summary: 'Error',\r\n        detail: msg\r\n      }))\r\n    }\r\n    return this.ngControl.control?.errors != null;\r\n  }\r\n\r\n  preloadFiles(fileArr: File[]): void {\r\n    // Clear underlying files\r\n    this.pFileUpload.clear();\r\n    fileArr.forEach(element => {\r\n      this.pFileUpload.files.push(element);\r\n    });\r\n    this.selectedFiles = this.pFileUpload.files;\r\n    this.onChange(this.pFileUpload.files);\r\n  }\r\n\r\n  logControl(): void {\r\n    console.log(this.ngControl.control.errors);\r\n  }\r\n\r\n  onSelect(event: any): void {\r\n    console.log('onSelect() of NSPAY2.0 file-upload component', event.currentFiles);\r\n    this.selectedFiles = event.currentFiles;\r\n    this.fileEventEvent.emit(this.selectedFiles);\r\n    this.onChange(event.currentFiles);\r\n  }\r\n\r\n  onProgress(event: any): void {\r\n    this.pFileUpload.progress = event;\r\n  }\r\n\r\n  onRemove(event: any): void {\r\n    console.log('removed files', event);\r\n    let filesToEmit: File[] = this.pFileUpload.files;\r\n    // Filters away the just-removed file and emit out the file list\r\n    filesToEmit = filesToEmit.filter(item => item !== event.file);\r\n    this.onChange(filesToEmit);\r\n  }\r\n\r\n  onRemoveAll(): void {\r\n    console.log('removing all files', this.selectedFiles);\r\n    this.pFileUpload.clear();\r\n    this.selectedFiles = [];\r\n    this.onChange(this.pFileUpload.files);\r\n  }\r\n\r\n\r\n  onClose(): void {\r\n    console.log('before', this.selectedFiles);\r\n    const closure = this.selectedFiles;\r\n    this.closeEvent.emit(closure);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    console.log('destroyed');\r\n  }\r\n\r\n  clearCustomFileArrays(): void {\r\n    this.selectedFiles = [];\r\n    this.onChange(this.pFileUpload.files);\r\n  }\r\n\r\n  // Control Value Accessor related methods\r\n  onChange: any = () => {\r\n    console.log(\"onChange\");\r\n  };\r\n  onTouch: any = () => {\r\n    console.log(\"onTouch\");\r\n  };\r\n\r\n  writeValue(obj: any): void {\r\n    this.pFileUpload.clear();\r\n    this.selectedFiles = [];\r\n    this.verifiedFiles = [];\r\n\r\n  }\r\n\r\n  // Upon UI element value changes, this method gets triggered\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  seeChange(event: Event): void {\r\n    console.log(\"whats the change\", event);\r\n    console.log(\"whats the change\", this.selectedFiles);\r\n  }\r\n\r\n  // Upon touching the element, this method gets triggered\r\n  registerOnTouched(fn: any): void {\r\n    // console.log('Function called: registerOnTouched');\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    console.log(\"disabledState\", isDisabled);\r\n  }\r\n\r\n  @Cacheable({key: 'dms-param'})\r\n  preloadDMSParams(): void {\r\n    this.fileUploadService.preloadDMSParam(null).subscribe(resp => {\r\n      if (resp.body.data) {\r\n        const preloadedParams = resp.body.data;\r\n        console.log('preloaded', preloadedParams);\r\n        this.defaultParam.maxMultiFileSize = preloadedParams.dms_multiple_file_max_size;\r\n        this.defaultParam.maxSingleFileSize = preloadedParams.dms_single_file_max_size;\r\n        this.defaultParam.fileLimit = preloadedParams.dms_max_number_files;\r\n\r\n        const baseValidator: ValidatorFn = Validators.compose([FileUploadValidator2.maxFileLimit(this.defaultParam.fileLimit),\r\n          FileUploadValidator2.maxSingleFileSize(this.defaultParam.maxSingleFileSize)\r\n        ]);\r\n\r\n        // const baseValidator: ValidatorFn[] = [FileUploadValidator2.maxFileLimit(this.defaultParam.fileLimit),\r\n        //   FileUploadValidator2.maxSingleFileSize(this.defaultParam.maxSingleFileSize)\r\n        // ];\r\n\r\n        const mergedValidator: ValidatorFn = Validators.compose([\r\n          baseValidator, this.ngControl.control.validator]);\r\n\r\n        this.ngControl.control.setValidators(mergedValidator);\r\n        this.ngControl.control.updateValueAndValidity();\r\n\r\n        // if(this.ngControl.control.hasValidator){\r\n        //   console.log('outer have');\r\n        //   const outerValidator = this.ngControl.control.validator;\r\n        //   this.ngControl.control.clearValidators;\r\n        //   this.ngControl.control.updateValueAndValidity;\r\n        //   const arr = baseValidator.concat([outerValidator]);\r\n\r\n        //   this.ngControl.control.setValidators(arr);\r\n        // }else {\r\n        //   console.log('outer dont have');\r\n        //   this.ngControl.control.setValidators(baseValidator);\r\n\r\n\r\n        // }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param module -> TODO: Update definition of param\r\n   * @param useCase -> TODO: Update definition of param\r\n   */\r\n  fileUploadHandler(module: string, useCase: string): void {\r\n    const eventFiles = this.selectedFiles;\r\n    console.log('uploading files:', this.selectedFiles);\r\n    this.loading = true;\r\n    this.subscription.add();\r\n\r\n    this.fileUploadService.generateProcInst(null).pipe(concatMap(procIdResp => {\r\n        if (procIdResp && procIdResp.status === 200) {\r\n          if (!this.isMultiple) {\r\n            return this.fileUploadService.uploadSingle(eventFiles[0], procIdResp.body.data, module, useCase);\r\n          } else {\r\n            return this.fileUploadService.uploadMultiple(eventFiles, procIdResp.body.data, module, useCase);\r\n          }\r\n        } else {\r\n          throw new Error('Failed to generate Process Instance');\r\n        }\r\n      }\r\n    )).subscribe(resp => {\r\n        if (resp) {\r\n          if (!this.isMultiple) {\r\n            if (resp.status === 200) {\r\n              const txnIdList = [];\r\n              if (!resp.body.data.err_id) {\r\n                this.verifiedFiles.push(resp.body.data.meta_data);\r\n                this.toastService.success(resp.body.success_message);\r\n                txnIdList.push(resp.body.data.meta_data.id);\r\n                this.txnIdListEvent.emit(txnIdList);\r\n              } else {\r\n                this.toastService.error(String(resp.body.data.err_id) + ': ' + String(resp.body.data.err_msg));\r\n              }\r\n\r\n              this.loading = false;\r\n            }\r\n          } else {\r\n            if (resp.status === 200) {\r\n              // for(let file of resp.body.data.file_upload_resp_list) {\r\n              //   this.verifiedFiles.push(file.meta_data);\r\n              // }\r\n              this.verifiedFiles = resp.body.data.file_upload_resp_list.filter((x: any) => x.err_id == null);\r\n              const txnIdList = this.verifiedFiles.map((x: any) => String(x.meta_data.id));\r\n              console.log('verified list', this.verifiedFiles);\r\n              this.txnIdListEvent.emit(txnIdList);\r\n\r\n              if (!resp.body.data.error_map || (resp.body.data.error_map && Object.keys(resp.body.data.error_map).length === 0)) {\r\n                this.toastService.success(resp.body.success_message);\r\n              } else {\r\n                const errList: any = Object.entries(resp.body.data.error_map).map(([key, value]) => ({\r\n                  errId: key,\r\n                  value\r\n                }));\r\n                console.log('erroList is ', errList);\r\n                let errorMsg = '';\r\n                errList.forEach((x: any) => {\r\n                  errorMsg = errorMsg.concat(x.errId).concat(': ').concat(x.value).concat('</br>');\r\n                });\r\n                console.log('errMsg is ' + errorMsg);\r\n                this.toastService.error(errorMsg);\r\n\r\n\r\n              }\r\n\r\n              // txnIdList = resp.body.data.file_upload_resp_list.map(x=>{return x.meta_data.id});\r\n              this.loading = false;\r\n\r\n            }\r\n          }\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(\"error is \" + String(error));\r\n        this.loading = false;\r\n\r\n      });\r\n\r\n    this.onRemoveAll();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n","<p-fileUpload name='fileupload[]'\r\n              [multiple]='isMultiple'\r\n              cancelLabel='Remove All'\r\n              uploadLabel='Verify File'\r\n              (onSelect)='onSelect($event)'\r\n              (onRemove)='onRemove($event)'\r\n              (onProgress)='onProgress($event)'\r\n              [showUploadButton]='false'\r\n              [customUpload]='true'\r\n              #pfileUpload  \r\n              (onClear)='clearCustomFileArrays()'\r\n            \r\n            >\r\n    <ng-template pTemplate='toolbar'>\r\n      <div>\r\n        <br /> Files selected:  {{ selectedFiles.length }}\r\n        <br /> Files uploaded:  {{ verifiedFiles.length }}\r\n        <br><br>\r\n        <p-progressBar *ngIf='loading' mode='indeterminate' [style]=\"{'height': '6px'}\"></p-progressBar>\r\n      </div>\r\n      <span *ngIf=\"this.getFormValidationErrors() && ngControl.control.dirty\" [ngStyle]=\"{'background-color': 'white'}\">\r\n        <p-messages [(value)]=\"errMsg\" \r\n          [showTransitionOptions]=\"'0ms'\" \r\n          [hideTransitionOptions]=\"'0ms'\"\r\n          [closable]=\"false\"></p-messages>\r\n      </span>\r\n    </ng-template>\r\n\r\n  \r\n\r\n  <ng-template pTemplate='content' \r\n  >\r\n    <ul *ngIf='verifiedFiles.length' >\r\n      <li *ngFor='let file of verifiedFiles'>{{file.meta_data.fileName}}\r\n        - {{file.meta_data.fileSize / 1024 | number : '1.2-2' }} KB\r\n      </li>\r\n    </ul>\r\n  </ng-template>\r\n</p-fileUpload>\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParameterComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst parameter_model_1 = require(\"./parameter.model\");\nconst api_1 = require(\"primeng/api\");\nconst nspay2_constants_1 = require(\"app/nspay2.constants\");\nconst forms_1 = require(\"@angular/forms\");\nconst parameter_directive_1 = require(\"./parameter.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"./service/parameter.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/admin/access-control\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i5 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i6 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/dropdown\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/toast\"));\nconst i14 = tslib_1.__importStar(require(\"../../shared/language/translate.directive\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/multiselect\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/tag\"));\nconst i18 = tslib_1.__importStar(require(\"../../shared/status/status.pipe\"));\nfunction ParameterComponent_div_2_ng_template_10_p_tag_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-tag\", 23);\n  }\n}\nfunction ParameterComponent_div_2_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelement(3, \"span\", 21);\n    i0.ɵɵtext(4, \"\\n              \");\n    i0.ɵɵtemplate(5, ParameterComponent_div_2_ng_template_10_p_tag_5_Template, 1, 0, \"p-tag\", 22);\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n          \");\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.parameter.paramLimit == null ? null : ctx_r1.parameter.paramLimit.status) == ctx_r1.myNSPAY2_STATUS.PENDING_APPROVAL);\n  }\n}\nfunction ParameterComponent_div_2_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"th\", 24);\n    i0.ɵɵtext(4, \"Level\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"th\", 25);\n    i0.ɵɵtext(7, \"Designation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                  \");\n    i0.ɵɵelementStart(9, \"th\", 26);\n    i0.ɵɵtext(10, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                  \");\n    i0.ɵɵelementStart(12, \"th\", 25);\n    i0.ɵɵtext(13, \"Official Cap\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                  \");\n    i0.ɵɵelementStart(15, \"th\", 25);\n    i0.ɵɵtext(16, \"Working Cap\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n              \");\n  }\n}\nfunction ParameterComponent_div_2_ng_template_19_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Approver cannot exist in 2 different levels\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_ng_template_19_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Violated Limit\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_ng_template_19_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_ng_template_19_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Exceed Official Cap\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵelementStart(1, \"tr\", 27);\n    i0.ɵɵtext(2, \"\\n                  \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                  \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                  \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10, \"\\n                    \");\n    i0.ɵɵelementStart(11, \"p-multiSelect\", 28);\n    i0.ɵɵlistener(\"onChange\", function ParameterComponent_div_2_ng_template_19_Template_p_multiSelect_onChange_11_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.validateLimitLevelApproverSelection());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                    \");\n    i0.ɵɵtemplate(13, ParameterComponent_div_2_ng_template_19_span_13_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(14, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                  \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n                  \");\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20, \"\\n                    \");\n    i0.ɵɵelement(21, \"input\", 29);\n    i0.ɵɵtext(22, \"\\n                    \");\n    i0.ɵɵtemplate(23, ParameterComponent_div_2_ng_template_19_span_23_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(24, \"\\n                    \");\n    i0.ɵɵtemplate(25, ParameterComponent_div_2_ng_template_19_span_25_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(26, \"\\n                    \");\n    i0.ɵɵtemplate(27, ParameterComponent_div_2_ng_template_19_span_27_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(28, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n              \");\n  }\n  if (rf & 2) {\n    const paramLimit_r13 = ctx.$implicit;\n    const i_r14 = ctx.rowIndex;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    let tmp_5_0;\n    let tmp_9_0;\n    let tmp_10_0;\n    let tmp_11_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r14);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(paramLimit_r13.value.level);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(paramLimit_r13.value.designation);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"options\", ctx_r3.claimApproverOptions)(\"disabled\", ctx_r3.disableForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx_r3.parameterForm.get(\"paramLimit\")) == null ? null : tmp_5_0.hasError(\"unique\")) && paramLimit_r13.value.limitLevelAppr.length > 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(paramLimit_r13.value.officialCap);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"workingCap\", i_r14, \"\");\n    i0.ɵɵproperty(\"disabled\", ctx_r3.disableForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_9_0 = paramLimit_r13.get(\"workingCap\")) == null ? null : tmp_9_0.hasError(\"violateLimit\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_10_0 = paramLimit_r13.get(\"workingCap\")) == null ? null : tmp_10_0.hasError(\"required\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_11_0 = paramLimit_r13.get(\"workingCap\")) == null ? null : tmp_11_0.hasError(\"max\"));\n  }\n}\nfunction ParameterComponent_div_2_ng_template_38_p_tag_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-tag\", 23);\n  }\n}\nfunction ParameterComponent_div_2_ng_template_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelement(3, \"span\", 31);\n    i0.ɵɵtext(4, \"\\n              \");\n    i0.ɵɵtemplate(5, ParameterComponent_div_2_ng_template_38_p_tag_5_Template, 1, 0, \"p-tag\", 22);\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n          \");\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r4.parameter.paramSignature == null ? null : ctx_r4.parameter.paramSignature.status) == ctx_r4.myNSPAY2_STATUS.PENDING_APPROVAL);\n  }\n}\nfunction ParameterComponent_div_2_span_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_span_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Cannot be the same\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_span_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_span_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Cannot be the same\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_ng_template_79_p_tag_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-tag\", 23);\n  }\n}\nfunction ParameterComponent_div_2_ng_template_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelement(3, \"span\", 32);\n    i0.ɵɵtext(4, \"\\n              \");\n    i0.ɵɵtemplate(5, ParameterComponent_div_2_ng_template_79_p_tag_5_Template, 1, 0, \"p-tag\", 22);\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n          \");\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r9.parameter.paramUser == null ? null : ctx_r9.parameter.paramUser.status) == ctx_r9.myNSPAY2_STATUS.PENDING_APPROVAL);\n  }\n}\nfunction ParameterComponent_div_2_div_84_input_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 36);\n  }\n  if (rf & 2) {\n    const i_r24 = i0.ɵɵnextContext().index;\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"paramValue\", i_r24, \"\");\n    i0.ɵɵproperty(\"disabled\", ctx_r25.disableForm);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"width\": \"100%\"\n  };\n};\nfunction ParameterComponent_div_2_div_84_p_dropdown_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-dropdown\", 37);\n  }\n  if (rf & 2) {\n    const i_r24 = i0.ɵɵnextContext().index;\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c0));\n    i0.ɵɵpropertyInterpolate1(\"id\", \"paramValue\", i_r24, \"\");\n    i0.ɵɵproperty(\"options\", ctx_r26.dropdownOptions);\n  }\n}\nfunction ParameterComponent_div_2_div_84_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_div_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementStart(2, \"div\", 11);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"label\", 33);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementStart(7, \"div\", 17);\n    i0.ɵɵtext(8, \"\\n                  \");\n    i0.ɵɵtemplate(9, ParameterComponent_div_2_div_84_input_9_Template, 1, 2, \"input\", 34);\n    i0.ɵɵtext(10, \"\\n                  \");\n    i0.ɵɵtemplate(11, ParameterComponent_div_2_div_84_p_dropdown_11_Template, 1, 5, \"p-dropdown\", 35);\n    i0.ɵɵtext(12, \"\\n                  \");\n    i0.ɵɵtemplate(13, ParameterComponent_div_2_div_84_span_13_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(14, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const paramUser_r23 = ctx.$implicit;\n    const i_r24 = ctx.index;\n    let tmp_5_0;\n    i0.ɵɵproperty(\"formGroupName\", i_r24);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"paramValue\", i_r24, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(paramUser_r23.value.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", paramUser_r23.value.type == \"T\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", paramUser_r23.value.type == \"D\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_5_0 = paramUser_r23.get(\"value\")) == null ? null : tmp_5_0.hasError(\"required\"));\n  }\n}\nfunction ParameterComponent_div_2_div_97_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\");\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementStart(4, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function ParameterComponent_div_2_div_97_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.logForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelement(6, \"p-confirmPopup\");\n    i0.ɵɵtext(7, \"\\n      \");\n    i0.ɵɵelementStart(8, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function ParameterComponent_div_2_div_97_Template_button_click_8_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r32.confirm($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n      \");\n    i0.ɵɵtext(10, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParameterComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"form\", 1);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementStart(4, \"div\", 2);\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"div\", 3);\n    i0.ɵɵtext(7, \"\\n        \");\n    i0.ɵɵelementStart(8, \"p-panel\", 4);\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵtemplate(10, ParameterComponent_div_2_ng_template_10_Template, 8, 1, \"ng-template\", 5);\n    i0.ɵɵtext(11, \"\\n          \");\n    i0.ɵɵelementStart(12, \"div\", 6);\n    i0.ɵɵtext(13, \"\\n            \");\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementStart(15, \"p-table\", 7);\n    i0.ɵɵtext(16, \"\\n              \");\n    i0.ɵɵtemplate(17, ParameterComponent_div_2_ng_template_17_Template, 19, 0, \"ng-template\", 5);\n    i0.ɵɵtext(18, \"\\n              \");\n    i0.ɵɵtemplate(19, ParameterComponent_div_2_ng_template_19_Template, 31, 12, \"ng-template\", 8);\n    i0.ɵɵtext(20, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n        \");\n    i0.ɵɵelementStart(24, \"span\");\n    i0.ɵɵtext(25);\n    i0.ɵɵpipe(26, \"lowercase\");\n    i0.ɵɵpipe(27, \"status\");\n    i0.ɵɵpipe(28, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n\\n    \");\n    i0.ɵɵelementStart(32, \"div\", 2);\n    i0.ɵɵtext(33, \"\\n      \");\n    i0.ɵɵelementStart(34, \"div\", 9);\n    i0.ɵɵtext(35, \"\\n        \");\n    i0.ɵɵelementStart(36, \"p-panel\");\n    i0.ɵɵtext(37, \"\\n          \");\n    i0.ɵɵtemplate(38, ParameterComponent_div_2_ng_template_38_Template, 8, 1, \"ng-template\", 5);\n    i0.ɵɵtext(39, \"\\n          \");\n    i0.ɵɵelementStart(40, \"div\", 10);\n    i0.ɵɵtext(41, \"\\n            \");\n    i0.ɵɵelementStart(42, \"div\", 11);\n    i0.ɵɵtext(43, \"\\n              \");\n    i0.ɵɵelementStart(44, \"label\", 12);\n    i0.ɵɵtext(45, \"Recoupment Listing Signature\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \"\\n                \");\n    i0.ɵɵelementStart(47, \"div\", 13);\n    i0.ɵɵtext(48, \"\\n                  \");\n    i0.ɵɵelementStart(49, \"p-dropdown\", 14);\n    i0.ɵɵlistener(\"onChange\", function ParameterComponent_div_2_Template_p_dropdown_onChange_49_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.validateSignatureSelection());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n                  \");\n    i0.ɵɵtemplate(51, ParameterComponent_div_2_span_51_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(52, \"\\n                  \");\n    i0.ɵɵtemplate(53, ParameterComponent_div_2_span_53_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(54, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n                \");\n    i0.ɵɵelementStart(56, \"div\", 13);\n    i0.ɵɵtext(57, \"\\n                  \");\n    i0.ɵɵelementStart(58, \"p-dropdown\", 16);\n    i0.ɵɵlistener(\"onChange\", function ParameterComponent_div_2_Template_p_dropdown_onChange_58_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.validateSignatureSelection());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \"\\n                  \");\n    i0.ɵɵtemplate(60, ParameterComponent_div_2_span_60_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(61, \"\\n                  \");\n    i0.ɵɵtemplate(62, ParameterComponent_div_2_span_62_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtext(63, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(65, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(66, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(67, \"\\n        \");\n    i0.ɵɵelementStart(68, \"span\");\n    i0.ɵɵtext(69);\n    i0.ɵɵpipe(70, \"lowercase\");\n    i0.ɵɵpipe(71, \"status\");\n    i0.ɵɵpipe(72, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(73, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(74, \"\\n\\n\\n      \");\n    i0.ɵɵelementStart(75, \"div\", 17);\n    i0.ɵɵtext(76, \"\\n        \");\n    i0.ɵɵelementStart(77, \"p-panel\");\n    i0.ɵɵtext(78, \"\\n          \");\n    i0.ɵɵtemplate(79, ParameterComponent_div_2_ng_template_79_Template, 8, 1, \"ng-template\", 5);\n    i0.ɵɵtext(80, \"\\n          \");\n    i0.ɵɵelementStart(81, \"div\", 18);\n    i0.ɵɵtext(82, \"\\n            \");\n    i0.ɵɵtext(83, \"\\n            \");\n    i0.ɵɵtemplate(84, ParameterComponent_div_2_div_84_Template, 17, 6, \"div\", 19);\n    i0.ɵɵtext(85, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(86, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(87, \"\\n        \");\n    i0.ɵɵelementStart(88, \"span\");\n    i0.ɵɵtext(89);\n    i0.ɵɵpipe(90, \"lowercase\");\n    i0.ɵɵpipe(91, \"status\");\n    i0.ɵɵpipe(92, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(93, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(94, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(95, \"\\n\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(96, \"\\n\\n  \");\n    i0.ɵɵtemplate(97, ParameterComponent_div_2_div_97_Template, 12, 0, \"div\", 20);\n    i0.ɵɵtext(98, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_5_0;\n    let tmp_6_0;\n    let tmp_9_0;\n    let tmp_10_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.parameterForm);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"value\", ctx_r0.paramLimitFormArray.controls);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate3(\"Last \", i0.ɵɵpipeBind1(26, 23, i0.ɵɵpipeBind1(27, 25, ctx_r0.parameter.paramLimit == null ? null : ctx_r0.parameter.paramLimit.status)), \" by \", ctx_r0.parameter.paramLimit == null ? null : ctx_r0.parameter.paramLimit.statusBy, \" on \", i0.ɵɵpipeBind2(28, 27, ctx_r0.parameter.paramLimit == null ? null : ctx_r0.parameter.paramLimit.statusDt, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(24);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(44, _c0));\n    i0.ɵɵproperty(\"options\", ctx_r0.signatureOptions);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_5_0 = ctx_r0.parameterForm.controls.paramSignature.get(\"signature1\")) == null ? null : tmp_5_0.hasError(\"required\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_6_0 = ctx_r0.parameterForm.get(\"paramSignature\")) == null ? null : tmp_6_0.hasError(\"unique\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(45, _c0));\n    i0.ɵɵproperty(\"options\", ctx_r0.signatureOptions);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_9_0 = ctx_r0.parameterForm.controls.paramSignature.get(\"signature2\")) == null ? null : tmp_9_0.hasError(\"required\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_10_0 = ctx_r0.parameterForm.get(\"paramSignature\")) == null ? null : tmp_10_0.hasError(\"unique\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate3(\"Last \", i0.ɵɵpipeBind1(70, 30, i0.ɵɵpipeBind1(71, 32, ctx_r0.parameter.paramSignature == null ? null : ctx_r0.parameter.paramSignature.status)), \" by \", ctx_r0.parameter.paramSignature == null ? null : ctx_r0.parameter.paramSignature.statusBy, \" on \", i0.ɵɵpipeBind2(72, 34, ctx_r0.parameter.paramSignature == null ? null : ctx_r0.parameter.paramSignature.statusDt, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.paramUserFormArray.controls);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate3(\"Last \", i0.ɵɵpipeBind1(90, 37, i0.ɵɵpipeBind1(91, 39, ctx_r0.parameter.paramUser == null ? null : ctx_r0.parameter.paramUser.status)), \" by \", ctx_r0.parameter.paramUser == null ? null : ctx_r0.parameter.paramUser.statusBy, \" on \", i0.ɵɵpipeBind2(92, 41, ctx_r0.parameter.paramUser == null ? null : ctx_r0.parameter.paramUser.statusDt, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.disableForm);\n  }\n}\nclass ParameterComponent {\n  constructor(router, parameterService, roleService, groupService, formBuilder, confirmationService, messageService, toastService) {\n    this.router = router;\n    this.parameterService = parameterService;\n    this.roleService = roleService;\n    this.groupService = groupService;\n    this.formBuilder = formBuilder;\n    this.confirmationService = confirmationService;\n    this.messageService = messageService;\n    this.toastService = toastService;\n    this.parameter = {};\n    this.disableForm = false;\n    // Constants\n    this.WORKING_CAP_UNLIMITED = 999999999;\n    this.WORKING_CAP_NA = 0;\n    this.myNSPAY2_STATUS = nspay2_constants_1.NSPAY2_STATUS;\n    this.dropdownOptions = [{\n      label: 'T',\n      value: 'T'\n    }, {\n      label: 'F',\n      value: 'F'\n    }];\n    this.signatureOptions = [];\n    this.claimApproverOptions = [];\n    this.parameterForm = new forms_1.FormGroup({\n      paramLimit: new forms_1.FormArray([]),\n      paramUser: new forms_1.FormArray([]),\n      paramSignature: new forms_1.FormGroup({\n        signature1: new forms_1.FormControl('', forms_1.Validators.required),\n        signature2: new forms_1.FormControl('', forms_1.Validators.required)\n      })\n    });\n    this.duplicatedLimitApprovers = [];\n    this.successMessage = \"Request has been submitted successfully for approval\";\n  }\n  get paramLimitFormArray() {\n    return this.parameterForm.get('paramLimit');\n  }\n  get paramUserFormArray() {\n    return this.parameterForm.get('paramUser');\n  }\n  ngOnInit() {\n    this.retrieveClaimApproverUsers();\n    this.retrieveSignatureUsers();\n    this.retrieveParameters();\n  }\n  retrieveParameters() {\n    this.parameterService.get().subscribe(res => {\n      this.onSuccess(res.body);\n    }, error => {\n      console.log(error);\n    });\n  }\n  retrieveClaimApproverUsers() {\n    this.roleService.findAllAssignedUsers(nspay2_constants_1.NSPAY2_ROLES.CLAIMS_APPROVER).subscribe({\n      next: res => {\n        this.claimApproverOptions = this.mapUsersToOptions(res.body);\n      },\n      error(error) {\n        console.log(error);\n        this.toastService.error(\"Failed to load Claim Approvers\");\n      }\n    });\n  }\n  retrieveSignatureUsers() {\n    this.groupService.findAllAssignedRoles(nspay2_constants_1.NSPAY2_GROUPS.U2).subscribe({\n      next: res => {\n        const response = res.body;\n        response.forEach(r => {\n          this.retrieveUsersAndAppendSignatureOptions(r.resourceId);\n        });\n      },\n      error(error) {\n        console.log(error);\n        this.toastService.error(\"Failed to load users\");\n      }\n    });\n  }\n  retrieveUsersAndAppendSignatureOptions(id) {\n    this.roleService.findAllAssignedUsers(id).subscribe({\n      next: res => {\n        const options = this.mapUsersToOptions(res.body);\n        this.signatureOptions = [...this.signatureOptions, ...options];\n      },\n      error(error) {\n        console.log(error);\n        this.toastService.error(\"Failed to load users\");\n      }\n    });\n  }\n  mapUsersToOptions(data) {\n    const usersArr = data;\n    const options = [];\n    usersArr.forEach(u => {\n      const fullName = u.firstName + \" \" + u.lastName;\n      options.push({\n        name: fullName,\n        subjectId: u.subjectId,\n        disabled: false\n      });\n    });\n    options.sort((a, b) => a.name < b.name ? -1 : a.name > b.name ? 1 : 0);\n    return options;\n  }\n  onSuccess(data) {\n    this.parameter = data;\n    this.overallStatus = data.overallStatus;\n    this.disableForm = this.overallStatus === 'PENDING_APPROVAL';\n    this.patchParamUserForm();\n    this.patchParamLimitForm();\n    this.patchParamSignatureForm();\n    if (this.disableForm) {\n      this.parameterForm.disable();\n    }\n  }\n  // Param User\n  patchParamUserForm() {\n    //    console.log(this.parameter.paramUser.paramList);\n    const fa = this.parameterForm.get('paramUser');\n    if (this.disableForm && this.parameter.paramUser?.status === nspay2_constants_1.NSPAY2_STATUS.PENDING_APPROVAL) {\n      this.parameter.paramUser?.paramReqList?.forEach(o => {\n        fa.push(this.createParamUserFBGroup(o));\n      });\n    } else {\n      this.parameter.paramUser?.paramList?.forEach(o => {\n        fa.push(this.createParamUserFBGroup(o));\n      });\n    }\n  }\n  createParamUserFBGroup(o) {\n    return this.formBuilder.group({\n      code: new forms_1.FormControl(o.code),\n      name: new forms_1.FormControl(o.name),\n      value: new forms_1.FormControl(o.value, forms_1.Validators.required),\n      type: new forms_1.FormControl(o.type)\n    });\n  }\n  // Param Limit\n  patchParamLimitForm() {\n    //     console.log(this.parameter.paramLimit);\n    const fa = this.parameterForm.get('paramLimit');\n    if (this.disableForm && this.parameter.paramLimit?.status === nspay2_constants_1.NSPAY2_STATUS.PENDING_APPROVAL) {\n      this.parameter.paramLimit?.limitReqLevels?.forEach(o => {\n        fa.push(this.createParamLimitFBGroup(o));\n      });\n    } else {\n      this.parameter.paramLimit?.limitLevels?.forEach(o => {\n        fa.push(this.createParamLimitFBGroup(o));\n      });\n    }\n  }\n  createParamLimitFBGroup(o) {\n    const temp = [];\n    if (o.limitLevelAppr?.length > 0) {\n      o.limitLevelAppr.forEach(lla => temp.push(lla.approverId));\n    } else if (o.limitReqLevelAppr?.length > 0) {\n      o.limitReqLevelAppr.forEach(lla => temp.push(lla.approverId));\n    }\n    return this.formBuilder.group({\n      level: new forms_1.FormControl(o.level),\n      designation: new forms_1.FormControl(o.designation),\n      limitLevelAppr: new forms_1.FormControl(temp),\n      officialCap: new forms_1.FormControl(o.officialCap === this.WORKING_CAP_UNLIMITED ? 'Unlimited' : o.officialCap),\n      workingCap: new forms_1.FormControl(o.workingCap === this.WORKING_CAP_NA ? 'NA' : o.workingCap === this.WORKING_CAP_UNLIMITED ? 'Unlimited' : o.workingCap, [forms_1.Validators.required, (0, parameter_directive_1.workingCapValidator)(), forms_1.Validators.max(o.officialCap)])\n    });\n  }\n  patchParamSignatureForm() {\n    const fg = this.parameterForm.get('paramSignature');\n    if (this.disableForm && this.parameter.paramSignature?.status === nspay2_constants_1.NSPAY2_STATUS.PENDING_APPROVAL) {\n      if (this.parameter.paramSignature?.signatureList !== null && this.parameter.paramSignature?.signatureReqList?.length > 0) {\n        fg.patchValue({\n          signature1: this.parameter.paramSignature?.signatureReqList[0] === null ? null : this.parameter.paramSignature?.signatureReqList[0].signerId,\n          signature2: this.parameter.paramSignature?.signatureReqList[1] === null ? null : this.parameter.paramSignature?.signatureReqList[1].signerId\n        });\n      }\n    } else {\n      if (this.parameter.paramSignature?.signatureList !== null && this.parameter.paramSignature?.signatureList?.length > 0) {\n        fg.patchValue({\n          signature1: this.parameter.paramSignature?.signatureList[0] === null ? null : this.parameter.paramSignature?.signatureList[0]?.signerId,\n          signature2: this.parameter.paramSignature?.signatureList[1] === null ? null : this.parameter.paramSignature?.signatureList[1]?.signerId\n        });\n      }\n    }\n  }\n  confirm(event) {\n    this.confirmationService.confirm({\n      target: event.target,\n      message: \"Good to go?\",\n      icon: \"pi pi-exclamation-triangle\",\n      acceptLabel: \"Proceed\",\n      rejectLabel: \"No\",\n      accept: () => {\n        this.updateParameters();\n      },\n      reject() {\n        //\n      }\n    });\n  }\n  createFromForm() {\n    return {\n      ...new parameter_model_1.Parameter(),\n      overallStatus: undefined,\n      paramLimit: this.createParamLimitFromForm(),\n      paramUser: this.createParamUserFromForm(),\n      paramSignature: this.createParamSignatureFromForm()\n    };\n  }\n  createParamLimitFromForm() {\n    const newParamLimit = [];\n    this.parameterForm.get('paramLimit')?.value.forEach(o => {\n      const tempLimitLevelAppr = [];\n      o.limitLevelAppr.forEach((lla, index) => {\n        tempLimitLevelAppr.push({\n          ...new parameter_model_1.ParamLimitAppr(),\n          id: null,\n          approverId: lla,\n          sequence: index + 1\n        });\n      });\n      newParamLimit.push({\n        ...new parameter_model_1.ParamLimitLevel(),\n        level: o.level,\n        designation: o.designation,\n        officialCap: o.officialCap === 'Unlimited' ? this.WORKING_CAP_UNLIMITED : o.officialCap,\n        workingCap: o.workingCap === 'Unlimited' ? this.WORKING_CAP_UNLIMITED : o.workingCap === 'NA' ? this.WORKING_CAP_NA : o.workingCap,\n        limitLevelAppr: tempLimitLevelAppr\n      });\n    });\n    return {\n      ...new parameter_model_1.ParamLimit(),\n      id: undefined,\n      limitLevels: newParamLimit,\n      status: undefined,\n      statusBy: undefined,\n      statusDt: undefined\n    };\n  }\n  createParamUserFromForm() {\n    return {\n      ...new parameter_model_1.ParamUser(),\n      id: undefined,\n      paramList: this.parameterForm.get('paramUser')?.value,\n      status: undefined,\n      statusBy: undefined,\n      statusDt: undefined\n    };\n  }\n  createParamSignatureFromForm() {\n    const newParamSignature = [];\n    newParamSignature.push({\n      ...new parameter_model_1.ParamSignatureList(),\n      id: undefined,\n      signerId: this.parameterForm.get('paramSignature')?.value.signature1,\n      sequence: 1\n    });\n    newParamSignature.push({\n      ...new parameter_model_1.ParamSignatureList(),\n      id: undefined,\n      signerId: this.parameterForm.get('paramSignature')?.value.signature2,\n      sequence: 2\n    });\n    return {\n      ...new parameter_model_1.ParamSignature(),\n      id: undefined,\n      signatureList: newParamSignature,\n      status: undefined,\n      statusBy: undefined,\n      statusDt: undefined\n    };\n  }\n  updateParameters() {\n    if (!this.hasError()) {\n      const requestParameter = this.createFromForm();\n      this.postParameter(requestParameter);\n    }\n  }\n  hasError() {\n    let hasError = false;\n    const paramUsersList = this.parameterForm.get('paramUser')?.value;\n    console.log(\"paramUserList\", paramUsersList);\n    paramUsersList.forEach(r => {\n      if (r.value === '') {\n        hasError = true;\n        this.toastService.error(`User parameters ${r.name} must be numeric and cannot be empty`);\n      }\n    });\n    return hasError;\n  }\n  postParameter(req) {\n    this.parameterService.update(req).subscribe(res => {\n      if (res.ok) {\n        this.toastService.success(this.successMessage);\n        this.refreshComponent();\n      }\n    }, error => {\n      this.toastService.error(\"Fail to update parameter values in database\");\n      console.log(error.message);\n    });\n  }\n  refreshComponent() {\n    const currentRoute = this.router.url;\n    this.router.navigateByUrl('/', {\n      skipLocationChange: true\n    }).then(() => {\n      this.router.navigate([currentRoute]);\n    });\n  }\n  validateSignatureSelection() {\n    if (this.parameterForm.get('paramSignature')?.value.signature1 === this.parameterForm.get('paramSignature')?.value.signature2) {\n      this.parameterForm.get('paramSignature')?.setErrors({\n        'unique': true\n      });\n    }\n  }\n  validateLimitLevelApproverSelection() {\n    const temp = this.parameterForm.get('paramLimit')?.value;\n    const selected = [];\n    this.duplicatedLimitApprovers = [];\n    temp.forEach(v => {\n      v.limitLevelAppr.forEach(a => {\n        if (selected.includes(a)) {\n          this.parameterForm.get('paramLimit')?.setErrors({\n            'unique': true\n          });\n          this.duplicatedLimitApprovers.push(a);\n        } else {\n          selected.push(a);\n        }\n      });\n    });\n    console.log(selected);\n    console.log(this.duplicatedLimitApprovers);\n  }\n  logForm() {\n    console.log(this.parameterForm);\n  }\n}\nexports.ParameterComponent = ParameterComponent;\nParameterComponent.ɵfac = function ParameterComponent_Factory(t) {\n  return new (t || ParameterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ParameterService), i0.ɵɵdirectiveInject(i3.RoleService), i0.ɵɵdirectiveInject(i3.GroupService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.ConfirmationService), i0.ɵɵdirectiveInject(i5.MessageService), i0.ɵɵdirectiveInject(i6.CustomToastService));\n};\nParameterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ParameterComponent,\n  selectors: [[\"n2-parameter\"]],\n  features: [i0.ɵɵProvidersFeature([api_1.ConfirmationService, api_1.MessageService])],\n  decls: 4,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [3, \"formGroup\"], [1, \"grid\"], [1, \"col-12\"], [\"styleClass\", \"no-padding-panel\"], [\"pTemplate\", \"header\"], [\"formArrayName\", \"paramLimit\"], [\"styleClass\", \"p-datatable-gridlines\", 3, \"value\"], [\"pTemplate\", \"body\"], [1, \"col-8\"], [\"formGroupName\", \"paramSignature\"], [1, \"field\", \"grid\"], [\"icTranslate\", \"nspay2App.parameter.signature.recoupmentListingSignature\", 1, \"col-6\"], [1, \"col-3\"], [\"id\", \"signature1\", \"formControlName\", \"signature1\", \"placeholder\", \"Select a User\", \"optionLabel\", \"name\", \"optionValue\", \"subjectId\", 3, \"options\", \"onChange\"], [\"class\", \"p-error\", 4, \"ngIf\"], [\"id\", \"signature2\", \"formControlName\", \"signature2\", \"placeholder\", \"Select a User\", \"optionLabel\", \"name\", \"optionValue\", \"subjectId\", 3, \"options\", \"onChange\"], [1, \"col-4\"], [\"formArrayName\", \"paramUser\"], [3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"flex justify-content-end align-items-center\", 4, \"ngIf\"], [\"icTranslate\", \"nspay2App.parameter.limit.header\", 1, \"p-panel-title\"], [\"value\", \"Pending Approval\", \"severity\", \"warning\", 4, \"ngIf\"], [\"value\", \"Pending Approval\", \"severity\", \"warning\"], [\"scope\", \"col\", 2, \"width\", \"5%\"], [\"scope\", \"col\", 2, \"width\", \"15%\"], [\"scope\", \"col\", 2, \"width\", \"50%\"], [3, \"formGroupName\"], [\"display\", \"chip\", \"styleClass\", \"full-width\", \"optionLabel\", \"name\", \"optionValue\", \"subjectId\", \"optionDisabled\", \"disabled\", \"formControlName\", \"limitLevelAppr\", 3, \"options\", \"disabled\", \"onChange\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"workingCap\", 1, \"w-full\", 3, \"id\", \"disabled\"], [1, \"p-error\"], [\"icTranslate\", \"nspay2App.parameter.signature.header\", 1, \"p-panel-title\"], [\"icTranslate\", \"nspay2App.parameter.user.header\", 1, \"p-panel-title\"], [1, \"col-8\", 3, \"for\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"value\", \"class\", \"w-full\", 3, \"id\", \"disabled\", 4, \"ngIf\"], [\"formControlName\", \"value\", \"optionLabel\", \"label\", \"optionValue\", \"value\", 3, \"id\", \"options\", \"style\", 4, \"ngIf\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"value\", 1, \"w-full\", 3, \"id\", \"disabled\"], [\"formControlName\", \"value\", \"optionLabel\", \"label\", \"optionValue\", \"value\", 3, \"id\", \"options\"], [1, \"flex\", \"justify-content-end\", \"align-items-center\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Submit\", 3, \"click\"]],\n  template: function ParameterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"p-toast\");\n      i0.ɵɵtext(1, \"\\n\");\n      i0.ɵɵtemplate(2, ParameterComponent_div_2_Template, 99, 46, \"div\", 0);\n      i0.ɵɵtext(3, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.parameter);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i7.NgForOf, i7.NgIf, i4.FormGroupDirective, i4.FormControlName, i4.FormGroupName, i4.FormArrayName, i5.PrimeTemplate, i8.ButtonDirective, i9.Table, i10.Dropdown, i11.InputText, i12.ConfirmPopup, i13.Toast, i14.TranslateDirective, i15.Panel, i16.MultiSelect, i17.Tag, i7.LowerCasePipe, i7.DatePipe, i18.StatusPipe],\n  styles: [\"[_nghost-%COMP%]     .no-padding-panel .p-panel-content {\\r\\n    padding: 0px;\\r\\n    border: 0px;\\r\\n}\\r\\n\\r\\n[_nghost-%COMP%]     .full-width {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.button-spacing[_ngcontent-%COMP%] {\\r\\n  padding: 2px;\\r\\n}\\r\\n\\r\\n.badge-left[_ngcontent-%COMP%] {\\r\\n  float: left\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmFtZXRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLFdBQVc7QUFDZjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFO0FBQ0YiLCJmaWxlIjoicGFyYW1ldGVyLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCA6Om5nLWRlZXAgLm5vLXBhZGRpbmctcGFuZWwgLnAtcGFuZWwtY29udGVudCB7XHJcbiAgICBwYWRkaW5nOiAwcHg7XHJcbiAgICBib3JkZXI6IDBweDtcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5mdWxsLXdpZHRoIHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmJ1dHRvbi1zcGFjaW5nIHtcclxuICBwYWRkaW5nOiAycHg7XHJcbn1cclxuXHJcbi5iYWRnZS1sZWZ0IHtcclxuICBmbG9hdDogbGVmdFxyXG59XHJcbiJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvYWRtaW5pc3RyYXRpb24vcGFyYW1ldGVyL3BhcmFtZXRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLFdBQVc7QUFDZjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFO0FBQ0Y7O0FBRUEsNHFCQUE0cUIiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCA6Om5nLWRlZXAgLm5vLXBhZGRpbmctcGFuZWwgLnAtcGFuZWwtY29udGVudCB7XHJcbiAgICBwYWRkaW5nOiAwcHg7XHJcbiAgICBib3JkZXI6IDBweDtcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5mdWxsLXdpZHRoIHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmJ1dHRvbi1zcGFjaW5nIHtcclxuICBwYWRkaW5nOiAycHg7XHJcbn1cclxuXHJcbi5iYWRnZS1sZWZ0IHtcclxuICBmbG9hdDogbGVmdFxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ParameterComponent","constructor","router","parameterService","roleService","groupService","formBuilder","confirmationService","messageService","toastService","nspay2_constants_1","label","value","forms_1","paramLimit","paramUser","paramSignature","signature1","required","signature2","paramLimitFormArray","parameterForm","get","paramUserFormArray","ngOnInit","retrieveClaimApproverUsers","retrieveSignatureUsers","retrieveParameters","subscribe","res","onSuccess","body","error","console","log","findAllAssignedUsers","CLAIMS_APPROVER","next","claimApproverOptions","mapUsersToOptions","findAllAssignedRoles","U2","response","forEach","r","retrieveUsersAndAppendSignatureOptions","resourceId","id","options","signatureOptions","data","usersArr","u","fullName","firstName","lastName","push","name","subjectId","disabled","sort","a","b","parameter","overallStatus","disableForm","patchParamUserForm","patchParamLimitForm","patchParamSignatureForm","disable","fa","status","PENDING_APPROVAL","paramReqList","o","createParamUserFBGroup","paramList","group","code","type","limitReqLevels","createParamLimitFBGroup","limitLevels","temp","limitLevelAppr","length","lla","approverId","limitReqLevelAppr","level","designation","officialCap","WORKING_CAP_UNLIMITED","workingCap","WORKING_CAP_NA","max","fg","signatureList","signatureReqList","patchValue","signerId","confirm","event","target","message","icon","acceptLabel","rejectLabel","accept","updateParameters","reject","createFromForm","parameter_model_1","undefined","createParamLimitFromForm","createParamUserFromForm","createParamSignatureFromForm","newParamLimit","tempLimitLevelAppr","index","sequence","statusBy","statusDt","newParamSignature","hasError","requestParameter","postParameter","paramUsersList","req","update","ok","success","successMessage","refreshComponent","currentRoute","url","navigateByUrl","skipLocationChange","then","navigate","validateSignatureSelection","setErrors","validateLimitLevelApproverSelection","selected","duplicatedLimitApprovers","v","includes","logForm","exports","selectors","features","api_1","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\administration\\parameter\\parameter.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\administration\\parameter\\parameter.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {\r\n  IParameter,\r\n  IParamLimit,\r\n  IParamSignature,\r\n  IParamSignatureList,\r\n  IParamUser,\r\n  Parameter,\r\n  ParamLimit,\r\n  ParamLimitAppr,\r\n  ParamLimitLevel,\r\n  ParamSignature,\r\n  ParamSignatureList,\r\n  ParamUser\r\n} from './parameter.model';\r\nimport {ParameterService} from './service/parameter.service';\r\nimport {GroupService, RoleService} from 'app/admin/access-control';\r\nimport {HttpErrorResponse, HttpResponse} from '@angular/common/http';\r\nimport {ConfirmationService, MessageService} from 'primeng/api';\r\nimport {NSPAY2_GROUPS, NSPAY2_ROLES, NSPAY2_STATUS} from 'app/nspay2.constants';\r\n\r\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {workingCapValidator} from './parameter.directive';\r\n\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\n\r\n@Component({\r\n  selector: 'n2-parameter',\r\n  templateUrl: './parameter.component.html',\r\n  styleUrls: ['./parameter.component.css'],\r\n  providers: [ConfirmationService, MessageService]\r\n})\r\nexport class ParameterComponent implements OnInit {\r\n\r\n  parameter: IParameter = {};\r\n  overallStatus?: string;\r\n  disableForm = false;\r\n\r\n  // Constants\r\n  readonly WORKING_CAP_UNLIMITED = 999999999;\r\n  readonly WORKING_CAP_NA = 0;\r\n  readonly myNSPAY2_STATUS = NSPAY2_STATUS;\r\n\r\n  dropdownOptions = [{label: 'T', value: 'T'}, {label: 'F', value: 'F'}]\r\n\r\n  claimApproverUsers: any;\r\n\r\n  signatureOptions: unknown[] = [];\r\n  claimApproverOptions: unknown[] = [];\r\n\r\n  parameterForm: FormGroup = new FormGroup({\r\n    paramLimit: new FormArray([]),\r\n    paramUser: new FormArray([]),\r\n    paramSignature: new FormGroup({\r\n      signature1: new FormControl('', Validators.required),\r\n      signature2: new FormControl('', Validators.required)\r\n    })\r\n  });\r\n\r\n  duplicatedLimitApprovers: unknown[] = [];\r\n\r\n\r\n  successMessage = \"Request has been submitted successfully for approval\";\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private parameterService: ParameterService,\r\n    private roleService: RoleService,\r\n    private groupService: GroupService,\r\n    private formBuilder: FormBuilder,\r\n    private confirmationService: ConfirmationService,\r\n    private messageService: MessageService,\r\n    private toastService: CustomToastService\r\n  ) {\r\n  }\r\n\r\n  get paramLimitFormArray(): FormArray {\r\n    return this.parameterForm.get('paramLimit') as FormArray;\r\n  }\r\n\r\n  get paramUserFormArray(): FormArray {\r\n    return this.parameterForm.get('paramUser') as FormArray;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.retrieveClaimApproverUsers();\r\n    this.retrieveSignatureUsers();\r\n    this.retrieveParameters();\r\n  }\r\n\r\n  retrieveParameters(): void {\r\n    this.parameterService.get().subscribe(\r\n      (res: HttpResponse<IParameter>) => {\r\n        this.onSuccess(res.body);\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n  retrieveClaimApproverUsers(): void {\r\n    this.roleService.findAllAssignedUsers(NSPAY2_ROLES.CLAIMS_APPROVER)\r\n      .subscribe(\r\n        {\r\n          next: (res: HttpResponse<any>) => {\r\n              this.claimApproverOptions = this.mapUsersToOptions(res.body);\r\n          }, \r\n          error(error: HttpErrorResponse) {\r\n            console.log(error);\r\n            this.toastService.error(\"Failed to load Claim Approvers\");\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  retrieveSignatureUsers(): void {\r\n    this.groupService.findAllAssignedRoles(NSPAY2_GROUPS.U2)\r\n      .subscribe(\r\n        {\r\n          next: (res: HttpResponse<any>) => {\r\n            const response = res.body;\r\n\r\n            response.forEach((r: { resourceId: string; }) => {\r\n              this.retrieveUsersAndAppendSignatureOptions(r.resourceId);\r\n            })\r\n          }, \r\n          error(error: HttpErrorResponse) {\r\n            console.log(error);\r\n            this.toastService.error(\"Failed to load users\");\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  retrieveUsersAndAppendSignatureOptions(id: string): void {\r\n    this.roleService.findAllAssignedUsers(id)\r\n      .subscribe(\r\n        {\r\n          next: (res: HttpResponse<any>) => {\r\n            const options = this.mapUsersToOptions(res.body);\r\n            this.signatureOptions = [...this.signatureOptions, ...options];\r\n          }, \r\n          error(error: HttpErrorResponse) {\r\n            console.log(error);\r\n            this.toastService.error(\"Failed to load users\");\r\n          }\r\n        }\r\n    );\r\n  }\r\n\r\n  mapUsersToOptions(data: any): any[] {\r\n    const usersArr = data;\r\n    const options: any[] = [];\r\n\r\n    usersArr.forEach((u: { firstName: string; lastName: string; subjectId: any; }) => {\r\n      const fullName = u.firstName + \" \" + u.lastName;\r\n      options.push({name: fullName, subjectId: u.subjectId, disabled: false});\r\n    });\r\n\r\n    options.sort((a: { name: number; }, b: { name: number; }) => a.name < b.name ? -1 : (a.name > b.name ? 1 : 0))\r\n\r\n    return options;\r\n  }\r\n\r\n  onSuccess(data: IParameter): void {\r\n    this.parameter = data;\r\n    this.overallStatus = data.overallStatus;\r\n    this.disableForm = this.overallStatus === 'PENDING_APPROVAL';\r\n    this.patchParamUserForm();\r\n    this.patchParamLimitForm();\r\n    this.patchParamSignatureForm();\r\n\r\n    if (this.disableForm) {\r\n      this.parameterForm.disable();\r\n    }\r\n\r\n  }\r\n\r\n  // Param User\r\n  patchParamUserForm(): void {\r\n//    console.log(this.parameter.paramUser.paramList);\r\n\r\n    const fa = this.parameterForm.get('paramUser') as FormArray;\r\n\r\n    if (this.disableForm && this.parameter.paramUser?.status === NSPAY2_STATUS.PENDING_APPROVAL) {\r\n      this.parameter.paramUser?.paramReqList?.forEach(o => {\r\n        fa.push(this.createParamUserFBGroup(o));\r\n      })\r\n    } else {\r\n      this.parameter.paramUser?.paramList?.forEach(o => {\r\n        fa.push(this.createParamUserFBGroup(o));\r\n      })\r\n    }\r\n  }\r\n\r\n  createParamUserFBGroup(o: any): FormGroup {\r\n    return this.formBuilder.group({\r\n      code: new FormControl(o.code),\r\n      name: new FormControl(o.name),\r\n      value: new FormControl(o.value, Validators.required),\r\n      type: new FormControl(o.type)\r\n    })\r\n  }\r\n\r\n  // Param Limit\r\n  patchParamLimitForm(): void {\r\n//     console.log(this.parameter.paramLimit);\r\n\r\n    const fa = this.parameterForm.get('paramLimit') as FormArray;\r\n    if (this.disableForm && this.parameter.paramLimit?.status === NSPAY2_STATUS.PENDING_APPROVAL) {\r\n      this.parameter.paramLimit?.limitReqLevels?.forEach(o => {\r\n        fa.push(this.createParamLimitFBGroup(o));\r\n      })\r\n    } else {\r\n      this.parameter.paramLimit?.limitLevels?.forEach(o => {\r\n        fa.push(this.createParamLimitFBGroup(o));\r\n      })\r\n    }\r\n  }\r\n\r\n  createParamLimitFBGroup(o: any): FormGroup {\r\n\r\n    const temp: any[] = []\r\n\r\n    if (o.limitLevelAppr?.length > 0) {\r\n      o.limitLevelAppr.forEach((lla: { approverId: any; }) => temp.push(lla.approverId));\r\n    } else if (o.limitReqLevelAppr?.length > 0) {\r\n      o.limitReqLevelAppr.forEach((lla: { approverId: any; }) => temp.push(lla.approverId));\r\n    }\r\n\r\n\r\n    return this.formBuilder.group({\r\n      level: new FormControl(o.level),\r\n      designation: new FormControl(o.designation),\r\n      limitLevelAppr: new FormControl(temp),\r\n      officialCap: new FormControl(o.officialCap === this.WORKING_CAP_UNLIMITED ? 'Unlimited' : o.officialCap),\r\n      workingCap: new FormControl(o.workingCap === this.WORKING_CAP_NA ? 'NA' : o.workingCap === this.WORKING_CAP_UNLIMITED ? 'Unlimited' : o.workingCap\r\n        , [Validators.required, workingCapValidator(), Validators.max(o.officialCap as number)])\r\n    })\r\n  }\r\n\r\n  patchParamSignatureForm(): void {\r\n    const fg = this.parameterForm.get('paramSignature') as FormGroup;\r\n\r\n    if (this.disableForm && this.parameter.paramSignature?.status === NSPAY2_STATUS.PENDING_APPROVAL) {\r\n      if (this.parameter.paramSignature?.signatureList !== null && this.parameter.paramSignature?.signatureReqList?.length > 0) {\r\n        fg.patchValue({\r\n          signature1: this.parameter.paramSignature?.signatureReqList[0] === null ? null : this.parameter.paramSignature?.signatureReqList[0].signerId,\r\n          signature2: this.parameter.paramSignature?.signatureReqList[1] === null ? null : this.parameter.paramSignature?.signatureReqList[1].signerId,\r\n        })\r\n\r\n\r\n      }\r\n    } else {\r\n      if (this.parameter.paramSignature?.signatureList !== null && this.parameter.paramSignature?.signatureList?.length > 0) {\r\n        fg.patchValue({\r\n          signature1: this.parameter.paramSignature?.signatureList[0] === null ? null : this.parameter.paramSignature?.signatureList[0]?.signerId,\r\n          signature2: this.parameter.paramSignature?.signatureList[1] === null ? null : this.parameter.paramSignature?.signatureList[1]?.signerId,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  confirm(event: Event): void {\r\n    this.confirmationService.confirm({\r\n      target: event.target,\r\n      message: \"Good to go?\",\r\n      icon: \"pi pi-exclamation-triangle\",\r\n      acceptLabel: \"Proceed\",\r\n      rejectLabel: \"No\",\r\n      accept: () => {\r\n        this.updateParameters();\r\n      },\r\n      reject() {\r\n        //\r\n      }\r\n    });\r\n  }\r\n\r\n  createFromForm(): IParameter {\r\n    return {\r\n      ...new Parameter(),\r\n      overallStatus: undefined,\r\n      paramLimit: this.createParamLimitFromForm(),\r\n      paramUser: this.createParamUserFromForm(),\r\n      paramSignature: this.createParamSignatureFromForm(),\r\n    }\r\n  }\r\n\r\n  createParamLimitFromForm(): IParamLimit {\r\n\r\n    const newParamLimit: any = [];\r\n\r\n    this.parameterForm.get('paramLimit')?.value.forEach((o: { limitLevelAppr: any[]; level: any; designation: any; officialCap: string; workingCap: string; }) => {\r\n\r\n      const tempLimitLevelAppr: any = [];\r\n\r\n      o.limitLevelAppr.forEach((lla: any, index: number) => {\r\n        tempLimitLevelAppr.push({\r\n          ...new ParamLimitAppr(),\r\n          id: null,\r\n          approverId: lla,\r\n          sequence: index + 1\r\n        })\r\n      });\r\n\r\n      newParamLimit.push({\r\n        ...new ParamLimitLevel(),\r\n        level: o.level,\r\n        designation: o.designation,\r\n        officialCap: o.officialCap === 'Unlimited' ? this.WORKING_CAP_UNLIMITED : o.officialCap,\r\n        workingCap: o.workingCap === 'Unlimited' ? this.WORKING_CAP_UNLIMITED : o.workingCap === 'NA' ? this.WORKING_CAP_NA : o.workingCap,\r\n        limitLevelAppr: tempLimitLevelAppr\r\n      });\r\n    });\r\n\r\n    return {\r\n      ...new ParamLimit(),\r\n      id: undefined,\r\n      limitLevels: newParamLimit,\r\n      status: undefined,\r\n      statusBy: undefined,\r\n      statusDt: undefined\r\n    }\r\n  }\r\n\r\n  createParamUserFromForm(): IParamUser {\r\n      return {\r\n      ...new ParamUser(),\r\n      id: undefined,\r\n      paramList: this.parameterForm.get('paramUser')?.value,\r\n      status: undefined,\r\n      statusBy: undefined,\r\n      statusDt: undefined\r\n    }\r\n  }\r\n\r\n  createParamSignatureFromForm(): IParamSignature {\r\n\r\n    const newParamSignature: IParamSignatureList[] = [];\r\n\r\n    newParamSignature.push({\r\n      ...new ParamSignatureList(),\r\n      id: undefined,\r\n      signerId: this.parameterForm.get('paramSignature')?.value.signature1,\r\n      sequence: 1,\r\n    })\r\n\r\n    newParamSignature.push({\r\n      ...new ParamSignatureList(),\r\n      id: undefined,\r\n      signerId: this.parameterForm.get('paramSignature')?.value.signature2,\r\n      sequence: 2,\r\n    })\r\n\r\n    return {\r\n      ...new ParamSignature(),\r\n      id: undefined,\r\n      signatureList: newParamSignature,\r\n      status: undefined,\r\n      statusBy: undefined,\r\n      statusDt: undefined,\r\n    }\r\n  }\r\n\r\n  \r\n  updateParameters(): void {\r\n\r\n    if(!this.hasError()) {\r\n      const requestParameter = this.createFromForm();\r\n      this.postParameter(requestParameter);\r\n    }\r\n  }\r\n\r\n  hasError(): boolean {\r\n    let hasError = false;\r\n    const paramUsersList = this.parameterForm.get('paramUser')?.value;\r\n    console.log(\"paramUserList\", paramUsersList);\r\n\r\n    paramUsersList.forEach((r : {code: string, name: string, value: string, type: string})=> {\r\n      if(r.value === '') {\r\n        hasError = true;\r\n        this.toastService.error(`User parameters ${r.name} must be numeric and cannot be empty`);\r\n      }\r\n    });\r\n\r\n    return hasError;\r\n  }\r\n  postParameter(req: IParameter): void {\r\n    this.parameterService.update(req).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        if (res.ok) {\r\n          this.toastService.success(this.successMessage);\r\n          this.refreshComponent();\r\n        }\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        this.toastService.error(\"Fail to update parameter values in database\");\r\n        console.log(error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  refreshComponent(): void {\r\n    const currentRoute = this.router.url;\r\n\r\n    this.router.navigateByUrl('/', {skipLocationChange: true}).then(() => {\r\n      this.router.navigate([currentRoute]);\r\n    });\r\n  }\r\n\r\n  validateSignatureSelection(): void {\r\n    if (this.parameterForm.get('paramSignature')?.value.signature1 === this.parameterForm.get('paramSignature')?.value.signature2) {\r\n      this.parameterForm.get('paramSignature')?.setErrors({'unique': true});\r\n    }\r\n  }\r\n\r\n  validateLimitLevelApproverSelection(): void {\r\n    const temp = this.parameterForm.get('paramLimit')?.value;\r\n    const selected: any[] = [];\r\n    this.duplicatedLimitApprovers = [];\r\n\r\n    temp.forEach((v: { limitLevelAppr: any[]; }) => {\r\n      v.limitLevelAppr.forEach((a: unknown) => {\r\n\r\n        if (selected.includes(a)) {\r\n          this.parameterForm.get('paramLimit')?.setErrors({'unique': true})\r\n          this.duplicatedLimitApprovers.push(a);\r\n        } else {\r\n          selected.push(a);\r\n        }\r\n\r\n      });\r\n    });\r\n\r\n    console.log(selected);\r\n    console.log(this.duplicatedLimitApprovers);\r\n  }\r\n\r\n  logForm(): void {\r\n    console.log(this.parameterForm);\r\n  }\r\n}\r\n","<p-toast></p-toast>\r\n<div *ngIf=\"parameter\">\r\n  <form [formGroup]=\"parameterForm\">\r\n    <div class=\"grid\">\r\n      <div class=\"col-12\">\r\n        <p-panel styleClass=\"no-padding-panel\">\r\n          <ng-template pTemplate=\"header\">\r\n            <div>\r\n              <span class=\"p-panel-title\" icTranslate=\"nspay2App.parameter.limit.header\"></span>\r\n              <p-tag value=\"Pending Approval\" *ngIf=\"parameter.paramLimit?.status == myNSPAY2_STATUS.PENDING_APPROVAL\" severity=\"warning\"></p-tag>\r\n            </div>\r\n          </ng-template>\r\n          <div formArrayName=\"paramLimit\">\r\n            <!-- parameterForm.controls?.paramLimit['controls'] -->\r\n            <p-table [value]=\"paramLimitFormArray.controls\" styleClass=\"p-datatable-gridlines\">\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th scope=\"col\" style=\"width: 5%\">Level</th>\r\n                  <th scope=\"col\" style=\"width: 15%\">Designation</th>\r\n                  <th scope=\"col\" style=\"width: 50%\">Name</th>\r\n                  <th scope=\"col\" style=\"width: 15%\">Official Cap</th>\r\n                  <th scope=\"col\" style=\"width: 15%\">Working Cap</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-paramLimit let-i=\"rowIndex\">\r\n                <tr [formGroupName]=\"i\" >\r\n                  <td>{{ paramLimit.value.level }}</td>\r\n                  <td>{{ paramLimit.value.designation }}</td>\r\n                  <td>\r\n                    <p-multiSelect display=\"chip\" styleClass=\"full-width\" [options]=\"claimApproverOptions\" optionLabel=\"name\" optionValue=\"subjectId\" optionDisabled=\"disabled\" formControlName=\"limitLevelAppr\" [disabled]=\"disableForm\" (onChange)=\"validateLimitLevelApproverSelection()\"></p-multiSelect>\r\n                    <span *ngIf=\"parameterForm.get('paramLimit')?.hasError('unique') && paramLimit.value.limitLevelAppr.length > 0\" class=\"p-error\">Approver cannot exist in 2 different levels</span>\r\n                  </td>\r\n                  <td>{{ paramLimit.value.officialCap }}</td>\r\n                  <td>\r\n                    <input type=\"text\" pInputText formControlName=\"workingCap\" id=\"workingCap{{i}}\" [disabled]=\"disableForm\" class=\"w-full\"/>\r\n                    <span *ngIf=\"paramLimit.get('workingCap')?.hasError('violateLimit')\" class=\"p-error\">Violated Limit</span>\r\n                    <span *ngIf=\"paramLimit.get('workingCap')?.hasError('required')\" class=\"p-error\">Required</span>\r\n                    <span *ngIf=\"paramLimit.get('workingCap')?.hasError('max')\" class=\"p-error\">Exceed Official Cap</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </p-panel>\r\n        <span>Last {{parameter.paramLimit?.status! | status | lowercase }} by {{parameter.paramLimit?.statusBy}} on {{parameter.paramLimit?.statusDt | date: 'dd/MM/yyyy' }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"grid\">\r\n      <div class=\"col-8\">\r\n        <p-panel>\r\n          <ng-template pTemplate=\"header\">\r\n            <div>\r\n              <span class=\"p-panel-title\" icTranslate=\"nspay2App.parameter.signature.header\"></span>\r\n              <p-tag value=\"Pending Approval\" *ngIf=\"parameter.paramSignature?.status == myNSPAY2_STATUS.PENDING_APPROVAL\"  severity=\"warning\"></p-tag>\r\n            </div>\r\n          </ng-template>\r\n          <div formGroupName=\"paramSignature\">\r\n            <div class=\"field grid\">\r\n              <label class=\"col-6\" icTranslate=\"nspay2App.parameter.signature.recoupmentListingSignature\">Recoupment Listing Signature</label>\r\n                <div class=\"col-3\">\r\n                  <p-dropdown id=\"signature1\" formControlName=\"signature1\" placeholder=\"Select a User\" [options]=\"signatureOptions\" optionLabel=\"name\" optionValue=\"subjectId\" [style]=\"{'width':'100%'}\" (onChange)=\"validateSignatureSelection()\"></p-dropdown>\r\n                  <span *ngIf=\"parameterForm.controls.paramSignature.get('signature1')?.hasError('required')\" class=\"p-error\">Required</span>\r\n                  <span *ngIf=\"parameterForm.get('paramSignature')?.hasError('unique')\" class=\"p-error\">Cannot be the same</span>\r\n                </div>\r\n                <div class=\"col-3\">\r\n                  <p-dropdown id=\"signature2\" formControlName=\"signature2\" placeholder=\"Select a User\" [options]=\"signatureOptions\" optionLabel=\"name\" optionValue=\"subjectId\" [style]=\"{'width':'100%'}\" (onChange)=\"validateSignatureSelection()\"></p-dropdown>\r\n                  <span *ngIf=\"parameterForm.controls.paramSignature.get('signature2')?.hasError('required')\" class=\"p-error\">Required</span>\r\n                  <span *ngIf=\"parameterForm.get('paramSignature')?.hasError('unique')\" class=\"p-error\">Cannot be the same</span>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </p-panel>\r\n        <span>Last {{parameter.paramSignature?.status! | status | lowercase }} by {{parameter.paramSignature?.statusBy}} on {{parameter.paramSignature?.statusDt | date: 'dd/MM/yyyy' }}</span>\r\n      </div>\r\n\r\n\r\n      <div class=\"col-4\">\r\n        <p-panel>\r\n          <ng-template pTemplate=\"header\">\r\n            <div>\r\n              <span class=\"p-panel-title\" icTranslate=\"nspay2App.parameter.user.header\"></span>\r\n              <p-tag value=\"Pending Approval\" *ngIf=\"parameter.paramUser?.status == myNSPAY2_STATUS.PENDING_APPROVAL\" severity=\"warning\"></p-tag>\r\n            </div>\r\n          </ng-template>\r\n          <div formArrayName=\"paramUser\">\r\n            <!-- parameterForm.controls?.paramUser['controls'] -->\r\n            <div *ngFor=\"let paramUser of paramUserFormArray.controls; let i = index;\" [formGroupName]=\"i\">\r\n              <div class=\"field grid\">\r\n                <label for=\"paramValue{{i}}\" class=\"col-8\">{{ paramUser.value.name }}</label>\r\n                <div class=\"col-4\">\r\n                  <input *ngIf=\"paramUser.value.type == 'T'\" type=\"text\" pInputText formControlName=\"value\" id=\"paramValue{{i}}\" [disabled]=\"disableForm\" class=\"w-full\"/>\r\n                  <p-dropdown *ngIf=\"paramUser.value.type == 'D'\" id=\"paramValue{{i}}\" formControlName=\"value\" [options]=\"dropdownOptions\" optionLabel=\"label\" optionValue=\"value\" [style]=\"{'width':'100%'}\"></p-dropdown>\r\n                  <span *ngIf=\"paramUser.get('value')?.hasError('required')\" class=\"p-error\">Required</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </p-panel>\r\n        <span>Last {{parameter.paramUser?.status! | status | lowercase }} by {{parameter.paramUser?.statusBy}} on {{parameter.paramUser?.statusDt | date: 'dd/MM/yyyy' }}</span>\r\n      </div>\r\n    </div>\r\n\r\n  </form>\r\n\r\n  <div class=\"flex justify-content-end align-items-center\" *ngIf=\"!disableForm\">\r\n    <div>\r\n      <button pButton type=\"button\" label=\"Cancel\" (click)=\"logForm()\" class=\"p-button-danger\"></button>\r\n      <p-confirmPopup></p-confirmPopup>\r\n      <button pButton type=\"button\" label=\"Submit\" (click)=\"confirm($event)\" ></button>\r\n      <!-- [disabled]=\"!parameterForm.valid\" -->\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CABComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst core_1 = require(\"@angular/core\");\nconst forms_1 = require(\"@angular/forms\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i2 = tslib_1.__importStar(require(\"./service/cab.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i5 = tslib_1.__importStar(require(\"primeng/card\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/inputtextarea\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/inputswitch\"));\nfunction CABComponent_div_0_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"NSman\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Company\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Caution\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \",\\u00A0\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Alert\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \",\\u00A0\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u00A0&\\u00A0\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Block\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_span_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CABComponent_div_0_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                        \");\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const record_r13 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 2, record_r13.contentDt, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(record_r13.content);\n  }\n}\nfunction CABComponent_div_0_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementStart(2, \"label\", 20);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                        \");\n    i0.ɵɵelement(5, \"p-inputSwitch\", 21);\n    i0.ɵɵtext(6, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const alert_r14 = ctx.$implicit;\n    const i_r15 = ctx.index;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroupName\", i_r15);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r11.deriveAlertDesc(alert_r14.get(\"id\").value));\n  }\n}\nfunction CABComponent_div_0_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementStart(2, \"label\", 20);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                        \");\n    i0.ɵɵelement(5, \"p-inputSwitch\", 21);\n    i0.ɵɵtext(6, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const block_r16 = ctx.$implicit;\n    const i_r17 = ctx.index;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroupName\", i_r17);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.deriveBlockDesc(block_r16.get(\"id\").value));\n  }\n}\nfunction CABComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Caution, Alert & Block -\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n    i0.ɵɵtemplate(7, CABComponent_div_0_span_7_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵtemplate(9, CABComponent_div_0_span_9_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelementStart(11, \"span\", 2);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n    \\n    \");\n    i0.ɵɵelementStart(16, \"form\", 3);\n    i0.ɵɵtext(17, \"\\n        \");\n    i0.ɵɵelementStart(18, \"div\", 4);\n    i0.ɵɵtext(19, \"\\n            \");\n    i0.ɵɵelementStart(20, \"div\", 5);\n    i0.ɵɵtext(21, \"\\n                \");\n    i0.ɵɵelementStart(22, \"div\", 6);\n    i0.ɵɵtext(23, \"\\n                    \");\n    i0.ɵɵtemplate(24, CABComponent_div_0_span_24_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(25, \"\\n                    \");\n    i0.ɵɵtemplate(26, CABComponent_div_0_span_26_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(27, \"\\n                    \");\n    i0.ɵɵtemplate(28, CABComponent_div_0_span_28_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(29, \"\\n                    \");\n    i0.ɵɵtemplate(30, CABComponent_div_0_span_30_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(31, \"\\n                    \");\n    i0.ɵɵtemplate(32, CABComponent_div_0_span_32_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(33, \"\\n                    \");\n    i0.ɵɵtemplate(34, CABComponent_div_0_span_34_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(35, \"\\n                    \");\n    i0.ɵɵtemplate(36, CABComponent_div_0_span_36_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(37, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n                \");\n    i0.ɵɵelementStart(39, \"p-card\", 7);\n    i0.ɵɵtext(40, \"\\n                    \");\n    i0.ɵɵtemplate(41, CABComponent_div_0_div_41_Template, 12, 5, \"div\", 8);\n    i0.ɵɵtext(42, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n                \");\n    i0.ɵɵelementStart(44, \"div\", 9);\n    i0.ɵɵtext(45, \"\\n                    \");\n    i0.ɵɵelement(46, \"textarea\", 10);\n    i0.ɵɵtext(47, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n            \\n            \");\n    i0.ɵɵelementStart(50, \"div\", 11);\n    i0.ɵɵtext(51, \"\\n                \");\n    i0.ɵɵelementStart(52, \"div\", 12);\n    i0.ɵɵtext(53, \"\\n                    \");\n    i0.ɵɵtemplate(54, CABComponent_div_0_div_54_Template, 7, 2, \"div\", 13);\n    i0.ɵɵtext(55, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(56, \"\\n                \");\n    i0.ɵɵelementStart(57, \"div\", 14);\n    i0.ɵɵtext(58, \"\\n                    \");\n    i0.ɵɵtemplate(59, CABComponent_div_0_div_59_Template, 7, 2, \"div\", 13);\n    i0.ɵɵtext(60, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n                \");\n    i0.ɵɵelementStart(62, \"div\", 15);\n    i0.ɵɵtext(63, \"\\n                    \");\n    i0.ɵɵelementStart(64, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CABComponent_div_0_Template_button_click_64_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.close());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(65, \"\\n                    \");\n    i0.ɵɵelementStart(66, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function CABComponent_div_0_Template_button_click_66_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.onSave($event, \"saveCABRecord\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(67, \"\\n                    \");\n    i0.ɵɵelement(68, \"p-confirmPopup\", 18);\n    i0.ɵɵtext(69, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(70, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(71, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(72, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(73, \"    \\n\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.cab.csnOrNric.length === 9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.cab.csnOrNric.length !== 9);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"Last updated by: \", ctx_r0.cab.updatedBy, \" \", i0.ɵɵpipeBind2(13, 15, ctx_r0.cab.updatedDt, \"dd-MM-yyyy (HHmm)\"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.cabForm);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCaution);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCaution && (ctx_r0.isAlert || ctx_r0.isBlock));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAlert);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isCaution && ctx_r0.isAlert && ctx_r0.isBlock);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCaution && ctx_r0.isAlert && ctx_r0.isBlock);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isBlock);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCaution || ctx_r0.isAlert || ctx_r0.isBlock);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.existingRemarks);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.alertsFormArray.controls);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.blocksFormArray.controls);\n  }\n}\nclass CABComponent {\n  constructor(fb, cabService, nspConfirmService) {\n    this.fb = fb;\n    this.cabService = cabService;\n    this.nspConfirmService = nspConfirmService;\n    this.cabClose = new core_1.EventEmitter();\n    this.existingRemarks = [];\n    this.isCaution = false;\n    this.isAlert = false;\n    this.isBlock = false;\n    this.cabForm = this.fb.group({\n      remark: new forms_1.FormControl(),\n      alerts: this.fb.array([]),\n      blocks: this.fb.array([])\n    });\n  }\n  get alertsFormArray() {\n    return this.cabForm.get('alerts');\n  }\n  get blocksFormArray() {\n    return this.cabForm.get('blocks');\n  }\n  ngOnInit() {\n    this.retrieveCABRecord();\n  }\n  retrieveCABRecord() {\n    this.cabService.getCABRecord(this.csnOrNric).subscribe(resp => {\n      if (resp.body.data) {\n        this.cab = resp.body.data;\n        setTimeout(() => {\n          this.initWarning();\n          this.initForm();\n        }, 1000);\n      }\n    });\n  }\n  initWarning() {\n    if (this.cab != null) {\n      this.isCaution = this.cab.cabCautions.length > 0;\n      this.cab.cabAlerts.forEach(alert => {\n        if (alert.enabled) {\n          this.isAlert = true;\n        }\n      });\n      this.cab.cabBlocks.forEach(block => {\n        if (block.enabled) {\n          this.isBlock = true;\n        }\n      });\n    }\n  }\n  initForm() {\n    if (this.cab != null) {\n      this.existingRemarks = this.cab.cabCautions.sort(function (a, b) {\n        if (a.contentDt > b.contentDt) {\n          return -1;\n        } else if (a.contentDt < b.contentDt) {\n          return 1;\n        } else {\n          return 0;\n        }\n      });\n      this.cab.cabAlerts.forEach(alert => {\n        const control = this.fb.group({\n          id: alert.alertId,\n          enabled: alert.enabled\n        });\n        this.alertsFormArray.push(control);\n      });\n      this.cab.cabBlocks.forEach(block => {\n        const control = this.fb.group({\n          id: block.blockId,\n          enabled: block.enabled\n        });\n        this.blocksFormArray.push(control);\n      });\n    }\n  }\n  deriveAlertDesc(alertId) {\n    return this.cab.cabAlerts.find(x => x.alertId === alertId).alertTypeDesc;\n  }\n  deriveBlockDesc(blockId) {\n    return this.cab.cabBlocks.find(x => x.blockId === blockId).blockTypeDesc;\n  }\n  onSave(event, key) {\n    const alertsMap = {};\n    for (let i = 0; i < this.alertsFormArray.length; i++) {\n      const x = this.alertsFormArray.at(i).value;\n      alertsMap[x.id] = x.enabled ? \"ENA\" : \"DIS\";\n    }\n    const blocksMap = {};\n    for (let i = 0; i < this.blocksFormArray.length; i++) {\n      const x = this.blocksFormArray.at(i).value;\n      blocksMap[x.id] = x.enabled ? \"ENA\" : \"DIS\";\n    }\n    const req = {\n      recordId: this.cab.recordId,\n      content: this.cabForm.get('remark').value,\n      alerts: alertsMap,\n      blocks: blocksMap\n    };\n    console.log(\"request body\", req);\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.cabService.updateCABRecord(req).subscribe(resp => {\n        if (resp && resp.status === 200) {\n          this.close();\n        }\n      }, error => {\n        console.log(\"error is \" + String(error?.error?.error_desc));\n      });\n    });\n  }\n  close() {\n    this.cabClose.emit();\n  }\n}\nexports.CABComponent = CABComponent;\nCABComponent.ɵfac = function CABComponent_Factory(t) {\n  return new (t || CABComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CABService), i0.ɵɵdirectiveInject(i3.NspConfirmationService));\n};\nCABComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CABComponent,\n  selectors: [[\"n2-cab\"]],\n  inputs: {\n    csnOrNric: \"csnOrNric\"\n  },\n  outputs: {\n    cabClose: \"cabClose\"\n  },\n  decls: 2,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"header\"], [1, \"shift-right\"], [3, \"formGroup\"], [1, \"contents\", \"grid\"], [1, \"col-7\"], [1, \"warning\"], [\"styleClass\", \"remarks\"], [4, \"ngFor\", \"ngForOf\"], [2, \"margin-top\", \"1rem\"], [\"pInputTextarea\", \"\", \"formControlName\", \"remark\", \"placeholder\", \"Enter caution remark\"], [1, \"col-5\"], [\"formArrayName\", \"alerts\"], [\"class\", \"field grid\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"formArrayName\", \"blocks\"], [1, \"buttons\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"label\", \"Close\", 1, \"p-button-secondary\", 2, \"float\", \"right\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"label\", \"Save\", 1, \"p-button-success\", 2, \"float\", \"right\", \"margin-right\", \"5px\", 3, \"click\"], [\"key\", \"saveCABRecord\"], [1, \"field\", \"grid\", 3, \"formGroupName\"], [1, \"col-10\"], [\"formControlName\", \"enabled\", 1, \"col-2\"]],\n  template: function CABComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CABComponent_div_0_Template, 74, 18, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.cab != null);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName, i5.Card, i6.ButtonDirective, i7.InputTextarea, i8.ConfirmPopup, i9.InputSwitch, i4.DatePipe],\n  styles: [\"[_nghost-%COMP%]     .header {\\n  background: var(--surface-300) !important;\\n  padding: 1em;\\n  height: 50px;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n[_nghost-%COMP%]     .shift-right {\\n  margin-left: auto;\\n  margin-right: 0;\\n}\\n\\n[_nghost-%COMP%]     .contents {\\n  margin: 0;\\n  padding: 8px;\\n}\\n\\n[_nghost-%COMP%]     .warning {\\n  background: var(--yellow-400) !important;\\n  padding: 8px;\\n  height: 50px;\\n  color: #fff;\\n  display: flex;\\n  align-items: center;\\n  border: 1px solid #ced4da;\\n}\\n\\n[_nghost-%COMP%]     .remarks {\\n  background: var(--surface-100) !important;\\n  padding: 8px;\\n  height: 300px;\\n  box-shadow: none;\\n  border-radius: 0;\\n  border: 1px solid #ced4da;\\n}\\n\\n[_nghost-%COMP%]     .p-card {\\n  overflow: auto;\\n}\\n\\n[_nghost-%COMP%]     .p-card .p-card-body {\\n  padding: 0;\\n}\\n\\n[_nghost-%COMP%]     .p-card .p-card-content {\\n  padding: 0;\\n}\\n\\n[_nghost-%COMP%]     .p-inputtext {\\n  width: 100%;\\n}\\n\\n[_nghost-%COMP%]     .buttons {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n  padding-right: 16px;\\n  padding-bottom: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhYi5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFxlbnF1aXJ5XFxjYXV0aW9uLWFsZXJ0LWJsb2NrXFxjYWIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSx5Q0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxpQkFBQTtFQUNBLGVBQUE7QUNDSjs7QURFQTtFQUNJLFNBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSx3Q0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0FDQ0o7O0FERUE7RUFDSSx5Q0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0FDQ0o7O0FERUE7RUFDSSxjQUFBO0FDQ0o7O0FERUE7RUFDSSxVQUFBO0FDQ0o7O0FERUE7RUFDSSxVQUFBO0FDQ0o7O0FERUE7RUFDSSxXQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtBQ0NKIiwiZmlsZSI6ImNhYi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IDo6bmctZGVlcCAuaGVhZGVyIHtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLXN1cmZhY2UtMzAwKSAhaW1wb3J0YW50O1xyXG4gICAgcGFkZGluZzogMWVtO1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuc2hpZnQtcmlnaHQge1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuY29udGVudHMge1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogOHB4O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLndhcm5pbmcge1xyXG4gICAgYmFja2dyb3VuZDogdmFyKC0teWVsbG93LTQwMCkgIWltcG9ydGFudDtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIGhlaWdodDogNTBweDtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnJlbWFya3Mge1xyXG4gICAgYmFja2dyb3VuZDogdmFyKC0tc3VyZmFjZS0xMDApICFpbXBvcnRhbnQ7XHJcbiAgICBwYWRkaW5nOiA4cHg7XHJcbiAgICBoZWlnaHQ6IDMwMHB4O1xyXG4gICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDA7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtY2FyZCB7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1ib2R5IHtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1jYXJkIC5wLWNhcmQtY29udGVudCB7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtaW5wdXR0ZXh0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmJ1dHRvbnMge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAxNnB4O1xyXG4gICAgcGFkZGluZy1ib3R0b206IDE2cHg7XHJcbn1cclxuIiwiOmhvc3QgOjpuZy1kZWVwIC5oZWFkZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zdXJmYWNlLTMwMCkgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMWVtO1xuICBoZWlnaHQ6IDUwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbjpob3N0IDo6bmctZGVlcCAuc2hpZnQtcmlnaHQge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiAwO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmNvbnRlbnRzIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiA4cHg7XG59XG5cbjpob3N0IDo6bmctZGVlcCAud2FybmluZyB7XG4gIGJhY2tncm91bmQ6IHZhcigtLXllbGxvdy00MDApICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDhweDtcbiAgaGVpZ2h0OiA1MHB4O1xuICBjb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5yZW1hcmtzIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tc3VyZmFjZS0xMDApICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDhweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm94LXNoYWRvdzogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQge1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1ib2R5IHtcbiAgcGFkZGluZzogMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1jb250ZW50IHtcbiAgcGFkZGluZzogMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWlucHV0dGV4dCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmJ1dHRvbnMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIHBhZGRpbmctcmlnaHQ6IDE2cHg7XG4gIHBhZGRpbmctYm90dG9tOiAxNnB4O1xufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvZW5xdWlyeS9jYXV0aW9uLWFsZXJ0LWJsb2NrL2NhYi5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvZW5xdWlyeS9jYXV0aW9uLWFsZXJ0LWJsb2NrL2NhYi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlDQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0VBQ0EsZUFBQTtBQ0NKOztBREVBO0VBQ0ksU0FBQTtFQUNBLFlBQUE7QUNDSjs7QURFQTtFQUNJLHdDQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EseUJBQUE7QUNDSjs7QURFQTtFQUNJLHlDQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EseUJBQUE7QUNDSjs7QURFQTtFQUNJLGNBQUE7QUNDSjs7QURFQTtFQUNJLFVBQUE7QUNDSjs7QURFQTtFQUNJLFVBQUE7QUNDSjs7QURFQTtFQUNJLFdBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxtQkFBQTtFQUNBLG9CQUFBO0FDQ0o7QURDQSxvNUhBQW81SCIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IDo6bmctZGVlcCAuaGVhZGVyIHtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLXN1cmZhY2UtMzAwKSAhaW1wb3J0YW50O1xyXG4gICAgcGFkZGluZzogMWVtO1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuc2hpZnQtcmlnaHQge1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuY29udGVudHMge1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogOHB4O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLndhcm5pbmcge1xyXG4gICAgYmFja2dyb3VuZDogdmFyKC0teWVsbG93LTQwMCkgIWltcG9ydGFudDtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIGhlaWdodDogNTBweDtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnJlbWFya3Mge1xyXG4gICAgYmFja2dyb3VuZDogdmFyKC0tc3VyZmFjZS0xMDApICFpbXBvcnRhbnQ7XHJcbiAgICBwYWRkaW5nOiA4cHg7XHJcbiAgICBoZWlnaHQ6IDMwMHB4O1xyXG4gICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDA7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtY2FyZCB7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1ib2R5IHtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1jYXJkIC5wLWNhcmQtY29udGVudCB7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLnAtaW5wdXR0ZXh0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmJ1dHRvbnMge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAxNnB4O1xyXG4gICAgcGFkZGluZy1ib3R0b206IDE2cHg7XHJcbn1cclxuIiwiOmhvc3QgOjpuZy1kZWVwIC5oZWFkZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zdXJmYWNlLTMwMCkgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMWVtO1xuICBoZWlnaHQ6IDUwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbjpob3N0IDo6bmctZGVlcCAuc2hpZnQtcmlnaHQge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiAwO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmNvbnRlbnRzIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiA4cHg7XG59XG5cbjpob3N0IDo6bmctZGVlcCAud2FybmluZyB7XG4gIGJhY2tncm91bmQ6IHZhcigtLXllbGxvdy00MDApICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDhweDtcbiAgaGVpZ2h0OiA1MHB4O1xuICBjb2xvcjogI2ZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5yZW1hcmtzIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tc3VyZmFjZS0xMDApICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDhweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm94LXNoYWRvdzogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQge1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1ib2R5IHtcbiAgcGFkZGluZzogMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWNhcmQgLnAtY2FyZC1jb250ZW50IHtcbiAgcGFkZGluZzogMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5wLWlucHV0dGV4dCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmJ1dHRvbnMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIHBhZGRpbmctcmlnaHQ6IDE2cHg7XG4gIHBhZGRpbmctYm90dG9tOiAxNnB4O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CABComponent","constructor","fb","cabService","nspConfirmService","core_1","group","remark","forms_1","alerts","array","blocks","alertsFormArray","cabForm","get","blocksFormArray","ngOnInit","retrieveCABRecord","getCABRecord","csnOrNric","subscribe","resp","body","data","cab","setTimeout","initWarning","initForm","isCaution","cabCautions","length","cabAlerts","forEach","alert","enabled","isAlert","cabBlocks","block","isBlock","existingRemarks","sort","a","b","contentDt","control","id","alertId","push","blockId","deriveAlertDesc","find","x","alertTypeDesc","deriveBlockDesc","blockTypeDesc","onSave","event","key","alertsMap","i","at","value","blocksMap","req","recordId","content","console","log","onConfirmPopup","updateCABRecord","status","close","error","String","error_desc","cabClose","emit","exports","selectors","inputs","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\enquiry\\caution-alert-block\\cab.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\enquiry\\caution-alert-block\\cab.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { CABService } from './service/cab.service';\r\nimport { CAB, Caution } from './model/cab.model';\r\n\r\n@Component({\r\n  selector: 'n2-cab',\r\n  templateUrl: './cab.component.html',\r\n  styleUrls: ['./cab.component.scss']\r\n})\r\nexport class CABComponent implements OnInit {\r\n\r\n  @Input() csnOrNric: string;\r\n  @Output() cabClose: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  cab: CAB;\r\n  existingRemarks: Caution[] = [];\r\n  isCaution = false;\r\n  isAlert = false;\r\n  isBlock = false;\r\n\r\n  cabForm: FormGroup = this.fb.group({\r\n    remark: new FormControl(),\r\n    alerts: this.fb.array([]),\r\n    blocks: this.fb.array([]),\r\n  })\r\n\r\n  constructor (\r\n    private fb: FormBuilder,\r\n    private cabService: CABService,\r\n    private nspConfirmService: NspConfirmationService,\r\n  ) {}\r\n\r\n  get alertsFormArray(): FormArray {\r\n    return this.cabForm.get('alerts') as FormArray;\r\n  }\r\n\r\n  get blocksFormArray(): FormArray {\r\n    return this.cabForm.get('blocks') as FormArray;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.retrieveCABRecord();\r\n  }\r\n\r\n  retrieveCABRecord(): void {\r\n    this.cabService.getCABRecord(this.csnOrNric).subscribe(\r\n      resp => {\r\n        if (resp.body.data) {\r\n          this.cab = resp.body.data;\r\n\r\n          setTimeout(() => {\r\n            this.initWarning();\r\n            this.initForm();\r\n          }, 1000);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  initWarning(): void {\r\n    if (this.cab != null) {\r\n      this.isCaution = this.cab.cabCautions.length > 0;\r\n      this.cab.cabAlerts.forEach(alert => {\r\n        if (alert.enabled) {\r\n          this.isAlert = true;\r\n        }\r\n      });\r\n      this.cab.cabBlocks.forEach(block => {\r\n        if (block.enabled) {\r\n          this.isBlock = true;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  initForm(): void {\r\n    if (this.cab != null) {\r\n      this.existingRemarks = this.cab.cabCautions.sort(function(a,b) {\r\n        if (a.contentDt > b.contentDt) {\r\n          return -1;\r\n        } else if (a.contentDt < b.contentDt) {\r\n          return 1;\r\n        } else {\r\n          return 0;\r\n        }\r\n      });\r\n      this.cab.cabAlerts.forEach(alert => {\r\n        const control = this.fb.group({\r\n          id: alert.alertId,\r\n          enabled: alert.enabled\r\n        })\r\n        this.alertsFormArray.push(control);\r\n      });\r\n      this.cab.cabBlocks.forEach(block => {\r\n        const control = this.fb.group({\r\n          id: block.blockId,\r\n          enabled: block.enabled\r\n        })\r\n        this.blocksFormArray.push(control);\r\n      });\r\n    }\r\n  }\r\n\r\n  deriveAlertDesc(alertId: string): string {\r\n    return this.cab.cabAlerts.find(x => x.alertId === alertId).alertTypeDesc;\r\n  }\r\n\r\n  deriveBlockDesc(blockId: string): string {\r\n    return this.cab.cabBlocks.find(x => x.blockId === blockId).blockTypeDesc;\r\n  }\r\n\r\n  onSave(event: Event, key: string): void {\r\n    const alertsMap: Record<string, string> = {};\r\n    for (let i = 0; i < this.alertsFormArray.length; i++) {\r\n      const x = this.alertsFormArray.at(i).value;\r\n      alertsMap[x.id] = x.enabled ? \"ENA\" : \"DIS\";\r\n    }\r\n    const blocksMap: Record<string, string> = {};\r\n    for (let i = 0; i < this.blocksFormArray.length; i++) {\r\n      const x = this.blocksFormArray.at(i).value;\r\n      blocksMap[x.id] = x.enabled ? \"ENA\" : \"DIS\";\r\n    }\r\n\r\n    const req = {\r\n      recordId: this.cab.recordId,\r\n      content: this.cabForm.get('remark').value,\r\n      alerts: alertsMap,\r\n      blocks: blocksMap,\r\n    }\r\n    console.log(\"request body\", req);\r\n\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      this.cabService.updateCABRecord(req).subscribe(resp => {\r\n        if (resp && resp.status === 200) {\r\n          this.close();\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(\"error is \" + String(error?.error?.error_desc));\r\n      });\r\n    })\r\n  }\r\n\r\n  close(): void {\r\n    this.cabClose.emit();\r\n  }\r\n}\r\n","<div *ngIf=\"cab != null\">\r\n    <div class=\"header\">\r\n        <span>Caution, Alert & Block -&nbsp;</span>\r\n        <span *ngIf=\"cab.csnOrNric.length === 9\">NSman</span>\r\n        <span *ngIf=\"cab.csnOrNric.length !== 9\">Company</span>\r\n        <span class=\"shift-right\">Last updated by: {{ cab.updatedBy }} {{ cab.updatedDt | date: 'dd-MM-yyyy (HHmm)' }}</span>\r\n    </div>\r\n    \r\n    <form [formGroup]=\"cabForm\">\r\n        <div class=\"contents grid\">\r\n            <div class=\"col-7\">\r\n                <div class=\"warning\">\r\n                    <span *ngIf=\"isCaution\">Caution</span>\r\n                    <span *ngIf=\"isCaution && (isAlert || isBlock)\">,&nbsp;</span>\r\n                    <span *ngIf=\"isAlert\">Alert</span>\r\n                    <span *ngIf=\"!isCaution && isAlert && isBlock\">,&nbsp;</span>\r\n                    <span *ngIf=\"isCaution && isAlert && isBlock\">&nbsp;&&nbsp;</span>\r\n                    <span *ngIf=\"isBlock\">Block</span>\r\n                    <span *ngIf=\"isCaution || isAlert || isBlock\">!</span>\r\n                </div>\r\n                <p-card styleClass=\"remarks\">\r\n                    <div *ngFor=\"let record of existingRemarks\">\r\n                        <span>{{ record.contentDt | date: 'dd-MM-yyyy HH:mm' }}</span>\r\n                        <span>-</span>\r\n                        <span>{{ record.content }}</span>\r\n                    </div>\r\n                </p-card>\r\n                <div style=\"margin-top: 1rem\">\r\n                    <textarea pInputTextarea formControlName=\"remark\" placeholder=\"Enter caution remark\"></textarea>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\"col-5\">\r\n                <div formArrayName=\"alerts\">\r\n                    <div class=\"field grid\" *ngFor=\"let alert of alertsFormArray.controls; let i=index\" [formGroupName]=\"i\">\r\n                        <label class=\"col-10\">{{ this.deriveAlertDesc(alert.get('id').value) }}</label>\r\n                        <p-inputSwitch class=\"col-2\" formControlName=\"enabled\"></p-inputSwitch>\r\n                    </div>\r\n                </div>\r\n                <div formArrayName=\"blocks\">\r\n                    <div class=\"field grid\" *ngFor=\"let block of blocksFormArray.controls; let i=index\" [formGroupName]=\"i\">\r\n                        <label class=\"col-10\">{{ this.deriveBlockDesc(block.get('id').value) }}</label>\r\n                        <p-inputSwitch class=\"col-2\" formControlName=\"enabled\"></p-inputSwitch>\r\n                    </div>\r\n                </div>\r\n                <div class=\"buttons\">\r\n                    <button pButton pRipple type=\"button\" label=\"Close\" class=\"p-button-secondary\" (click)=\"close()\"\r\n                        style=\"float: right\"></button>\r\n                    <button pButton pRipple type=\"button\" label=\"Save\" class=\"p-button-success\" (click)=\"onSave($event, 'saveCABRecord')\"\r\n                        style=\"float: right; margin-right: 5px\"></button>\r\n                    <p-confirmPopup key='saveCABRecord'></p-confirmPopup>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>    \r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FunctionPopupComponent = exports.FunctionCreateDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst resource_model_1 = require(\"../resource/resource.model\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@ng-bootstrap/ng-bootstrap\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/util/alert.service\"));\nconst i3 = tslib_1.__importStar(require(\"./function.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i9 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i10 = tslib_1.__importStar(require(\"./function-popup.service\"));\nfunction FunctionCreateDialogComponent_option_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const applicationOption_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", applicationOption_r2.appId === (ctx_r1.func.application == null ? null : ctx_r1.func.application.appId) ? ctx_r1.func.application : applicationOption_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n            \", applicationOption_r2.appName, \"\\n          \");\n  }\n}\nclass FunctionCreateDialogComponent {\n  constructor(activeModal, alertService, functionService, eventManager, router) {\n    this.activeModal = activeModal;\n    this.alertService = alertService;\n    this.functionService = functionService;\n    this.eventManager = eventManager;\n    this.router = router;\n    this.func = new resource_model_1.Resource();\n    this.applications = [];\n    this.groups = [];\n    this.subjects = [];\n  }\n  ngOnInit() {\n    this.isSaving = false;\n    this.functionService.findAllApplication().subscribe(res => {\n      this.applications = res.body;\n    }, res => this.onError(res.body));\n  }\n  clear() {\n    this.activeModal.dismiss('cancel');\n    this.backToPrevious();\n  }\n  save() {\n    this.isSaving = true;\n    this.subscribeToSaveResponse(this.functionService.create(this.func));\n  }\n  trackApplicationById(index, item) {\n    return item.id;\n  }\n  trackGroupById(index, item) {\n    return item.id;\n  }\n  trackSubjectById(index, item) {\n    return item.id;\n  }\n  backToPrevious() {\n    window.history.back();\n  }\n  subscribeToSaveResponse(result) {\n    result.subscribe(res => this.onSaveSuccess(res), res => this.onSaveError(res));\n  }\n  onSaveSuccess(result) {\n    this.isSaving = false;\n    this.eventManager.broadcast({\n      name: 'functionListModification',\n      content: 'OK'\n    });\n    this.activeModal.dismiss(result);\n    this.backToPrevious();\n  }\n  onSaveError(error) {\n    this.isSaving = false;\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\n    document.getElementById('appDialogErrorMsg').innerHTML = appDialogErrorMsg;\n    document.getElementById('appDialogErrorMsg').style.display = 'block';\n  }\n  onError(error) {\n    this.alertService.addAlert({\n      type: 'danger',\n      translationKey: error.message\n    });\n  }\n}\nexports.FunctionCreateDialogComponent = FunctionCreateDialogComponent;\nFunctionCreateDialogComponent.ɵfac = function FunctionCreateDialogComponent_Factory(t) {\n  return new (t || FunctionCreateDialogComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.FunctionService), i0.ɵɵdirectiveInject(i4.EventManager), i0.ɵɵdirectiveInject(i5.Router));\n};\nFunctionCreateDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionCreateDialogComponent,\n  selectors: [[\"ic-function-create-dialog\"]],\n  decls: 66,\n  vars: 10,\n  consts: [[\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editForm\", \"ngForm\"], [1, \"modal-header\"], [\"id\", \"myResourceLabel\", \"icTranslate\", \"acmAdmin.function.home.createLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [\"id\", \"appDialogErrorMsg\", 1, \"alert-dismissible\", \"alert-danger\", \"alert\", 2, \"display\", \"none\"], [1, \"modal-body\"], [1, \"row\"], [1, \"rounded-pill\", \"col-md-6\"], [\"icTranslate\", \"acmAdmin.function.application\", \"for\", \"field_application\", 1, \"form-control-label\"], [\"id\", \"field_application\", \"name\", \"application\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"icTranslate\", \"acmAdmin.function.resourceName\", \"for\", \"field_resourceName\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"resourceName\", \"id\", \"field_resourceName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [1, \"modal-footer\"], [\"id\", \"saveNewFunction\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [3, \"icon\"], [\"icTranslate\", \"entity.action.save\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"icTranslate\", \"entity.action.cancel\"]],\n  template: function FunctionCreateDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function FunctionCreateDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(2, \"\\n  \");\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"h4\", 3);\n      i0.ɵɵtext(6, \"Create a Function\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function FunctionCreateDialogComponent_Template_button_click_8_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(9, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\\n  \");\n      i0.ɵɵelement(12, \"p\", 5);\n      i0.ɵɵtext(13, \"\\n\\n  \");\n      i0.ɵɵelementStart(14, \"div\", 6);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵtext(17, \"\\n      \");\n      i0.ɵɵelementStart(18, \"div\", 8);\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"label\", 9);\n      i0.ɵɵtext(21, \"Application\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n        \");\n      i0.ɵɵelementStart(23, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function FunctionCreateDialogComponent_Template_select_ngModelChange_23_listener($event) {\n        return ctx.func.application = $event;\n      });\n      i0.ɵɵtext(24, \"\\n          \");\n      i0.ɵɵelement(25, \"option\", 11);\n      i0.ɵɵtext(26, \"\\n          \");\n      i0.ɵɵtemplate(27, FunctionCreateDialogComponent_option_27_Template, 2, 2, \"option\", 12);\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(30, \"\\n\\n      \");\n      i0.ɵɵelementStart(31, \"div\", 8);\n      i0.ɵɵtext(32, \"\\n        \");\n      i0.ɵɵelementStart(33, \"label\", 13);\n      i0.ɵɵtext(34, \"Function Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n        \");\n      i0.ɵɵelementStart(36, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function FunctionCreateDialogComponent_Template_input_ngModelChange_36_listener($event) {\n        return ctx.func.resourceName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n        \");\n      i0.ɵɵelementStart(38, \"div\", 15);\n      i0.ɵɵtext(39, \"\\n          \");\n      i0.ɵɵelementStart(40, \"small\", 16);\n      i0.ɵɵtext(41, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(44, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(45, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \"\\n  \");\n      i0.ɵɵelementStart(47, \"div\", 17);\n      i0.ɵɵtext(48, \"\\n    \");\n      i0.ɵɵelementStart(49, \"button\", 18);\n      i0.ɵɵtext(50, \"\\n      \");\n      i0.ɵɵelement(51, \"fa-icon\", 19);\n      i0.ɵɵtext(52, \"\\u00A0\");\n      i0.ɵɵelementStart(53, \"span\", 20);\n      i0.ɵɵtext(54, \"Save\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(55, \"\\u00A0\\n    \");\n      i0.ɵɵelementStart(56, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function FunctionCreateDialogComponent_Template_button_click_56_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(57, \"\\n      \");\n      i0.ɵɵelement(58, \"fa-icon\", 19);\n      i0.ɵɵtext(59, \"\\u00A0\");\n      i0.ɵɵelementStart(60, \"span\", 22);\n      i0.ɵɵtext(61, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(64, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngModel\", ctx.func.application);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.applications)(\"ngForTrackBy\", ctx.trackApplicationById);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.func.resourceName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourceName == null ? null : _r0.controls.resourceName.dirty) && (_r0.controls.resourceName == null ? null : _r0.controls.resourceName.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceName == null ? null : _r0.controls.resourceName.errors == null ? null : _r0.controls.resourceName.errors.required));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", _r0.form.invalid || ctx.isSaving);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"icon\", \"save\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"icon\", \"ban\");\n    }\n  },\n  dependencies: [i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm, i7.NgForOf, i8.FaIconComponent, i9.TranslateDirective],\n  encapsulation: 2\n});\nclass FunctionPopupComponent {\n  constructor(route, functionPopupService) {\n    this.route = route;\n    this.functionPopupService = functionPopupService;\n  }\n  ngOnInit() {\n    this.routeSub = this.route.params.subscribe(() => {\n      this.functionPopupService.open(FunctionCreateDialogComponent);\n    });\n  }\n  ngOnDestroy() {\n    this.routeSub.unsubscribe();\n  }\n}\nexports.FunctionPopupComponent = FunctionPopupComponent;\nFunctionPopupComponent.ɵfac = function FunctionPopupComponent_Factory(t) {\n  return new (t || FunctionPopupComponent)(i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i10.FunctionPopupService));\n};\nFunctionPopupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionPopupComponent,\n  selectors: [[\"ic-function-popup\"]],\n  decls: 0,\n  vars: 0,\n  template: function FunctionPopupComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","FunctionCreateDialogComponent","constructor","activeModal","alertService","functionService","eventManager","router","resource_model_1","ngOnInit","isSaving","findAllApplication","subscribe","res","applications","body","onError","clear","dismiss","backToPrevious","save","subscribeToSaveResponse","create","func","trackApplicationById","index","item","id","trackGroupById","trackSubjectById","window","history","back","result","onSaveSuccess","onSaveError","broadcast","name","content","error","appDialogErrorMsg","headers","get","document","getElementById","innerHTML","style","display","addAlert","type","translationKey","message","exports","selectors","decls","vars","consts","template","ctx","FunctionPopupComponent","route","functionPopupService","routeSub","params","open","ngOnDestroy","unsubscribe","encapsulation"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\function\\function-create-dialog.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\function\\function-create-dialog.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { AlertService } from 'app/core/util/alert.service';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { Resource } from '../resource/resource.model';\r\nimport { Application } from '../application';\r\nimport { Group } from '../group';\r\nimport { Subject } from '../user';\r\nimport { FunctionService } from './function.service';\r\nimport { FunctionPopupService } from './function-popup.service';\r\n\r\n@Component({\r\n  selector: 'ic-function-create-dialog',\r\n  templateUrl: './function-create-dialog.component.html',\r\n})\r\nexport class FunctionCreateDialogComponent implements OnInit {\r\n  func: Resource = new Resource();\r\n  isSaving?: boolean;\r\n  applications: Application[] = [];\r\n  groups: Group[] = [];\r\n  subjects: Subject[] = [];\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private alertService: AlertService,\r\n    private functionService: FunctionService,\r\n    private eventManager: EventManager,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isSaving = false;\r\n    this.functionService.findAllApplication().subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        this.applications = res.body;\r\n      },\r\n      (res: HttpResponse<any>) => this.onError(res.body)\r\n    );\r\n  }\r\n\r\n  clear(): void {\r\n    this.activeModal.dismiss('cancel');\r\n    this.backToPrevious();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    this.subscribeToSaveResponse(this.functionService.create(this.func));\r\n  }\r\n\r\n  trackApplicationById(index: number, item: Application): any {\r\n    return item.id;\r\n  }\r\n\r\n  trackGroupById(index: number, item: Group): any {\r\n    return item.id;\r\n  }\r\n\r\n  trackSubjectById(index: number, item: Subject): any {\r\n    return item.id;\r\n  }\r\n\r\n  backToPrevious(): void {\r\n    window.history.back();\r\n  }\r\n\r\n  private subscribeToSaveResponse(result: Observable<Resource>): void {\r\n    result.subscribe(\r\n      (res: Resource) => this.onSaveSuccess(res),\r\n      (res: HttpResponse<any>) => this.onSaveError(res)\r\n    );\r\n  }\r\n\r\n  private onSaveSuccess(result: Resource): void {\r\n    this.isSaving = false;\r\n    this.eventManager.broadcast({ name: 'functionListModification', content: 'OK' });\r\n    this.activeModal.dismiss(result);\r\n    this.backToPrevious();\r\n  }\r\n\r\n  private onSaveError(error: any): void {\r\n    this.isSaving = false;\r\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\r\n    document.getElementById('appDialogErrorMsg')!.innerHTML = appDialogErrorMsg;\r\n    document.getElementById('appDialogErrorMsg')!.style.display = 'block';\r\n  }\r\n\r\n  private onError(error: any): void {\r\n    this.alertService.addAlert({ type: 'danger', translationKey: error.message });\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'ic-function-popup',\r\n  template: '',\r\n})\r\nexport class FunctionPopupComponent implements OnInit, OnDestroy {\r\n  routeSub: any;\r\n\r\n  constructor(private route: ActivatedRoute, private functionPopupService: FunctionPopupService) {}\r\n\r\n  ngOnInit(): any {\r\n    this.routeSub = this.route.params.subscribe(() => {\r\n      this.functionPopupService.open(FunctionCreateDialogComponent as Component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): any {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n}\r\n","<form name=\"editForm\" role=\"form\"  (ngSubmit)=\"save()\" #editForm=\"ngForm\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"myResourceLabel\" icTranslate=\"acmAdmin.function.home.createLabel\">Create a Function</h4>\r\n    <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-hidden=\"true\" (click)=\"clear()\">&times;</button>\r\n  </div>\r\n\r\n  <p style=\"display: none\" id=\"appDialogErrorMsg\" class=\"alert-dismissible alert-danger alert\"></p>\r\n\r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.function.application\" for=\"field_application\">Application</label>\r\n        <select class=\"form-control\" id=\"field_application\" name=\"application\" [(ngModel)]=\"func.application\">\r\n          <option [ngValue]=\"null\"></option>\r\n          <option\r\n            [ngValue]=\"applicationOption.appId === func.application?.appId ? func.application : applicationOption\"\r\n            *ngFor=\"let applicationOption of applications; trackBy: trackApplicationById\"\r\n          >\r\n            {{ applicationOption.appName }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.function.resourceName\" for=\"field_resourceName\">Function Name</label>\r\n        <input type=\"text\" class=\"form-control\" name=\"resourceName\" id=\"field_resourceName\" [(ngModel)]=\"func.resourceName\" required />\r\n        <div [hidden]=\"!(editForm.controls.resourceName?.dirty && editForm.controls.resourceName?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourceName?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button id=\"saveNewFunction\" type=\"submit\" [disabled]=\"editForm.form.invalid || isSaving\" class=\"btn btn-primary btn-sm\">\r\n      <fa-icon [icon]=\"'save'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.save\">Save</span></button\r\n    >&nbsp;\r\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-bs-dismiss=\"modal\" (click)=\"clear()\">\r\n      <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
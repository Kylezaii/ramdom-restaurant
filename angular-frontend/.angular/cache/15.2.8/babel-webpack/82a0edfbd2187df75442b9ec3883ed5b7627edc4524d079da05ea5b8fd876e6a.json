{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NewSeComponent = void 0;\nconst tslib_1 = require(\"tslib\");\n// no-conflicting-life-cycle-hook\nconst http_1 = require(\"@angular/common/http\");\nconst forms_1 = require(\"@angular/forms\");\nconst date_validator_directive_1 = require(\"app/shared/validator/date-validator.directive\");\nconst nric_directive_1 = require(\"app/shared/validator/nric.directive\");\nconst moment_1 = tslib_1.__importDefault(require(\"moment\"));\nconst claim_json_1 = tslib_1.__importDefault(require(\"../../../../i18n/en/claim.json\"));\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i2 = tslib_1.__importStar(require(\"app/workload/service/workload-inbox.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/claim/se-claim/service/se-claim.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/claim/service/claim.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i8 = tslib_1.__importStar(require(\"app/administration/black-out-date/public-holiday/service/public-holiday.service\"));\nconst i9 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/radiobutton\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/calendar\"));\nconst i16 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nfunction NewSeComponent_p_messages_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r18.claimJson.nspay2App.claim.warning[\"CLM-W003\"]);\n  }\n}\nfunction NewSeComponent_p_messages_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 30);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewSeComponent_p_messages_2_ng_template_2_Template, 4, 1, \"ng-template\", 31);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewSeComponent_p_messages_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r19.claimJson.nspay2App.claim.warning[\"CLM-W004\"]);\n  }\n}\nfunction NewSeComponent_p_messages_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 30);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewSeComponent_p_messages_4_ng_template_2_Template, 4, 1, \"ng-template\", 33);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewSeComponent_p_messages_7_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r20.createSEForm == null ? null : ctx_r20.createSEForm.getError(\"overlapping\"));\n  }\n}\nfunction NewSeComponent_p_messages_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 34);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, NewSeComponent_p_messages_7_ng_template_2_Template, 4, 1, \"ng-template\", 35);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    field: \"NRIC\"\n  };\n};\nfunction NewSeComponent_small_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 36);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction NewSeComponent_small_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 37);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction NewSeComponent_small_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 38);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction NewSeComponent_small_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 39);\n  }\n}\nconst _c1 = function () {\n  return {\n    field: \"Start Date\"\n  };\n};\nfunction NewSeComponent_small_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 36);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    dateYear: a0\n  };\n};\nfunction NewSeComponent_small_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 40);\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction1(1, _c2, ctx_r8.createSEForm == null ? null : ctx_r8.createSEForm.get(\"trgStartDte\").value.getFullYear()));\n  }\n}\nfunction NewSeComponent_label_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r9.getDay(ctx_r9.createSEForm.get(\"trgStartDte\").value), \") \");\n  }\n}\nconst _c3 = function () {\n  return {\n    field: \"End Date\"\n  };\n};\nfunction NewSeComponent_small_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 36);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c3));\n  }\n}\nfunction NewSeComponent_small_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 40);\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction1(1, _c2, ctx_r11.createSEForm == null ? null : ctx_r11.createSEForm.get(\"trgEndDte\").value.getFullYear()));\n  }\n}\nfunction NewSeComponent_label_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r12.getDay(ctx_r12.createSEForm.get(\"trgEndDte\").value), \") \");\n  }\n}\nconst _c4 = function () {\n  return {\n    endField: \"End Date\",\n    startField: \"Start Date\"\n  };\n};\nfunction NewSeComponent_div_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelement(2, \"div\", 41);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"div\", 42);\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelement(6, \"small\", 43);\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c4));\n  }\n}\nfunction NewSeComponent_div_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelement(2, \"div\", 41);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"div\", 42);\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelement(6, \"small\", 44);\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c5 = function () {\n  return {\n    \"display\": \"inline\",\n    \"margin-right\": \"2em\"\n  };\n};\nfunction NewSeComponent_div_93_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵtext(1, \"                        \\n                            \");\n    i0.ɵɵelementStart(2, \"p-radioButton\", 46);\n    i0.ɵɵlistener(\"onClick\", function NewSeComponent_div_93_Template_p_radioButton_onClick_2_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.onBlurCoy());\n    });\n    i0.ɵɵtext(3, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r21 = ctx.$implicit;\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c5));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", category_r21.key);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n                            \", category_r21.name, \"\\n                    \");\n  }\n}\nconst _c6 = function () {\n  return {\n    field: \"Claim Option\"\n  };\n};\nfunction NewSeComponent_small_96_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 36);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c6));\n  }\n}\nconst _c7 = function () {\n  return {\n    field: \"Company\"\n  };\n};\nfunction NewSeComponent_div_99_small_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"small\", 36);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c7));\n  }\n}\nconst _c8 = function () {\n  return {\n    \"width\": \"90%\"\n  };\n};\nfunction NewSeComponent_div_99_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"label\", 47);\n    i0.ɵɵtext(3, \"Company:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelementStart(5, \"div\", 48);\n    i0.ɵɵtext(6, \"\\n                    \");\n    i0.ɵɵelementStart(7, \"input\", 49);\n    i0.ɵɵlistener(\"blur\", function NewSeComponent_div_99_Template_input_blur_7_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.setUpperCase(\"company\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n    i0.ɵɵtemplate(9, NewSeComponent_div_99_small_9_Template, 1, 2, \"small\", 9);\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(3, _c8));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r17.createSEForm == null ? null : (tmp_1_0 = ctx_r17.createSEForm.get(\"company\")) == null ? null : tmp_1_0.hasError(\"required\")) && (ctx_r17.createSEForm == null ? null : (tmp_1_0 = ctx_r17.createSEForm.get(\"company\")) == null ? null : tmp_1_0.touched));\n  }\n}\nconst _c9 = function () {\n  return {\n    \"margin-top\": \"2rem\",\n    \"margin-left\": \"1.5rem\"\n  };\n};\nconst _c10 = function () {\n  return {\n    \"width\": \"100%\"\n  };\n};\nconst _c11 = function () {\n  return {\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nconst _c12 = function () {\n  return {\n    \"max-width\": \"14em\"\n  };\n};\nconst _c13 = function () {\n  return {\n    \"margin-left\": \"0em\",\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nconst _c14 = function () {\n  return {\n    \"margin-right\": \"2em\",\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nconst _c15 = function () {\n  return {\n    \"margin-left\": \"1em\",\n    \"align-items\": \"center\",\n    \"display\": \"flex\"\n  };\n};\nclass NewSeComponent {\n  constructor(formBuilder, workloadService, dateUtilsService, seClaimService, claimService, toastService, router, publicHolidayService) {\n    this.formBuilder = formBuilder;\n    this.workloadService = workloadService;\n    this.dateUtilsService = dateUtilsService;\n    this.seClaimService = seClaimService;\n    this.claimService = claimService;\n    this.toastService = toastService;\n    this.router = router;\n    this.publicHolidayService = publicHolidayService;\n    this.radioCategories = [{\n      name: 'Income Tax',\n      key: '2'\n    }, {\n      name: 'Average Income',\n      key: '1'\n    }, {\n      name: 'Replacement',\n      key: '3'\n    }];\n    this.overlappingClaims = [];\n    this.outsideCurYr = false;\n    this.dateFormat = \"DD-MM-YYYY\";\n    this.nsmanDB = [{\n      nric: 'S9220485E',\n      nsmanInd: 'Y'\n    }, {\n      nric: 'S9521155J',\n      nsmanInd: 'Y'\n    }, {\n      nric: 'S9170838H',\n      nsmanInd: 'N'\n    }];\n    console.log(\"test\");\n    this.claimJson = claim_json_1.default;\n  }\n  ngOnInit() {\n    this.constructForm();\n  }\n  constructForm() {\n    this.createSEForm = this.formBuilder.group({\n      nricInputValue: ['', [forms_1.Validators.required, (0, nric_directive_1.NRICValidator)()]],\n      nsmanName: new forms_1.FormControl('', null),\n      trgStartDte: new forms_1.FormControl(null, forms_1.Validators.required),\n      trgEndDte: new forms_1.FormControl(null, forms_1.Validators.required),\n      claimOption: new forms_1.FormControl(this.radioCategories[0].key, forms_1.Validators.required),\n      company: [null]\n    }, {\n      validators: [date_validator_directive_1.DateValidator.dateLessThan('trgStartDte', 'trgEndDte'), date_validator_directive_1.DateValidator.dateRangeMoreThan('trgStartDte', 'trgEndDte', 60)]\n    });\n    this.valueChangeSubscribe();\n  }\n  valueChangeSubscribe() {\n    this.createSEForm.valueChanges.subscribe(change => {\n      if (this.createSEForm.get('nricInputValue').value && this.createSEForm.get('nricInputValue').valid && this.createSEForm.get('claimOption').value && this.createSEForm.get('trgStartDte').value && this.createSEForm.get('trgEndDte').value) {\n        //call overlapping\n        let params = new http_1.HttpParams();\n        params = params.append('claimOption', this.createSEForm.get('claimOption').value);\n        params = params.append('nric', this.createSEForm.get('nricInputValue').value);\n        params = params.append('claimStartDate', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat));\n        params = params.append('claimEndDate', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgEndDte').value, this.dateFormat));\n        if (this.createSEForm.get('claimOption').value !== '2') {\n          params = params.append('coyName', this.createSEForm.get('company').value);\n        }\n        this.seClaimService.retrieveOverlappingSEClaim({\n          params\n        }).subscribe(resp => {\n          if (resp.ok) {\n            let errMsg = \"\";\n            this.overlappingClaims = resp.body.data;\n            if (resp.body.data.length > 0) {\n              resp.body.data.forEach(x => {\n                errMsg = errMsg.concat(x.caseId).concat(\"(\").concat(\"Draft by \").concat(x.draftByInit).concat(\")\").concat(\",\");\n              });\n              errMsg = errMsg.concat(\"proceed to upload supporting document CLM-E002\");\n              let templateErrMsg = claim_json_1.default.nspay2App.claim.error['CLM-E002'];\n              templateErrMsg = templateErrMsg.replace(\"{{overlappingCaseIdList}}\", errMsg);\n              if (!this.createSEForm.hasError('overlapping')) {\n                this.createSEForm.setErrors({\n                  ...(this.createSEForm.errors || {}),\n                  'overlapping': templateErrMsg\n                });\n              }\n            } else {\n              if (this.createSEForm?.errors && this.createSEForm?.errors['overlapping']) {\n                delete this.createSEForm.errors['overlapping'];\n              }\n            }\n          }\n        }, error => {\n          console.log(\"error is\" + String(error?.error?.error_desc));\n          this.toastService.error(String(error?.error?.error_desc));\n        });\n      }\n      this.onBlurTrgStartEndDt();\n    });\n    this.createSEForm.get('claimOption').valueChanges.subscribe(change => {\n      console.log(\"claim is\", change);\n      if (change !== '2') {\n        this.createSEForm.get('company')?.setValidators([forms_1.Validators.required]);\n      } else {\n        this.createSEForm.controls['company'].clearValidators();\n        this.createSEForm.get('company').reset();\n      }\n      this.createSEForm.get('company')?.updateValueAndValidity();\n    });\n    this.createSEForm.get('trgEndDte').valueChanges.subscribe(() => {\n      const year = this.createSEForm.get('trgEndDte').value?.getFullYear();\n      this.validateHasHoliday(year, this.createSEForm.get('trgEndDte'));\n    });\n    this.createSEForm.get('trgStartDte').valueChanges.subscribe(() => {\n      const year = this.createSEForm.get('trgStartDte').value?.getFullYear();\n      this.validateHasHoliday(year, this.createSEForm.get('trgStartDte'));\n    });\n    // this.createSEForm.get('nricInputValue').valueChanges.subscribe(() => {\n    //   this.checkImis();\n    // })\n  }\n\n  onBlurTrgStartEndDt() {\n    this.outsideCurYr = this.fallOutsideCurrentYr(this.createSEForm?.get('trgStartDte')?.value) || this.fallOutsideCurrentYr(this.createSEForm?.get('trgEndDte')?.value);\n  }\n  fallOutsideCurrentYr(date) {\n    const curYr = new Date().getFullYear();\n    const inputDate = new Date(date);\n    if (inputDate.getFullYear() < curYr || inputDate.getFullYear() > curYr) {\n      return true;\n    } else return false;\n  }\n  isLongPeriod() {\n    if (this.createSEForm.get('trgStartDte').value && this.createSEForm.get('trgEndDte').value) {\n      const diffDays = this.dateUtilsService.getDaysBetween(this.createSEForm.get('trgStartDte').value, this.createSEForm.get('trgEndDte').value);\n      return diffDays > 30 && diffDays < 60;\n    } else return false;\n  }\n  isLateClaim() {\n    if (this.createSEForm.get('trgStartDte').value) {\n      const claimStart = this.createSEForm.get('trgStartDte')?.value;\n      const dateNow = new Date();\n      const threshold = new Date(dateNow.getFullYear() - 1, dateNow.getMonth(), dateNow.getDay());\n      return claimStart < threshold;\n    } else return false;\n  }\n  validateHasHoliday(year, ctrl) {\n    if (year) {\n      let params = new http_1.HttpParams();\n      params = params.append('year', year);\n      this.publicHolidayService.getHolidayByYear({\n        params\n      }).subscribe(resp => {\n        console.log(\"holiday is\", resp);\n        if (!resp.ok || resp.body.length <= 0) {\n          ctrl.setErrors({\n            ...(this.createSEForm.errors || {}),\n            'noHoliday': true\n          });\n        }\n      }, error => {\n        console.log(\"error is\" + String(error?.error?.error_desc));\n        this.toastService.error(String(error?.error?.error_desc));\n      });\n    }\n  }\n  //Temporary\n  //retrieves all IMIS nsman nric and nsman/nsx ind on load\n  retrieveNricFromImis() {\n    console.log(\"retrieving nric from imis\");\n    // if()\n    // let params = new HttpParams();\n    // params = params.append('nric',this.createSEForm.get('nricInputValue').value);\n    // this.claimService.retrieveNsmanImis({params}).subscribe(resp => {\n    //   if (resp.body.data) {\n    //     this.nsmanDB = resp.body.data;\n    //   }else {\n    //   }\n    //   },\n    //   (error: any) => {\n    //     console.log(\"error is\" + String(error?.error?.error_desc));\n    //     this.toastService.error(String(error?.error?.error_desc));\n    //   }\n    // );\n  }\n\n  checkImis() {\n    //check imis only when nric keyed is valid format\n    if (!this.createSEForm.get('nricInputValue').hasError('nric')) {\n      // const nsmanNric = this.nsmanDB.map(x => { return String(x.nric) });\n      console.log(\"nsman list\", this.nsmanDB);\n      const nsmanObj = this.nsmanDB.find(x => x.nric === this.createSEForm.get('nricInputValue').value);\n      console.log(\"chika\", nsmanObj);\n      if (nsmanObj?.nsmanInd !== 'Y') {\n        this.createSEForm.get('nricInputValue').setErrors({\n          ...(this.createSEForm.errors || {}),\n          'nricNotNsman': true\n        });\n      } else {\n        if (this.createSEForm.get('nricInputValue').hasError('nricNotNsman')) {\n          delete this.createSEForm.get('nricInputValue').errors['nricNotNsman'];\n        }\n      }\n    }\n  }\n  setSameDay() {\n    const trgStartDte = this.createSEForm.get('trgStartDte').value;\n    if (trgStartDte) {\n      this.createSEForm.get('trgEndDte').setValue(trgStartDte);\n    }\n  }\n  setUpperCase(ctrlName) {\n    this.createSEForm?.get(ctrlName)?.setValue(this.createSEForm?.get(ctrlName).value?.toUpperCase());\n  }\n  getDay(date) {\n    return (0, moment_1.default)(date).format('ddd');\n  }\n  retrieveLatestSEClaimCoy() {\n    let params = new http_1.HttpParams();\n    params = params.append('nric', this.createSEForm.get('nricInputValue').value);\n    params = params.append('trgStartDte', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat));\n    this.seClaimService.retrieveLatestSEClaimCoy({\n      params\n    }).subscribe(resp => {\n      if (resp.body.data) {\n        console.log('latest coy name was ', resp.body.data);\n        this.createSEForm.get('company').setValue(resp.body.data);\n      }\n    }, error => {\n      console.log(\"error is\" + String(error?.error?.error_desc));\n      this.toastService.error(String(error?.error?.error_desc));\n    });\n  }\n  onBlurCoy() {\n    console.log(\"evaluating company\");\n    if (this.createSEForm.get('trgStartDte').value && this.createSEForm.get('nricInputValue').value && this.createSEForm.get('claimOption').value !== 2) {\n      this.retrieveLatestSEClaimCoy();\n    }\n  }\n  onBlurNric() {\n    console.log(\"evaluating nsman name\");\n    if (this.createSEForm.get('nricInputValue').value && !this.createSEForm.get('nricInputValue').hasError('nric')) {\n      let params = new http_1.HttpParams();\n      params = params.append('nric', this.createSEForm.get('nricInputValue').value);\n      //temporary retrieve from nsmaninfo table, otherwise is EHR\n      this.claimService.retrieveEHRNsmanName({\n        params\n      }).subscribe(resp => {\n        if (resp.status === 200) {\n          if (resp.body.data) {\n            this.createSEForm.get('nsmanName').setValue(resp.body.data);\n            this.checkImis();\n            if (this.createSEForm.get('nricInputValue').hasError('nricNotFound')) {\n              delete this.createSEForm.get('nricInputValue').errors['nricNotFound'];\n            }\n          } else {\n            this.createSEForm.get('nricInputValue').setErrors({\n              ...(this.createSEForm.errors || {}),\n              'nricNotFound': true\n            });\n            this.createSEForm.get('nsmanName').reset();\n          }\n        }\n      }, error => {\n        console.log(\"error is\" + String(error?.error?.error_desc));\n        this.toastService.error(String(error?.error?.error_desc));\n      });\n    } else this.createSEForm.get('nsmanName').reset();\n  }\n  createClaim() {\n    const newClaimDto = {\n      nric: this.createSEForm.get('nricInputValue').value,\n      trgStartDte: this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat),\n      claimOption: this.createSEForm.get('claimOption').value,\n      trgEndDte: this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgEndDte').value, this.dateFormat),\n      company: this.createSEForm.get('company').value\n    };\n    this.router.navigate(['/claim/se-claim/edit-hardcopy-se', {\n      newClaimDto: JSON.stringify(newClaimDto)\n    }]);\n  }\n  clearForm() {\n    this.constructForm();\n  }\n}\nexports.NewSeComponent = NewSeComponent;\nNewSeComponent.ɵfac = function NewSeComponent_Factory(t) {\n  return new (t || NewSeComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.WorkloadInboxService), i0.ɵɵdirectiveInject(i3.DateUtilsService), i0.ɵɵdirectiveInject(i4.SEClaimService), i0.ɵɵdirectiveInject(i5.ClaimService), i0.ɵɵdirectiveInject(i6.CustomToastService), i0.ɵɵdirectiveInject(i7.Router), i0.ɵɵdirectiveInject(i8.PublicHolidayService));\n};\nNewSeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewSeComponent,\n  selectors: [[\"n2-new-se\"]],\n  decls: 111,\n  vars: 53,\n  consts: [[\"severity\", \"warn\", 4, \"ngIf\"], [\"key\", \"CLM-E002\", \"severity\", \"error\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"grid\"], [1, \"row\", \"col-8\"], [1, \"field\", \"grid\"], [\"for\", \"nricInputValue\", 1, \"col-2\", \"col-form-label\"], [1, \"col-2\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"nricInputValue\", \"id\", \"nricInputValue\", 3, \"blur\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V003\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V008\", 4, \"ngIf\"], [1, \"text-secondary\"], [1, \"field\", \"grid\", 3, \"ngClass\"], [\"for\", \"trgStartDte\", 1, \"col-2\", \"col-form-label\"], [1, \"col-2\", \"input-group\"], [\"id\", \"trgStartDte\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"trgStartDte\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\", \"inputStyleClass\", \"onBlur\", \"onSelect\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V007\", 3, \"translateValues\", 4, \"ngIf\"], [1, \"col-1\"], [4, \"ngIf\"], [\"id\", \"trgEndDte\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"trgEndDte\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\", \"inputStyleClass\"], [\"pButton\", \"\", \"label\", \"Same Day\", 3, \"click\"], [\"class\", \"field grid\", 4, \"ngIf\"], [\"for\", \"claimOption\", 1, \"col-2\", \"col-form-label\"], [1, \"col-8\", \"input-group\"], [\"class\", \"p-field-checkbox\", 3, \"style\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-right\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Clear All\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Create Claim\", 1, \"p-button-success\", 3, \"disabled\", \"click\"], [\"severity\", \"warn\"], [\"key\", \"CLM-W003\", \"pTemplate\", \"\"], [1, \"ml-2\"], [\"key\", \"CLM-W004\", \"pTemplate\", \"\"], [\"key\", \"CLM-E002\", \"severity\", \"error\"], [\"pTemplate\", \"\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V003\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V008\", 1, \"p-error\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V007\", 1, \"p-error\", 3, \"translateValues\"], [1, \"col-2\", \"col-form-label\"], [1, \"col\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V004\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V013\", 1, \"p-error\"], [1, \"p-field-checkbox\"], [\"formControlName\", \"claimOption\", \"id\", \"claimOption\", 1, \"ui-g-12\", \"ui-md-4\", 3, \"value\", \"onClick\"], [\"for\", \"company\", 1, \"col-2\", \"col-form-label\"], [1, \"col-7\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"company\", \"id\", \"company\", 3, \"blur\"]],\n  template: function NewSeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \"\\n\\n\\n\\n \");\n      i0.ɵɵtext(1, \"\\n \");\n      i0.ɵɵtemplate(2, NewSeComponent_p_messages_2_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(3, \"\\n\");\n      i0.ɵɵtemplate(4, NewSeComponent_p_messages_4_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(5, \"\\n\\n \");\n      i0.ɵɵtext(6, \"\\n\");\n      i0.ɵɵtemplate(7, NewSeComponent_p_messages_7_Template, 4, 0, \"p-messages\", 1);\n      i0.ɵɵtext(8, \"\\n\\n\");\n      i0.ɵɵelementStart(9, \"form\", 2);\n      i0.ɵɵtext(10, \"\\n    \");\n      i0.ɵɵelementStart(11, \"div\", 3);\n      i0.ɵɵtext(12, \"\\n        \");\n      i0.ɵɵelementStart(13, \"div\", 4);\n      i0.ɵɵtext(14, \"\\n            \");\n      i0.ɵɵelementStart(15, \"div\", 5);\n      i0.ɵɵtext(16, \"\\n                \");\n      i0.ɵɵelementStart(17, \"label\", 6);\n      i0.ɵɵtext(18, \"NRIC:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n                \");\n      i0.ɵɵelementStart(20, \"div\", 7);\n      i0.ɵɵtext(21, \"\\n                    \");\n      i0.ɵɵelementStart(22, \"input\", 8);\n      i0.ɵɵlistener(\"blur\", function NewSeComponent_Template_input_blur_22_listener() {\n        ctx.onBlurCoy();\n        return ctx.onBlurNric();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n                    \");\n      i0.ɵɵtemplate(24, NewSeComponent_small_24_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(25, \"\\n                    \");\n      i0.ɵɵtemplate(26, NewSeComponent_small_26_Template, 1, 2, \"small\", 10);\n      i0.ɵɵtext(27, \"\\n                    \");\n      i0.ɵɵtemplate(28, NewSeComponent_small_28_Template, 1, 2, \"small\", 11);\n      i0.ɵɵtext(29, \"\\n                    \");\n      i0.ɵɵtemplate(30, NewSeComponent_small_30_Template, 1, 0, \"small\", 12);\n      i0.ɵɵtext(31, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(32, \"\\n                \");\n      i0.ɵɵelementStart(33, \"div\", 7);\n      i0.ɵɵtext(34, \"\\n                    \");\n      i0.ɵɵelementStart(35, \"label\", 13);\n      i0.ɵɵtext(36);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \"\\n            \");\n      i0.ɵɵelementStart(40, \"div\", 14);\n      i0.ɵɵtext(41, \"\\n                \");\n      i0.ɵɵelementStart(42, \"label\", 15);\n      i0.ɵɵtext(43, \"Trg:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(44, \"\\n                \");\n      i0.ɵɵelementStart(45, \"div\", 16);\n      i0.ɵɵtext(46, \"\\n                    \");\n      i0.ɵɵelementStart(47, \"p-calendar\", 17);\n      i0.ɵɵlistener(\"onBlur\", function NewSeComponent_Template_p_calendar_onBlur_47_listener() {\n        return ctx.onBlurCoy();\n      })(\"onSelect\", function NewSeComponent_Template_p_calendar_onSelect_47_listener() {\n        return ctx.onBlurCoy();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(48, \"\\n                    \");\n      i0.ɵɵtemplate(49, NewSeComponent_small_49_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(50, \"\\n                    \");\n      i0.ɵɵtemplate(51, NewSeComponent_small_51_Template, 1, 3, \"small\", 18);\n      i0.ɵɵtext(52, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n                \");\n      i0.ɵɵelementStart(54, \"div\", 19);\n      i0.ɵɵtext(55, \"\\n                    \");\n      i0.ɵɵtemplate(56, NewSeComponent_label_56_Template, 2, 1, \"label\", 20);\n      i0.ɵɵtext(57, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(58, \"\\n\\n                \");\n      i0.ɵɵelementStart(59, \"div\", 19);\n      i0.ɵɵtext(60, \"to\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n                \");\n      i0.ɵɵelementStart(62, \"div\", 16);\n      i0.ɵɵtext(63, \"\\n                    \");\n      i0.ɵɵelement(64, \"p-calendar\", 21);\n      i0.ɵɵtext(65, \"\\n                    \");\n      i0.ɵɵtemplate(66, NewSeComponent_small_66_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(67, \"\\n                    \");\n      i0.ɵɵtemplate(68, NewSeComponent_small_68_Template, 1, 3, \"small\", 18);\n      i0.ɵɵtext(69, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n                \");\n      i0.ɵɵelementStart(71, \"div\", 19);\n      i0.ɵɵtext(72, \"\\n                    \");\n      i0.ɵɵtemplate(73, NewSeComponent_label_73_Template, 2, 1, \"label\", 20);\n      i0.ɵɵtext(74, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(75, \"\\n            \\n\\n                \");\n      i0.ɵɵelementStart(76, \"div\", 7);\n      i0.ɵɵtext(77, \"\\n                    \");\n      i0.ɵɵelementStart(78, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function NewSeComponent_Template_button_click_78_listener() {\n        return ctx.setSameDay();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(79, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(80, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(81, \"\\n            \");\n      i0.ɵɵtemplate(82, NewSeComponent_div_82_Template, 9, 2, \"div\", 23);\n      i0.ɵɵtext(83, \"\\n            \");\n      i0.ɵɵtemplate(84, NewSeComponent_div_84_Template, 9, 0, \"div\", 23);\n      i0.ɵɵtext(85, \"\\n            \");\n      i0.ɵɵelementStart(86, \"div\", 5);\n      i0.ɵɵtext(87, \"\\n                \");\n      i0.ɵɵelementStart(88, \"label\", 24);\n      i0.ɵɵtext(89, \"Claim Option:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(90, \"\\n                \");\n      i0.ɵɵelementStart(91, \"div\", 25);\n      i0.ɵɵtext(92, \"\\n                    \");\n      i0.ɵɵtemplate(93, NewSeComponent_div_93_Template, 5, 5, \"div\", 26);\n      i0.ɵɵtext(94, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(95, \"\\n                \");\n      i0.ɵɵtemplate(96, NewSeComponent_small_96_Template, 1, 2, \"small\", 9);\n      i0.ɵɵtext(97, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(98, \"\\n            \");\n      i0.ɵɵtemplate(99, NewSeComponent_div_99_Template, 12, 4, \"div\", 23);\n      i0.ɵɵtext(100, \"\\n\\n\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(101, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(103, \"\\n\\n\");\n      i0.ɵɵelementStart(104, \"div\", 27);\n      i0.ɵɵtext(105, \"\\n    \");\n      i0.ɵɵelementStart(106, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function NewSeComponent_Template_button_click_106_listener() {\n        return ctx.clearForm();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(107, \"\\n    \");\n      i0.ɵɵelementStart(108, \"button\", 29);\n      i0.ɵɵlistener(\"click\", function NewSeComponent_Template_button_click_108_listener() {\n        return ctx.createClaim();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(109, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(110, \"\\n\\n\\n\\n\");\n    }\n    if (rf & 2) {\n      let tmp_6_0;\n      let tmp_7_0;\n      let tmp_8_0;\n      let tmp_9_0;\n      let tmp_16_0;\n      let tmp_17_0;\n      let tmp_24_0;\n      let tmp_25_0;\n      let tmp_29_0;\n      let tmp_30_0;\n      let tmp_32_0;\n      let tmp_33_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLongPeriod());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLateClaim());\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.overlappingClaims.length > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(44, _c9));\n      i0.ɵɵproperty(\"formGroup\", ctx.createSEForm);\n      i0.ɵɵadvance(13);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(45, _c10));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_6_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_6_0.hasError(\"required\")) && (ctx.createSEForm == null ? null : (tmp_6_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_6_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_7_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_7_0.hasError(\"nric\")) && (ctx.createSEForm == null ? null : (tmp_7_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_7_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.createSEForm == null ? null : (tmp_8_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_8_0.hasError(\"nric\")) && (ctx.createSEForm == null ? null : (tmp_8_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_8_0.hasError(\"nricNotFound\")) && (ctx.createSEForm == null ? null : (tmp_8_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_8_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.createSEForm == null ? null : (tmp_9_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_9_0.hasError(\"nric\")) && (ctx.createSEForm == null ? null : (tmp_9_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_9_0.hasError(\"nricNotNsman\")) && (ctx.createSEForm == null ? null : (tmp_9_0 = ctx.createSEForm.get(\"nricInputValue\")) == null ? null : tmp_9_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(46, _c11));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.createSEForm.get(\"nsmanName\").value, \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", ctx.outsideCurYr ? \"warning-date\" : null);\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(47, _c12));\n      i0.ɵɵproperty(\"showIcon\", false)(\"inputStyleClass\", ctx.outsideCurYr ? \"warning-date\" : null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_16_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_16_0.hasError(\"required\")) && (ctx.createSEForm == null ? null : (tmp_16_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_16_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_17_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_17_0.hasError(\"noHoliday\")) && (ctx.createSEForm == null ? null : (tmp_17_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_17_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(48, _c13));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.createSEForm.get(\"trgStartDte\").value);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(49, _c14));\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(50, _c12));\n      i0.ɵɵproperty(\"showIcon\", false)(\"inputStyleClass\", ctx.outsideCurYr ? \"warning-date\" : null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_24_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_24_0.hasError(\"required\")) && (ctx.createSEForm == null ? null : (tmp_24_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_24_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_25_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_25_0.hasError(\"noHoliday\")) && (ctx.createSEForm == null ? null : (tmp_25_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_25_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(51, _c13));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.createSEForm.get(\"trgEndDte\").value);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(52, _c15));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : ctx.createSEForm.errors == null ? null : ctx.createSEForm.errors[\"invalidDateLessThan\"]) && ((ctx.createSEForm == null ? null : (tmp_29_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_29_0.touched) || (ctx.createSEForm == null ? null : (tmp_29_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_29_0.touched)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : ctx.createSEForm.errors == null ? null : ctx.createSEForm.errors[\"invalidDateRangeMoreThan\"]) && ((ctx.createSEForm == null ? null : (tmp_30_0 = ctx.createSEForm.get(\"trgStartDte\")) == null ? null : tmp_30_0.touched) || (ctx.createSEForm == null ? null : (tmp_30_0 = ctx.createSEForm.get(\"trgEndDte\")) == null ? null : tmp_30_0.touched)));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.radioCategories);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_32_0 = ctx.createSEForm.get(\"claimOption\")) == null ? null : tmp_32_0.hasError(\"required\")) && (ctx.createSEForm == null ? null : (tmp_32_0 = ctx.createSEForm.get(\"claimOption\")) == null ? null : tmp_32_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", (ctx.createSEForm == null ? null : (tmp_33_0 = ctx.createSEForm.get(\"claimOption\")) == null ? null : tmp_33_0.value) !== \"2\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", ctx.createSEForm == null ? null : ctx.createSEForm.invalid);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i9.NgClass, i9.NgForOf, i9.NgIf, i1.FormGroupDirective, i1.FormControlName, i10.PrimeTemplate, i11.ButtonDirective, i12.InputText, i13.Messages, i14.RadioButton, i15.Calendar, i16.TranslateDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXctc2UuY29tcG9uZW50LnNjc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvd29ya2xvYWQvcGF5cm9sbC12ZXJpZmllci9uZXctc2UvbmV3LXNlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxvS0FBb0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","NewSeComponent","constructor","formBuilder","workloadService","dateUtilsService","seClaimService","claimService","toastService","router","publicHolidayService","name","key","nric","nsmanInd","console","log","claimJson","claim_json_1","ngOnInit","constructForm","createSEForm","group","nricInputValue","forms_1","required","nsmanName","trgStartDte","trgEndDte","claimOption","radioCategories","company","validators","date_validator_directive_1","dateLessThan","dateRangeMoreThan","valueChangeSubscribe","valueChanges","subscribe","change","get","value","valid","params","http_1","append","convertDateToStr","dateFormat","retrieveOverlappingSEClaim","resp","ok","errMsg","overlappingClaims","body","data","length","forEach","x","concat","caseId","draftByInit","templateErrMsg","nspay2App","claim","error","replace","hasError","setErrors","errors","String","error_desc","onBlurTrgStartEndDt","setValidators","controls","clearValidators","reset","updateValueAndValidity","year","getFullYear","validateHasHoliday","outsideCurYr","fallOutsideCurrentYr","date","curYr","Date","inputDate","isLongPeriod","diffDays","getDaysBetween","isLateClaim","claimStart","dateNow","threshold","getMonth","getDay","ctrl","getHolidayByYear","retrieveNricFromImis","checkImis","nsmanDB","nsmanObj","find","setSameDay","setValue","setUpperCase","ctrlName","toUpperCase","format","retrieveLatestSEClaimCoy","onBlurCoy","onBlurNric","retrieveEHRNsmanName","status","createClaim","newClaimDto","navigate","JSON","stringify","clearForm","exports","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-verifier\\new-se\\new-se.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\workload\\payroll-verifier\\new-se\\new-se.component.html"],"sourcesContent":["// no-conflicting-life-cycle-hook\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { PublicHolidayService } from 'app/administration/black-out-date/public-holiday/service/public-holiday.service';\r\nimport { SEClaimService } from 'app/claim/se-claim/service/se-claim.service';\r\nimport { ClaimService } from 'app/claim/service/claim.service';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { CommonValidator } from 'app/shared/validator/common-validator.directive';\r\nimport { DateValidator } from 'app/shared/validator/date-validator.directive';\r\nimport { NRICValidator } from 'app/shared/validator/nric.directive';\r\nimport { WorkloadInboxService } from 'app/workload/service/workload-inbox.service';\r\nimport moment from 'moment';\r\nimport { Message } from 'primeng/api';\r\nimport claim from '../../../../i18n/en/claim.json';\r\n\r\n\r\n@Component({\r\n  selector: 'n2-new-se',\r\n  templateUrl: './new-se.component.html',\r\n  styleUrls: ['./new-se.component.scss']\r\n})\r\nexport class NewSeComponent implements OnInit {\r\n\r\n  coyName: string;\r\n  radioCategories: any[] = [{ name: 'Income Tax', key: '2' }, { name: 'Average Income', key: '1' }, { name: 'Replacement', key: '3' }];\r\n  createSEForm: FormGroup;\r\n  overlappingClaims: any[] = [];\r\n  outsideCurYr = false;\r\n\r\n  dateFormat = \"DD-MM-YYYY\";\r\n  nsmanDB: any[] = [\r\n    {\r\n      nric: 'S9220485E',\r\n      nsmanInd: 'Y',\r\n    },\r\n    {\r\n      nric: 'S9521155J',\r\n      nsmanInd: 'Y',\r\n    },\r\n    {\r\n      nric: 'S9170838H',\r\n      nsmanInd: 'N'\r\n    }\r\n  ];\r\n\r\n  claimJson: any;\r\n\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private workloadService: WorkloadInboxService,\r\n    public dateUtilsService: DateUtilsService,\r\n    private seClaimService: SEClaimService,\r\n    private claimService: ClaimService,\r\n    private toastService: CustomToastService,\r\n    private router: Router,\r\n    private publicHolidayService: PublicHolidayService,\r\n  ) {\r\n    console.log(\"test\");\r\n    this.claimJson = claim;\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.constructForm();\r\n  }\r\n\r\n  constructForm(): void {\r\n    this.createSEForm = this.formBuilder.group({\r\n      nricInputValue: ['', [Validators.required, NRICValidator()]],\r\n      nsmanName: new FormControl('', null),\r\n      trgStartDte: new FormControl(null, Validators.required),\r\n      trgEndDte: new FormControl(null, Validators.required),\r\n      claimOption: new FormControl(this.radioCategories[0].key, Validators.required),\r\n      company: [null]\r\n    }, {\r\n      validators: [\r\n        DateValidator.dateLessThan('trgStartDte', 'trgEndDte'),\r\n        DateValidator.dateRangeMoreThan('trgStartDte', 'trgEndDte', 60)\r\n      ]\r\n    });\r\n    this.valueChangeSubscribe();\r\n\r\n\r\n  }\r\n\r\n  valueChangeSubscribe(): void {\r\n    this.createSEForm.valueChanges.subscribe((change: any) => {\r\n      if (this.createSEForm.get('nricInputValue').value && this.createSEForm.get('nricInputValue').valid &&\r\n        this.createSEForm.get('claimOption').value && this.createSEForm.get('trgStartDte').value && this.createSEForm.get('trgEndDte').value) {\r\n        //call overlapping\r\n        let params = new HttpParams();\r\n        params = params.append('claimOption', this.createSEForm.get('claimOption').value);\r\n        params = params.append('nric', this.createSEForm.get('nricInputValue').value);\r\n        params = params.append('claimStartDate', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat));\r\n        params = params.append('claimEndDate', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgEndDte').value, this.dateFormat));\r\n        if(this.createSEForm.get('claimOption').value !== '2'){\r\n          params = params.append('coyName', this.createSEForm.get('company').value);\r\n\r\n        }\r\n        this.seClaimService.retrieveOverlappingSEClaim({ params }).subscribe(resp => {\r\n          if (resp.ok) {\r\n            let errMsg = \"\";\r\n            this.overlappingClaims = resp.body.data;\r\n            if (resp.body.data.length > 0) {\r\n              (resp.body.data as Array<any>).forEach(x => {\r\n                errMsg = errMsg.concat(x.caseId).concat(\"(\").concat(\"Draft by \").concat(x.draftByInit).concat(\")\").concat(\",\");\r\n              })\r\n              errMsg = errMsg.concat(\"proceed to upload supporting document CLM-E002\");\r\n              let templateErrMsg = claim.nspay2App.claim.error['CLM-E002'];\r\n              templateErrMsg = templateErrMsg.replace(\"{{overlappingCaseIdList}}\", errMsg);\r\n              if (!this.createSEForm.hasError('overlapping')) {\r\n                this.createSEForm.setErrors({ ...this.createSEForm.errors || {}, 'overlapping': templateErrMsg });\r\n              }\r\n            } else {\r\n              if (this.createSEForm?.errors && this.createSEForm?.errors['overlapping']) {\r\n                delete this.createSEForm.errors['overlapping'];\r\n              }\r\n            }\r\n          }\r\n        },\r\n          (error: any) => {\r\n            console.log(\"error is\" + String(error?.error?.error_desc));\r\n            this.toastService.error(String(error?.error?.error_desc));\r\n          }\r\n        );\r\n      }\r\n      this.onBlurTrgStartEndDt();\r\n    })\r\n    this.createSEForm.get('claimOption').valueChanges.subscribe(\r\n      (change: any) => {\r\n        console.log(\"claim is\", change)\r\n        if (change !== '2') {\r\n          this.createSEForm.get('company')?.setValidators([Validators.required]);\r\n        } else {\r\n          this.createSEForm.controls['company'].clearValidators();\r\n          this.createSEForm.get('company').reset();\r\n        }\r\n        this.createSEForm.get('company')?.updateValueAndValidity();\r\n      }\r\n    );\r\n    this.createSEForm.get('trgEndDte').valueChanges.subscribe(\r\n      () => {\r\n        const year = (this.createSEForm.get('trgEndDte').value as Date)?.getFullYear();\r\n        this.validateHasHoliday(year, (this.createSEForm.get('trgEndDte')));\r\n      }\r\n    );\r\n    this.createSEForm.get('trgStartDte').valueChanges.subscribe(\r\n      () => {\r\n        const year = (this.createSEForm.get('trgStartDte').value as Date)?.getFullYear();\r\n        this.validateHasHoliday(year, (this.createSEForm.get('trgStartDte')));\r\n      }\r\n    );\r\n    // this.createSEForm.get('nricInputValue').valueChanges.subscribe(() => {\r\n    //   this.checkImis();\r\n    // })\r\n  }\r\n\r\n  onBlurTrgStartEndDt(): void {\r\n    this.outsideCurYr = this.fallOutsideCurrentYr(this.createSEForm?.get('trgStartDte')?.value) ||\r\n      this.fallOutsideCurrentYr(this.createSEForm?.get('trgEndDte')?.value);\r\n  }\r\n\r\n  fallOutsideCurrentYr(date: any): boolean {\r\n    const curYr = new Date().getFullYear();\r\n    const inputDate = new Date(date);\r\n    if (inputDate.getFullYear() < curYr || inputDate.getFullYear() > curYr) {\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  isLongPeriod(): boolean {\r\n    if (this.createSEForm.get('trgStartDte').value && this.createSEForm.get('trgEndDte').value) {\r\n      const diffDays = this.dateUtilsService.getDaysBetween((this.createSEForm.get('trgStartDte').value as Date), (this.createSEForm.get('trgEndDte').value as Date));\r\n      return diffDays > 30 && diffDays < 60;\r\n    } else return false;\r\n  }\r\n\r\n  isLateClaim(): boolean {\r\n    if (this.createSEForm.get('trgStartDte').value) {\r\n      const claimStart = this.createSEForm.get('trgStartDte')?.value;\r\n      const dateNow = new Date();\r\n      const threshold = new Date(dateNow.getFullYear() - 1, dateNow.getMonth(), dateNow.getDay());\r\n      return claimStart < threshold;\r\n    } else return false;\r\n  }\r\n\r\n  validateHasHoliday(year: number, ctrl: AbstractControl): void {\r\n    if (year) {\r\n      let params = new HttpParams();\r\n      params = params.append('year', year);\r\n      this.publicHolidayService.getHolidayByYear({ params }).subscribe(resp => {\r\n        console.log(\"holiday is\", resp)\r\n        if (!resp.ok || resp.body.length <= 0) {\r\n          ctrl.setErrors({...this.createSEForm.errors || {}, 'noHoliday': true });\r\n        }\r\n\r\n      },\r\n        (error: any) => {\r\n          console.log(\"error is\" + String(error?.error?.error_desc));\r\n          this.toastService.error(String(error?.error?.error_desc));\r\n        }\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  //Temporary\r\n  //retrieves all IMIS nsman nric and nsman/nsx ind on load\r\n  retrieveNricFromImis(): void {\r\n    console.log(\"retrieving nric from imis\");\r\n    // if()\r\n    // let params = new HttpParams();\r\n    // params = params.append('nric',this.createSEForm.get('nricInputValue').value);\r\n    // this.claimService.retrieveNsmanImis({params}).subscribe(resp => {\r\n    //   if (resp.body.data) {\r\n    //     this.nsmanDB = resp.body.data;\r\n    //   }else {\r\n\r\n    //   }\r\n    //   },\r\n    //   (error: any) => {\r\n    //     console.log(\"error is\" + String(error?.error?.error_desc));\r\n    //     this.toastService.error(String(error?.error?.error_desc));\r\n    //   }\r\n    // );\r\n  }\r\n\r\n  checkImis() {\r\n    //check imis only when nric keyed is valid format\r\n\r\n    if(!this.createSEForm.get('nricInputValue').hasError('nric')){\r\n      // const nsmanNric = this.nsmanDB.map(x => { return String(x.nric) });\r\n      console.log(\"nsman list\", this.nsmanDB)\r\n \r\n      const nsmanObj = this.nsmanDB.find(x => x.nric === this.createSEForm.get('nricInputValue').value);\r\n      console.log(\"chika\", nsmanObj)\r\n      if (nsmanObj?.nsmanInd !== 'Y') {\r\n        this.createSEForm.get('nricInputValue').setErrors({ ...this.createSEForm.errors || {},'nricNotNsman': true });\r\n      }else{\r\n        if(this.createSEForm.get('nricInputValue').hasError('nricNotNsman')){\r\n          delete this.createSEForm.get('nricInputValue').errors['nricNotNsman'];\r\n\r\n        }\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n\r\n  setSameDay(): void {\r\n    const trgStartDte = this.createSEForm.get('trgStartDte').value;\r\n    if (trgStartDte) {\r\n      this.createSEForm.get('trgEndDte').setValue(trgStartDte);\r\n    }\r\n  }\r\n\r\n  setUpperCase(ctrlName: string): void {\r\n    this.createSEForm?.get(ctrlName)?.setValue(this.createSEForm?.get(ctrlName).value?.toUpperCase());\r\n  }\r\n\r\n  getDay(date: Date): string {\r\n    return moment(date).format('ddd');\r\n  }\r\n\r\n  retrieveLatestSEClaimCoy(): void {\r\n\r\n    let params = new HttpParams();\r\n    params = params.append('nric', this.createSEForm.get('nricInputValue').value);\r\n    params = params.append('trgStartDte', this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat));\r\n    this.seClaimService.retrieveLatestSEClaimCoy({ params }).subscribe(resp => {\r\n      if (resp.body.data) {\r\n        console.log('latest coy name was ', resp.body.data)\r\n        this.createSEForm.get('company').setValue(resp.body.data);\r\n\r\n      }\r\n    },\r\n      (error: any) => {\r\n        console.log(\"error is\" + String(error?.error?.error_desc));\r\n        this.toastService.error(String(error?.error?.error_desc));\r\n      }\r\n    );\r\n  }\r\n\r\n  onBlurCoy(): void {\r\n    console.log(\"evaluating company\");\r\n    if (this.createSEForm.get('trgStartDte').value && this.createSEForm.get('nricInputValue').value && this.createSEForm.get('claimOption').value !== 2) {\r\n      this.retrieveLatestSEClaimCoy();\r\n    }\r\n  }\r\n\r\n  onBlurNric(): void {\r\n    console.log(\"evaluating nsman name\");\r\n    if(this.createSEForm.get('nricInputValue').value && !this.createSEForm.get('nricInputValue').hasError('nric')){\r\n      let params = new HttpParams();\r\n      params = params.append('nric', this.createSEForm.get('nricInputValue').value);\r\n      //temporary retrieve from nsmaninfo table, otherwise is EHR\r\n      this.claimService.retrieveEHRNsmanName({ params }).subscribe(resp => {\r\n        if (resp.status === 200) {\r\n          if(resp.body.data){\r\n            this.createSEForm.get('nsmanName').setValue(resp.body.data);\r\n            this.checkImis();\r\n            if(this.createSEForm.get('nricInputValue').hasError('nricNotFound')){\r\n              delete this.createSEForm.get('nricInputValue').errors['nricNotFound'];\r\n            }\r\n          }else{\r\n            this.createSEForm.get('nricInputValue').setErrors({...this.createSEForm.errors || {}, 'nricNotFound': true });\r\n            this.createSEForm.get('nsmanName').reset();\r\n          }\r\n        }\r\n      },\r\n        (error: any) => {\r\n          console.log(\"error is\" + String(error?.error?.error_desc));\r\n          this.toastService.error(String(error?.error?.error_desc));\r\n        }\r\n      );\r\n    }else this.createSEForm.get('nsmanName').reset();\r\n\r\n   \r\n\r\n  }\r\n\r\n\r\n\r\n  createClaim(): void {\r\n    const newClaimDto =\r\n    {\r\n      nric: this.createSEForm.get('nricInputValue').value,\r\n      trgStartDte: this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgStartDte').value, this.dateFormat),\r\n      claimOption: this.createSEForm.get('claimOption').value,\r\n      trgEndDte: this.dateUtilsService.convertDateToStr(this.createSEForm.get('trgEndDte').value, this.dateFormat),\r\n      company: this.createSEForm.get('company').value,\r\n\r\n    }\r\n    this.router.navigate(['/claim/se-claim/edit-hardcopy-se', { newClaimDto: JSON.stringify(newClaimDto) }]);\r\n  }\r\n\r\n  clearForm(): void {\r\n    this.constructForm();\r\n  }\r\n\r\n}\r\n","<!-- <p-messages key=\"CLM-W003\" [closable] = \"false\"></p-messages>\r\n<p-messages key=\"CLM-W004\" [closable] = \"false\"></p-messages>\r\n<p-messages key=\"CLM-E002\" [closable] = \"false\"></p-messages> -->\r\n\r\n\r\n\r\n <!-- warning type  -->\r\n <p-messages severity=\"warn\" *ngIf = isLongPeriod()>\r\n    <ng-template key=\"CLM-W003\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W003'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf = isLateClaim()>\r\n    <ng-template key=\"CLM-W004\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W004'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n\r\n <!-- error type  -->\r\n<p-messages key=\"CLM-E002\" severity=\"error\" *ngIf =\"overlappingClaims.length>0\">\r\n    <ng-template pTemplate >\r\n        <div class=\"ml-2\">{{ this.createSEForm?.getError('overlapping') }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n\r\n<form [formGroup]=\"createSEForm\" [style]=\"{'margin-top': '2rem', 'margin-left':'1.5rem'}\">\r\n    <div class=\"grid\">\r\n        <div class=\"row col-8\">\r\n            <div class=\"field grid\">\r\n                <label for=\"nricInputValue\" class=\"col-2 col-form-label\">NRIC:</label>\r\n                <div class=\"col-2\">\r\n                    <input type=\"text\" (blur)=\"onBlurCoy(); onBlurNric()\"  pInputText formControlName=\"nricInputValue\" id=\"nricInputValue\" [style]=\"{'width': '100%'}\"/>\r\n                    <small *ngIf=\"createSEForm?.get('nricInputValue')?.hasError('required') && createSEForm?.get('nricInputValue')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n                    <small *ngIf=\"createSEForm?.get('nricInputValue')?.hasError('nric') && createSEForm?.get('nricInputValue')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V002\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n                    <small *ngIf=\"!createSEForm?.get('nricInputValue')?.hasError('nric')&& createSEForm?.get('nricInputValue')?.hasError('nricNotFound') && createSEForm?.get('nricInputValue')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V003\"\r\n                    [translateValues]=\"{ field: 'NRIC' }\"></small>\r\n                    <small *ngIf=\"!createSEForm?.get('nricInputValue')?.hasError('nric')&& createSEForm?.get('nricInputValue')?.hasError('nricNotNsman') && createSEForm?.get('nricInputValue')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V008\"></small>\r\n                </div>\r\n                <div class=\"col-2\" [style]=\"{'align-items': 'center', 'display':'flex'}\">\r\n                    <label class=\"text-secondary\"> {{createSEForm.get('nsmanName').value}} </label>\r\n                </div>\r\n            </div>\r\n            <div class=\"field grid\" [ngClass]=\"this.outsideCurYr? 'warning-date' : null\">\r\n                <label for=\"trgStartDte\" class=\"col-2 col-form-label\">Trg:</label>\r\n                <div class=\"col-2 input-group\"  >\r\n                    <p-calendar [showIcon]=\"false\" id=\"trgStartDte\" \r\n                    dateFormat=\"dd-mm-yy\"\r\n                    formControlName = \"trgStartDte\" appendTo=\"body\"\r\n                    position='center'\r\n                    [style]=\"{'max-width': '14em'}\"\r\n                    (onBlur)=\"onBlurCoy()\"\r\n                    (onSelect)=\"onBlurCoy()\"\r\n                    [inputStyleClass] = \"this.outsideCurYr? 'warning-date' : null\"\r\n                    ></p-calendar>\r\n                    <small *ngIf=\"createSEForm?.get('trgStartDte')?.hasError('required') && createSEForm?.get('trgStartDte')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'Start Date' }\"></small>\r\n                    <small *ngIf=\"createSEForm?.get('trgStartDte')?.hasError('noHoliday') && createSEForm?.get('trgStartDte')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V007\"\r\n                    [translateValues]=\"{ dateYear: (createSEForm?.get('trgStartDte').value).getFullYear() }\"></small>\r\n                </div>\r\n                <div class=\"col-1\" [style]=\"{'margin-left':'0em','align-items': 'center', 'display':'flex'}\">\r\n                    <label *ngIf=\"createSEForm.get('trgStartDte').value\" > ({{this.getDay(createSEForm.get('trgStartDte').value)}}) </label>\r\n                </div>\r\n\r\n                <div class=\"col-1\" [style]=\"{'margin-right':'2em','align-items': 'center', 'display':'flex'}\">to</div>\r\n                <div class=\"col-2 input-group\">\r\n                    <p-calendar [showIcon]=\"false\" id=\"trgEndDte\" \r\n                    dateFormat=\"dd-mm-yy\"\r\n                    formControlName = \"trgEndDte\" appendTo=\"body\"\r\n                    position='center'\r\n                    [style]=\"{'max-width': '14em'}\"\r\n                    [inputStyleClass] = \"this.outsideCurYr? 'warning-date' : null\"\r\n                    ></p-calendar>\r\n                    <small *ngIf=\r\n                    \"createSEForm?.get('trgEndDte')?.hasError('required') && createSEForm?.get('trgEndDte')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'End Date' }\"></small>\r\n                    <small *ngIf=\"createSEForm?.get('trgEndDte')?.hasError('noHoliday') && createSEForm?.get('trgEndDte')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V007\"\r\n                    [translateValues]=\"{ dateYear: (createSEForm?.get('trgEndDte').value).getFullYear() }\"></small>\r\n                </div>\r\n                <div class=\"col-1\"   [style]=\"{'margin-left':'0em','align-items': 'center', 'display':'flex'}\">\r\n                    <label *ngIf=\"createSEForm.get('trgEndDte').value\"> ({{this.getDay(createSEForm.get('trgEndDte').value)}}) </label>\r\n                </div>\r\n            \r\n\r\n                <div class=\"col-2\" [style]=\"{'margin-left':'1em','align-items': 'center', 'display':'flex'}\">\r\n                    <button pButton  label=\"Same Day\"  (click)=\"setSameDay()\" ></button>\r\n                </div>\r\n            </div>\r\n            <div class = \"field grid\" *ngIf = \"createSEForm?.errors?.['invalidDateLessThan'] &&  (createSEForm?.get('trgStartDte')?.touched ||createSEForm?.get('trgEndDte')?.touched)\">\r\n                <div class=\"col-2 col-form-label\"></div>\r\n                <div class=\"col\">\r\n                    <small \r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V004\"\r\n                    [translateValues]=\"{ endField: 'End Date', startField : 'Start Date' }\"></small>\r\n                </div>\r\n            </div>\r\n            <div class = \"field grid\" *ngIf = \"createSEForm?.errors?.['invalidDateRangeMoreThan'] && (createSEForm?.get('trgStartDte')?.touched || createSEForm?.get('trgEndDte')?.touched)\">\r\n                <div class=\"col-2 col-form-label\"></div>\r\n                <div class=\"col\">\r\n                    <small \r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V013\"></small>\r\n                </div>\r\n            </div>\r\n            <div class = \"field grid\">\r\n                <label for=\"claimOption\" class=\"col-2 col-form-label\">Claim Option:</label>\r\n                <div class=\"col-8 input-group\">\r\n                    <div *ngFor=\"let category of radioCategories\" class=\"p-field-checkbox\" [style]=\"{'display': 'inline','margin-right':'2em'}\">                        \r\n                            <p-radioButton class = \"ui-g-12 ui-md-4\" \r\n                            formControlName=\"claimOption\" [value]=\"category.key\" id=\"claimOption\" (onClick) = \"onBlurCoy()\">\r\n                            </p-radioButton>\r\n                            {{category.name}}\r\n                    </div>\r\n                </div>\r\n                <small *ngIf=\"createSEForm?.get('claimOption')?.hasError('required') && createSEForm?.get('claimOption')?.touched\"\r\n                class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                [translateValues]=\"{ field: 'Claim Option' }\"></small>\r\n            </div>\r\n            <div class=\"field grid\" *ngIf=\"createSEForm?.get('claimOption')?.value!=='2'\">\r\n                <label for=\"company\" class=\"col-2 col-form-label\">Company:</label>\r\n                <div class=\"col-7\">\r\n                    <input type=\"text\" (blur)=\"setUpperCase('company')\" [style]=\"{'width': '90%'}\" pInputText formControlName=\"company\" id=\"company\"/>\r\n                    <small *ngIf=\"createSEForm?.get('company')?.hasError('required') && createSEForm?.get('company')?.touched\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'Company' }\"></small>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<div class=\"text-right\">\r\n    <button pButton type=\"submit\"  label=\"Clear All\" (click)=\"clearForm()\"></button>\r\n    <button pButton type=\"submit\"  class=\"p-button-success\"  [disabled]=\"createSEForm?.invalid\"\r\n    label=\"Create Claim\" (click)=\"createClaim()\"></button>\r\n</div>\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
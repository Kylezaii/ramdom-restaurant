{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InsertItemDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst http_1 = require(\"@angular/common/http\");\nconst date_validator_directive_1 = require(\"app/shared/validator/date-validator.directive\");\nconst claim_json_1 = tslib_1.__importDefault(require(\"../../../../../../i18n/en/claim.json\"));\nconst string_not_allowed_directive_1 = require(\"app/shared/validator/string-not-allowed.directive\");\nconst moment_1 = tslib_1.__importDefault(require(\"moment\"));\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"primeng/dynamicdialog\"));\nconst i2 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i5 = tslib_1.__importStar(require(\"app/claim/service/claim.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/shared/service/formula.service\"));\nconst i7 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/dropdown\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/calendar\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/inputnumber\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/divider\"));\nconst i18 = tslib_1.__importStar(require(\"../../../../../shared/language/translate.directive\"));\nfunction InsertItemDialogComponent_p_messages_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r20.claimJson.nspay2App.claim.warning[\"CLM-W008\"]);\n  }\n}\nfunction InsertItemDialogComponent_p_messages_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 31);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_2_ng_template_2_Template, 4, 1, \"ng-template\", 32);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InsertItemDialogComponent_p_messages_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r21.claimJson.nspay2App.claim.warning[\"CLM-W010\"]);\n  }\n}\nfunction InsertItemDialogComponent_p_messages_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 31);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_4_ng_template_2_Template, 4, 1, \"ng-template\", 34);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InsertItemDialogComponent_p_messages_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r22.claimJson.nspay2App.claim.warning[\"CLM-W011\"]);\n  }\n}\nfunction InsertItemDialogComponent_p_messages_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 31);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_6_ng_template_2_Template, 4, 1, \"ng-template\", 35);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InsertItemDialogComponent_p_messages_8_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r23.claimJson.nspay2App.claim.warning[\"CLM-W013\"]);\n  }\n}\nfunction InsertItemDialogComponent_p_messages_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 31);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_8_ng_template_2_Template, 4, 1, \"ng-template\", 36);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InsertItemDialogComponent_p_messages_10_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r24.claimJson.nspay2App.claim.warning[\"CLM-W012\"]);\n  }\n}\nfunction InsertItemDialogComponent_p_messages_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 31);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_10_ng_template_2_Template, 4, 1, \"ng-template\", 36);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InsertItemDialogComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementStart(2, \"label\", 38);\n    i0.ɵɵtext(3, \"Item DESC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                        \");\n    i0.ɵɵelementStart(5, \"label\", 12);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r6.insertItemDetailsForm.get(\"itemName\").value);\n  }\n}\nfunction InsertItemDialogComponent_ng_template_25_small_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 43);\n    i0.ɵɵtext(1, \"Existing item name not allowed\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    \"max-width\": \"14em\",\n    \"width\": \"100%\"\n  };\n};\nfunction InsertItemDialogComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"label\", 39);\n    i0.ɵɵtext(4, \"Item DESC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementStart(6, \"div\", 40);\n    i0.ɵɵtext(7, \"\\n                            \");\n    i0.ɵɵelement(8, \"input\", 41);\n    i0.ɵɵtext(9, \"\\n                                \");\n    i0.ɵɵtext(10, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                    \");\n    i0.ɵɵelementStart(13, \"div\", 8);\n    i0.ɵɵtext(14, \"\\n                        \");\n    i0.ɵɵelementStart(15, \"div\", 38);\n    i0.ɵɵtext(16, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                        \");\n    i0.ɵɵelementStart(18, \"div\", 12);\n    i0.ɵɵtext(19, \"\\n                            \");\n    i0.ɵɵtemplate(20, InsertItemDialogComponent_ng_template_25_small_20_Template, 2, 0, \"small\", 42);\n    i0.ɵɵtext(21, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n                \");\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    i0.ɵɵadvance(8);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c0));\n    i0.ɵɵproperty(\"placeholder\", ctx_r8.VEHICLE_RENTAL);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r8.insertItemDetailsForm.get(\"itemName\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r8.insertItemDetailsForm.get(\"itemName\")) == null ? null : tmp_2_0.hasError(\"invalidStringNotAllowed\")));\n  }\n}\nconst _c1 = function () {\n  return {\n    field: \"Formula\"\n  };\n};\nfunction InsertItemDialogComponent_small_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nconst _c2 = function () {\n  return {\n    field: \"Approved Amount\"\n  };\n};\nfunction InsertItemDialogComponent_div_70_small_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c2));\n  }\n}\nfunction InsertItemDialogComponent_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelement(2, \"p-inputNumber\", 45);\n    i0.ɵɵtext(3, \"\\n                        \");\n    i0.ɵɵtemplate(4, InsertItemDialogComponent_div_70_small_4_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    let tmp_4_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c0));\n    i0.ɵɵproperty(\"minFractionDigits\", 2)(\"min\", 0)(\"max\", 9999999);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r10.insertItemDetailsForm.get(\"apprAmt\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx_r10.insertItemDetailsForm.get(\"apprAmt\")) == null ? null : tmp_4_0.hasError(\"required\")));\n  }\n}\nfunction InsertItemDialogComponent_ng_template_72_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n                            \", i0.ɵɵpipeBind2(2, 1, ctx_r27.getLabelApprAmt(), \"1.2-2\"), \"\\n                        \");\n  }\n}\nfunction InsertItemDialogComponent_ng_template_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵtemplate(1, InsertItemDialogComponent_ng_template_72_div_1_Template, 3, 4, \"div\", 46);\n    i0.ɵɵtext(2, \"\\n                    \");\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r12.insertItemDetailsForm == null ? null : ctx_r12.insertItemDetailsForm.errors == null ? null : ctx_r12.insertItemDetailsForm.errors[\"invalidDateLessThan\"]));\n  }\n}\nconst _c3 = function () {\n  return {\n    field: \"Accounting Start\"\n  };\n};\nfunction InsertItemDialogComponent_div_81_small_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c3));\n  }\n}\nfunction InsertItemDialogComponent_div_81_small_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 56);\n    i0.ɵɵtext(1, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c3));\n  }\n}\nconst _c4 = function () {\n  return {\n    field: \"Accounting End\"\n  };\n};\nfunction InsertItemDialogComponent_div_81_small_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c4));\n  }\n}\nfunction InsertItemDialogComponent_div_81_small_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 56);\n    i0.ɵɵtext(1, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c4));\n  }\n}\nconst _c5 = function () {\n  return {\n    \"flex-basis\": \"100px\"\n  };\n};\nconst _c6 = function () {\n  return {\n    endField: \"Accounting End Date\",\n    startField: \"Accounting Start Date\"\n  };\n};\nfunction InsertItemDialogComponent_div_81_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelement(2, \"label\", 57);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelement(6, \"small\", 58);\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(3, _c5));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(4, _c6));\n  }\n}\nfunction InsertItemDialogComponent_div_81_label_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r33.insertItemDetailsForm.get(\"acctgDivisor\").value);\n  }\n}\nconst _c7 = function () {\n  return {\n    field: \"Annual Income\"\n  };\n};\nfunction InsertItemDialogComponent_div_81_small_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c7));\n  }\n}\nfunction InsertItemDialogComponent_div_81_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementStart(6, \"div\", 5);\n    i0.ɵɵtext(7, \"\\n                    \");\n    i0.ɵɵelementStart(8, \"div\", 37);\n    i0.ɵɵtext(9, \"\\n                        \");\n    i0.ɵɵelementStart(10, \"label\", 20);\n    i0.ɵɵtext(11, \"Accounting Start:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                        \");\n    i0.ɵɵelementStart(13, \"div\", 47);\n    i0.ɵɵtext(14, \"\\n                            \");\n    i0.ɵɵelement(15, \"p-calendar\", 48);\n    i0.ɵɵtext(16, \"\\n                            \");\n    i0.ɵɵtemplate(17, InsertItemDialogComponent_div_81_small_17_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(18, \"\\n                            \");\n    i0.ɵɵtemplate(19, InsertItemDialogComponent_div_81_small_19_Template, 2, 2, \"small\", 49);\n    i0.ɵɵtext(20, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n                \");\n    i0.ɵɵelementStart(24, \"div\", 5);\n    i0.ɵɵtext(25, \"\\n                    \");\n    i0.ɵɵelementStart(26, \"div\", 37);\n    i0.ɵɵtext(27, \"\\n                        \");\n    i0.ɵɵelementStart(28, \"label\", 20);\n    i0.ɵɵtext(29, \"Accounting End:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n                        \");\n    i0.ɵɵelementStart(31, \"div\", 47);\n    i0.ɵɵtext(32, \"\\n                            \");\n    i0.ɵɵelement(33, \"p-calendar\", 50);\n    i0.ɵɵtext(34, \"\\n                            \");\n    i0.ɵɵtemplate(35, InsertItemDialogComponent_div_81_small_35_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(36, \"\\n                            \");\n    i0.ɵɵtemplate(37, InsertItemDialogComponent_div_81_small_37_Template, 2, 2, \"small\", 49);\n    i0.ɵɵtext(38, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(40, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(41, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n            \");\n    i0.ɵɵtemplate(43, InsertItemDialogComponent_div_81_div_43_Template, 9, 5, \"div\", 51);\n    i0.ɵɵtext(44, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(45, \"\\n        \");\n    i0.ɵɵelementStart(46, \"div\", 3);\n    i0.ɵɵtext(47, \"\\n            \");\n    i0.ɵɵelementStart(48, \"div\", 4);\n    i0.ɵɵtext(49, \"\\n                \");\n    i0.ɵɵelementStart(50, \"div\", 5);\n    i0.ɵɵtext(51, \"\\n                    \");\n    i0.ɵɵelementStart(52, \"div\", 8);\n    i0.ɵɵtext(53, \"\\n                        \");\n    i0.ɵɵelementStart(54, \"label\", 52);\n    i0.ɵɵtext(55, \"Divisor:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(56, \"\\n                        \");\n    i0.ɵɵtemplate(57, InsertItemDialogComponent_div_81_label_57_Template, 2, 1, \"label\", 46);\n    i0.ɵɵtext(58, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \"\\n                \");\n    i0.ɵɵelementStart(61, \"div\", 5);\n    i0.ɵɵtext(62, \"\\n                    \");\n    i0.ɵɵelementStart(63, \"div\", 8);\n    i0.ɵɵtext(64, \"\\n                        \");\n    i0.ɵɵelementStart(65, \"label\", 53);\n    i0.ɵɵtext(66, \"Annual Income:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(67, \"\\n                        \");\n    i0.ɵɵelementStart(68, \"div\", 54);\n    i0.ɵɵtext(69, \"\\n                            \");\n    i0.ɵɵelement(70, \"p-inputNumber\", 55);\n    i0.ɵɵtext(71, \"\\n                            \");\n    i0.ɵɵtemplate(72, InsertItemDialogComponent_div_81_small_72_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(73, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(74, \"\\n                        \\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(75, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(76, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(77, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(78, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_6_0;\n    let tmp_7_0;\n    let tmp_8_0;\n    let tmp_12_0;\n    i0.ɵɵadvance(15);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(16, _c0));\n    i0.ɵɵproperty(\"showIcon\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_2_0.hasError(\"required\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_3_0.touched) && ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\").value && ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\").hasError(\"invalidDate\"));\n    i0.ɵɵadvance(14);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(17, _c0));\n    i0.ɵɵproperty(\"showIcon\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\")) == null ? null : tmp_6_0.touched) && ((tmp_6_0 = ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\")) == null ? null : tmp_6_0.hasError(\"required\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\")) == null ? null : tmp_7_0.touched) && ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\").value && ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\").hasError(\"invalidDate\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r13.insertItemDetailsForm == null ? null : ctx_r13.insertItemDetailsForm.errors == null ? null : ctx_r13.insertItemDetailsForm.errors[\"invalidDateLessThan\"]) && ((ctx_r13.insertItemDetailsForm == null ? null : (tmp_8_0 = ctx_r13.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_8_0.touched) || (ctx_r13.insertItemDetailsForm == null ? null : (tmp_8_0 = ctx_r13.insertItemDetailsForm.get(\"acctgEndDate\")) == null ? null : tmp_8_0.touched)));\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r13.insertItemDetailsForm == null ? null : ctx_r13.insertItemDetailsForm.errors == null ? null : ctx_r13.insertItemDetailsForm.errors[\"invalidDateLessThan\"]));\n    i0.ɵɵadvance(13);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(18, _c0));\n    i0.ɵɵproperty(\"minFractionDigits\", 2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_12_0 = ctx_r13.insertItemDetailsForm.get(\"annualIncome\")) == null ? null : tmp_12_0.touched) && ((tmp_12_0 = ctx_r13.insertItemDetailsForm.get(\"annualIncome\")) == null ? null : tmp_12_0.hasError(\"required\")));\n  }\n}\nconst _c8 = function () {\n  return {\n    field: \"Computation String\"\n  };\n};\nfunction InsertItemDialogComponent_div_92_small_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c8));\n  }\n}\nfunction InsertItemDialogComponent_div_92_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelement(2, \"input\", 60);\n    i0.ɵɵtext(3, \"\\n                    \");\n    i0.ɵɵtemplate(4, InsertItemDialogComponent_div_92_small_4_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r14.insertItemDetailsForm.get(\"computedFormula\")) == null ? null : tmp_0_0.touched) && ctx_r14.isEmpty((tmp_0_0 = ctx_r14.insertItemDetailsForm.get(\"computedFormula\")) == null ? null : tmp_0_0.value));\n  }\n}\nfunction InsertItemDialogComponent_ng_template_94_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r16.insertItemDetailsForm.get(\"computedFormula\").value);\n  }\n}\nconst _c9 = function () {\n  return {\n    field: \"Computation Amount\"\n  };\n};\nfunction InsertItemDialogComponent_div_103_small_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c9));\n  }\n}\nfunction InsertItemDialogComponent_div_103_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelementStart(2, \"p-inputNumber\", 62);\n    i0.ɵɵtext(3, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                    \");\n    i0.ɵɵtemplate(5, InsertItemDialogComponent_div_103_small_5_Template, 2, 2, \"small\", 14);\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r17.insertItemDetailsForm.get(\"computedAmt\")) == null ? null : tmp_0_0.touched) && ctx_r17.isEmpty((tmp_0_0 = ctx_r17.insertItemDetailsForm.get(\"computedAmt\")) == null ? null : tmp_0_0.value));\n  }\n}\nfunction InsertItemDialogComponent_ng_template_105_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                    \");\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵtext(2, \"\\n                        \");\n    i0.ɵɵelementStart(3, \"label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                \");\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 1, ctx_r19.insertItemDetailsForm.get(\"computedAmt\").value, \"1.2-2\"));\n  }\n}\nclass InsertItemDialogComponent {\n  constructor(config, ref, nspConfirmService, toastService, formBuilder, claimService, formulaService, dateUtilsService) {\n    this.config = config;\n    this.ref = ref;\n    this.nspConfirmService = nspConfirmService;\n    this.toastService = toastService;\n    this.formBuilder = formBuilder;\n    this.claimService = claimService;\n    this.formulaService = formulaService;\n    this.dateUtilsService = dateUtilsService;\n    this.configData = {};\n    this.VEHICLE_RENTAL = \"VEHICLE RENTAL\";\n    this.INCOME_TAX = \"INCOME TAX\";\n    this.PRIVATE_HIRER_OCCUP_CODE = '230';\n    this.basisList = [{\n      name: 'PER MONTH',\n      key: 'PM'\n    }, {\n      name: 'PER DAY',\n      key: 'PD'\n    }, {\n      name: 'PER ICT',\n      key: 'ICT'\n    }];\n    this.basisListITX = [{\n      name: 'PER DAY',\n      key: 'PD'\n    }, {\n      name: 'PER ICT',\n      key: 'ICT'\n    }];\n    this.formulaList = [];\n    console.log(\"test\");\n    this.claimJson = claim_json_1.default;\n  }\n  ngOnInit() {\n    this.configData = this.config.data;\n    console.log(\"the config data\", this.configData);\n    this.constructForm();\n  }\n  initiateItemName() {\n    //no difference in logic for ITX and non ITX\n    let itemName;\n    if (this.configData.claimOption === '2' && this.configData.vehicleRental) {\n      itemName = this.VEHICLE_RENTAL;\n    } else if (this.configData.claimOption !== '2' && !this.configData.vehicleRental) {\n      itemName = this.VEHICLE_RENTAL;\n    }\n    return itemName;\n  }\n  constructForm() {\n    //\n    //new claim item\n    this.insertItemDetailsForm = this.formBuilder.group({\n      itemName: new forms_1.FormControl(this.initiateItemName(), string_not_allowed_directive_1.StringNotAllowedValidator.stringNotAllowed(this.configData.disallowedItemNames, !(this.configData.edit || this.configData.vehicleRental))),\n      apprBasis: new forms_1.FormControl(\"\", forms_1.Validators.required),\n      apprAmt: new forms_1.FormControl(0, forms_1.Validators.required),\n      formulaCode: new forms_1.FormControl(\"\", forms_1.Validators.required),\n      computedFormula: new forms_1.FormControl(null, null),\n      computedAmt: new forms_1.FormControl(null, null)\n      //code defaulted to first in the current basis first before being patched\n    });\n\n    if (this.configData.itemType === \"ITX\") {\n      //Appr Amt will be label for ITX if not 13x and autocalculated\n      this.insertItemDetailsForm.addControl(\"acctgStartDate\", new forms_1.FormControl(new Date(), [forms_1.Validators.required, date_validator_directive_1.DateValidator.isValidDate()]));\n      this.insertItemDetailsForm.addControl(\"acctgEndDate\", new forms_1.FormControl(new Date(), [forms_1.Validators.required, date_validator_directive_1.DateValidator.isValidDate()]));\n      this.insertItemDetailsForm.addControl(\"annualIncome\", new forms_1.FormControl(0, forms_1.Validators.required));\n      this.insertItemDetailsForm.addControl(\"acctgDivisor\", new forms_1.FormControl(0, forms_1.Validators.required));\n      this.insertItemDetailsForm.addValidators([date_validator_directive_1.DateValidator.dateLessThan('acctgStartDate', 'acctgEndDate')]);\n      this.basisList = this.basisListITX;\n    }\n    if (!this.configData.edit || !this.configData.claimItemId) {\n      //initialise formula code list to be based on first in basis list\n      //if not saved yet but present in frontend take from the last state\n      const defaultClaimBasis = 'PD';\n      this.insertItemDetailsForm.get('apprBasis').setValue(this.configData.apprBasis || defaultClaimBasis);\n      this.insertItemDetailsForm.get('apprAmt').setValue(this.configData.apprAmt || 0);\n      this.retrieveFormulaList(this.insertItemDetailsForm.get('apprBasis').value, this.configData.formulaCode);\n    }\n    //if updating existing claim item, fetch existing\n    else if (this.configData.edit && this.configData.claimItemId) {\n      // this.retrieveFormulaList(claimBasis);\n      this.patchFormValues(this.configData.apprBasis, this.configData);\n      // this.claimService.retrieveClaimItem(this.configData.claimItemId).subscribe((resp:any) => {\n      //   if(resp){\n      //     if(resp.status === 200 && resp.body.data){\n      //       console.log(\"testa\");\n      //       this.patchFormValues(resp.body.data);\n      //     }\n      //   }\n      // },\n      // (error: any) => {\n      //   console.log(\"error is\" + String(error?.error?.error_desc));\n      //   this.toastService.error(String(error?.error?.error_desc));\n      // }\n      // );\n      // }else{\n      //   this.insertItemDetailsForm= this.formBuilder.group({\n      //     itemDesc: new FormControl(\"\",null),\n      //     apprBasis: new FormControl(this.basisList[0].key, Validators.required),\n      //     apprAmt: new FormControl(0, null),\n      //     formulaCode: new FormControl(this.formulaList[0].key, Validators.required)\n      //   });\n    }\n\n    this.valueChangeSubscribe();\n    // }\n  }\n\n  getLabelApprAmt() {\n    return isFinite(this.insertItemDetailsForm.get('annualIncome').value / this.insertItemDetailsForm.get(\"acctgDivisor\").value) ? this.insertItemDetailsForm.get('annualIncome').value / this.insertItemDetailsForm.get(\"acctgDivisor\").value : 0;\n  }\n  getDivisor() {\n    const acctgStartDate = this.insertItemDetailsForm.get('acctgStartDate')?.value;\n    const acctgEndDate = this.insertItemDetailsForm.get('acctgEndDate')?.value;\n    if (acctgStartDate && acctgEndDate) {\n      const difference = acctgEndDate.getTime() - acctgStartDate.getTime();\n      console.log(\"start is \", acctgStartDate);\n      console.log(\"end is \", acctgEndDate);\n      console.log(\"divisor is\", Math.ceil(difference / (1000 * 3600 * 24)));\n      this.insertItemDetailsForm.get(\"acctgDivisor\").setValue(Math.ceil(difference / (1000 * 3600 * 24)));\n    } else this.insertItemDetailsForm.get(\"acctgDivisor\").setValue(0);\n  }\n  retrieveFormulaList(claimBasis, formulaCode) {\n    let params = new http_1.HttpParams();\n    params = params.append(\"claimBasisCode\", claimBasis);\n    params = params.append(\"claimType\", \"S\");\n    //if current selection was already 15a, and now there is no restday with it, retain the 15a selection with empty restdays\n    //TODO?\n    if (this.configData.restDay) {\n      console.log(\"the restDayData\", this.configData.restDay);\n      params = params.append(\"restDayInd\", 1);\n    }\n    this.claimService.retrieveFormulaList({\n      params\n    }).subscribe(resp => {\n      if (resp.status === 200 && resp.body.data) {\n        this.formulaList = [];\n        const sortedData = resp.body.data.sort(this.sortFormulaListByCode());\n        sortedData.forEach(x => {\n          this.formulaList.push({\n            name: x.formulaCode.concat(\" \").concat(x.formulaDesc),\n            key: x.formulaCode\n          });\n        });\n        if (!formulaCode) {\n          this.insertItemDetailsForm.get('formulaCode').setValue(this.formulaList[0].key);\n        } else this.insertItemDetailsForm.get('formulaCode').setValue(formulaCode);\n      }\n    }, error => {\n      console.log(\"error is\" + String(error?.error?.error_desc));\n      this.toastService.error(String(error?.error?.error_desc));\n    });\n  }\n  patchFormValues(claimBasis, data) {\n    console.log(\"formula code ius\", data);\n    console.log(\"appr amt is\", data.apprAmt);\n    this.retrieveFormulaList(claimBasis, data.formulaCode);\n    this.insertItemDetailsForm.get('itemName').setValue(data.itemName);\n    this.insertItemDetailsForm.get('apprBasis').setValue(data.apprBasis);\n    this.insertItemDetailsForm.get('apprAmt').setValue(data.apprAmt);\n    this.insertItemDetailsForm.get('computedFormula').setValue(data.computedFormula);\n    this.insertItemDetailsForm.get('computedAmt').setValue(data.computedAmt);\n    if (this.configData.itemType === 'ITX') {\n      console.log(\"teh date\", this.dateUtilsService.convertStrToDate(this.configData.acctgStartDate, \"DD-MM-YYYY\"));\n      this.insertItemDetailsForm.get('acctgStartDate').setValue(this.dateUtilsService.convertStrToDate(this.configData.acctgStartDate, \"DD-MM-YYYY\"));\n      this.insertItemDetailsForm.get('acctgEndDate').setValue(this.dateUtilsService.convertStrToDate(this.configData.acctgEndDate, \"DD-MM-YYYY\"));\n      this.insertItemDetailsForm.get('annualIncome').setValue(this.configData.annualIncome);\n      this.insertItemDetailsForm.get('acctgDivisor').setValue(this.configData.acctgDivisor);\n    }\n  }\n  sortFormulaListByCode() {\n    const regex = \"^([0-9]*)([a-zA-Z])$\";\n    return function (a, b) {\n      //sort by number then alphabet\n      const aNum = Number(a.formulaCode.trim().match(regex)[1]);\n      const bNum = Number(b.formulaCode.trim().match(regex)[1]);\n      const aAlpha = a.formulaCode.trim().match(regex)[2];\n      const bAlpha = b.formulaCode.trim().match(regex)[2];\n      if (aNum === bNum) {\n        return aAlpha < bAlpha ? -1 : 1;\n      }\n      return aNum < bNum ? -1 : 1;\n    };\n  }\n  recomputeAndRedisplay() {\n    const req = {\n      dateFrom: this.configData.trgStartDte,\n      dateTo: this.configData.trgEndDte,\n      halfDayIndicator: \"N\",\n      approvedAmt: this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x' && this.configData.itemType === 'ITX' || this.configData.itemType !== 'ITX' ? this.insertItemDetailsForm.get('apprAmt').value : this.getLabelApprAmt(),\n      formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\n      restDays: this.configData.restDay,\n      payPeriodStart: 0\n    };\n    this.formulaService.computeFormula(req, null).subscribe(resp => {\n      if (resp.status === 200 && resp.body.data) {\n        this.insertItemDetailsForm.get('computedFormula').setValue(resp.body.data.computationString);\n        this.insertItemDetailsForm.get('computedAmt').setValue(resp.body.data.amtPayable);\n      }\n    }, error => {\n      console.log(\"error is\" + String(error?.error?.error_desc));\n      this.toastService.error(String(error?.error?.error_desc));\n    });\n  }\n  valueChangeSubscribe() {\n    this.setConditionalValidationFor13x();\n    this.insertItemDetailsForm.get('apprBasis').valueChanges.subscribe(change => {\n      this.setConditionalValidationFor13x();\n    });\n    this.insertItemDetailsForm.get('formulaCode').valueChanges.subscribe(change => {\n      this.setConditionalValidationFor13x();\n    });\n    this.insertItemDetailsForm.get('acctgStartDate')?.valueChanges.subscribe(change => {\n      this.getDivisor();\n    });\n    this.insertItemDetailsForm.get('acctgEndDate')?.valueChanges.subscribe(change => {\n      this.getDivisor();\n    });\n  }\n  isExisting13x() {\n    return this.configData.apprBasis === 'ICT' && this.configData.formulaCode === '13x';\n  }\n  setConditionalValidationFor13x() {\n    //only empty when it is newly ICT and 13x\n    if (this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x') {\n      this.insertItemDetailsForm.get(\"computedFormula\")?.setValidators([forms_1.Validators.required]);\n      this.insertItemDetailsForm.get(\"computedFormula\")?.setValue(this.isExisting13x() && this.configData.computedFormula ? this.configData.computedFormula : null);\n      this.insertItemDetailsForm.get(\"computedAmt\")?.setValidators([forms_1.Validators.required]);\n      this.insertItemDetailsForm.get(\"computedAmt\")?.setValue(this.isExisting13x() && this.configData.computedAmt ? this.configData.computedAmt : null);\n      this.insertItemDetailsForm.get('computedFormula').updateValueAndValidity();\n      this.insertItemDetailsForm.get('computedAmt').updateValueAndValidity();\n      //Appr Amt will be label for ITX if not 13x and autocalculated Annual Amount/Divisor\n      this.insertItemDetailsForm.get('apprAmt')?.setValidators([forms_1.Validators.required]);\n      this.insertItemDetailsForm.get(\"apprAmt\")?.setValue(this.isExisting13x() && this.configData.apprAmt ? this.configData.apprAmt : null);\n      this.insertItemDetailsForm.get('apprAmt').updateValueAndValidity();\n    } else {\n      this.insertItemDetailsForm.get('computedFormula').clearValidators();\n      this.insertItemDetailsForm.get('computedFormula').setValue(!this.isExisting13x() && this.configData.computedFormula ? this.configData.computedFormula : null);\n      this.insertItemDetailsForm.get('computedFormula').updateValueAndValidity();\n      this.insertItemDetailsForm.get('computedAmt').clearValidators();\n      this.insertItemDetailsForm.get('computedAmt').setValue(!this.isExisting13x() && this.configData.computedAmt ? this.configData.computedAmt : null);\n      this.insertItemDetailsForm.get('computedAmt').updateValueAndValidity();\n      // console.log(\"im heree agaiun\")\n      this.insertItemDetailsForm.get('apprAmt').clearValidators();\n      this.insertItemDetailsForm.get('apprAmt')?.setValidators([forms_1.Validators.required]);\n      this.insertItemDetailsForm.get('apprAmt').setValue(!this.isExisting13x() && this.configData.apprAmt ? this.configData.apprAmt : null);\n      this.insertItemDetailsForm.get('apprAmt').updateValueAndValidity();\n    }\n  }\n  isEmpty(input) {\n    return input === null || input === undefined || input === \"\";\n  }\n  isValidNumber(obj) {\n    return !isNaN(obj);\n  }\n  isValidDate(obj) {\n    return (0, moment_1.default)(obj).isValid();\n  }\n  // recompute():void{\n  //   const req:IComputeFormula = {\n  //     dateFrom: this.configData.trgStartDte,\n  //     dateTo: this.configData.trgEndDte,\n  //     halfDayIndicator: \"N\",\n  //     approvedAmt: this.insertItemDetailsForm.get('apprAmt').value,\n  //     formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\n  //     restDays: [],\n  //     payPeriodStart: 0\n  //   }\n  //   this.formulaService.computeFormula(req, null).subscribe((resp:any) => {\n  //     if(resp.status === 200 && resp.body.data){\n  //       this.computedFormula = resp.body.data.computationString;\n  //       this.computedAmt = resp.body.data.amtPayable;\n  //     }\n  //   },\n  //   (error: any) => {\n  //     console.log(\"error is\" + String(error?.error?.error_desc));\n  //     this.toastService.error(String(error?.error?.error_desc));\n  //   });\n  // }\n  tester() {\n    console.log(\"rata is \", this.insertItemDetailsForm.controls);\n  }\n  submitUpdate(event, type) {\n    const req = {\n      apprAmt: this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x' && this.configData.itemType === 'ITX' || this.configData.itemType !== 'ITX' ? this.insertItemDetailsForm.get('apprAmt').value : this.getLabelApprAmt(),\n      itemName: this.insertItemDetailsForm.get('itemName').value,\n      formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\n      apprBasis: this.insertItemDetailsForm.get('apprBasis').value,\n      acctgStartDate: this.dateUtilsService.convertDateToStr(this.insertItemDetailsForm.get('acctgStartDate')?.value, \"DD-MM-YYYY\"),\n      acctgEndDate: this.dateUtilsService.convertDateToStr(this.insertItemDetailsForm.get('acctgEndDate')?.value, \"DD-MM-YYYY\"),\n      annualIncome: this.insertItemDetailsForm.get('annualIncome')?.value,\n      acctgDivisor: this.insertItemDetailsForm.get('acctgDivisor')?.value,\n      id: this.configData.claimItemId,\n      claimType: 'S',\n      itemType: this.configData.itemType,\n      computedFormula: this.insertItemDetailsForm.get('computedFormula')?.value,\n      computedAmt: this.insertItemDetailsForm.get('computedAmt')?.value,\n      claimId: this.configData.claimId,\n      edit: this.configData.edit,\n      vehicleRental: this.configData.vehicleRental\n    };\n    // const formulaReq:IComputeFormula = {\n    //   dateFrom: this.configData.trgStartDte,\n    //   dateTo: this.configData.trgEndDte,\n    //   halfDayIndicator: \"N\",\n    //   approvedAmt: this.insertItemDetailsForm.get('apprAmt').value,\n    //   formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\n    //   restDays: [],\n    //   payPeriodStart: 0\n    // }\n    // this.formulaService.computeFormula(formulaReq, null).subscribe((resp:any) => {\n    //   if(resp.status === 200 && resp.body.data){\n    //     req.computedFormula = resp.body.data.computationString;\n    //     req.computedAmt = resp.body.data.amtPayable;\n    //   }\n    //   this.nspConfirmService.onConfirmPopupRef(event, type, this.ref, req);\n    // },\n    // (error: any) => {\n    //   console.log(\"error is\" + String(error?.error?.error_desc));\n    //   this.toastService.error(String(error?.error?.error_desc));\n    // });\n    this.nspConfirmService.onConfirmPopupRef(event, type, this.ref, req);\n  }\n  onCancel() {\n    this.ref.close();\n  }\n}\nexports.InsertItemDialogComponent = InsertItemDialogComponent;\nInsertItemDialogComponent.ɵfac = function InsertItemDialogComponent_Factory(t) {\n  return new (t || InsertItemDialogComponent)(i0.ɵɵdirectiveInject(i1.DynamicDialogConfig), i0.ɵɵdirectiveInject(i1.DynamicDialogRef), i0.ɵɵdirectiveInject(i2.NspConfirmationService), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.ClaimService), i0.ɵɵdirectiveInject(i6.FormulaService), i0.ɵɵdirectiveInject(i7.DateUtilsService));\n};\nInsertItemDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InsertItemDialogComponent,\n  selectors: [[\"n2-insert-item-dialog\"]],\n  decls: 130,\n  vars: 27,\n  consts: [[\"severity\", \"warn\", 4, \"ngIf\"], [3, \"formGroup\"], [\"formDirective\", \"ngForm\"], [1, \"row\"], [1, \"grid\"], [1, \"col-6\"], [\"class\", \"field grid flex align-items-center\", \"style\", \"padding-top: 0.5rem\", 4, \"ngIf\", \"ngIfElse\"], [\"notEdit\", \"\"], [1, \"field\", \"grid\", \"flex\", \"align-items-center\", \"flex-wrap\"], [\"for\", \"apprBasis\", 1, \"col-3\", \"col-form-label\"], [\"id\", \"apprBasis\", \"appendTo\", \"body\", \"formControlName\", \"apprBasis\", \"optionLabel\", \"name\", \"optionValue\", \"key\", \"placeholder\", \"Select\", 1, \"col\", 3, \"options\", \"onChange\"], [\"for\", \"formulaCode\", 1, \"col-3\", \"col-form-label\"], [1, \"col\"], [\"id\", \"formulaCode\", \"appendTo\", \"body\", \"formControlName\", \"formulaCode\", \"optionLabel\", \"name\", \"optionValue\", \"key\", \"placeholder\", \"Select\", 3, \"options\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 3, \"translateValues\", 4, \"ngIf\"], [\"for\", \"apprAmt\", 1, \"col-3\", \"col-form-label\"], [\"class\", \"col\", 4, \"ngIf\", \"ngIfElse\"], [\"labelApprAmt\", \"\"], [4, \"ngIf\"], [1, \"field\", \"grid\"], [1, \"col-3\", \"col-form-label\"], [\"class\", \"col-7\", 4, \"ngIf\", \"ngIfElse\"], [\"labelComputationStr\", \"\"], [\"class\", \"col-4\", 4, \"ngIf\", \"ngIfElse\"], [\"labelComputationAmt\", \"\"], [1, \"flex\", \"justify-content-end\", \"gap-2\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Recompute\", 1, \"p-button-success\", 3, \"disabled\", \"click\"], [\"pButton\", \"\", 1, \"p-button-success\", 3, \"disabled\", \"click\"], [\"pButton\", \"\", \"label\", \"TESTER\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"submitUpdateItem\", \"header\", \"Confirmation\", \"icon\", \"fa fa-question-circle\", \"width\", \"425\"], [\"severity\", \"warn\"], [\"key\", \"CLM-W008\", \"pTemplate\", \"\"], [1, \"ml-2\"], [\"key\", \"CLM-W010\", \"pTemplate\", \"\"], [\"key\", \"CLM-W011\", \"pTemplate\", \"\"], [\"key\", \"CLM-W013\", \"pTemplate\", \"\"], [1, \"field\", \"grid\", \"flex\", \"align-items-center\", 2, \"padding-top\", \"0.5rem\"], [1, \"col-3\"], [\"for\", \"itemName\", 1, \"col-3\", \"col-form-label\"], [1, \"col\", \"flex\", \"align-items-center\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"itemName\", \"id\", \"itemName\", 3, \"placeholder\"], [\"class\", \"p-error\", 4, \"ngIf\"], [1, \"p-error\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 1, \"p-error\", 3, \"translateValues\"], [\"mode\", \"decimal\", \"id\", \"apprAmt\", \"appendTo\", \"body\", \"formControlName\", \"apprAmt\", 1, \"col\", 3, \"minFractionDigits\", \"min\", \"max\"], [\"class\", \"col\", 4, \"ngIf\"], [1, \"col\", \"flex\", \"align-items-center\", \"input-group\"], [\"id\", \"acctgStartDate\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"acctgStartDate\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 3, \"translateValues\", 4, \"ngIf\"], [\"id\", \"acctgEndDate\", \"dateFormat\", \"dd-mm-yy\", \"formControlName\", \"acctgEndDate\", \"appendTo\", \"body\", \"position\", \"center\", 3, \"showIcon\"], [\"class\", \"grid\", 4, \"ngIf\"], [\"for\", \"divisor\", 1, \"col-3\", \"col-form-label\"], [\"for\", \"annualIncome\", 1, \"col-3\", \"col-form-label\"], [1, \"col\", \"input-group\"], [\"mode\", \"decimal\", \"id\", \"annualIncome\", \"appendTo\", \"body\", \"formControlName\", \"annualIncome\", 3, \"minFractionDigits\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 1, \"p-error\", 3, \"translateValues\"], [1, \"flex\", \"col-1\", \"align-items-center\", \"pl-1\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V004\", 1, \"p-error\", 3, \"translateValues\"], [1, \"col-7\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"computedFormula\", 2, \"width\", \"100%\"], [1, \"col-4\"], [\"inputId\", \"computedAmt\", \"formControlName\", \"computedAmt\"]],\n  template: function InsertItemDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \" \");\n      i0.ɵɵtext(1, \"\\n\");\n      i0.ɵɵtemplate(2, InsertItemDialogComponent_p_messages_2_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(3, \"\\n\");\n      i0.ɵɵtemplate(4, InsertItemDialogComponent_p_messages_4_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(5, \"\\n\");\n      i0.ɵɵtemplate(6, InsertItemDialogComponent_p_messages_6_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(7, \"\\n\");\n      i0.ɵɵtemplate(8, InsertItemDialogComponent_p_messages_8_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(9, \"\\n\");\n      i0.ɵɵtemplate(10, InsertItemDialogComponent_p_messages_10_Template, 4, 0, \"p-messages\", 0);\n      i0.ɵɵtext(11, \"\\n\\n\\n\");\n      i0.ɵɵelement(12, \"p-divider\");\n      i0.ɵɵtext(13, \"\\n\");\n      i0.ɵɵelementStart(14, \"form\", 1, 2);\n      i0.ɵɵtext(16, \"\\n    \");\n      i0.ɵɵelementStart(17, \"div\", 3);\n      i0.ɵɵtext(18, \"\\n        \");\n      i0.ɵɵelementStart(19, \"div\", 4);\n      i0.ɵɵtext(20, \"\\n            \");\n      i0.ɵɵelementStart(21, \"div\", 5);\n      i0.ɵɵtext(22, \"\\n                \");\n      i0.ɵɵtemplate(23, InsertItemDialogComponent_div_23_Template, 8, 1, \"div\", 6);\n      i0.ɵɵtext(24, \"\\n                \");\n      i0.ɵɵtemplate(25, InsertItemDialogComponent_ng_template_25_Template, 24, 5, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(27, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n            \");\n      i0.ɵɵelementStart(29, \"div\", 5);\n      i0.ɵɵtext(30, \"\\n                \");\n      i0.ɵɵelementStart(31, \"div\", 8);\n      i0.ɵɵtext(32, \"\\n                    \");\n      i0.ɵɵelementStart(33, \"label\", 9);\n      i0.ɵɵtext(34, \"Basis:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n                    \");\n      i0.ɵɵelementStart(36, \"p-dropdown\", 10);\n      i0.ɵɵlistener(\"onChange\", function InsertItemDialogComponent_Template_p_dropdown_onChange_36_listener() {\n        return ctx.retrieveFormulaList(ctx.insertItemDetailsForm.get(\"apprBasis\").value, null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n    \");\n      i0.ɵɵelementStart(42, \"div\", 3);\n      i0.ɵɵtext(43, \"\\n        \");\n      i0.ɵɵelementStart(44, \"div\", 4);\n      i0.ɵɵtext(45, \"\\n            \");\n      i0.ɵɵelementStart(46, \"div\", 5);\n      i0.ɵɵtext(47, \"\\n                \");\n      i0.ɵɵelementStart(48, \"div\", 8);\n      i0.ɵɵtext(49, \"\\n                    \");\n      i0.ɵɵelementStart(50, \"label\", 11);\n      i0.ɵɵtext(51, \"Formula:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n                    \");\n      i0.ɵɵelementStart(53, \"div\", 12);\n      i0.ɵɵtext(54, \"\\n                        \");\n      i0.ɵɵelement(55, \"p-dropdown\", 13);\n      i0.ɵɵtext(56, \"\\n                        \");\n      i0.ɵɵtemplate(57, InsertItemDialogComponent_small_57_Template, 2, 2, \"small\", 14);\n      i0.ɵɵtext(58, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n                   \\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n            \");\n      i0.ɵɵelementStart(62, \"div\", 5);\n      i0.ɵɵtext(63, \"\\n                \");\n      i0.ɵɵelementStart(64, \"div\", 8);\n      i0.ɵɵtext(65, \"\\n                    \");\n      i0.ɵɵelementStart(66, \"label\", 15);\n      i0.ɵɵtext(67, \"Approved Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(68, \"\\n                    \");\n      i0.ɵɵtext(69, \"\\n                    \");\n      i0.ɵɵtemplate(70, InsertItemDialogComponent_div_70_Template, 6, 7, \"div\", 16);\n      i0.ɵɵtext(71, \"\\n                    \");\n      i0.ɵɵtemplate(72, InsertItemDialogComponent_ng_template_72_Template, 3, 1, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(74, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(75, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(78, \"\\n    \");\n      i0.ɵɵelement(79, \"p-divider\");\n      i0.ɵɵtext(80, \"\\n    \");\n      i0.ɵɵtemplate(81, InsertItemDialogComponent_div_81_Template, 79, 19, \"div\", 18);\n      i0.ɵɵtext(82, \"\\n    \\n    \");\n      i0.ɵɵelementStart(83, \"div\", 4);\n      i0.ɵɵtext(84, \"\\n        \");\n      i0.ɵɵelementStart(85, \"div\", 12);\n      i0.ɵɵtext(86, \"\\n            \");\n      i0.ɵɵelementStart(87, \"div\", 19);\n      i0.ɵɵtext(88, \"\\n                \");\n      i0.ɵɵelementStart(89, \"label\", 20);\n      i0.ɵɵtext(90, \"Computation String: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(91, \"\\n                \");\n      i0.ɵɵtemplate(92, InsertItemDialogComponent_div_92_Template, 6, 1, \"div\", 21);\n      i0.ɵɵtext(93, \"\\n                \");\n      i0.ɵɵtemplate(94, InsertItemDialogComponent_ng_template_94_Template, 7, 1, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(96, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(97, \"\\n            \");\n      i0.ɵɵelementStart(98, \"div\", 19);\n      i0.ɵɵtext(99, \"\\n                \");\n      i0.ɵɵelementStart(100, \"label\", 20);\n      i0.ɵɵtext(101, \"Computed Amount: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n                \");\n      i0.ɵɵtemplate(103, InsertItemDialogComponent_div_103_Template, 7, 1, \"div\", 23);\n      i0.ɵɵtext(104, \"\\n\\n                \");\n      i0.ɵɵtemplate(105, InsertItemDialogComponent_ng_template_105_Template, 8, 4, \"ng-template\", null, 24, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtext(107, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(108, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(109, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(110, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(111, \"\\n\\n\");\n      i0.ɵɵelementStart(112, \"div\", 25);\n      i0.ɵɵtext(113, \"\\n    \");\n      i0.ɵɵelementStart(114, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function InsertItemDialogComponent_Template_button_click_114_listener() {\n        return ctx.onCancel();\n      });\n      i0.ɵɵtext(115, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(116, \"\\n    \");\n      i0.ɵɵtext(117, \"\\n    \");\n      i0.ɵɵelementStart(118, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function InsertItemDialogComponent_Template_button_click_118_listener() {\n        return ctx.recomputeAndRedisplay();\n      });\n      i0.ɵɵtext(119, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(120, \"\\n    \");\n      i0.ɵɵelementStart(121, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function InsertItemDialogComponent_Template_button_click_121_listener($event) {\n        return ctx.submitUpdate($event, \"submitUpdateItem\");\n      });\n      i0.ɵɵtext(122);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(123, \"\\n    \");\n      i0.ɵɵelementStart(124, \"button\", 29);\n      i0.ɵɵlistener(\"click\", function InsertItemDialogComponent_Template_button_click_124_listener() {\n        return ctx.tester();\n      });\n      i0.ɵɵtext(125, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(126, \"\\n    \");\n      i0.ɵɵelement(127, \"p-confirmPopup\", 30);\n      i0.ɵɵtext(128, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(129, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r7 = i0.ɵɵreference(26);\n      const _r11 = i0.ɵɵreference(73);\n      const _r15 = i0.ɵɵreference(95);\n      const _r18 = i0.ɵɵreference(106);\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_4_0;\n      let tmp_12_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.insertItemDetailsForm.get(\"computedAmt\").value === 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.configData.itemType === \"ITX\" && ctx.dateUtilsService.convertDateToStr((tmp_1_0 = ctx.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_1_0.value, \"DDMM\") !== \"0101\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.configData.itemType === \"ITX\" && ctx.dateUtilsService.convertDateToStr((tmp_2_0 = ctx.insertItemDetailsForm.get(\"acctgEndDate\")) == null ? null : tmp_2_0.value, \"DDMM\") !== \"3112\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.configData.vehicleRental || ctx.insertItemDetailsForm.get(\"itemName\").value === \"VEHICLE RENTAL\") && ctx.insertItemDetailsForm.get(\"apprBasis\").value !== \"PD\" && ctx.configData.occupationCode === ctx.PRIVATE_HIRER_OCCUP_CODE && ctx.configData.claimOption !== \"2\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.dateUtilsService.isAfter(ctx.dateUtilsService.convertStrToDate(ctx.configData.commencementDte, \"DD-MM-YYYY\"), (tmp_4_0 = ctx.insertItemDetailsForm.get(\"acctgStartDate\")) == null ? null : tmp_4_0.value));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.insertItemDetailsForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.configData.edit || ctx.configData.vehicleRental)(\"ngIfElse\", _r7);\n      i0.ɵɵadvance(13);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(25, _c0));\n      i0.ɵɵproperty(\"options\", ctx.basisList);\n      i0.ɵɵadvance(19);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c0));\n      i0.ɵɵproperty(\"options\", ctx.formulaList);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_12_0 = ctx.insertItemDetailsForm.get(\"formulaCode\")) == null ? null : tmp_12_0.touched) && ((tmp_12_0 = ctx.insertItemDetailsForm.get(\"formulaCode\")) == null ? null : tmp_12_0.hasError(\"required\")));\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngIf\", ctx.insertItemDetailsForm.get(\"apprBasis\").value === \"ICT\" && ctx.insertItemDetailsForm.get(\"formulaCode\").value === \"13x\" && ctx.configData.itemType === \"ITX\" || ctx.configData.itemType !== \"ITX\")(\"ngIfElse\", _r11);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.configData.edit && ctx.configData.itemType === \"ITX\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.insertItemDetailsForm.get(\"apprBasis\").value === \"ICT\" && ctx.insertItemDetailsForm.get(\"formulaCode\").value === \"13x\")(\"ngIfElse\", _r15);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.insertItemDetailsForm.get(\"apprBasis\").value === \"ICT\" && ctx.insertItemDetailsForm.get(\"formulaCode\").value === \"13x\")(\"ngIfElse\", _r18);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"disabled\", ctx.insertItemDetailsForm.invalid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.insertItemDetailsForm.invalid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"\\n        \", ctx.configData.edit ? \"Update\" : \"Submit\", \"\\n    \");\n    }\n  },\n  dependencies: [i8.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i9.PrimeTemplate, i10.ButtonDirective, i11.Dropdown, i12.InputText, i13.ConfirmPopup, i14.Messages, i15.Calendar, i16.InputNumber, i17.Divider, i18.TranslateDirective, i8.DecimalPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpbnNlcnQtaXRlbS1kaWFsb2cuY29tcG9uZW50LnNjc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvY2xhaW0vc2UtY2xhaW0vc2UtY2xhaW0tdmVyaWZpY2F0aW9uL2l0ZW0tZGV0YWlscy1zZWN0aW9uL2luc2VydC1pdGVtLWRpYWxvZy9pbnNlcnQtaXRlbS1kaWFsb2cuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9MQUFvTCIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","InsertItemDialogComponent","constructor","config","ref","nspConfirmService","toastService","formBuilder","claimService","formulaService","dateUtilsService","name","key","console","log","claimJson","claim_json_1","ngOnInit","configData","data","constructForm","initiateItemName","itemName","claimOption","vehicleRental","VEHICLE_RENTAL","insertItemDetailsForm","group","forms_1","string_not_allowed_directive_1","stringNotAllowed","disallowedItemNames","edit","apprBasis","required","apprAmt","formulaCode","computedFormula","computedAmt","itemType","addControl","Date","date_validator_directive_1","isValidDate","addValidators","dateLessThan","basisList","basisListITX","claimItemId","defaultClaimBasis","get","setValue","retrieveFormulaList","value","patchFormValues","valueChangeSubscribe","getLabelApprAmt","isFinite","getDivisor","acctgStartDate","acctgEndDate","difference","getTime","Math","ceil","claimBasis","params","http_1","append","restDay","subscribe","resp","status","body","formulaList","sortedData","sort","sortFormulaListByCode","forEach","x","push","concat","formulaDesc","error","String","error_desc","convertStrToDate","annualIncome","acctgDivisor","regex","a","b","aNum","Number","trim","match","bNum","aAlpha","bAlpha","recomputeAndRedisplay","req","dateFrom","trgStartDte","dateTo","trgEndDte","halfDayIndicator","approvedAmt","restDays","payPeriodStart","computeFormula","computationString","amtPayable","setConditionalValidationFor13x","valueChanges","change","isExisting13x","setValidators","updateValueAndValidity","clearValidators","isEmpty","input","undefined","isValidNumber","obj","isNaN","isValid","tester","controls","submitUpdate","event","type","convertDateToStr","id","claimType","claimId","onConfirmPopupRef","onCancel","close","exports","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\se-claim-verification\\item-details-section\\insert-item-dialog\\insert-item-dialog.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\se-claim-verification\\item-details-section\\insert-item-dialog\\insert-item-dialog.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {DynamicDialogConfig, DynamicDialogRef} from 'primeng/dynamicdialog';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ClaimService } from 'app/claim/service/claim.service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { FormulaService } from 'app/shared/service/formula.service';\r\nimport { IComputeFormula } from 'app/shared/model/compute-formula.model';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { DateValidator } from 'app/shared/validator/date-validator.directive';\r\nimport claim from '../../../../../../i18n/en/claim.json';\r\nimport { StringNotAllowedValidator } from 'app/shared/validator/string-not-allowed.directive';\r\nimport moment from 'moment';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'n2-insert-item-dialog',\r\n  templateUrl: './insert-item-dialog.component.html',\r\n  styleUrls: ['./insert-item-dialog.component.scss']\r\n})\r\nexport class InsertItemDialogComponent implements OnInit {\r\n\r\n  configData:any ={};\r\n  readonly VEHICLE_RENTAL = \"VEHICLE RENTAL\";\r\n  readonly INCOME_TAX = \"INCOME TAX\";\r\n  PRIVATE_HIRER_OCCUP_CODE = '230';\r\n\r\n\r\n  claimJson: any;\r\n\r\n\r\n  basisList: any[] = [{name: 'PER MONTH', key: 'PM'}, {name: 'PER DAY', key: 'PD'}, {name: 'PER ICT', key: 'ICT'}];\r\n  basisListITX: any[] = [{name: 'PER DAY', key: 'PD'}, {name: 'PER ICT', key: 'ICT'}];\r\n\r\n  formulaList: any[] = [];\r\n  insertItemDetailsForm: FormGroup;\r\n\r\n\r\n\r\n  constructor(\r\n    public config: DynamicDialogConfig,\r\n    public ref: DynamicDialogRef,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private toastService: CustomToastService,\r\n    private formBuilder: FormBuilder,\r\n    private claimService: ClaimService,\r\n    private formulaService: FormulaService,\r\n    public dateUtilsService: DateUtilsService\r\n\r\n\r\n  ) {\r\n    console.log(\"test\");\r\n    this.claimJson = claim;\r\n\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.configData = this.config.data;\r\n    console.log(\"the config data\", this.configData);\r\n    this.constructForm();\r\n  }\r\n\r\n  initiateItemName():string{\r\n    //no difference in logic for ITX and non ITX\r\n    let itemName;\r\n    if(this.configData.claimOption === '2' && this.configData.vehicleRental){\r\n      itemName = this.VEHICLE_RENTAL;\r\n    }else if(this.configData.claimOption !=='2' && !this.configData.vehicleRental){\r\n      itemName = this.VEHICLE_RENTAL;\r\n    }\r\n    return itemName;\r\n  }\r\n\r\n\r\n\r\n  constructForm(): void{\r\n    //\r\n    //new claim item\r\n    this.insertItemDetailsForm = this.formBuilder.group({\r\n      itemName: new FormControl(this.initiateItemName(), StringNotAllowedValidator.stringNotAllowed(this.configData.disallowedItemNames, !(this.configData.edit || this.configData.vehicleRental),)),\r\n      apprBasis: new FormControl(\"\", Validators.required),\r\n      apprAmt: new FormControl(0, Validators.required),\r\n      formulaCode: new FormControl(\"\", Validators.required),\r\n      computedFormula: new FormControl(null, null),\r\n      computedAmt: new FormControl(null, null),\r\n      //code defaulted to first in the current basis first before being patched\r\n    });\r\n\r\n    if(this.configData.itemType === \"ITX\"){\r\n      //Appr Amt will be label for ITX if not 13x and autocalculated\r\n      this.insertItemDetailsForm.addControl(\"acctgStartDate\", new FormControl(new Date(), [Validators.required, DateValidator.isValidDate()]));\r\n      this.insertItemDetailsForm.addControl(\"acctgEndDate\", new FormControl(new Date(), [Validators.required, DateValidator.isValidDate()]));\r\n      this.insertItemDetailsForm.addControl(\"annualIncome\", new FormControl(0, Validators.required));\r\n      this.insertItemDetailsForm.addControl(\"acctgDivisor\",  new FormControl(0, Validators.required));\r\n      this.insertItemDetailsForm.addValidators([\r\n        DateValidator.dateLessThan('acctgStartDate', 'acctgEndDate'),\r\n      ])\r\n      this.basisList = this.basisListITX;\r\n    }\r\n\r\n\r\n\r\n    if(!this.configData.edit || !this.configData.claimItemId){\r\n      //initialise formula code list to be based on first in basis list\r\n      //if not saved yet but present in frontend take from the last state\r\n      const defaultClaimBasis = 'PD';\r\n      this.insertItemDetailsForm.get('apprBasis').setValue( this.configData.apprBasis || defaultClaimBasis);\r\n      this.insertItemDetailsForm.get('apprAmt').setValue(this.configData.apprAmt || 0);\r\n\r\n\r\n      this.retrieveFormulaList(this.insertItemDetailsForm.get('apprBasis').value, this.configData.formulaCode);\r\n\r\n    }\r\n    //if updating existing claim item, fetch existing\r\n    else if(this.configData.edit && this.configData.claimItemId){\r\n      // this.retrieveFormulaList(claimBasis);\r\n      this.patchFormValues(this.configData.apprBasis,this.configData);\r\n      // this.claimService.retrieveClaimItem(this.configData.claimItemId).subscribe((resp:any) => {\r\n      //   if(resp){\r\n      //     if(resp.status === 200 && resp.body.data){\r\n      //       console.log(\"testa\");\r\n      //       this.patchFormValues(resp.body.data);\r\n      //     }\r\n      //   }\r\n      // },\r\n      // (error: any) => {\r\n      //   console.log(\"error is\" + String(error?.error?.error_desc));\r\n      //   this.toastService.error(String(error?.error?.error_desc));\r\n      // }\r\n    // );\r\n    // }else{\r\n    //   this.insertItemDetailsForm= this.formBuilder.group({\r\n    //     itemDesc: new FormControl(\"\",null),\r\n    //     apprBasis: new FormControl(this.basisList[0].key, Validators.required),\r\n    //     apprAmt: new FormControl(0, null),\r\n    //     formulaCode: new FormControl(this.formulaList[0].key, Validators.required)\r\n    //   });\r\n\r\n    }\r\n    this.valueChangeSubscribe();\r\n\r\n\r\n    // }\r\n  }\r\n\r\n  getLabelApprAmt(): number{\r\n    return isFinite(this.insertItemDetailsForm.get('annualIncome').value/ this.insertItemDetailsForm.get(\"acctgDivisor\").value)?\r\n      this.insertItemDetailsForm.get('annualIncome').value/ this.insertItemDetailsForm.get(\"acctgDivisor\").value : 0;\r\n  }\r\n\r\n  getDivisor(): void{\r\n    const acctgStartDate: Date = this.insertItemDetailsForm.get('acctgStartDate')?.value as Date;\r\n    const acctgEndDate: Date = this.insertItemDetailsForm.get('acctgEndDate')?.value as Date;\r\n    if(acctgStartDate && acctgEndDate){\r\n      const difference = acctgEndDate.getTime() - acctgStartDate.getTime();\r\n      console.log(\"start is \", acctgStartDate)\r\n      console.log(\"end is \", acctgEndDate)\r\n\r\n      console.log(\"divisor is\", Math.ceil(difference / (1000 * 3600 * 24)));\r\n      this.insertItemDetailsForm.get(\"acctgDivisor\").setValue(Math.ceil(difference / (1000 * 3600 * 24)));\r\n    }else this.insertItemDetailsForm.get(\"acctgDivisor\").setValue(0);\r\n  }\r\n\r\n  retrieveFormulaList(claimBasis: string, formulaCode: string):void{\r\n    let params = new HttpParams();\r\n    params = params.append(\"claimBasisCode\",claimBasis);\r\n    params = params.append(\"claimType\",\"S\");\r\n    //if current selection was already 15a, and now there is no restday with it, retain the 15a selection with empty restdays\r\n    //TODO?\r\n    if(this.configData.restDay){\r\n      console.log(\"the restDayData\",this.configData.restDay )\r\n      params = params.append(\"restDayInd\", 1);\r\n    }\r\n\r\n    this.claimService.retrieveFormulaList({params}).subscribe((resp:any) => {\r\n      if(resp.status === 200 && resp.body.data){\r\n        this.formulaList=[];\r\n        const sortedData = resp.body.data.sort(this.sortFormulaListByCode());\r\n        sortedData.forEach((x:any)=>{\r\n          this.formulaList.push({\r\n            name: x.formulaCode.concat(\" \").concat(x.formulaDesc),\r\n            key: x.formulaCode\r\n          })\r\n        })\r\n        if(!formulaCode){\r\n          this.insertItemDetailsForm.get('formulaCode').setValue(this.formulaList[0].key);\r\n        }else\r\n          this.insertItemDetailsForm.get('formulaCode').setValue(formulaCode);\r\n    }},\r\n    (error: any) => {\r\n      console.log(\"error is\" + String(error?.error?.error_desc));\r\n      this.toastService.error(String(error?.error?.error_desc));\r\n    });\r\n  }\r\n\r\n  patchFormValues(claimBasis: string, data: any) {\r\n    console.log(\"formula code ius\", data)\r\n    console.log(\"appr amt is\", data.apprAmt)\r\n    this.retrieveFormulaList(claimBasis, data.formulaCode);\r\n    this.insertItemDetailsForm.get('itemName').setValue(data.itemName);\r\n    this.insertItemDetailsForm.get('apprBasis').setValue(data.apprBasis);\r\n    this.insertItemDetailsForm.get('apprAmt').setValue(data.apprAmt);\r\n    this.insertItemDetailsForm.get('computedFormula').setValue(data.computedFormula);\r\n    this.insertItemDetailsForm.get('computedAmt').setValue(data.computedAmt);\r\n\r\n    if(this.configData.itemType === 'ITX'){\r\n      console.log(\"teh date\", this.dateUtilsService.convertStrToDate(this.configData.acctgStartDate, \"DD-MM-YYYY\"))\r\n      this.insertItemDetailsForm.get('acctgStartDate').setValue(this.dateUtilsService.convertStrToDate(this.configData.acctgStartDate, \"DD-MM-YYYY\"));\r\n      this.insertItemDetailsForm.get('acctgEndDate').setValue(this.dateUtilsService.convertStrToDate(this.configData.acctgEndDate, \"DD-MM-YYYY\"));\r\n      this.insertItemDetailsForm.get('annualIncome').setValue(this.configData.annualIncome);\r\n      this.insertItemDetailsForm.get('acctgDivisor').setValue(this.configData.acctgDivisor);\r\n    }\r\n\r\n  }\r\n\r\n  sortFormulaListByCode(){\r\n    const regex = \"^([0-9]*)([a-zA-Z])$\";\r\n    return function (a: any, b: any) {\r\n        //sort by number then alphabet\r\n        const aNum = Number(a.formulaCode.trim().match(regex)[1]);\r\n        const bNum = Number(b.formulaCode.trim().match(regex)[1]);\r\n        const aAlpha = a.formulaCode.trim().match(regex)[2];\r\n        const bAlpha =  b.formulaCode.trim().match(regex)[2];\r\n        if(aNum===bNum){\r\n          return aAlpha < bAlpha ? -1 : 1;\r\n        }\r\n        return aNum < bNum ? -1 : 1;\r\n    }\r\n  }\r\n\r\n  recomputeAndRedisplay():void{\r\n    const req:IComputeFormula = {\r\n      dateFrom: this.configData.trgStartDte,\r\n      dateTo: this.configData.trgEndDte,\r\n      halfDayIndicator: \"N\",\r\n      approvedAmt: (this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x' && \r\n      this.configData.itemType === 'ITX') ||  this.configData.itemType !== 'ITX'?this.insertItemDetailsForm.get('apprAmt').value: this.getLabelApprAmt(), //if itx type\r\n      formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\r\n      restDays: this.configData.restDay,\r\n      payPeriodStart: 0\r\n    }\r\n\r\n    this.formulaService.computeFormula(req, null).subscribe((resp:any) => {\r\n      if(resp.status === 200 && resp.body.data){\r\n        this.insertItemDetailsForm.get('computedFormula').setValue(resp.body.data.computationString);\r\n        this.insertItemDetailsForm.get('computedAmt').setValue(resp.body.data.amtPayable);\r\n      }\r\n    },\r\n    (error: any) => {\r\n      console.log(\"error is\" + String(error?.error?.error_desc));\r\n      this.toastService.error(String(error?.error?.error_desc));\r\n    });\r\n\r\n  }\r\n\r\n  valueChangeSubscribe():void{\r\n    this.setConditionalValidationFor13x();\r\n    this.insertItemDetailsForm.get('apprBasis').valueChanges.subscribe((change:any)=>{\r\n      this.setConditionalValidationFor13x();\r\n    });\r\n    this.insertItemDetailsForm.get('formulaCode').valueChanges.subscribe((change:any)=>{\r\n      this.setConditionalValidationFor13x();\r\n    });\r\n\r\n    this.insertItemDetailsForm.get('acctgStartDate')?.valueChanges.subscribe((change:any)=>{\r\n      this.getDivisor();\r\n    });\r\n    this.insertItemDetailsForm.get('acctgEndDate')?.valueChanges.subscribe((change:any)=>{\r\n      this.getDivisor();\r\n    });\r\n  }\r\n\r\n  isExisting13x(): boolean{\r\n    return this.configData.apprBasis === 'ICT' && this.configData.formulaCode === '13x';\r\n  }\r\n  setConditionalValidationFor13x() {\r\n    //only empty when it is newly ICT and 13x\r\n    if(this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x'){\r\n      this.insertItemDetailsForm.get(\"computedFormula\")?.setValidators([Validators.required]);\r\n      this.insertItemDetailsForm.get(\"computedFormula\")?.setValue(this.isExisting13x() && this.configData.computedFormula? this.configData.computedFormula: null);\r\n      this.insertItemDetailsForm.get(\"computedAmt\")?.setValidators([Validators.required]);\r\n      this.insertItemDetailsForm.get(\"computedAmt\")?.setValue(this.isExisting13x() && this.configData.computedAmt? this.configData.computedAmt: null);\r\n\r\n      this.insertItemDetailsForm.get('computedFormula').updateValueAndValidity();\r\n      this.insertItemDetailsForm.get('computedAmt').updateValueAndValidity();\r\n\r\n      //Appr Amt will be label for ITX if not 13x and autocalculated Annual Amount/Divisor\r\n      this.insertItemDetailsForm.get('apprAmt')?.setValidators([Validators.required]);\r\n      this.insertItemDetailsForm.get(\"apprAmt\")?.setValue(this.isExisting13x() && this.configData.apprAmt? this.configData.apprAmt: null);\r\n\r\n      this.insertItemDetailsForm.get('apprAmt').updateValueAndValidity();\r\n\r\n    }else{\r\n      this.insertItemDetailsForm.get('computedFormula').clearValidators();\r\n      this.insertItemDetailsForm.get('computedFormula').setValue(!this.isExisting13x() && this.configData.computedFormula? this.configData.computedFormula: null);\r\n      this.insertItemDetailsForm.get('computedFormula').updateValueAndValidity();\r\n\r\n      this.insertItemDetailsForm.get('computedAmt').clearValidators();\r\n      this.insertItemDetailsForm.get('computedAmt').setValue(!this.isExisting13x() && this.configData.computedAmt? this.configData.computedAmt: null);\r\n      this.insertItemDetailsForm.get('computedAmt').updateValueAndValidity();\r\n      // console.log(\"im heree agaiun\")\r\n      this.insertItemDetailsForm.get('apprAmt').clearValidators();\r\n      this.insertItemDetailsForm.get('apprAmt')?.setValidators([Validators.required]);\r\n\r\n      this.insertItemDetailsForm.get('apprAmt').setValue(!this.isExisting13x() && this.configData.apprAmt? this.configData.apprAmt: null);\r\n      this.insertItemDetailsForm.get('apprAmt').updateValueAndValidity();\r\n    }\r\n\r\n  }\r\n\r\n  isEmpty(input: string):boolean{\r\n    return input===null || input===undefined || input === \"\";\r\n  }\r\n\r\n  isValidNumber(obj: any): boolean{\r\n    return !isNaN(obj);\r\n  }\r\n\r\n  isValidDate(obj: Date): boolean{\r\n    return moment(obj).isValid();\r\n  }\r\n\r\n\r\n  // recompute():void{\r\n  //   const req:IComputeFormula = {\r\n  //     dateFrom: this.configData.trgStartDte,\r\n  //     dateTo: this.configData.trgEndDte,\r\n  //     halfDayIndicator: \"N\",\r\n  //     approvedAmt: this.insertItemDetailsForm.get('apprAmt').value,\r\n  //     formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\r\n  //     restDays: [],\r\n  //     payPeriodStart: 0\r\n  //   }\r\n  //   this.formulaService.computeFormula(req, null).subscribe((resp:any) => {\r\n  //     if(resp.status === 200 && resp.body.data){\r\n  //       this.computedFormula = resp.body.data.computationString;\r\n  //       this.computedAmt = resp.body.data.amtPayable;\r\n  //     }\r\n  //   },\r\n  //   (error: any) => {\r\n  //     console.log(\"error is\" + String(error?.error?.error_desc));\r\n  //     this.toastService.error(String(error?.error?.error_desc));\r\n  //   });\r\n\r\n  // }\r\n\r\n  tester(): void{\r\n    console.log(\"rata is \",this.insertItemDetailsForm.controls )\r\n  }\r\n\r\n\r\n  submitUpdate(event: Event,  type: any):void{\r\n\r\n    const req = {\r\n      apprAmt:(this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x' && \r\n      this.configData.itemType === 'ITX') ||  this.configData.itemType !== 'ITX'?this.insertItemDetailsForm.get('apprAmt').value: this.getLabelApprAmt(),\r\n      itemName: this.insertItemDetailsForm.get('itemName').value,\r\n      formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\r\n      apprBasis: this.insertItemDetailsForm.get('apprBasis').value,\r\n      acctgStartDate: this.dateUtilsService.convertDateToStr(this.insertItemDetailsForm.get('acctgStartDate')?.value, \"DD-MM-YYYY\"),\r\n      acctgEndDate: this.dateUtilsService.convertDateToStr(this.insertItemDetailsForm.get('acctgEndDate')?.value, \"DD-MM-YYYY\"),\r\n      annualIncome: this.insertItemDetailsForm.get('annualIncome')?.value,\r\n      acctgDivisor: this.insertItemDetailsForm.get('acctgDivisor')?.value,\r\n      id: this.configData.claimItemId,\r\n      claimType: 'S',\r\n      itemType: this.configData.itemType,\r\n      computedFormula: this.insertItemDetailsForm.get('computedFormula')?.value,\r\n      computedAmt: this.insertItemDetailsForm.get('computedAmt')?.value,\r\n      claimId: this.configData.claimId,\r\n      edit: this.configData.edit,\r\n      vehicleRental: this.configData.vehicleRental\r\n    }\r\n    // const formulaReq:IComputeFormula = {\r\n    //   dateFrom: this.configData.trgStartDte,\r\n    //   dateTo: this.configData.trgEndDte,\r\n    //   halfDayIndicator: \"N\",\r\n    //   approvedAmt: this.insertItemDetailsForm.get('apprAmt').value,\r\n    //   formulaCode: this.insertItemDetailsForm.get('formulaCode').value,\r\n    //   restDays: [],\r\n    //   payPeriodStart: 0\r\n    // }\r\n    // this.formulaService.computeFormula(formulaReq, null).subscribe((resp:any) => {\r\n    //   if(resp.status === 200 && resp.body.data){\r\n    //     req.computedFormula = resp.body.data.computationString;\r\n    //     req.computedAmt = resp.body.data.amtPayable;\r\n    //   }\r\n    //   this.nspConfirmService.onConfirmPopupRef(event, type, this.ref, req);\r\n\r\n    // },\r\n    // (error: any) => {\r\n    //   console.log(\"error is\" + String(error?.error?.error_desc));\r\n    //   this.toastService.error(String(error?.error?.error_desc));\r\n    // });\r\n    this.nspConfirmService.onConfirmPopupRef(event, type, this.ref, req);\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  onCancel():void{\r\n    this.ref.close();\r\n  }\r\n}\r\n"," <!-- warning type  -->\r\n<p-messages severity=\"warn\" *ngIf = \"insertItemDetailsForm.get('computedAmt').value === 0\">\r\n    <ng-template key=\"CLM-W008\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W008'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf = \"this.configData.itemType === 'ITX' && dateUtilsService.convertDateToStr(insertItemDetailsForm.get('acctgStartDate')?.value, 'DDMM')!== '0101'\">\r\n    <ng-template key=\"CLM-W010\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W010'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf = \"this.configData.itemType === 'ITX' &&  dateUtilsService.convertDateToStr(insertItemDetailsForm.get('acctgEndDate')?.value, 'DDMM')!== '3112'\">\r\n    <ng-template key=\"CLM-W011\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W011'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf = \"(this.configData.vehicleRental || insertItemDetailsForm.get('itemName').value === 'VEHICLE RENTAL') && insertItemDetailsForm.get('apprBasis').value!== 'PD'\r\n&& this.configData.occupationCode === PRIVATE_HIRER_OCCUP_CODE && this.configData.claimOption !== '2'\">\r\n    <ng-template key=\"CLM-W013\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W013'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n<p-messages severity=\"warn\" *ngIf = \"dateUtilsService.isAfter(dateUtilsService.convertStrToDate(this.configData.commencementDte, 'DD-MM-YYYY'), this.insertItemDetailsForm.get('acctgStartDate')?.value)\">\r\n    <ng-template key=\"CLM-W013\" pTemplate >\r\n        <div class=\"ml-2\">{{ claimJson.nspay2App.claim.warning['CLM-W012'] }}</div>\r\n    </ng-template>\r\n</p-messages>\r\n\r\n\r\n<p-divider></p-divider>\r\n<form  [formGroup] =\"insertItemDetailsForm\"  #formDirective=\"ngForm\" >\r\n    <div class=\"row\">\r\n        <div class=\"grid\">\r\n            <div class=\"col-6\">\r\n                <div *ngIf=\"configData.edit || configData.vehicleRental; else notEdit\" class = \"field grid flex align-items-center\" style=\"padding-top: 0.5rem\">\r\n                        <label class =\"col-3\">Item DESC:</label>\r\n                        <label class = \"col\">{{ insertItemDetailsForm.get('itemName').value }}</label>\r\n                </div>\r\n                <ng-template #notEdit>\r\n                    <div class = \"field grid flex align-items-center flex-wrap\">\r\n                        <label class =\"col-3 col-form-label\" for=\"itemName\">Item DESC:</label>\r\n                        <div class=\"col flex align-items-center\">\r\n                            <input type=\"text\"  pInputText [placeholder]=\"VEHICLE_RENTAL\"\r\n                            formControlName=\"itemName\" id=\"itemName\" [style]=\"{'max-width': '14em', 'width':'100%'}\"/>\r\n                                <!-- <div class = \"flex align-items-center\">VEHICLE RENTAL</div> -->\r\n                        </div>\r\n                    </div>\r\n                    <div class = \"field grid flex align-items-center flex-wrap\">\r\n                        <div class = \"col-3\">\r\n                        </div>\r\n                        <div class = \"col\">\r\n                            <small *ngIf=\"insertItemDetailsForm.get('itemName')?.touched && insertItemDetailsForm.get('itemName')?.hasError('invalidStringNotAllowed')\"\r\n                            class=\"p-error\">Existing item name not allowed\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <div class = \"field grid flex align-items-center flex-wrap\">\r\n                    <label for=\"apprBasis\" class=\"col-3 col-form-label\">Basis:</label>\r\n                    <p-dropdown class=\"col\" [options]=\"basisList\" id=\"apprBasis\" appendTo=\"body\" formControlName=\"apprBasis\" optionLabel=\"name\" optionValue=\"key\"\r\n                    placeholder=\"Select\" [style]=\"{'max-width': '14em', 'width':'100%'}\" (onChange) = \"retrieveFormulaList(insertItemDetailsForm.get('apprBasis').value, null)\"></p-dropdown>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"grid\">\r\n            <div class=\"col-6\">\r\n                <div class = \"field grid flex align-items-center flex-wrap\">\r\n                    <label for=\"formulaCode\" class=\"col-3 col-form-label\">Formula:</label>\r\n                    <div class = \"col\">\r\n                        <p-dropdown [options]=\"formulaList\" id=\"formulaCode\" appendTo=\"body\" formControlName=\"formulaCode\" optionLabel=\"name\" optionValue=\"key\"\r\n                        placeholder=\"Select\" [style]=\"{'max-width': '14em', 'width':'100%'}\"></p-dropdown>\r\n                        <small *ngIf=\"insertItemDetailsForm.get('formulaCode')?.touched && insertItemDetailsForm.get('formulaCode')?.hasError('required')\"\r\n                        class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                        [translateValues]=\"{ field: 'Formula' }\">\r\n                        </small>\r\n                    </div>\r\n                   \r\n                </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <div class = \"field grid flex align-items-center flex-wrap\">\r\n                    <label for=\"apprAmt\" class=\"col-3 col-form-label\">Approved Amount:</label>\r\n                    <!--will be input number if itx and 13x or rep/avg otherwise itx and non 13x will be label-->\r\n                    <div class =\"col\" *ngIf = \"(this.insertItemDetailsForm.get('apprBasis').value === 'ICT' && this.insertItemDetailsForm.get('formulaCode').value === '13x' && \r\n                    this.configData.itemType === 'ITX') ||  this.configData.itemType !== 'ITX'; else labelApprAmt\" >\r\n                        <p-inputNumber  class=\"col\" mode=\"decimal\" [minFractionDigits]=\"2\" [min]=\"0\" [max]=\"9999999\" id=\"apprAmt\" appendTo=\"body\" formControlName=\"apprAmt\"\r\n                        [style]=\"{'max-width': '14em', 'width':'100%'}\"></p-inputNumber>\r\n                        <small *ngIf=\"insertItemDetailsForm.get('apprAmt')?.touched && insertItemDetailsForm.get('apprAmt')?.hasError('required')\"\r\n                        class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                        [translateValues]=\"{ field: 'Approved Amount' }\">\r\n                        </small>\r\n                    </div>\r\n                    <ng-template  #labelApprAmt>\r\n                        <div class = \"col\" *ngIf = \"!insertItemDetailsForm?.errors?.['invalidDateLessThan']\">\r\n                            {{ getLabelApprAmt()  |number : '1.2-2'}}\r\n                        </div>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <p-divider></p-divider>\r\n    <div *ngIf=\"configData.edit && configData.itemType === 'ITX'\">\r\n        <div class=\"row\" >\r\n            <div class=\"grid\">\r\n                <div class=\"col-6\">\r\n                    <div class = \"field grid flex align-items-center\" style=\"padding-top: 0.5rem\">\r\n                        <label class =\"col-3 col-form-label\">Accounting Start:</label>\r\n                        <div class=\"col flex align-items-center input-group\">\r\n                            <p-calendar [showIcon]=\"false\" id=\"acctgStartDate\" \r\n                            dateFormat=\"dd-mm-yy\"\r\n                            formControlName = \"acctgStartDate\" appendTo=\"body\"\r\n                            position='center'\r\n                            [style]=\"{'max-width': '14em', 'width':'100%'}\"\r\n                            ></p-calendar>\r\n                            <small *ngIf=\"insertItemDetailsForm.get('acctgStartDate')?.touched && insertItemDetailsForm.get('acctgStartDate')?.hasError('required')\"\r\n                            class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                            [translateValues]=\"{ field: 'Accounting Start' }\">\r\n                            </small>\r\n                            <small *ngIf=\"insertItemDetailsForm.get('acctgStartDate')?.touched && insertItemDetailsForm.get('acctgStartDate').value && \r\n                            insertItemDetailsForm.get('acctgStartDate').hasError('invalidDate')\"\r\n                            class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V002\"\r\n                            [translateValues]=\"{ field: 'Accounting Start' }\">\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-6\">\r\n                    <div class = \"field grid flex align-items-center\" style=\"padding-top: 0.5rem\">\r\n                        <label class =\"col-3 col-form-label\">Accounting End:</label>\r\n                        <div class=\"col flex align-items-center input-group\">\r\n                            <p-calendar [showIcon]=\"false\" id=\"acctgEndDate\" \r\n                            dateFormat=\"dd-mm-yy\"\r\n                            formControlName = \"acctgEndDate\" appendTo=\"body\"\r\n                            position='center'\r\n                            [style]=\"{'max-width': '14em', 'width':'100%'}\"\r\n                            ></p-calendar>\r\n                            <small *ngIf=\"insertItemDetailsForm.get('acctgEndDate')?.touched && insertItemDetailsForm.get('acctgEndDate')?.hasError('required')\"\r\n                            class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                            [translateValues]=\"{ field: 'Accounting End' }\">\r\n                            </small>\r\n                            <small *ngIf=\"insertItemDetailsForm.get('acctgEndDate')?.touched && insertItemDetailsForm.get('acctgEndDate').value && \r\n                            insertItemDetailsForm.get('acctgEndDate').hasError('invalidDate')\"\r\n                            class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V002\"\r\n                            [translateValues]=\"{ field: 'Accounting End' }\">\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class = \"grid\" *ngIf = \"insertItemDetailsForm?.errors?.['invalidDateLessThan'] &&  (insertItemDetailsForm?.get('acctgStartDate')?.touched ||insertItemDetailsForm?.get('acctgEndDate')?.touched)\">\r\n                <label class = \"flex col-1 align-items-center pl-1\" [style] = \"{'flex-basis':'100px'}\"></label>\r\n                <div class = \"col\">\r\n                    <small \r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V004\"\r\n                    [translateValues]=\"{ endField: 'Accounting End Date', startField : 'Accounting Start Date' }\"></small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"grid\">\r\n                <div class=\"col-6\">\r\n                    <div class = \"field grid flex align-items-center flex-wrap\">\r\n                        <label for=\"divisor\" class=\"col-3 col-form-label\">Divisor:</label>\r\n                        <label class = \"col\" *ngIf = \"!insertItemDetailsForm?.errors?.['invalidDateLessThan']\" >{{ insertItemDetailsForm.get('acctgDivisor').value }}</label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-6\">\r\n                    <div class = \"field grid flex align-items-center flex-wrap\">\r\n                        <label for=\"annualIncome\" class=\"col-3 col-form-label\">Annual Income:</label>\r\n                        <div class=\"col input-group\">\r\n                            <p-inputNumber  mode=\"decimal\" [minFractionDigits]=\"2\" id=\"annualIncome\" appendTo=\"body\" formControlName=\"annualIncome\"\r\n                            [style]=\"{'max-width': '14em', 'width':'100%'}\"></p-inputNumber>\r\n                            <small *ngIf=\"insertItemDetailsForm.get('annualIncome')?.touched && insertItemDetailsForm.get('annualIncome')?.hasError('required')\"\r\n                            class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                            [translateValues]=\"{ field: 'Annual Income' }\">\r\n                            </small>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"grid\">\r\n        <div class=\"col\">\r\n            <div class = \"field grid\">\r\n                <label class=\"col-3  col-form-label\">Computation String: </label>\r\n                <div class=\"col-7\" *ngIf = \"insertItemDetailsForm.get('apprBasis').value === 'ICT' \r\n                && insertItemDetailsForm.get('formulaCode').value === '13x'; else labelComputationStr\">\r\n                    <input type=\"text\" pInputText formControlName = \"computedFormula\" style = \"width: 100%;\">\r\n                    <small *ngIf=\"insertItemDetailsForm.get('computedFormula')?.touched && isEmpty(insertItemDetailsForm.get('computedFormula')?.value)\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'Computation String' }\">\r\n                    </small>\r\n                </div>\r\n                <ng-template #labelComputationStr>\r\n                    <div class = \"col\">\r\n                        <label>{{ insertItemDetailsForm.get('computedFormula').value }}</label>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n            <div class = \"field grid\">\r\n                <label class=\"col-3 col-form-label\">Computed Amount: </label>\r\n                <div class=\"col-4\" *ngIf = \"insertItemDetailsForm.get('apprBasis').value === 'ICT' \r\n                && insertItemDetailsForm.get('formulaCode').value === '13x'; else labelComputationAmt\">\r\n                    <p-inputNumber inputId=\"computedAmt\"  formControlName = \"computedAmt\">\r\n                    </p-inputNumber>\r\n                    <small *ngIf=\"insertItemDetailsForm.get('computedAmt')?.touched && isEmpty(insertItemDetailsForm.get('computedAmt')?.value)\"\r\n                    class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                    [translateValues]=\"{ field: 'Computation Amount' }\">\r\n                    </small>\r\n                </div>\r\n\r\n                <ng-template #labelComputationAmt>\r\n                    <div class=\"col\">\r\n                        <label>{{insertItemDetailsForm.get('computedAmt').value |number : '1.2-2' }}</label>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<div class = \"flex justify-content-end gap-2\">\r\n    <button pButton class =\"p-button-danger\" label=\"Cancel\"  (click)=\"onCancel()\">\r\n    </button>\r\n    <!-- insertItemDetailsForm.get('formulaCode').value==='13x' || -->\r\n    <button pButton class =\"p-button-success\" label=\"Recompute\"  (click)=\"recomputeAndRedisplay()\" [disabled]=\" insertItemDetailsForm.invalid\">\r\n    </button>\r\n    <button pButton class =\"p-button-success\" (click)=\"submitUpdate($event, 'submitUpdateItem')\" [disabled]= insertItemDetailsForm.invalid>\r\n        {{ configData.edit?\"Update\": \"Submit\"}}\r\n    </button>\r\n    <button pButton class =\"p-button-danger\" label=\"TESTER\"  (click)=\"tester()\">\r\n    </button>\r\n    <p-confirmPopup key = \"submitUpdateItem\" header=\"Confirmation\" icon=\"fa fa-question-circle\" width=\"425\"></p-confirmPopup>\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
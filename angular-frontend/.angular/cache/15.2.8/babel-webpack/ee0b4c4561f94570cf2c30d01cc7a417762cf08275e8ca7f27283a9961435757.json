{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AnnualWriteOffComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst nspapp_constants_1 = require(\"app/shared/constants/nspapp.constants\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i2 = tslib_1.__importStar(require(\"app/payment/annual-write-off/service/annual-write-off.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i13 = tslib_1.__importStar(require(\"../../shared/component/file-upload/file-upload.component\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i15 = tslib_1.__importStar(require(\"./view-annual-write-off/view-annual-write-off.component\"));\nconst i16 = tslib_1.__importStar(require(\"../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"annualWriteOffFileUpload\"];\nconst _c1 = [\"annualWriteOffSupportingDocuments\"];\nconst _c2 = [\"viewAnnualWriteOff\"];\nconst _c3 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction AnnualWriteOffComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function AnnualWriteOffComponent_ng_template_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n      \");\n    i0.ɵɵelementStart(8, \"div\", 18);\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementStart(10, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AnnualWriteOffComponent_ng_template_2_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onOpen(ctx_r10.displayAnnualFileUploadDialog));\n    });\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n  \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(10);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c3));\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"th\", 20);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"th\", 21);\n    i0.ɵɵtext(7, \"Total\");\n    i0.ɵɵelement(8, \"p-sortIcon\", 22);\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelement(10, \"p-columnFilter\", 23);\n    i0.ɵɵtext(11, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵelementStart(13, \"th\", 24);\n    i0.ɵɵtext(14, \"Perfect Write-Off\");\n    i0.ɵɵelement(15, \"p-sortIcon\", 25);\n    i0.ɵɵtext(16, \"\\n        \");\n    i0.ɵɵelement(17, \"p-columnFilter\", 26);\n    i0.ɵɵtext(18, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n      \");\n    i0.ɵɵelementStart(20, \"th\", 27);\n    i0.ɵɵtext(21, \"Discrepancy Write-Off\");\n    i0.ɵɵelement(22, \"p-sortIcon\", 28);\n    i0.ɵɵtext(23, \"\\n        \");\n    i0.ɵɵelement(24, \"p-columnFilter\", 29);\n    i0.ɵɵtext(25, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n      \");\n    i0.ɵɵelementStart(27, \"th\", 30);\n    i0.ɵɵtext(28, \"Failed Write-Off\");\n    i0.ɵɵelement(29, \"p-sortIcon\", 31);\n    i0.ɵɵtext(30, \"\\n        \");\n    i0.ɵɵelement(31, \"p-columnFilter\", 32);\n    i0.ɵɵtext(32, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n      \");\n    i0.ɵɵelementStart(34, \"th\", 33);\n    i0.ɵɵtext(35, \"Submitted by\");\n    i0.ɵɵelement(36, \"p-sortIcon\", 34);\n    i0.ɵɵtext(37, \"\\n        \");\n    i0.ɵɵelement(38, \"p-columnFilter\", 35);\n    i0.ɵɵtext(39, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(40, \"\\n      \");\n    i0.ɵɵelementStart(41, \"th\", 36);\n    i0.ɵɵtext(42, \"Approved by\");\n    i0.ɵɵelement(43, \"p-sortIcon\", 37);\n    i0.ɵɵtext(44, \"\\n        \");\n    i0.ɵɵelement(45, \"p-columnFilter\", 38);\n    i0.ɵɵtext(46, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(47, \"\\n      \");\n    i0.ɵɵelementStart(48, \"th\", 39);\n    i0.ɵɵtext(49, \"Status\");\n    i0.ɵɵelement(50, \"p-sortIcon\", 40);\n    i0.ɵɵtext(51, \"\\n        \");\n    i0.ɵɵelement(52, \"p-columnFilter\", 41);\n    i0.ɵɵtext(53, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n  \");\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_6_br_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"br\");\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_6_br_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"br\");\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 42);\n    i0.ɵɵlistener(\"click\", function AnnualWriteOffComponent_ng_template_6_Template_a_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const annualWriteOffRecord_r11 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.onOpenAnnualWriteOffRecord(ctx_r15.displayViewAnnualWriteOffDialog, annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.id));\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n      \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n      \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n      \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n      \");\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n      \");\n    i0.ɵɵelementStart(20, \"td\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"defaultString\");\n    i0.ɵɵtemplate(23, AnnualWriteOffComponent_ng_template_6_br_23_Template, 1, 0, \"br\", 43);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"defaultString\");\n    i0.ɵɵpipe(26, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n      \");\n    i0.ɵɵelementStart(28, \"td\");\n    i0.ɵɵtext(29);\n    i0.ɵɵpipe(30, \"defaultString\");\n    i0.ɵɵtemplate(31, AnnualWriteOffComponent_ng_template_6_br_31_Template, 1, 0, \"br\", 43);\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"defaultString\");\n    i0.ɵɵpipe(34, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n      \");\n    i0.ɵɵelementStart(36, \"td\");\n    i0.ɵɵtext(37);\n    i0.ɵɵpipe(38, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(40, \"\\n  \");\n  }\n  if (rf & 2) {\n    const annualWriteOffRecord_r11 = ctx.$implicit;\n    const i_r12 = ctx.rowIndex;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\n        \", i_r12 + 1, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.totalCount);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.perfectCount);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.discrepancyCount);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.failedCount);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(22, 12, annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submittedBy), \"\\n        \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submittedBy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 14, i0.ɵɵpipeBind2(26, 16, annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submittedDt, \"dd-MM-yyyy '('HHmm')'\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(30, 19, annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submissionReviewedBy), \"\\n        \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submissionReviewedBy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(33, 21, i0.ɵɵpipeBind2(34, 23, annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.submissionReviewedDt, \"dd-MM-yyyy '('HHmm')'\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(38, 26, ctx_r2.n2StatusEnum[annualWriteOffRecord_r11 == null ? null : annualWriteOffRecord_r11.status]));\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\", 44);\n    i0.ɵɵtext(4, \"No Annual Write-off records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n  }\n}\nfunction AnnualWriteOffComponent_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function AnnualWriteOffComponent_ng_template_30_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onCancel());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n    \");\n    i0.ɵɵelementStart(3, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function AnnualWriteOffComponent_ng_template_30_Template_button_click_3_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.onSubmit($event, \"annualWriteOffUpload\", ctx_r19.displayAnnualFileUploadDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c3));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c3));\n    i0.ɵɵproperty(\"disabled\", !ctx_r6.annualWriteoffUploadsForm.valid);\n  }\n}\nconst _c4 = function () {\n  return [10, 25, 50];\n};\nconst _c5 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c6 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nconst _c7 = function () {\n  return {\n    width: \"97vw\",\n    height: \"100vh\"\n  };\n};\nclass AnnualWriteOffComponent {\n  constructor(fb, annualWriteOffService, toastService, nspConfirmService, ns2HttpService) {\n    this.fb = fb;\n    this.annualWriteOffService = annualWriteOffService;\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.ns2HttpService = ns2HttpService;\n    this.displayAnnualFileUploadDialog = {\n      display: false\n    };\n    this.displayViewAnnualWriteOffDialog = {\n      display: false\n    };\n    this.annualWriteoffUploadsForm = this.fb.group({\n      writeoffFile: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".csv,.txt\"), fileupload2_directive_1.FileUploadValidator2.maxFileLimit(1)]),\n      supportingDocuments: new forms_1.FormControl([], fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\"))\n    });\n    //Lazy Loading\n    this.loading = false;\n    this.totalRecords = 0;\n    this.pageData = {\n      currentPage: 0\n    };\n    this.pageSize = 10;\n    // Enumeration object for decoding common NSPAY2.0 statuses\n    this.n2StatusEnum = nspapp_constants_1.Ns2Status;\n  }\n  ngOnInit() {\n    //\n  }\n  load(event) {\n    this.loading = true;\n    this.lazyLoadEvent = event;\n    const options = this.ns2HttpService.convertLazyEvent(event, this.pageData, this.pageSize);\n    this.annualWriteOffService.getAllAnnualWriteOffRecords(options).subscribe(res => {\n      // Pipe response to an array of Interface model\n      this.annualWriteOffArray = res.body?.data?.content;\n      this.loading = false;\n      this.totalRecords = res.body.data.totalElements;\n    }, error => {\n      console.log(error.error?.error_desc);\n      this.loading = false;\n    });\n  }\n  onPage(event) {\n    this.pageSize = event.rows;\n    this.pageData.currentPage = event.first / event.rows;\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  onOpen(dialog) {\n    dialog.display = true;\n  }\n  onOpenAnnualWriteOffRecord(dialog, annualWriteOffRecordId) {\n    dialog.display = true;\n    this.viewAnnualWriteOffComponent.fetchData(annualWriteOffRecordId);\n  }\n  onSubmit(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      //Submit annual Write off\n      this.uploadFile();\n    });\n  }\n  uploadFile() {\n    const request = {\n      writeOffFileTxnId: this.writeOffFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))[0],\n      supportingDocs: this.supportingDocsFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))\n    };\n    console.log(\"request\", request);\n    this.annualWriteOffService.uploadAnnualWriteoffFile(request).subscribe(res => {\n      console.log(\"res\", res);\n      this.toastService.success(\"Annual Write-Off file uploaded successfully: Routed for approval\");\n      this.resetForm();\n    }, error => {\n      this.toastService.error(error.error?.error_desc);\n    });\n  }\n  //after success\n  resetForm() {\n    this.writeOffFileUploadComponent.clearAndReset();\n    this.supportingDocsFileUploadComponent.clearAndReset();\n  }\n  //cancel upload\n  onCancel() {\n    this.writeOffFileUploadComponent.onClose();\n    this.supportingDocsFileUploadComponent.onClose();\n    this.displayAnnualFileUploadDialog.display = false;\n  }\n}\nexports.AnnualWriteOffComponent = AnnualWriteOffComponent;\nAnnualWriteOffComponent.ɵfac = function AnnualWriteOffComponent_Factory(t) {\n  return new (t || AnnualWriteOffComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AnnualWriteOffService), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.NspConfirmationService), i0.ɵɵdirectiveInject(i5.Ns2HttpService));\n};\nAnnualWriteOffComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AnnualWriteOffComponent,\n  selectors: [[\"n2-annual-write-off\"]],\n  viewQuery: function AnnualWriteOffComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.writeOffFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.supportingDocsFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewAnnualWriteOffComponent = _t.first);\n    }\n  },\n  decls: 41,\n  vars: 30,\n  consts: [[\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", \"lazy\", \"totalRecords\", \"loading\", \"onLazyLoad\", \"onPage\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"header\", \"Upload Annual Write-Off\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [3, \"formGroup\"], [\"formControlName\", \"writeoffFile\", \"id\", \"writeoffFile\", 3, \"contentHeight\"], [\"annualWriteOffFileUpload\", \"\"], [\"formControlName\", \"supportingDocuments\", \"id\", \"supportingDocuments\", 3, \"contentHeight\"], [\"annualWriteOffSupportingDocuments\", \"\"], [\"pTemplate\", \"footer\"], [\"key\", \"annualWriteOffUpload\"], [\"header\", \"Annual Write-Off Details\", \"position\", \"bottom-right\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"viewAnnualWriteOff\", \"\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\", \"flex\", \"justify-content-start\", \"align-items-center\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file-o\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [1, \"col-6\", \"nsp-align-right\"], [\"pButton\", \"\", \"label\", \"Upload new file\", 3, \"click\"], [\"scope\", \"col\", 2, \"width\", \"60px\"], [\"scope\", \"col\", \"pSortableColumn\", \"totalCount\"], [\"field\", \"totalCount\"], [\"type\", \"text\", \"field\", \"totalCount\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"perfectCount\"], [\"field\", \"perfectCount\"], [\"type\", \"text\", \"field\", \"perfectCount\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"discrepancyCount\"], [\"field\", \"discrepancyCount\"], [\"type\", \"text\", \"field\", \"discrepancyCount\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"failedCount\"], [\"field\", \"failedCount\"], [\"type\", \"text\", \"field\", \"failedCount\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"submittedDt\"], [\"field\", \"submittedDt\"], [\"type\", \"date\", \"field\", \"submittedDt\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"submissionReviewedDt\"], [\"field\", \"submissionReviewedDt\"], [\"type\", \"date\", \"field\", \"submissionReviewedDt\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"scope\", \"col\", \"pSortableColumn\", \"status\"], [\"field\", \"status\"], [\"type\", \"text\", \"field\", \"name\", \"display\", \"menu\", \"matchMode\", \"contains\"], [\"href\", \"javascript:\", 3, \"click\"], [4, \"ngIf\"], [\"colspan\", \"8\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"]],\n  template: function AnnualWriteOffComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-table\", 0);\n      i0.ɵɵlistener(\"onLazyLoad\", function AnnualWriteOffComponent_Template_p_table_onLazyLoad_0_listener($event) {\n        return ctx.load($event);\n      })(\"onPage\", function AnnualWriteOffComponent_Template_p_table_onPage_0_listener($event) {\n        return ctx.onPage($event);\n      });\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵtemplate(2, AnnualWriteOffComponent_ng_template_2_Template, 15, 3, \"ng-template\", 1);\n      i0.ɵɵtext(3, \"\\n  \");\n      i0.ɵɵtemplate(4, AnnualWriteOffComponent_ng_template_4_Template, 56, 0, \"ng-template\", 2);\n      i0.ɵɵtext(5, \"\\n\\n  \");\n      i0.ɵɵtemplate(6, AnnualWriteOffComponent_ng_template_6_Template, 41, 28, \"ng-template\", 3);\n      i0.ɵɵtext(7, \"\\n\\n  \");\n      i0.ɵɵtemplate(8, AnnualWriteOffComponent_ng_template_8_Template, 7, 0, \"ng-template\", 4);\n      i0.ɵɵtext(9, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n\\n\");\n      i0.ɵɵelementStart(11, \"p-dialog\", 5);\n      i0.ɵɵlistener(\"visibleChange\", function AnnualWriteOffComponent_Template_p_dialog_visibleChange_11_listener($event) {\n        return ctx.displayAnnualFileUploadDialog.display = $event;\n      });\n      i0.ɵɵtext(12, \"\\n\\n  \");\n      i0.ɵɵelementStart(13, \"form\", 6);\n      i0.ɵɵtext(14, \"\\n    \");\n      i0.ɵɵelementStart(15, \"span\");\n      i0.ɵɵtext(16, \"Annual Write-Off File *\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n    \");\n      i0.ɵɵelement(18, \"n2-file-upload\", 7, 8);\n      i0.ɵɵtext(20, \"\\n\\n    \");\n      i0.ɵɵelement(21, \"br\");\n      i0.ɵɵtext(22, \"\\n    \");\n      i0.ɵɵelementStart(23, \"span\");\n      i0.ɵɵtext(24, \"Supporting Documents *\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n    \");\n      i0.ɵɵelement(26, \"n2-file-upload\", 9, 10);\n      i0.ɵɵtext(28, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n  \");\n      i0.ɵɵtemplate(30, AnnualWriteOffComponent_ng_template_30_Template, 5, 7, \"ng-template\", 11);\n      i0.ɵɵtext(31, \"\\n  \");\n      i0.ɵɵelement(32, \"p-confirmPopup\", 12);\n      i0.ɵɵtext(33, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n\\n\");\n      i0.ɵɵelementStart(35, \"p-dialog\", 13);\n      i0.ɵɵlistener(\"visibleChange\", function AnnualWriteOffComponent_Template_p_dialog_visibleChange_35_listener($event) {\n        return ctx.displayViewAnnualWriteOffDialog.display = $event;\n      });\n      i0.ɵɵtext(36, \"\\n\\n  \");\n      i0.ɵɵelement(37, \"n2-view-annual-write-off\", null, 14);\n      i0.ɵɵtext(39, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"value\", ctx.annualWriteOffArray)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(25, _c4))(\"showCurrentPageReport\", true)(\"lazy\", true)(\"totalRecords\", ctx.totalRecords)(\"loading\", ctx.loading);\n      i0.ɵɵadvance(11);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c5));\n      i0.ɵɵproperty(\"visible\", ctx.displayAnnualFileUploadDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(27, _c6))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.annualWriteoffUploadsForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"contentHeight\", \"200px\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(28, _c7));\n      i0.ɵɵproperty(\"visible\", ctx.displayViewAnnualWriteOffDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(29, _c6))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n    }\n  },\n  dependencies: [i6.Dialog, i7.PrimeTemplate, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i8.NgIf, i1.FormGroupDirective, i1.FormControlName, i9.ButtonDirective, i10.Tooltip, i11.Table, i11.SortableColumn, i11.SortIcon, i11.ColumnFilter, i12.ConfirmPopup, i13.FileUploadComponent, i14.Ripple, i15.ViewAnnualWriteOffComponent, i8.DatePipe, i16.DefaultStringPipe],\n  styles: [\"[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFubnVhbC13cml0ZS1vZmYuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXHByb2plY3RzJTIwMlxcbnNwYXlpaWFwcFxcc3JjXFxtYWluXFx3ZWJhcHBcXGFwcFxccGF5bWVudFxcYW5udWFsLXdyaXRlLW9mZlxcYW5udWFsLXdyaXRlLW9mZi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7NEVBQUE7QUFJQTtFQUNFLG9DQUFBO0FDQUYiLCJmaWxlIjoiYW5udWFsLXdyaXRlLW9mZi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDY7XHJcbn1cclxuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9hbm51YWwtd3JpdGUtb2ZmL2FubnVhbC13cml0ZS1vZmYuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL3BheW1lbnQvYW5udWFsLXdyaXRlLW9mZi9hbm51YWwtd3JpdGUtb2ZmLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs0RUFBQTtBQUlBO0VBQ0Usb0NBQUE7QUNBRjtBRENBLDR3Q0FBNHdDIiwic291cmNlc0NvbnRlbnQiOlsiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5wLWRpYWxvZy1tYXNrIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwNjtcclxufVxyXG4iLCIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjpob3N0IDo6bmctZGVlcCAucC1kaWFsb2ctbWFzayB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AnnualWriteOffComponent","constructor","fb","annualWriteOffService","toastService","nspConfirmService","ns2HttpService","display","group","writeoffFile","forms_1","fileupload2_directive_1","allowableExtension","maxFileLimit","supportingDocuments","currentPage","nspapp_constants_1","ngOnInit","load","event","loading","lazyLoadEvent","options","convertLazyEvent","pageData","pageSize","getAllAnnualWriteOffRecords","subscribe","res","annualWriteOffArray","body","data","content","totalRecords","totalElements","error","console","log","error_desc","onPage","rows","first","exportCSV","onOpen","dialog","onOpenAnnualWriteOffRecord","annualWriteOffRecordId","viewAnnualWriteOffComponent","fetchData","onSubmit","key","onConfirmPopup","uploadFile","request","writeOffFileTxnId","writeOffFileUploadComponent","verifiedFiles","map","x","String","meta_data","id","supportingDocs","supportingDocsFileUploadComponent","uploadAnnualWriteoffFile","success","resetForm","clearAndReset","onCancel","onClose","displayAnnualFileUploadDialog","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\annual-write-off\\annual-write-off.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\annual-write-off\\annual-write-off.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { AnnualWriteOffService } from 'app/payment/annual-write-off/service/annual-write-off.service';\r\nimport { HttpErrorResponse, HttpResponse, HttpStatusCode } from '@angular/common/http';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { IAnnualWriteOff } from 'app/payment/annual-write-off/model/annual-write-off.model';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport {\r\n  ViewAnnualWriteOffComponent\r\n} from 'app/payment/annual-write-off/view-annual-write-off/view-annual-write-off.component';\r\nimport { FileUploadComponent } from 'app/shared/component/file-upload/file-upload.component';\r\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport { FileUploadValidator } from 'app/shared/validator/fileupload.directive';\r\nimport { N2Status } from 'app/shared/model/ns2status-enum.model';\r\nimport { FileUploadValidator2 } from 'app/shared/validator/fileupload2.directive';\r\nimport { LazyLoadEvent } from 'primeng/api';\r\nimport { Ns2HttpService } from 'app/shared/service/ns2-http.service';\r\nimport { Ns2Status } from 'app/shared/constants/nspapp.constants';\r\n\r\n@Component({\r\n  selector: 'n2-annual-write-off',\r\n  templateUrl: './annual-write-off.component.html',\r\n  styleUrls: ['./annual-write-off.component.scss']\r\n})\r\nexport class AnnualWriteOffComponent implements OnInit {\r\n  annualWriteOffArray: IAnnualWriteOff[];\r\n  displayAnnualFileUploadDialog: any = { display: false };\r\n  displayViewAnnualWriteOffDialog: any = { display: false };\r\n\r\n  annualWriteoffUploadsForm: FormGroup = this.fb.group({\r\n    writeoffFile: new FormControl([], [FileUploadValidator2.allowableExtension(\".csv,.txt\"), FileUploadValidator2.maxFileLimit(1)]),\r\n    supportingDocuments: new FormControl([], FileUploadValidator2.allowableExtension(\".pdf\"))\r\n  });\r\n\r\n    //Lazy Loading\r\n    loading = false;\r\n    totalRecords = 0;\r\n    pageData: { currentPage: number } = {\r\n      currentPage: 0\r\n    }\r\n    pageSize = 10;\r\n    lazyLoadEvent: LazyLoadEvent;\r\n    \r\n  // Enumeration object for decoding common NSPAY2.0 statuses\r\n  n2StatusEnum: { [key: string]: Ns2Status } = Ns2Status\r\n\r\n  @ViewChild('annualWriteOffFileUpload', { static: true })\r\n  private writeOffFileUploadComponent!: FileUploadComponent;\r\n\r\n  @ViewChild('annualWriteOffSupportingDocuments', { static: true })\r\n  private supportingDocsFileUploadComponent!: FileUploadComponent;\r\n  \r\n  @ViewChild('viewAnnualWriteOff', { static: false })\r\n  private viewAnnualWriteOffComponent!: ViewAnnualWriteOffComponent;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private annualWriteOffService: AnnualWriteOffService,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private ns2HttpService: Ns2HttpService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //\r\n  }\r\n\r\n  load(event: LazyLoadEvent): void {\r\n    this.loading = true;\r\n    this.lazyLoadEvent = event;\r\n\r\n    const options = this.ns2HttpService.convertLazyEvent(event, this.pageData, this.pageSize);\r\n    \r\n    this.annualWriteOffService.getAllAnnualWriteOffRecords(options).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        // Pipe response to an array of Interface model\r\n        this.annualWriteOffArray = res.body?.data?.content;\r\n        this.loading = false;\r\n        this.totalRecords = res.body.data.totalElements;\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error.error?.error_desc);\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  onPage(event: any): void {\r\n    this.pageSize = event.rows;\r\n    this.pageData.currentPage = event.first / event.rows;\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  onOpen(dialog: any): void {\r\n    dialog.display = true;\r\n  }\r\n\r\n  onOpenAnnualWriteOffRecord(dialog: any, annualWriteOffRecordId: string): void {\r\n    dialog.display = true;\r\n    this.viewAnnualWriteOffComponent.fetchData(annualWriteOffRecordId);\r\n  }\r\n\r\n  onSubmit(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      //Submit annual Write off\r\n      this.uploadFile();\r\n    });\r\n  }\r\n\r\n  uploadFile(): void {\r\n\r\n    const request = {\r\n     writeOffFileTxnId: this.writeOffFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))[0], \r\n     supportingDocs: this.supportingDocsFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id)) \r\n    };\r\n\r\n    console.log(\"request\", request);\r\n\r\n    this.annualWriteOffService.uploadAnnualWriteoffFile(request).subscribe(\r\n      res => {\r\n          console.log(\"res\", res);\r\n          this.toastService.success(\"Annual Write-Off file uploaded successfully: Routed for approval\");\r\n          this.resetForm();\r\n      }, \r\n      error => {\r\n        this.toastService.error(error.error?.error_desc);\r\n      }\r\n    );\r\n  }\r\n\r\n  //after success\r\n  resetForm(): void {\r\n    this.writeOffFileUploadComponent.clearAndReset();\r\n    this.supportingDocsFileUploadComponent.clearAndReset();\r\n  }\r\n  \r\n  //cancel upload\r\n  onCancel(): void {\r\n    this.writeOffFileUploadComponent.onClose();\r\n    this.supportingDocsFileUploadComponent.onClose();\r\n    this.displayAnnualFileUploadDialog.display=false\r\n  }\r\n}\r\n","<p-table [value]='annualWriteOffArray' styleClass='p-datatable-gridlines' [paginator]='true' [rows]='10'\r\n         [rowsPerPageOptions]='[10,25,50]'\r\n         [showCurrentPageReport]='true'\r\n         currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'\r\n         [lazy]=\"true\"\r\n        [totalRecords]='totalRecords'\r\n        [loading]='loading'\r\n        (onLazyLoad)='load($event)'\r\n        (onPage) = \"onPage($event)\">\r\n  <ng-template pTemplate='caption'>\r\n    <div class='grid'>\r\n      <div class='col-6 nsp-align-left flex justify-content-start align-items-center'>\r\n        <button type='button' pButton pRipple icon='pi pi-file-o' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                tooltipPosition='bottom'></button>\r\n      </div>\r\n      <div class='col-6 nsp-align-right'>\r\n        <button pButton label='Upload new file' (click)='onOpen(displayAnnualFileUploadDialog)'\r\n                [style]=\"{'margin-left': '.5em', 'margin-bottom': '.5em'}\">\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template pTemplate='header'>\r\n    <tr>\r\n      <th scope=\"col\" style='width: 60px'>SN</th>\r\n      <th scope=\"col\" pSortableColumn='totalCount'>Total<p-sortIcon field='totalCount'></p-sortIcon>\r\n        <p-columnFilter type=\"text\" field=\"totalCount\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='perfectCount'>Perfect Write-Off<p-sortIcon field='perfectCount'></p-sortIcon>\r\n        <p-columnFilter type=\"text\" field=\"perfectCount\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='discrepancyCount'>Discrepancy Write-Off<p-sortIcon field='discrepancyCount'></p-sortIcon>\r\n        <p-columnFilter type=\"text\" field=\"discrepancyCount\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='failedCount'>Failed Write-Off<p-sortIcon field='failedCount'></p-sortIcon>\r\n        <p-columnFilter type=\"text\" field=\"failedCount\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='submittedDt'>Submitted by<p-sortIcon field='submittedDt'></p-sortIcon>\r\n        <p-columnFilter type=\"date\" field=\"submittedDt\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='submissionReviewedDt'>Approved by<p-sortIcon field='submissionReviewedDt'></p-sortIcon>\r\n        <p-columnFilter type=\"date\" field=\"submissionReviewedDt\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n      <th scope=\"col\" pSortableColumn='status'>Status<p-sortIcon field='status'></p-sortIcon>\r\n        <p-columnFilter type=\"text\" field=\"name\" display=\"menu\" matchMode=\"contains\"></p-columnFilter>\r\n      </th>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='body' let-annualWriteOffRecord let-i='rowIndex'>\r\n    <tr>\r\n      <td><a href='javascript:'\r\n             (click)='onOpenAnnualWriteOffRecord(displayViewAnnualWriteOffDialog, annualWriteOffRecord?.id)'>\r\n        {{ i + 1 }}</a>\r\n      </td>\r\n      <td>{{ annualWriteOffRecord?.totalCount }}</td>\r\n      <td>{{ annualWriteOffRecord?.perfectCount }}</td>\r\n      <td>{{ annualWriteOffRecord?.discrepancyCount }}</td>\r\n      <td>{{ annualWriteOffRecord?.failedCount }}</td>\r\n      <td>{{ annualWriteOffRecord?.submittedBy | defaultString }}\r\n        <br *ngIf='annualWriteOffRecord?.submittedBy'>{{ annualWriteOffRecord?.submittedDt | date:'dd-MM-yyyy \\'(\\'HHmm\\')\\'' | defaultString }}</td>\r\n      <td>{{ annualWriteOffRecord?.submissionReviewedBy | defaultString }}\r\n        <br *ngIf='annualWriteOffRecord?.submissionReviewedBy'>{{ annualWriteOffRecord?.submissionReviewedDt | date:'dd-MM-yyyy \\'(\\'HHmm\\')\\'' | defaultString}}</td>\r\n      <td>{{ n2StatusEnum[annualWriteOffRecord?.status] | defaultString }}</td>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='emptymessage'>\r\n    <tr>\r\n      <td colspan='8'>No Annual Write-off records found.</td>\r\n    </tr>\r\n  </ng-template>\r\n</p-table>\r\n\r\n<p-dialog header='Upload Annual Write-Off' [(visible)]='displayAnnualFileUploadDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '50vw'}\" [draggable]='false' [resizable]='false' [modal]='true'>\r\n\r\n  <form [formGroup]='annualWriteoffUploadsForm'>\r\n    <span>Annual Write-Off File *</span>\r\n    <n2-file-upload formControlName='writeoffFile' id='writeoffFile'\r\n      #annualWriteOffFileUpload [contentHeight]=\"'100px'\"></n2-file-upload>\r\n\r\n    <br>\r\n    <span>Supporting Documents *</span>\r\n    <n2-file-upload formControlName='supportingDocuments' id='supportingDocuments'\r\n                    #annualWriteOffSupportingDocuments [contentHeight]=\"'200px'\"></n2-file-upload>\r\n  </form>\r\n  <ng-template pTemplate='footer'>\r\n    <button pButton class='p-button-danger' label='Cancel' (click)='onCancel()'\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n    <button pButton label='Submit' (click)=\"onSubmit($event, 'annualWriteOffUpload', displayAnnualFileUploadDialog)\"\r\n            [disabled]='!annualWriteoffUploadsForm.valid'\r\n            [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n  </ng-template>\r\n  <p-confirmPopup key='annualWriteOffUpload'></p-confirmPopup>\r\n</p-dialog>\r\n\r\n<p-dialog header='Annual Write-Off Details' [(visible)]='displayViewAnnualWriteOffDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '97vw', height: '100vh'}\" [draggable]='false' [resizable]='false' [modal]='true'\r\n          position='bottom-right'>\r\n\r\n  <n2-view-annual-write-off #viewAnnualWriteOff></n2-view-annual-write-off>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
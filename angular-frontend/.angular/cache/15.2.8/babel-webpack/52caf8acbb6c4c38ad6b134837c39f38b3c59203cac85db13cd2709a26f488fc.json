{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RolePopupComponent = exports.RoleCreateDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst resource_model_1 = require(\"../resource/resource.model\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@ng-bootstrap/ng-bootstrap\"));\nconst i2 = tslib_1.__importStar(require(\"app/core/util/alert.service\"));\nconst i3 = tslib_1.__importStar(require(\"./role.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i9 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i10 = tslib_1.__importStar(require(\"./role-popup.service\"));\nfunction RoleCreateDialogComponent_option_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const applicationOption_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", applicationOption_r2.appId === (ctx_r1.role.application == null ? null : ctx_r1.role.application.appId) ? ctx_r1.role.application : applicationOption_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n            \", applicationOption_r2.appName, \"\\n          \");\n  }\n}\nclass RoleCreateDialogComponent {\n  constructor(activeModal, alertService, roleService, eventManager, router) {\n    this.activeModal = activeModal;\n    this.alertService = alertService;\n    this.roleService = roleService;\n    this.eventManager = eventManager;\n    this.router = router;\n    this.role = new resource_model_1.Resource();\n    this.applications = [];\n    this.groups = [];\n  }\n  ngOnInit() {\n    this.isSaving = false;\n    this.roleService.findAllApplication().subscribe(res => {\n      this.applications = res.body;\n    }, res => this.onError(res.body));\n  }\n  trackApplicationById(index, item) {\n    return item.id;\n  }\n  clear() {\n    this.activeModal.dismiss('cancel');\n    this.backToPrevious();\n  }\n  save() {\n    this.isSaving = true;\n    this.subscribeToSaveResponse(this.roleService.create(this.role));\n  }\n  lowerCaseRoleId() {\n    if (this.role.resourceId) {\n      this.role.resourceId = this.role.resourceId.toLowerCase();\n    }\n  }\n  subscribeToSaveResponse(result) {\n    result.subscribe(res => this.onSaveSuccess(res), res => this.onSaveError(res));\n  }\n  onSaveSuccess(result) {\n    this.isSaving = false;\n    this.eventManager.broadcast({\n      name: 'roleListModification',\n      content: 'OK'\n    });\n    this.activeModal.dismiss(result);\n    this.backToPrevious();\n  }\n  onSaveError(error) {\n    this.isSaving = false;\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\n    document.getElementById('appDialogErrorMsg').innerHTML = appDialogErrorMsg;\n    document.getElementById('appDialogErrorMsg').style.display = 'block';\n  }\n  onError(error) {\n    this.alertService.addAlert({\n      type: 'danger',\n      translationKey: error.message\n    });\n  }\n  backToPrevious() {\n    window.history.back();\n  }\n}\nexports.RoleCreateDialogComponent = RoleCreateDialogComponent;\nRoleCreateDialogComponent.ɵfac = function RoleCreateDialogComponent_Factory(t) {\n  return new (t || RoleCreateDialogComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.RoleService), i0.ɵɵdirectiveInject(i4.EventManager), i0.ɵɵdirectiveInject(i5.Router));\n};\nRoleCreateDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RoleCreateDialogComponent,\n  selectors: [[\"ic-role-create-dialog\"]],\n  decls: 84,\n  vars: 14,\n  consts: [[\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editForm\", \"ngForm\"], [1, \"modal-header\"], [\"id\", \"myResourceLabel\", \"icTranslate\", \"acmAdmin.role.home.createLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [\"id\", \"appDialogErrorMsg\", 1, \"alert-dismissible\", \"alert-danger\", \"alert\", 2, \"display\", \"none\"], [1, \"modal-body\"], [1, \"row\"], [1, \"rounded-pill\", \"col-md-6\"], [\"icTranslate\", \"acmAdmin.role.application\", \"for\", \"field_application\", 1, \"form-control-label\"], [\"id\", \"field_application\", \"name\", \"application\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"icTranslate\", \"acmAdmin.role.resourceId\", \"for\", \"field_resourceId\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"resourceId\", \"id\", \"field_resourceId\", \"required\", \"\", \"pattern\", \"^(role){1}-[A-Za-z0-9-]*\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"blur\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [1, \"form-text\", \"text-danger\", 3, \"hidden\"], [\"icTranslate\", \"acmAdmin.role.resourceName\", \"for\", \"field_resourceName\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"resourceName\", \"id\", \"field_resourceName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"id\", \"saveNewRole\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [3, \"icon\"], [\"icTranslate\", \"entity.action.save\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"icTranslate\", \"entity.action.cancel\"]],\n  template: function RoleCreateDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function RoleCreateDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(2, \"\\n  \");\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"h4\", 3);\n      i0.ɵɵtext(6, \"Create a Role\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function RoleCreateDialogComponent_Template_button_click_8_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(9, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\\n  \");\n      i0.ɵɵelement(12, \"p\", 5);\n      i0.ɵɵtext(13, \"\\n\\n  \");\n      i0.ɵɵelementStart(14, \"div\", 6);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵtext(17, \"\\n      \");\n      i0.ɵɵelementStart(18, \"div\", 8);\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"label\", 9);\n      i0.ɵɵtext(21, \"Application\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n        \");\n      i0.ɵɵelementStart(23, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function RoleCreateDialogComponent_Template_select_ngModelChange_23_listener($event) {\n        return ctx.role.application = $event;\n      });\n      i0.ɵɵtext(24, \"\\n          \");\n      i0.ɵɵelement(25, \"option\", 11);\n      i0.ɵɵtext(26, \"\\n          \");\n      i0.ɵɵtemplate(27, RoleCreateDialogComponent_option_27_Template, 2, 2, \"option\", 12);\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(30, \"\\n\\n      \");\n      i0.ɵɵelementStart(31, \"div\", 8);\n      i0.ɵɵtext(32, \"\\n        \");\n      i0.ɵɵelementStart(33, \"label\", 13);\n      i0.ɵɵtext(34, \"Role ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35, \"\\n        \");\n      i0.ɵɵelementStart(36, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function RoleCreateDialogComponent_Template_input_ngModelChange_36_listener($event) {\n        return ctx.role.resourceId = $event;\n      })(\"blur\", function RoleCreateDialogComponent_Template_input_blur_36_listener() {\n        return ctx.lowerCaseRoleId();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n        \");\n      i0.ɵɵelementStart(38, \"div\", 15);\n      i0.ɵɵtext(39, \"\\n          \");\n      i0.ɵɵelementStart(40, \"small\", 16);\n      i0.ɵɵtext(41, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n          \");\n      i0.ɵɵelementStart(43, \"small\", 17);\n      i0.ɵɵtext(44, \"\\n            This field must start with 'role-' and only allowed characters: A-Z a-z 0-9 -.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(45, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(47, \"\\n\\n      \");\n      i0.ɵɵelementStart(48, \"div\", 8);\n      i0.ɵɵtext(49, \"\\n        \");\n      i0.ɵɵelementStart(50, \"label\", 18);\n      i0.ɵɵtext(51, \"Role Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n        \");\n      i0.ɵɵelementStart(53, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function RoleCreateDialogComponent_Template_input_ngModelChange_53_listener($event) {\n        return ctx.role.resourceName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(54, \"\\n        \");\n      i0.ɵɵelementStart(55, \"div\", 15);\n      i0.ɵɵtext(56, \"\\n          \");\n      i0.ɵɵelementStart(57, \"small\", 16);\n      i0.ɵɵtext(58, \"\\n            This field is required.\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(61, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n  \");\n      i0.ɵɵelementStart(64, \"div\", 20);\n      i0.ɵɵtext(65, \"\\n    \");\n      i0.ɵɵelementStart(66, \"button\", 21);\n      i0.ɵɵtext(67, \"\\n      \");\n      i0.ɵɵelement(68, \"fa-icon\", 22);\n      i0.ɵɵtext(69, \"\\u00A0\");\n      i0.ɵɵelementStart(70, \"span\", 23);\n      i0.ɵɵtext(71, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(72, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(73, \"\\n    \");\n      i0.ɵɵelementStart(74, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function RoleCreateDialogComponent_Template_button_click_74_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(75, \"\\n      \");\n      i0.ɵɵelement(76, \"fa-icon\", 22);\n      i0.ɵɵtext(77, \"\\u00A0\");\n      i0.ɵɵelementStart(78, \"span\", 25);\n      i0.ɵɵtext(79, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(80, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(81, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(82, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(83, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngModel\", ctx.role.application);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngValue\", null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.applications)(\"ngForTrackBy\", ctx.trackApplicationById);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.role.resourceId);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourceId == null ? null : _r0.controls.resourceId.dirty) && (_r0.controls.resourceId == null ? null : _r0.controls.resourceId.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceId == null ? null : _r0.controls.resourceId.errors == null ? null : _r0.controls.resourceId.errors.required));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceId == null ? null : _r0.controls.resourceId.errors == null ? null : _r0.controls.resourceId.errors.pattern));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.role.resourceName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !((_r0.controls.resourceName == null ? null : _r0.controls.resourceName.dirty) && (_r0.controls.resourceName == null ? null : _r0.controls.resourceName.invalid)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(_r0.controls.resourceName == null ? null : _r0.controls.resourceName.errors == null ? null : _r0.controls.resourceName.errors.required));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", _r0.form.invalid || ctx.isSaving);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"icon\", \"save\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"icon\", \"ban\");\n    }\n  },\n  dependencies: [i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.PatternValidator, i6.NgModel, i6.NgForm, i7.NgForOf, i8.FaIconComponent, i9.TranslateDirective],\n  encapsulation: 2\n});\nclass RolePopupComponent {\n  constructor(route, rolePopupService) {\n    this.route = route;\n    this.rolePopupService = rolePopupService;\n  }\n  ngOnInit() {\n    this.routeSub = this.route.params.subscribe(() => {\n      this.rolePopupService.open(RoleCreateDialogComponent);\n    });\n  }\n  ngOnDestroy() {\n    this.routeSub.unsubscribe();\n  }\n}\nexports.RolePopupComponent = RolePopupComponent;\nRolePopupComponent.ɵfac = function RolePopupComponent_Factory(t) {\n  return new (t || RolePopupComponent)(i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i10.RolePopupService));\n};\nRolePopupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RolePopupComponent,\n  selectors: [[\"ic-role-popup\"]],\n  decls: 0,\n  vars: 0,\n  template: function RolePopupComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","RoleCreateDialogComponent","constructor","activeModal","alertService","roleService","eventManager","router","resource_model_1","ngOnInit","isSaving","findAllApplication","subscribe","res","applications","body","onError","trackApplicationById","index","item","id","clear","dismiss","backToPrevious","save","subscribeToSaveResponse","create","role","lowerCaseRoleId","resourceId","toLowerCase","result","onSaveSuccess","onSaveError","broadcast","name","content","error","appDialogErrorMsg","headers","get","document","getElementById","innerHTML","style","display","addAlert","type","translationKey","message","window","history","back","exports","selectors","decls","vars","consts","template","ctx","RolePopupComponent","route","rolePopupService","routeSub","params","open","ngOnDestroy","unsubscribe","encapsulation"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\role\\role-create-dialog.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\role\\role-create-dialog.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { AlertService } from 'app/core/util/alert.service';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { Resource } from '../resource/resource.model';\r\nimport { Application } from '../application';\r\nimport { Group } from '../group';\r\nimport { RoleService } from './role.service';\r\nimport { RolePopupService } from './role-popup.service';\r\n\r\n@Component({\r\n  selector: 'ic-role-create-dialog',\r\n  templateUrl: './role-create-dialog.component.html',\r\n})\r\nexport class RoleCreateDialogComponent implements OnInit {\r\n  role: Resource = new Resource();\r\n  isSaving?: boolean;\r\n\r\n  applications: Application[] = [];\r\n\r\n  groups: Group[] = [];\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private alertService: AlertService,\r\n    private roleService: RoleService,\r\n    private eventManager: EventManager,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isSaving = false;\r\n    this.roleService.findAllApplication().subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        this.applications = res.body;\r\n      },\r\n      (res: HttpResponse<any>) => this.onError(res.body)\r\n    );\r\n  }\r\n\r\n  trackApplicationById(index: number, item: Application): any {\r\n    return item.id;\r\n  }\r\n\r\n  clear(): void {\r\n    this.activeModal.dismiss('cancel');\r\n    this.backToPrevious();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    this.subscribeToSaveResponse(this.roleService.create(this.role));\r\n  }\r\n\r\n  lowerCaseRoleId(): void {\r\n    if (this.role.resourceId) {\r\n      this.role.resourceId = this.role.resourceId.toLowerCase();\r\n    }\r\n  }\r\n\r\n  private subscribeToSaveResponse(result: Observable<Resource>): void {\r\n    result.subscribe(\r\n      (res: Resource) => this.onSaveSuccess(res),\r\n      (res: HttpResponse<any>) => this.onSaveError(res)\r\n    );\r\n  }\r\n\r\n  private onSaveSuccess(result: Resource): void {\r\n    this.isSaving = false;\r\n    this.eventManager.broadcast({ name: 'roleListModification', content: 'OK' });\r\n    this.activeModal.dismiss(result);\r\n    this.backToPrevious();\r\n  }\r\n\r\n  private onSaveError(error: any): void {\r\n    this.isSaving = false;\r\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\r\n    document.getElementById('appDialogErrorMsg')!.innerHTML = appDialogErrorMsg;\r\n    document.getElementById('appDialogErrorMsg')!.style.display = 'block';\r\n  }\r\n\r\n  private onError(error: any): void {\r\n    this.alertService.addAlert({ type: 'danger', translationKey: error.message });\r\n  }\r\n\r\n  private backToPrevious(): void {\r\n    window.history.back();\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'ic-role-popup',\r\n  template: '',\r\n})\r\nexport class RolePopupComponent implements OnInit, OnDestroy {\r\n  routeSub: any;\r\n\r\n  constructor(private route: ActivatedRoute, private rolePopupService: RolePopupService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.routeSub = this.route.params.subscribe(() => {\r\n      this.rolePopupService.open(RoleCreateDialogComponent as Component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n}\r\n","<form name=\"editForm\" role=\"form\"  (ngSubmit)=\"save()\" #editForm=\"ngForm\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"myResourceLabel\" icTranslate=\"acmAdmin.role.home.createLabel\">Create a Role</h4>\r\n    <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-hidden=\"true\" (click)=\"clear()\">&times;</button>\r\n  </div>\r\n\r\n  <p style=\"display: none\" id=\"appDialogErrorMsg\" class=\"alert-dismissible alert-danger alert\"></p>\r\n\r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.role.application\" for=\"field_application\">Application</label>\r\n        <select class=\"form-control\" id=\"field_application\" name=\"application\" [(ngModel)]=\"role.application\" required>\r\n          <option [ngValue]=\"null\"></option>\r\n          <option\r\n            [ngValue]=\"applicationOption.appId === role.application?.appId ? role.application : applicationOption\"\r\n            *ngFor=\"let applicationOption of applications; trackBy: trackApplicationById\"\r\n          >\r\n            {{ applicationOption.appName }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.role.resourceId\" for=\"field_resourceId\">Role ID</label>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          name=\"resourceId\"\r\n          id=\"field_resourceId\"\r\n          [(ngModel)]=\"role.resourceId\"\r\n          required\r\n          pattern=\"^(role){1}-[A-Za-z0-9-]*\"\r\n          (blur)=\"lowerCaseRoleId()\"\r\n        />\r\n        <div [hidden]=\"!(editForm.controls.resourceId?.dirty && editForm.controls.resourceId?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourceId?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n          <small class=\"form-text text-danger\" [hidden]=\"!editForm.controls.resourceId?.errors?.pattern\">\r\n            This field must start with 'role-' and only allowed characters: A-Z a-z 0-9 -.\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"acmAdmin.role.resourceName\" for=\"field_resourceName\">Role Name</label>\r\n        <input type=\"text\" class=\"form-control\" name=\"resourceName\" id=\"field_resourceName\" [(ngModel)]=\"role.resourceName\" required />\r\n        <div [hidden]=\"!(editForm.controls.resourceName?.dirty && editForm.controls.resourceName?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.resourceName?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button id=\"saveNewRole\" type=\"submit\" [disabled]=\"editForm.form.invalid || isSaving\" class=\"btn btn-primary btn-sm\">\r\n      <fa-icon [icon]=\"'save'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.save\">Save</span>\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-bs-dismiss=\"modal\" (click)=\"clear()\">\r\n      <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
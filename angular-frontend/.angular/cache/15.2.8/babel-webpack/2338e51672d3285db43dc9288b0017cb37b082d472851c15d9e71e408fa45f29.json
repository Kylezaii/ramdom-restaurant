{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SettingsComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst language_constants_1 = require(\"app/config/language.constants\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/core/auth/account.service\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"@ngx-translate/core\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i5 = tslib_1.__importStar(require(\"../../shared/language/translate.directive\"));\nconst i6 = tslib_1.__importStar(require(\"../../shared/alert/alert-error.component\"));\nconst i7 = tslib_1.__importStar(require(\"../../shared/language/find-language-from-key.pipe\"));\nconst _c0 = function (a0) {\n  return {\n    username: a0\n  };\n};\nfunction SettingsComponent_h2_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 5);\n    i0.ɵɵtext(1, \"\\n        User settings for [\");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"]\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction1(2, _c0, ctx_r0.account.login));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.account.login);\n  }\n}\nfunction SettingsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"Settings saved!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_10_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 21);\n    i0.ɵɵtext(1, \"\\n              Your first name is required.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_10_small_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 22);\n    i0.ɵɵtext(1, \"\\n              Your first name is required to be at least 1 character.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_10_small_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 23);\n    i0.ɵɵtext(1, \"\\n              Your first name cannot be longer than 50 characters.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵtemplate(2, SettingsComponent_form_12_div_10_small_2_Template, 2, 0, \"small\", 18);\n    i0.ɵɵtext(3, \"\\n\\n            \");\n    i0.ɵɵtemplate(4, SettingsComponent_form_12_div_10_small_4_Template, 2, 0, \"small\", 19);\n    i0.ɵɵtext(5, \"\\n\\n            \");\n    i0.ɵɵtemplate(6, SettingsComponent_form_12_div_10_small_6_Template, 2, 0, \"small\", 20);\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r3.settingsForm.get(\"firstName\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors.required);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r3.settingsForm.get(\"firstName\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors.minlength);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r3.settingsForm.get(\"firstName\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors.maxlength);\n  }\n}\nfunction SettingsComponent_form_12_div_21_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 27);\n    i0.ɵɵtext(1, \"\\n              Your last name is required.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_21_small_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 28);\n    i0.ɵɵtext(1, \"\\n              Your last name is required to be at least 1 character.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_21_small_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 29);\n    i0.ɵɵtext(1, \"\\n              Your last name cannot be longer than 50 characters.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵtemplate(2, SettingsComponent_form_12_div_21_small_2_Template, 2, 0, \"small\", 24);\n    i0.ɵɵtext(3, \"\\n\\n            \");\n    i0.ɵɵtemplate(4, SettingsComponent_form_12_div_21_small_4_Template, 2, 0, \"small\", 25);\n    i0.ɵɵtext(5, \"\\n\\n            \");\n    i0.ɵɵtemplate(6, SettingsComponent_form_12_div_21_small_6_Template, 2, 0, \"small\", 26);\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r4.settingsForm.get(\"lastName\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors.required);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r4.settingsForm.get(\"lastName\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors.minlength);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r4.settingsForm.get(\"lastName\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors.maxlength);\n  }\n}\nfunction SettingsComponent_form_12_div_32_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 34);\n    i0.ɵɵtext(1, \"\\n              Your email is required.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_32_small_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 35);\n    i0.ɵɵtext(1, \"\\n              Your email is invalid.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_32_small_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 36);\n    i0.ɵɵtext(1, \"\\n              Your email is required to be at least 5 characters.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_32_small_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 37);\n    i0.ɵɵtext(1, \"\\n              Your email cannot be longer than 100 characters.\\n            \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_form_12_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵtemplate(2, SettingsComponent_form_12_div_32_small_2_Template, 2, 0, \"small\", 30);\n    i0.ɵɵtext(3, \"\\n\\n            \");\n    i0.ɵɵtemplate(4, SettingsComponent_form_12_div_32_small_4_Template, 2, 0, \"small\", 31);\n    i0.ɵɵtext(5, \"\\n\\n            \");\n    i0.ɵɵtemplate(6, SettingsComponent_form_12_div_32_small_6_Template, 2, 0, \"small\", 32);\n    i0.ɵɵtext(7, \"\\n\\n            \");\n    i0.ɵɵtemplate(8, SettingsComponent_form_12_div_32_small_8_Template, 2, 0, \"small\", 33);\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    let tmp_3_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r5.settingsForm.get(\"email\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors.required);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r5.settingsForm.get(\"email\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r5.settingsForm.get(\"email\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors.minlength);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx_r5.settingsForm.get(\"email\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors.maxlength);\n  }\n}\nfunction SettingsComponent_form_12_div_35_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"findLanguageFromKey\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const language_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", language_r18);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, language_r18));\n  }\n}\nfunction SettingsComponent_form_12_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"label\", 38);\n    i0.ɵɵtext(3, \"Language\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"select\", 39);\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵtemplate(7, SettingsComponent_form_12_div_35_option_7_Template, 3, 4, \"option\", 40);\n    i0.ɵɵtext(8, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.languages);\n  }\n}\nfunction SettingsComponent_form_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function SettingsComponent_form_12_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.save());\n    });\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3, \"\\n          \");\n    i0.ɵɵelementStart(4, \"label\", 9);\n    i0.ɵɵtext(5, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵelement(7, \"input\", 10);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵtext(9, \"\\n\\n          \");\n    i0.ɵɵtemplate(10, SettingsComponent_form_12_div_10_Template, 8, 3, \"div\", 11);\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n\\n        \");\n    i0.ɵɵelementStart(13, \"div\", 8);\n    i0.ɵɵtext(14, \"\\n          \");\n    i0.ɵɵelementStart(15, \"label\", 12);\n    i0.ɵɵtext(16, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n          \");\n    i0.ɵɵelement(18, \"input\", 13);\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵtext(20, \"\\n\\n          \");\n    i0.ɵɵtemplate(21, SettingsComponent_form_12_div_21_Template, 8, 3, \"div\", 11);\n    i0.ɵɵtext(22, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n\\n        \");\n    i0.ɵɵelementStart(24, \"div\", 8);\n    i0.ɵɵtext(25, \"\\n          \");\n    i0.ɵɵelementStart(26, \"label\", 14);\n    i0.ɵɵtext(27, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n          \");\n    i0.ɵɵelement(29, \"input\", 15);\n    i0.ɵɵpipe(30, \"translate\");\n    i0.ɵɵtext(31, \"\\n\\n          \");\n    i0.ɵɵtemplate(32, SettingsComponent_form_12_div_32_Template, 10, 4, \"div\", 11);\n    i0.ɵɵtext(33, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n\\n        \");\n    i0.ɵɵtemplate(35, SettingsComponent_form_12_div_35_Template, 10, 1, \"div\", 16);\n    i0.ɵɵtext(36, \"\\n\\n        \");\n    i0.ɵɵelementStart(37, \"button\", 17);\n    i0.ɵɵtext(38, \"\\n          Save\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.settingsForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(8, 9, \"settings.form.firstname.placeholder\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.settingsForm.get(\"firstName\").invalid && (ctx_r2.settingsForm.get(\"firstName\").dirty || ctx_r2.settingsForm.get(\"firstName\").touched));\n    i0.ɵɵadvance(8);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(19, 11, \"settings.form.lastname.placeholder\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.settingsForm.get(\"lastName\").invalid && (ctx_r2.settingsForm.get(\"lastName\").dirty || ctx_r2.settingsForm.get(\"lastName\").touched));\n    i0.ɵɵadvance(8);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(30, 13, \"global.form.email.placeholder\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.settingsForm.get(\"email\").invalid && (ctx_r2.settingsForm.get(\"email\").dirty || ctx_r2.settingsForm.get(\"email\").touched));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.languages && ctx_r2.languages.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.settingsForm.invalid);\n  }\n}\nclass SettingsComponent {\n  constructor(accountService, fb, translateService) {\n    this.accountService = accountService;\n    this.fb = fb;\n    this.translateService = translateService;\n    this.success = false;\n    this.languages = language_constants_1.LANGUAGES;\n    this.settingsForm = this.fb.group({\n      firstName: ['', [forms_1.Validators.required, forms_1.Validators.minLength(1), forms_1.Validators.maxLength(50)]],\n      lastName: ['', [forms_1.Validators.required, forms_1.Validators.minLength(1), forms_1.Validators.maxLength(50)]],\n      email: ['', [forms_1.Validators.required, forms_1.Validators.minLength(5), forms_1.Validators.maxLength(254), forms_1.Validators.email]],\n      langKey: ['']\n    });\n  }\n  ngOnInit() {\n    this.accountService.identity().subscribe(account => {\n      if (account) {\n        this.settingsForm.patchValue({\n          firstName: account.firstName,\n          lastName: account.lastName,\n          email: account.email,\n          langKey: account.langKey\n        });\n        this.account = account;\n      }\n    });\n  }\n  save() {\n    this.success = false;\n    this.account.firstName = this.settingsForm.get('firstName').value;\n    this.account.lastName = this.settingsForm.get('lastName').value;\n    this.account.email = this.settingsForm.get('email').value;\n    this.account.langKey = this.settingsForm.get('langKey').value;\n    this.accountService.save(this.account).subscribe(() => {\n      this.success = true;\n      this.accountService.authenticate(this.account);\n      if (this.account.langKey !== this.translateService.currentLang) {\n        this.translateService.use(this.account.langKey);\n      }\n    });\n  }\n}\nexports.SettingsComponent = SettingsComponent;\nSettingsComponent.ɵfac = function SettingsComponent_Factory(t) {\n  return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.TranslateService));\n};\nSettingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SettingsComponent,\n  selectors: [[\"ic-settings\"]],\n  decls: 17,\n  vars: 3,\n  consts: [[1, \"row\", \"justify-content-center\"], [1, \"col-md-8\"], [\"icTranslate\", \"settings.title\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", \"icTranslate\", \"settings.messages.success\", 4, \"ngIf\"], [\"name\", \"form\", \"role\", \"form\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"icTranslate\", \"settings.title\", 3, \"translateValues\"], [\"icTranslate\", \"settings.messages.success\", 1, \"alert\", \"alert-success\"], [\"name\", \"form\", \"role\", \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"rounded-pill\"], [\"for\", \"firstName\", \"icTranslate\", \"settings.form.firstname\", 1, \"form-control-label\"], [\"type\", \"text\", \"id\", \"firstName\", \"name\", \"firstName\", \"formControlName\", \"firstName\", \"data-cy\", \"firstname\", 1, \"form-control\", 3, \"placeholder\"], [4, \"ngIf\"], [\"for\", \"lastName\", \"icTranslate\", \"settings.form.lastname\", 1, \"form-control-label\"], [\"type\", \"text\", \"id\", \"lastName\", \"name\", \"lastName\", \"formControlName\", \"lastName\", \"data-cy\", \"lastname\", 1, \"form-control\", 3, \"placeholder\"], [\"for\", \"email\", \"icTranslate\", \"global.form.email.label\", 1, \"form-control-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"formControlName\", \"email\", \"data-cy\", \"email\", 1, \"form-control\", 3, \"placeholder\"], [\"class\", \"rounded-pill\", 4, \"ngIf\"], [\"type\", \"submit\", \"icTranslate\", \"settings.form.button\", \"data-cy\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.firstname.required\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.firstname.minlength\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.firstname.maxlength\", 4, \"ngIf\"], [\"icTranslate\", \"settings.messages.validate.firstname.required\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"settings.messages.validate.firstname.minlength\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"settings.messages.validate.firstname.maxlength\", 1, \"form-text\", \"text-danger\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.lastname.required\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.lastname.minlength\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"settings.messages.validate.lastname.maxlength\", 4, \"ngIf\"], [\"icTranslate\", \"settings.messages.validate.lastname.required\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"settings.messages.validate.lastname.minlength\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"settings.messages.validate.lastname.maxlength\", 1, \"form-text\", \"text-danger\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"global.messages.validate.email.required\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"global.messages.validate.email.invalid\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"global.messages.validate.email.minlength\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", \"icTranslate\", \"global.messages.validate.email.maxlength\", 4, \"ngIf\"], [\"icTranslate\", \"global.messages.validate.email.required\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"global.messages.validate.email.invalid\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"global.messages.validate.email.minlength\", 1, \"form-text\", \"text-danger\"], [\"icTranslate\", \"global.messages.validate.email.maxlength\", 1, \"form-text\", \"text-danger\"], [\"for\", \"langKey\", \"icTranslate\", \"settings.form.language\"], [\"id\", \"langKey\", \"name\", \"langKey\", \"formControlName\", \"langKey\", \"data-cy\", \"langKey\", 1, \"form-control\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n  template: function SettingsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"div\", 1);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵtemplate(6, SettingsComponent_h2_6_Template, 5, 4, \"h2\", 2);\n      i0.ɵɵtext(7, \"\\n\\n      \");\n      i0.ɵɵtemplate(8, SettingsComponent_div_8_Template, 5, 0, \"div\", 3);\n      i0.ɵɵtext(9, \"\\n\\n      \");\n      i0.ɵɵelement(10, \"ic-alert-error\");\n      i0.ɵɵtext(11, \"\\n\\n      \");\n      i0.ɵɵtemplate(12, SettingsComponent_form_12_Template, 40, 15, \"form\", 4);\n      i0.ɵɵtext(13, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.account);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.success);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.account);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i4.NgForOf, i4.NgIf, i2.FormGroupDirective, i2.FormControlName, i5.TranslateDirective, i6.AlertErrorComponent, i3.TranslatePipe, i7.FindLanguageFromKeyPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","SettingsComponent","constructor","accountService","fb","translateService","language_constants_1","group","firstName","forms_1","required","minLength","maxLength","lastName","email","langKey","ngOnInit","identity","subscribe","account","settingsForm","patchValue","save","success","get","value","authenticate","currentLang","use","exports","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\account\\settings\\settings.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\account\\settings\\settings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { Account } from 'app/core/auth/account.model';\r\nimport { LANGUAGES } from 'app/config/language.constants';\r\n\r\n@Component({\r\n  selector: 'ic-settings',\r\n  templateUrl: './settings.component.html',\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n\r\n  account!: Account;\r\n  success = false;\r\n  languages = LANGUAGES;\r\n  settingsForm = this.fb.group({\r\n    firstName: ['', [Validators.required, Validators.minLength(1), Validators.maxLength(50)]],\r\n    lastName: ['', [Validators.required, Validators.minLength(1), Validators.maxLength(50)]],\r\n    email: ['', [Validators.required, Validators.minLength(5), Validators.maxLength(254), Validators.email]],\r\n    langKey: [''],\r\n  });\r\n\r\n  constructor(private accountService: AccountService, private fb: FormBuilder, private translateService: TranslateService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.accountService.identity().subscribe(account => {\r\n      if (account) {\r\n        this.settingsForm.patchValue({\r\n          firstName: account.firstName,\r\n          lastName: account.lastName,\r\n          email: account.email,\r\n          langKey: account.langKey,\r\n        });\r\n\r\n        this.account = account;\r\n      }\r\n    });\r\n  }\r\n\r\n  save(): void {\r\n    this.success = false;\r\n\r\n    this.account.firstName = this.settingsForm.get('firstName')!.value;\r\n    this.account.lastName = this.settingsForm.get('lastName')!.value;\r\n    this.account.email = this.settingsForm.get('email')!.value;\r\n    this.account.langKey = this.settingsForm.get('langKey')!.value;\r\n\r\n    this.accountService.save(this.account).subscribe(() => {\r\n      this.success = true;\r\n\r\n      this.accountService.authenticate(this.account);\r\n\r\n      if (this.account.langKey !== this.translateService.currentLang) {\r\n        this.translateService.use(this.account.langKey);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div>\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-8\">\r\n      <h2 icTranslate=\"settings.title\" [translateValues]=\"{ username: account.login }\" *ngIf=\"account\">\r\n        User settings for [<strong>{{ account.login }}</strong\r\n        >]\r\n      </h2>\r\n\r\n      <div class=\"alert alert-success\" *ngIf=\"success\" icTranslate=\"settings.messages.success\">\r\n        <strong>Settings saved!</strong>\r\n      </div>\r\n\r\n      <ic-alert-error></ic-alert-error>\r\n\r\n      <form name=\"form\" role=\"form\" (ngSubmit)=\"save()\" [formGroup]=\"settingsForm\" *ngIf=\"account\" >\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"firstName\" icTranslate=\"settings.form.firstname\">First Name</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"firstName\"\r\n            name=\"firstName\"\r\n            placeholder=\"{{ 'settings.form.firstname.placeholder' | translate }}\"\r\n            formControlName=\"firstName\"\r\n            data-cy=\"firstname\"\r\n          />\r\n\r\n          <div\r\n            *ngIf=\"\r\n              settingsForm.get('firstName')!.invalid && (settingsForm.get('firstName')!.dirty || settingsForm.get('firstName')!.touched)\r\n            \"\r\n          >\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('firstName')?.errors?.required\"\r\n              icTranslate=\"settings.messages.validate.firstname.required\"\r\n            >\r\n              Your first name is required.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('firstName')?.errors?.minlength\"\r\n              icTranslate=\"settings.messages.validate.firstname.minlength\"\r\n            >\r\n              Your first name is required to be at least 1 character.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('firstName')?.errors?.maxlength\"\r\n              icTranslate=\"settings.messages.validate.firstname.maxlength\"\r\n            >\r\n              Your first name cannot be longer than 50 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"lastName\" icTranslate=\"settings.form.lastname\">Last Name</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"lastName\"\r\n            name=\"lastName\"\r\n            placeholder=\"{{ 'settings.form.lastname.placeholder' | translate }}\"\r\n            formControlName=\"lastName\"\r\n            data-cy=\"lastname\"\r\n          />\r\n\r\n          <div\r\n            *ngIf=\"settingsForm.get('lastName')!.invalid && (settingsForm.get('lastName')!.dirty || settingsForm.get('lastName')!.touched)\"\r\n          >\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('lastName')?.errors?.required\"\r\n              icTranslate=\"settings.messages.validate.lastname.required\"\r\n            >\r\n              Your last name is required.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('lastName')?.errors?.minlength\"\r\n              icTranslate=\"settings.messages.validate.lastname.minlength\"\r\n            >\r\n              Your last name is required to be at least 1 character.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('lastName')?.errors?.maxlength\"\r\n              icTranslate=\"settings.messages.validate.lastname.maxlength\"\r\n            >\r\n              Your last name cannot be longer than 50 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"rounded-pill\">\r\n          <label class=\"form-control-label\" for=\"email\" icTranslate=\"global.form.email.label\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"{{ 'global.form.email.placeholder' | translate }}\"\r\n            formControlName=\"email\"\r\n            data-cy=\"email\"\r\n          />\r\n\r\n          <div *ngIf=\"settingsForm.get('email')!.invalid && (settingsForm.get('email')!.dirty || settingsForm.get('email')!.touched)\">\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('email')?.errors?.required\"\r\n              icTranslate=\"global.messages.validate.email.required\"\r\n            >\r\n              Your email is required.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('email')?.errors?.email\"\r\n              icTranslate=\"global.messages.validate.email.invalid\"\r\n            >\r\n              Your email is invalid.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('email')?.errors?.minlength\"\r\n              icTranslate=\"global.messages.validate.email.minlength\"\r\n            >\r\n              Your email is required to be at least 5 characters.\r\n            </small>\r\n\r\n            <small\r\n              class=\"form-text text-danger\"\r\n              *ngIf=\"settingsForm.get('email')?.errors?.maxlength\"\r\n              icTranslate=\"global.messages.validate.email.maxlength\"\r\n            >\r\n              Your email cannot be longer than 100 characters.\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"rounded-pill\" *ngIf=\"languages && languages.length > 0\">\r\n          <label for=\"langKey\" icTranslate=\"settings.form.language\">Language</label>\r\n          <select class=\"form-control\" id=\"langKey\" name=\"langKey\" formControlName=\"langKey\" data-cy=\"langKey\">\r\n            <option *ngFor=\"let language of languages\" [value]=\"language\">{{ language | findLanguageFromKey }}</option>\r\n          </select>\r\n        </div>\r\n\r\n        <button type=\"submit\" [disabled]=\"settingsForm.invalid\" class=\"btn btn-primary\" icTranslate=\"settings.form.button\" data-cy=\"submit\">\r\n          Save\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OverpaymentInfoComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst forms_1 = require(\"@angular/forms\");\nconst overpayment_tab_model_1 = require(\"../overpayment-tab/overpayment-tab.model\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i2 = tslib_1.__importStar(require(\"../service/overpayment.service\"));\nconst i3 = tslib_1.__importStar(require(\"../service/refund-history.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/payment/protected-payable/service/protected-payable.service\"));\nconst i5 = tslib_1.__importStar(require(\"../service/payment.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i7 = tslib_1.__importStar(require(\"app/ng-connect\"));\nconst i8 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i9 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i10 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/checkbox\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/dropdown\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i18 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i19 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst i20 = tslib_1.__importStar(require(\"primeng/inputnumber\"));\nconst i21 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i22 = tslib_1.__importStar(require(\"../../../shared/component/file-upload/file-upload.component\"));\nconst i23 = tslib_1.__importStar(require(\"primeng/tabview\"));\nconst i24 = tslib_1.__importStar(require(\"primeng/overlaypanel\"));\nconst i25 = tslib_1.__importStar(require(\"../overpayment-tab/overpayment-tab.component\"));\nconst i26 = tslib_1.__importStar(require(\"../refund-history/refund-history.component\"));\nconst i27 = tslib_1.__importStar(require(\"../instalment-tab/instalment-tab.component\"));\nconst i28 = tslib_1.__importStar(require(\"../protected-payable-tab/protected-payable-tab.component\"));\nconst i29 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"fileUplRefAuto\"];\nconst _c1 = [\"fileUplRefMan\"];\nconst _c2 = [\"ppSuppDocFileUpload\"];\nfunction OverpaymentInfoComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelement(1, \"span\", 57);\n    i0.ɵɵtext(2, \"\\n        \");\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelement(1, \"span\", 58);\n    i0.ɵɵtext(2, \"\\n        \");\n  }\n}\nfunction OverpaymentInfoComponent_p_tabPanel_24_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelement(1, \"span\", 60);\n    i0.ɵɵtext(2, \"\\n        \");\n  }\n}\nfunction OverpaymentInfoComponent_p_tabPanel_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\");\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, OverpaymentInfoComponent_p_tabPanel_24_ng_template_2_Template, 3, 0, \"ng-template\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"n2-instalment-tab\", 59);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"selectedId\", ctx_r2.selectedId);\n  }\n}\nfunction OverpaymentInfoComponent_p_tabPanel_26_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelement(1, \"span\", 61);\n    i0.ɵɵtext(2, \"\\n        \");\n  }\n}\nfunction OverpaymentInfoComponent_p_tabPanel_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\");\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, OverpaymentInfoComponent_p_tabPanel_26_ng_template_2_Template, 3, 0, \"ng-template\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"n2-protected-payable-tab\", 59);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"selectedId\", ctx_r3.selectedId);\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_30_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 67);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_30_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.showProtectPayableDialog());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_30_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 68);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_30_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r27.routeToCrIns());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n      \");\n    i0.ɵɵelementStart(1, \"div\", 62);\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵtemplate(3, OverpaymentInfoComponent_ng_template_30_button_3_Template, 1, 0, \"button\", 63);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵtemplate(5, OverpaymentInfoComponent_ng_template_30_button_5_Template, 1, 0, \"button\", 64);\n    i0.ɵɵtext(6, \"\\n        \");\n    i0.ɵɵelementStart(7, \"button\", 65);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_30_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.showCrRefAutoDialog());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementStart(9, \"button\", 66);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_30_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.showCrRefManDialog());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isNSman);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isNSman);\n  }\n}\nfunction OverpaymentInfoComponent_div_101_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 71);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_div_101_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"label\", 69);\n    i0.ɵɵtext(3, \"MIPS ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"div\", 10);\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelement(7, \"input\", 70);\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵtemplate(9, OverpaymentInfoComponent_div_101_span_9_Template, 2, 0, \"span\", 51);\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r5.createRefundAutoForm.get(\"mipsId\")) == null ? null : tmp_0_0.hasError(\"required\")) && ((tmp_0_0 = ctx_r5.createRefundAutoForm.get(\"mipsId\")) == null ? null : tmp_0_0.dirty));\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_116_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\", 74);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"There will be an excess refund of \", i0.ɵɵpipeBind3(3, 1, ((tmp_0_0 = ctx_r33.createRefundAutoForm.get(\"refundAmt\")) == null ? null : tmp_0_0.value) - ctx_r33.sharedDetails.totalOS, \"SGD\", \"\"), \"\");\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_116_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 72);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, OverpaymentInfoComponent_p_messages_116_ng_template_2_Template, 5, 5, \"ng-template\", 73);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_118_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\", 74);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"There will be an outstanding balance of \", i0.ɵɵpipeBind3(3, 1, ctx_r34.sharedDetails.totalOS - ((tmp_0_0 = ctx_r34.createRefundAutoForm.get(\"refundAmt\")) == null ? null : tmp_0_0.value), \"SGD\", \"\"), \"\");\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_118_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 72);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, OverpaymentInfoComponent_p_messages_118_ng_template_2_Template, 5, 5, \"ng-template\", 73);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_120_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 75);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 76);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementStart(8, \"button\", 77);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_120_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.logForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelement(10, \"p-confirmPopup\", 78);\n    i0.ɵɵtext(11, \"\\n          \");\n    i0.ɵɵelementStart(12, \"button\", 79);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_120_Template_button_click_12_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.confirmRefAuto($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"disabled\", !ctx_r9.isCreateRefundAutoFormValid());\n  }\n}\nfunction OverpaymentInfoComponent_div_142_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 71);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_div_142_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"label\", 80);\n    i0.ɵɵtext(3, \"MIPS ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelement(5, \"input\", 81);\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵtemplate(7, OverpaymentInfoComponent_div_142_span_7_Template, 2, 0, \"span\", 51);\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r11.createRefundManForm.get(\"mipsId\")) == null ? null : tmp_0_0.hasError(\"required\")) && ((tmp_0_0 = ctx_r11.createRefundManForm.get(\"mipsId\")) == null ? null : tmp_0_0.dirty));\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_165_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 107);\n    i0.ɵɵtext(1, \"NRIC\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_165_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"th\", 82);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵtemplate(6, OverpaymentInfoComponent_ng_template_165_th_6_Template, 2, 0, \"th\", 83);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"th\", 84);\n    i0.ɵɵtext(9, \"Discovery Date\");\n    i0.ɵɵelement(10, \"p-sortIcon\", 85);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementStart(12, \"th\", 86);\n    i0.ɵɵtext(13, \"Trg Start\");\n    i0.ɵɵelement(14, \"p-sortIcon\", 87);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"th\", 88);\n    i0.ɵɵtext(17, \"Trg End\");\n    i0.ɵɵelement(18, \"p-sortIcon\", 89);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n            \");\n    i0.ɵɵelementStart(20, \"th\", 90);\n    i0.ɵɵtext(21, \"Type\");\n    i0.ɵɵelement(22, \"p-sortIcon\", 91);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n            \");\n    i0.ɵɵelementStart(24, \"th\", 92);\n    i0.ɵɵtext(25, \"Payment Type\");\n    i0.ɵɵelement(26, \"p-sortIcon\", 93);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n            \");\n    i0.ɵɵelementStart(28, \"th\", 94);\n    i0.ɵɵtext(29, \"Case ID\");\n    i0.ɵɵelement(30, \"p-sortIcon\", 95);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n            \");\n    i0.ɵɵelementStart(32, \"th\", 96);\n    i0.ɵɵtext(33, \"Original Amt\");\n    i0.ɵɵelement(34, \"p-sortIcon\", 97);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n            \");\n    i0.ɵɵelementStart(36, \"th\", 98);\n    i0.ɵɵtext(37, \"Principal O/S\");\n    i0.ɵɵelement(38, \"p-sortIcon\", 99);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n            \");\n    i0.ɵɵelementStart(40, \"th\", 100);\n    i0.ɵɵtext(41, \"Interest O/S\");\n    i0.ɵɵelement(42, \"p-sortIcon\", 101);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n            \");\n    i0.ɵɵelementStart(44, \"th\", 102);\n    i0.ɵɵtext(45, \"Total O/S\");\n    i0.ɵɵelement(46, \"p-sortIcon\", 103);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(47, \"\\n            \");\n    i0.ɵɵelementStart(48, \"th\", 104);\n    i0.ɵɵtext(49, \"Total Refund\");\n    i0.ɵɵelement(50, \"p-sortIcon\", 105);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(51, \"\\n            \");\n    i0.ɵɵelementStart(52, \"th\", 106);\n    i0.ɵɵtext(53, \"Refund Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r14.isNSman);\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_167_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const op_r40 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(op_r40.nric);\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_167_p_inputNumber_55_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-inputNumber\", 111);\n    i0.ɵɵlistener(\"ngModelChange\", function OverpaymentInfoComponent_ng_template_167_p_inputNumber_55_Template_p_inputNumber_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r48);\n      const op_r40 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(op_r40.refundAmt = $event);\n    })(\"onBlur\", function OverpaymentInfoComponent_ng_template_167_p_inputNumber_55_Template_p_inputNumber_onBlur_0_listener($event) {\n      i0.ɵɵrestoreView(_r48);\n      const op_r40 = i0.ɵɵnextContext().$implicit;\n      const ctx_r49 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r49.onBlur($event.target == null ? null : $event.target.value, op_r40.outstandingPrincipalAmt + op_r40.outstandingInterestAmt));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r51 = i0.ɵɵnextContext();\n    const i_r41 = ctx_r51.rowIndex;\n    const op_r40 = ctx_r51.$implicit;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"refundAmtManInput\", i_r41, \"\");\n    i0.ɵɵproperty(\"ngModel\", op_r40.refundAmt)(\"min\", 0)(\"minFractionDigits\", 2)(\"maxFractionDigits\", 2);\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_167_p_checkbox_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r54 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-checkbox\", 112);\n    i0.ɵɵlistener(\"onChange\", function OverpaymentInfoComponent_ng_template_167_p_checkbox_57_Template_p_checkbox_onChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r54);\n      const op_r40 = i0.ɵɵnextContext().$implicit;\n      const ctx_r52 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r52.onChecked($event.checked, op_r40));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r41 = i0.ɵɵnextContext().rowIndex;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"refundAmtManInputCheckbox\", i_r41, \"\");\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_167_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵtemplate(6, OverpaymentInfoComponent_ng_template_167_td_6_Template, 2, 1, \"td\", 4);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n            \");\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n            \");\n    i0.ɵɵelementStart(20, \"td\", 108);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n            \");\n    i0.ɵɵelementStart(23, \"td\");\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n            \");\n    i0.ɵɵelementStart(27, \"td\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n            \");\n    i0.ɵɵelementStart(31, \"td\");\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n            \");\n    i0.ɵɵelementStart(35, \"td\");\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n            \");\n    i0.ɵɵelementStart(39, \"td\");\n    i0.ɵɵtext(40);\n    i0.ɵɵpipe(41, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n            \");\n    i0.ɵɵelementStart(43, \"td\");\n    i0.ɵɵtext(44);\n    i0.ɵɵpipe(45, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \"\\n            \");\n    i0.ɵɵelementStart(47, \"td\");\n    i0.ɵɵtext(48);\n    i0.ɵɵpipe(49, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n            \");\n    i0.ɵɵelementStart(51, \"td\");\n    i0.ɵɵtext(52, \"\\n              \");\n    i0.ɵɵelementStart(53, \"div\");\n    i0.ɵɵtext(54, \"\\n                \");\n    i0.ɵɵtemplate(55, OverpaymentInfoComponent_ng_template_167_p_inputNumber_55_Template, 1, 5, \"p-inputNumber\", 109);\n    i0.ɵɵtext(56, \"\\n                \");\n    i0.ɵɵtemplate(57, OverpaymentInfoComponent_ng_template_167_p_checkbox_57_Template, 1, 1, \"p-checkbox\", 110);\n    i0.ɵɵtext(58, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n        \");\n  }\n  if (rf & 2) {\n    const op_r40 = ctx.$implicit;\n    const i_r41 = ctx.rowIndex;\n    const ctx_r15 = i0.ɵɵnextContext();\n    let tmp_13_0;\n    let tmp_14_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r41 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r15.isNSman);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 15, op_r40.discoveryDate, \"dd-MM-yyy\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 18, op_r40.trgStart, \"dd-MM-yyy\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 21, op_r40.trgEnd, \"dd-MM-yyy\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r15.OverpaymentType[op_r40.overpaymentType]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 24, op_r40.paymentType));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 26, op_r40.caseId));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(33, 28, op_r40.overpaymentAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(37, 32, op_r40.outstandingPrincipalAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(41, 36, op_r40.outstandingInterestAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(45, 40, op_r40.outstandingPrincipalAmt + op_r40.outstandingInterestAmt, \"SGD\", \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(49, 44, op_r40.totalRefund, \"SGD\", \"\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_13_0 = ctx_r15.createRefundManForm.get(\"refundType\")) == null ? null : tmp_13_0.value) !== ctx_r15.REFUND_TYPE_WAIVER && ((tmp_13_0 = ctx_r15.createRefundManForm.get(\"refundType\")) == null ? null : tmp_13_0.value) !== ctx_r15.REFUND_TYPE_WRITE_OFF);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_14_0 = ctx_r15.createRefundManForm.get(\"refundType\")) == null ? null : tmp_14_0.value) === ctx_r15.REFUND_TYPE_WAIVER || ((tmp_14_0 = ctx_r15.createRefundManForm.get(\"refundType\")) == null ? null : tmp_14_0.value) === ctx_r15.REFUND_TYPE_WRITE_OFF);\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_172_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelement(1, \"i\", 114);\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementStart(3, \"span\", 115);\n    i0.ɵɵtext(4, \"Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementStart(6, \"div\", 116);\n    i0.ɵɵtext(7, \"Excess refund not allowed. Refund other records first.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n    \");\n  }\n}\nfunction OverpaymentInfoComponent_p_messages_172_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-messages\", 113);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵtemplate(2, OverpaymentInfoComponent_p_messages_172_ng_template_2_Template, 9, 0, \"ng-template\", 73);\n    i0.ɵɵtext(3, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_174_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r58 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 75);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementStart(7, \"div\", 117);\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementStart(9, \"button\", 77);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_174_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r57 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r57.closeCrRefManForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelement(11, \"p-confirmPopup\", 118);\n    i0.ɵɵtext(12, \"\\n        \");\n    i0.ɵɵelementStart(13, \"button\", 79);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_174_Template_button_click_13_listener($event) {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r59 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r59.confirmRefMan($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Total Refund Entered: \", i0.ɵɵpipeBind3(5, 2, ctx_r17.totalRefundAmtEntered, \"SGD\", \"\"), \"\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"disabled\", !ctx_r17.isCreateRefundManFormValid() || ctx_r17.showExcessError || ctx_r17.totalRefundAmtEntered <= 0);\n  }\n}\nfunction OverpaymentInfoComponent_span_213_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 71);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverpaymentInfoComponent_ng_template_235_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r61 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n      \");\n    i0.ɵɵelementStart(1, \"div\", 76);\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"button\", 77);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_235_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r61);\n      const ctx_r60 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r60.closePPForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵelement(7, \"p-confirmPopup\", 119);\n    i0.ɵɵtext(8, \"\\n          \");\n    i0.ɵɵelementStart(9, \"button\", 79);\n    i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_ng_template_235_Template_button_click_9_listener($event) {\n      i0.ɵɵrestoreView(_r61);\n      const ctx_r62 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r62.confirmCreatePP($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"disabled\", !ctx_r20.isCreatePPManFormValid());\n  }\n}\nconst _c3 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c4 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    width: \"98vw\"\n  };\n};\nconst _c6 = function () {\n  return {\n    width: \"700px\"\n  };\n};\nconst _c7 = function () {\n  return [10, 25, 50];\n};\nclass OverpaymentInfoComponent {\n  constructor(toastService, overpaymentService, refundService, protectedPayableService, paymentService, nspConfirmationService, codeService, router) {\n    this.toastService = toastService;\n    this.overpaymentService = overpaymentService;\n    this.refundService = refundService;\n    this.protectedPayableService = protectedPayableService;\n    this.paymentService = paymentService;\n    this.nspConfirmationService = nspConfirmationService;\n    this.codeService = codeService;\n    this.router = router;\n    this.selectedId = \"\";\n    this.isNSman = true;\n    this.REFUND_TYPE_MIPS = 'MIPS';\n    this.REFUND_TYPE_WAIVER = \"WAIVER\";\n    this.REFUND_TYPE_WRITE_OFF = \"WRITE_OFF\";\n    this.OverpaymentType = overpayment_tab_model_1.OverpaymentType;\n    // dialog control\n    this.showCrRefundMan = false;\n    this.showCrRefundAuto = false;\n    this.showProtectPayable = false;\n    // Shared Details\n    this.sharedDetails = {\n      nric: '',\n      name: '',\n      rank: '',\n      sex: '',\n      csn: ''\n    };\n    this.refundableOpList = [];\n    // Create refund auto\n    this.createRefundAutoForm = new forms_1.FormGroup({\n      refundAmt: new forms_1.FormControl(0.0, forms_1.Validators.required),\n      refundType: new forms_1.FormControl('MIPS', forms_1.Validators.required),\n      mipsId: new forms_1.FormControl('', forms_1.Validators.required),\n      supportingDocs: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")])\n    });\n    // Create refund manual\n    this.createRefundManForm = new forms_1.FormGroup({\n      refundType: new forms_1.FormControl(this.REFUND_TYPE_MIPS, forms_1.Validators.required),\n      mipsId: new forms_1.FormControl('', forms_1.Validators.required),\n      supportingDocs: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")])\n    });\n    this.totalRefundAmtEntered = 0;\n    this.refundManualLoading = false;\n    this.showExcessError = false;\n    // Create protected payable\n    this.createProtectedPayableForm = new forms_1.FormGroup({\n      nric: new forms_1.FormControl(''),\n      name: new forms_1.FormControl(''),\n      protectedAmt: new forms_1.FormControl(0.0, [forms_1.Validators.required, forms_1.Validators.min(1)]),\n      protectSP: new forms_1.FormControl(false),\n      supportingDocs: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")])\n    });\n  }\n  ngOnInit() {\n    this.loadCodes();\n    this.setDynamicValidations();\n    this.setSharedDetails();\n  }\n  setSharedDetails() {\n    // TO-DO by api\n    if (this.isNSman) {\n      setTimeout(() => {\n        this.paymentService.getSummaryByNric(this.selectedId).subscribe(res => {\n          const data = res.body.data;\n          this.sharedDetails.nric = data.nric;\n          this.sharedDetails.name = data.name;\n          this.sharedDetails.rank = data.rank;\n          this.sharedDetails.sex = data.sex;\n          this.sharedDetails.principalOS = data.principalOS;\n          this.sharedDetails.interestOS = data.interestOS;\n          this.sharedDetails.totalOS = Number(data.principalOS) + Number(data.interestOS);\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      }, 1000);\n    } else {\n      setTimeout(() => {\n        this.paymentService.getSummaryByCsn(this.selectedId).subscribe(res => {\n          const data = res.body.data;\n          this.sharedDetails.csn = data.csn;\n          this.sharedDetails.name = data.name;\n          this.sharedDetails.principalOS = data.principalOS;\n          this.sharedDetails.interestOS = data.interestOS;\n          this.sharedDetails.totalOS = Number(data.principalOS) + Number(data.interestOS);\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      }, 1000);\n    }\n  }\n  loadCodes() {\n    this.codeService.gets('refundType_auto,refundType_manual').subscribe(codes => {\n      this.typeOfRefundAutoOptions = codes[0];\n      this.typeOfRefundManOptions = codes[1];\n    });\n  }\n  setDynamicValidations() {\n    this.setMipsIdValidation();\n    this.setPPRefAmtValidation();\n  }\n  setPPRefAmtValidation() {\n    const refAmtControl = this.createProtectedPayableForm.get('protectedAmt');\n    this.createProtectedPayableForm.get('protectSP')?.valueChanges.subscribe(protect => {\n      if (protect) {\n        refAmtControl?.setValidators(null);\n      } else {\n        refAmtControl?.setValidators([forms_1.Validators.required, forms_1.Validators.min(1)]);\n        refAmtControl?.markAsPristine();\n      }\n      refAmtControl?.updateValueAndValidity();\n    });\n  }\n  setMipsIdValidation() {\n    const mipsIdAutoControl = this.createRefundAutoForm.get('mipsId');\n    this.createRefundAutoForm.get('refundType').valueChanges.subscribe(type => {\n      if (type === this.REFUND_TYPE_MIPS) {\n        mipsIdAutoControl.setValidators(forms_1.Validators.required);\n        mipsIdAutoControl.markAsPristine();\n      } else {\n        mipsIdAutoControl?.setValidators(null);\n      }\n      mipsIdAutoControl?.updateValueAndValidity();\n    });\n    const mipsIdManControl = this.createRefundManForm.get('mipsId');\n    this.createRefundManForm.get('refundType').valueChanges.subscribe(type => {\n      if (type === this.REFUND_TYPE_MIPS) {\n        mipsIdManControl.setValidators(forms_1.Validators.required);\n        mipsIdManControl.markAsPristine();\n      } else {\n        mipsIdManControl?.setValidators(null);\n      }\n      mipsIdManControl?.updateValueAndValidity();\n    });\n  }\n  /*\r\n  Create Refund (Auto)\r\n   */\n  isCreateRefundAutoFormValid() {\n    return this.createRefundAutoForm.valid && this.autoFileUploadComponent.verifiedFiles.length > 0;\n  }\n  showCrRefAutoDialog() {\n    this.createRefundAutoForm.get('refundAmt').setValue(this.sharedDetails.totalOS);\n    this.showCrRefundAuto = true;\n  }\n  closeCrRefAutoForm() {\n    this.showCrRefundAuto = false;\n    this.createRefundAutoForm.reset();\n    this.createRefundAutoForm.markAsPristine();\n    this.createRefundAutoForm.get('refundAmt').patchValue(this.sharedDetails.totalOS);\n    this.createRefundAutoForm.get('refundType').patchValue(this.REFUND_TYPE_MIPS);\n  }\n  confirmRefAuto(event) {\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmRefAutoPopup\", null, () => {\n      this.submitCreateRefAuto();\n    });\n  }\n  submitCreateRefAuto() {\n    const request = {\n      nric: this.sharedDetails.nric,\n      csn: this.sharedDetails.csn,\n      refundAmt: this.createRefundAutoForm.get('refundAmt').value,\n      refundType: this.createRefundAutoForm.get('refundType').value,\n      supportingDocs: this.autoFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\n      mipsId: this.createRefundAutoForm.get('mipsId').value\n    };\n    setTimeout(() => {\n      this.refundService.createRefundAuto(request).subscribe(res => {\n        if (res.body) {\n          this.toastService.success(\"Refund created successfully\");\n          this.closeCrRefAutoForm();\n        }\n      }, error => {\n        this.toastService.error(error.error?.error_desc);\n      });\n    }, 1000);\n  }\n  /*\r\n    Create Refund Manual\r\n  */\n  isCreateRefundManFormValid() {\n    return this.createRefundManForm.valid && this.manualFileUploadComponent?.verifiedFiles?.length > 0;\n  }\n  get selectedVerifiedFilesCount() {\n    return this.manualFileUploadComponent?.verifiedFiles?.length;\n  }\n  showCrRefManDialog() {\n    this.showCrRefundMan = true;\n    this.loadRefundableOPs();\n  }\n  loadRefundableOPs() {\n    // TO-DO by API\n    this.refundManualLoading = true;\n    if (this.isNSman) {\n      setTimeout(() => {\n        this.overpaymentService.getOustandingOverpaymentsByNric(this.selectedId).subscribe(res => {\n          this.refundableOpList = res.body.data;\n          this.initRefundAmt();\n          this.refundManualLoading = false;\n        });\n      }, 1000);\n    } else {\n      setTimeout(() => {\n        this.overpaymentService.getOustandingOverpaymentsByCsn(this.selectedId).subscribe(res => {\n          this.refundableOpList = res.body.data;\n          this.initRefundAmt();\n          this.refundManualLoading = false;\n        });\n      }, 1000);\n    }\n  }\n  initRefundAmt() {\n    this.refundableOpList.forEach(value => {\n      value.refundAmt = 0;\n    });\n  }\n  onChecked(event, op) {\n    op.refundAmt = event ? Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt) : 0;\n    this.sumAmtEntered();\n  }\n  onBlur(input, totalOS) {\n    // TODO validation.\n    input = input.replace(/,/g, '');\n    const inputAsNumber = Number(input);\n    // Check if there is current any outstanding op\n    const existOSRecord = this.refundableOpList.some(op => op.refundAmt < Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt));\n    const existExcess = this.refundableOpList.some(op => op.refundAmt > Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt));\n    if (existOSRecord && existExcess) {\n      this.showExcessError = true;\n    } else if (!existOSRecord && existExcess || existOSRecord && !existExcess) {\n      this.showExcessError = false;\n    }\n    this.sumAmtEntered();\n  }\n  sumAmtEntered() {\n    this.totalRefundAmtEntered = this.refundableOpList.filter(op => op.refundAmt > 0).reduce((sum, curr) => sum + curr.refundAmt, 0);\n  }\n  confirmRefMan(event) {\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmRefManPopup\", null, () => {\n      this.submitCreateRefMan();\n    });\n  }\n  submitCreateRefMan() {\n    const refunds = this.refundableOpList.filter(op => op.refundAmt > 0).map(refund => ({\n      overpaymentId: refund.id,\n      refundAmt: refund.refundAmt\n    }));\n    const request = {\n      nric: this.sharedDetails.nric,\n      csn: this.sharedDetails.csn,\n      refundType: this.createRefundManForm.get('refundType').value,\n      supportingDocs: this.manualFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\n      mipsId: this.createRefundManForm.get('mipsId').value,\n      refunds\n    };\n    setTimeout(() => {\n      this.refundService.createRefundManual(request).subscribe(res => {\n        if (res.body) {\n          this.toastService.success(\"Refund created successfully\");\n          this.closeCrRefManForm();\n        }\n      }, error => {\n        this.toastService.error(error.error?.error_desc);\n      });\n    }, 1000);\n  }\n  createManFormData(nric, csn, refundType, files, mipsId, refunds) {\n    const formData = new FormData();\n    formData.append('nric', nric);\n    formData.append('csn', csn);\n    formData.append('refundType', refundType);\n    refunds.forEach((refund, index) => {\n      formData.append(`refunds[${index}].overpaymentId`, refund.overpaymentId);\n      formData.append(`refunds[${index}].refundAmt`, refund.refundAmt);\n    });\n    if (mipsId) {\n      formData.append('mipsId', mipsId);\n    }\n    files.forEach(file => {\n      formData.append('supportingDocs', file);\n    });\n    return formData;\n  }\n  closeCrRefManForm() {\n    this.showCrRefundMan = false;\n    this.createRefundManForm.reset();\n    this.createRefundAutoForm.markAsPristine();\n    this.createRefundManForm.get('refundType').patchValue(this.REFUND_TYPE_MIPS);\n  }\n  /*\r\n    Create protected payable\r\n  */\n  isCreatePPManFormValid() {\n    return this.createProtectedPayableForm.valid && this.ppFileUploadComponent?.verifiedFiles?.length > 0;\n  }\n  showProtectPayableDialog() {\n    this.createProtectedPayableForm.get('nric').patchValue(this.sharedDetails.nric);\n    this.createProtectedPayableForm.get('name').patchValue(this.sharedDetails.name);\n    this.showProtectPayable = true;\n  }\n  confirmCreatePP(event) {\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmPPpopup\", null, () => {\n      this.submitCreatePP();\n    });\n  }\n  submitCreatePP() {\n    const request = {\n      nric: this.sharedDetails.nric,\n      protectedAmt: this.createProtectedPayableForm.get('protectedAmt').value,\n      protectServicePayInd: this.createProtectedPayableForm.get('protectSP').value,\n      supportingDocs: this.ppFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id))\n    };\n    console.log(\"request\", request);\n    setTimeout(() => {\n      this.protectedPayableService.postCreateProtectedPayable(request).subscribe(res => {\n        if (res.body.data) {\n          this.toastService.success(\"Protected Payable created successfully. Routed for approval\");\n          this.closePPForm();\n        }\n      }, error => {\n        this.toastService.error(error.error?.error_desc);\n      });\n    }, 1000);\n  }\n  closePPForm() {\n    console.log(\"ppForm\", this.createProtectedPayableForm);\n    this.showProtectPayable = false;\n    this.createProtectedPayableForm.reset();\n    this.createProtectedPayableForm.get('protectedAmt').patchValue(0.0);\n    this.ppFileUploadComponent.clearAndReset();\n  }\n  logForm() {\n    console.log(\"create refund\", this.createRefundAutoForm.value);\n    console.log(\"create refund auto control\", this.createRefundAutoForm);\n    // console.log(\"create manual\", this.createRefundManForm.value);\n    // console.log(\"create pp\", this.createProtectedPayableForm.value);\n    // console.log('refundable op - manual', this.refundableOpList);\n  }\n  /*\r\n  Create Instalment\r\n  */\n  routeToCrIns() {\n    console.log(\"Route to Create Instalment\");\n    this.router.navigate(['/payment/instalment/create/' + this.selectedId]);\n  }\n}\nexports.OverpaymentInfoComponent = OverpaymentInfoComponent;\nOverpaymentInfoComponent.ɵfac = function OverpaymentInfoComponent_Factory(t) {\n  return new (t || OverpaymentInfoComponent)(i0.ɵɵdirectiveInject(i1.CustomToastService), i0.ɵɵdirectiveInject(i2.OverpaymentService), i0.ɵɵdirectiveInject(i3.RefundService), i0.ɵɵdirectiveInject(i4.ProtectedPayableService), i0.ɵɵdirectiveInject(i5.PaymentService), i0.ɵɵdirectiveInject(i6.NspConfirmationService), i0.ɵɵdirectiveInject(i7.IcCodeService), i0.ɵɵdirectiveInject(i8.Router));\n};\nOverpaymentInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OverpaymentInfoComponent,\n  selectors: [[\"n2-overpayment-info\"]],\n  viewQuery: function OverpaymentInfoComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.autoFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.manualFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ppFileUploadComponent = _t.first);\n    }\n  },\n  inputs: {\n    selectedId: \"selectedId\",\n    isNSman: \"isNSman\"\n  },\n  decls: 238,\n  vars: 77,\n  consts: [[1, \"no-side-padding\"], [\"pTemplate\", \"header\"], [3, \"selectedId\", \"opTabIsNSman\"], [3, \"selectedId\", \"isNsman\"], [4, \"ngIf\"], [\"headerStyleClass\", \"customButtonsOnlyTab flex\", 3, \"disabled\"], [\"header\", \"Create Refund (Auto)\", 3, \"breakpoints\", \"visible\", \"resizable\", \"draggable\", \"modal\", \"visibleChange\", \"onHide\"], [3, \"formGroup\"], [1, \"field\", \"grid\"], [\"for\", \"crRefAutoTotalOS\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [1, \"col\"], [\"id\", \"crRefAutoTotalOS\"], [\"for\", \"crRefAutoPriOS\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"crRefAutoPriOS\"], [\"for\", \"crRefAutoIntOS\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"crRefAutoIntOS\"], [\"for\", \"refundAmtInput\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"refundAmtInput\", \"formControlName\", \"refundAmt\", \"currency\", \"SGD\", 3, \"min\", \"minFractionDigits\", \"maxFractionDigits\"], [\"for\", \"typeOfRefund\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"typeOfRefund\", \"formControlName\", \"refundType\", \"placeholder\", \"Select type of refund\", \"optionLabel\", \"label.en-US\", \"optionValue\", \"codeId\", 3, \"options\"], [\"class\", \"field grid\", 4, \"ngIf\"], [\"for\", \"crRefSuppDoc\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"crRefSuppDoc\", \"formControlName\", \"supportingDocs\", 3, \"contentHeight\"], [\"fileUplRefAuto\", \"\"], [\"severity\", \"warn\", 4, \"ngIf\"], [\"pTemplate\", \"footer\"], [\"header\", \"Create Refund (Manual)\", 3, \"visible\", \"resizable\", \"draggable\", \"modal\", \"visibleChange\", \"onHide\"], [\"createRefundManDialog\", \"\"], [1, \"flex\", \"flex-column\", \"gap-3\"], [1, \"flex\", \"align-items-center\", \"py-1\", \"gap-2\"], [1, \"flex\", \"align-items-center\"], [\"for\", \"typeOfRefund2\", 1, \"col-fixed\"], [\"id\", \"typeOfRefund2\", \"formControlName\", \"refundType\", \"placeholder\", \"Select type of refund\", \"optionLabel\", \"label.en-US\", \"optionValue\", \"codeId\", 3, \"options\"], [\"class\", \"flex align-items-center\", 4, \"ngIf\"], [3, \"showCloseIcon\"], [\"op\", \"\"], [\"formControlName\", \"supportingDocs\", 3, \"contentHeight\"], [\"fileUplRefMan\", \"\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Select supporting documents\", 3, \"click\"], [1, \"flex\"], [1, \"vertical-align-middle\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"responsiveLayout\", \"scroll\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"rowsPerPageOptions\", \"loading\"], [\"pTemplate\", \"body\"], [\"severity\", \"error\", 4, \"ngIf\"], [\"header\", \"Create Protected Payable\", 3, \"visible\", \"resizable\", \"draggable\", \"modal\", \"visibleChange\"], [\"for\", \"ppNricInput\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"ppNricInput\", \"formControlName\", \"nric\", \"readonly\", \"true\", \"placeholder\", \"Enter NRIC\"], [\"for\", \"ppNameInput\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"ppNameInput\", \"formControlName\", \"name\", \"readonly\", \"true\", \"placeholder\", \"Enter Name\"], [\"for\", \"ppProcAmtOffset\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"ppProcAmtOffset\", \"formControlName\", \"protectedAmt\", \"currency\", \"SGD\", \"placeholder\", \"Enter Amount\", 3, \"disabled\", \"minFractionDigits\"], [\"class\", \"p-error\", 4, \"ngIf\"], [2, \"align-items\", \"center !important\", \"display\", \"inline-block\"], [\"formControlName\", \"protectSP\", \"label\", \"Protect Service Pay\", \"inputId\", \"binary\", 3, \"binary\"], [\"for\", \"ppSuppDoc\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"id\", \"ppSuppDoc\", \"formControlName\", \"supportingDocs\", 3, \"contentHeight\"], [\"ppSuppDocFileUpload\", \"\"], [\"icTranslate\", \"nspay2App.payment.overpayment.tabs.overpayment\"], [\"icTranslate\", \"nspay2App.payment.overpayment.tabs.refundHistory\"], [3, \"selectedId\"], [\"icTranslate\", \"nspay2App.payment.overpayment.tabs.instalment\"], [\"icTranslate\", \"nspay2App.payment.overpayment.tabs.protectedPayable\"], [1, \"flex\", \"gap-3\", \"justify-content-end\", \"align-items-center\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Protected Payables\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Instalment\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Refund (Auto)\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Refund (Manual)\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Protected Payables\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Create Instalment\", 3, \"click\"], [\"for\", \"mipsId\", 1, \"col-fixed\", 2, \"width\", \"250px\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"mipsId\", \"formControlName\", \"mipsId\", \"placeholder\", \"Enter MIPS ID\"], [1, \"p-error\"], [\"severity\", \"warn\"], [\"pTemplate\", \"\"], [1, \"ml-2\"], [1, \"flex\", \"justify-content-end\", \"align-items-center\", \"gap-3\"], [1, \"flex\", \"justify-content-end\", \"align-items-center\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"confirmRefAutoPopup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Submit\", 3, \"disabled\", \"click\"], [\"for\", \"mipsId2\", 1, \"col-fixed\"], [\"type\", \"text\", \"pInputText\", \"\", \"id\", \"mipsId2\", \"formControlName\", \"mipsId\", \"placeholder\", \"Enter MIPS ID\"], [\"scope\", \"col\", 2, \"width\", \"2%\"], [\"scope\", \"col\", 4, \"ngIf\"], [\"scope\", \"col\", \"pSortableColumn\", \"discoveryDate\"], [\"field\", \"discoveryDate\"], [\"scope\", \"col\", \"pSortableColumn\", \"trgStart\"], [\"field\", \"trgStart\"], [\"scope\", \"col\", \"pSortableColumn\", \"trgEnd\"], [\"field\", \"trgEnd\"], [\"scope\", \"col\", \"pSortableColumn\", \"type\", 2, \"width\", \"15%\"], [\"field\", \"type\"], [\"scope\", \"col\", \"pSortableColumn\", \"paymentType\"], [\"field\", \"paymentType\"], [\"scope\", \"col\", \"pSortableColumn\", \"caseId\"], [\"field\", \"caseId\"], [\"scope\", \"col\", \"pSortableColumn\", \"originalAmt\"], [\"field\", \"originalAmt\"], [\"scope\", \"col\", \"pSortableColumn\", \"principalOS\"], [\"field\", \"principalOS\"], [\"scope\", \"col\", \"pSortableColumn\", \"interestOS\"], [\"field\", \"interestOS\"], [\"scope\", \"col\", \"pSortableColumn\", \"totalOS\"], [\"field\", \"totalOS\"], [\"scope\", \"col\", \"pSortableColumn\", \"totalRefund\"], [\"field\", \"totalRefund\"], [\"scope\", \"col\", 2, \"width\", \"100px\"], [\"scope\", \"col\"], [2, \"white-space\", \"nowrap\", \"overflow\", \"hidden\", \"text-overflow\", \"ellipsis\"], [\"currency\", \"SGD\", \"type\", \"number\", \"placeholder\", \"Amount\", 3, \"id\", \"ngModel\", \"min\", \"minFractionDigits\", \"maxFractionDigits\", \"ngModelChange\", \"onBlur\", 4, \"ngIf\"], [3, \"id\", \"onChange\", 4, \"ngIf\"], [\"currency\", \"SGD\", \"type\", \"number\", \"placeholder\", \"Amount\", 3, \"id\", \"ngModel\", \"min\", \"minFractionDigits\", \"maxFractionDigits\", \"ngModelChange\", \"onBlur\"], [3, \"id\", \"onChange\"], [\"severity\", \"error\"], [1, \"p-message-icon\", \"pi\", \"pi-times-circle\"], [1, \"p-message-summary\"], [1, \"p-message-detail\"], [1, \"flex\", \"gap-1\"], [\"key\", \"confirmRefManPopup\"], [\"key\", \"confirmPPpopup\"]],\n  template: function OverpaymentInfoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r63 = i0.ɵɵgetCurrentView();\n      i0.ɵɵtext(0, \"\\n\");\n      i0.ɵɵtext(1, \"\\n\");\n      i0.ɵɵtext(2, \"\\n\");\n      i0.ɵɵtext(3, \"\\n\");\n      i0.ɵɵtext(4, \"\\n\");\n      i0.ɵɵtext(5, \"\\n\\n\");\n      i0.ɵɵelementStart(6, \"p-tabView\", 0);\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"p-tabPanel\");\n      i0.ɵɵtext(9, \"\\n        \");\n      i0.ɵɵtemplate(10, OverpaymentInfoComponent_ng_template_10_Template, 3, 0, \"ng-template\", 1);\n      i0.ɵɵtext(11, \"\\n        \");\n      i0.ɵɵelementStart(12, \"n2-overpayment-tab\", 2);\n      i0.ɵɵtext(13, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"p-tabPanel\");\n      i0.ɵɵtext(17, \"\\n        \");\n      i0.ɵɵtemplate(18, OverpaymentInfoComponent_ng_template_18_Template, 3, 0, \"ng-template\", 1);\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"n2-refund-history\", 3);\n      i0.ɵɵtext(21, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n    \");\n      i0.ɵɵtemplate(24, OverpaymentInfoComponent_p_tabPanel_24_Template, 7, 1, \"p-tabPanel\", 4);\n      i0.ɵɵtext(25, \"\\n    \");\n      i0.ɵɵtemplate(26, OverpaymentInfoComponent_p_tabPanel_26_Template, 7, 1, \"p-tabPanel\", 4);\n      i0.ɵɵtext(27, \"\\n  \");\n      i0.ɵɵelementStart(28, \"p-tabPanel\", 5);\n      i0.ɵɵtext(29, \"\\n    \");\n      i0.ɵɵtemplate(30, OverpaymentInfoComponent_ng_template_30_Template, 12, 2, \"ng-template\", 1);\n      i0.ɵɵtext(31, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(32, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(33, \"\\n\\n\");\n      i0.ɵɵtext(34, \"\\n\");\n      i0.ɵɵtext(35, \"\\n\");\n      i0.ɵɵelementStart(36, \"p-dialog\", 6);\n      i0.ɵɵlistener(\"visibleChange\", function OverpaymentInfoComponent_Template_p_dialog_visibleChange_36_listener($event) {\n        return ctx.showCrRefundAuto = $event;\n      })(\"onHide\", function OverpaymentInfoComponent_Template_p_dialog_onHide_36_listener() {\n        return ctx.closeCrRefAutoForm();\n      });\n      i0.ɵɵtext(37, \"\\n\\n    \");\n      i0.ɵɵelementStart(38, \"form\", 7);\n      i0.ɵɵtext(39, \"\\n        \");\n      i0.ɵɵelementStart(40, \"div\", 8);\n      i0.ɵɵtext(41, \"\\n            \");\n      i0.ɵɵelementStart(42, \"label\", 9);\n      i0.ɵɵtext(43, \"Total Outstanding Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(44, \"\\n            \");\n      i0.ɵɵelementStart(45, \"div\", 10);\n      i0.ɵɵtext(46, \"\\n                \");\n      i0.ɵɵelementStart(47, \"span\", 11);\n      i0.ɵɵtext(48);\n      i0.ɵɵpipe(49, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(50, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n\\n        \");\n      i0.ɵɵelementStart(53, \"div\", 8);\n      i0.ɵɵtext(54, \"\\n            \");\n      i0.ɵɵelementStart(55, \"label\", 12);\n      i0.ɵɵtext(56, \"Principal O/S\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(57, \"\\n            \");\n      i0.ɵɵelementStart(58, \"div\", 10);\n      i0.ɵɵtext(59, \"\\n                \");\n      i0.ɵɵelementStart(60, \"span\", 13);\n      i0.ɵɵtext(61);\n      i0.ɵɵpipe(62, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(64, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n\\n        \");\n      i0.ɵɵelementStart(66, \"div\", 8);\n      i0.ɵɵtext(67, \"\\n            \");\n      i0.ɵɵelementStart(68, \"label\", 14);\n      i0.ɵɵtext(69, \"Interest O/S\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n            \");\n      i0.ɵɵelementStart(71, \"div\", 10);\n      i0.ɵɵtext(72, \"\\n                \");\n      i0.ɵɵelementStart(73, \"span\", 15);\n      i0.ɵɵtext(74);\n      i0.ɵɵpipe(75, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(78, \"\\n\\n        \");\n      i0.ɵɵelementStart(79, \"div\", 8);\n      i0.ɵɵtext(80, \"\\n            \");\n      i0.ɵɵelementStart(81, \"label\", 16);\n      i0.ɵɵtext(82, \"Refund Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(83, \"\\n            \");\n      i0.ɵɵelementStart(84, \"div\", 10);\n      i0.ɵɵtext(85, \"\\n                \");\n      i0.ɵɵelement(86, \"p-inputNumber\", 17);\n      i0.ɵɵtext(87, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(88, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(89, \"\\n\\n        \");\n      i0.ɵɵelementStart(90, \"div\", 8);\n      i0.ɵɵtext(91, \"\\n            \");\n      i0.ɵɵelementStart(92, \"label\", 18);\n      i0.ɵɵtext(93, \"Type Of Refund\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(94, \"\\n            \");\n      i0.ɵɵelementStart(95, \"div\", 10);\n      i0.ɵɵtext(96, \"\\n                \");\n      i0.ɵɵelement(97, \"p-dropdown\", 19);\n      i0.ɵɵtext(98, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(99, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(100, \"\\n\\n        \");\n      i0.ɵɵtemplate(101, OverpaymentInfoComponent_div_101_Template, 12, 1, \"div\", 20);\n      i0.ɵɵtext(102, \"\\n\\n        \");\n      i0.ɵɵelementStart(103, \"div\", 8);\n      i0.ɵɵtext(104, \"\\n            \");\n      i0.ɵɵelementStart(105, \"label\", 21);\n      i0.ɵɵtext(106, \"Supporting Documents\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(107, \"\\n            \");\n      i0.ɵɵelementStart(108, \"div\", 10);\n      i0.ɵɵtext(109, \"\\n              \");\n      i0.ɵɵelement(110, \"n2-file-upload\", 22, 23);\n      i0.ɵɵtext(112, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(113, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(114, \"\\n\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(115, \"\\n\\n    \");\n      i0.ɵɵtemplate(116, OverpaymentInfoComponent_p_messages_116_Template, 4, 0, \"p-messages\", 24);\n      i0.ɵɵtext(117, \"\\n    \");\n      i0.ɵɵtemplate(118, OverpaymentInfoComponent_p_messages_118_Template, 4, 0, \"p-messages\", 24);\n      i0.ɵɵtext(119, \"\\n\\n  \");\n      i0.ɵɵtemplate(120, OverpaymentInfoComponent_ng_template_120_Template, 17, 1, \"ng-template\", 25);\n      i0.ɵɵtext(121, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(122, \"\\n\\n\");\n      i0.ɵɵtext(123, \"\\n\");\n      i0.ɵɵtext(124, \"\\n\");\n      i0.ɵɵelementStart(125, \"p-dialog\", 26, 27);\n      i0.ɵɵlistener(\"visibleChange\", function OverpaymentInfoComponent_Template_p_dialog_visibleChange_125_listener($event) {\n        return ctx.showCrRefundMan = $event;\n      })(\"onHide\", function OverpaymentInfoComponent_Template_p_dialog_onHide_125_listener() {\n        return ctx.closeCrRefManForm();\n      });\n      i0.ɵɵtext(127, \"\\n  \");\n      i0.ɵɵelementStart(128, \"div\", 28);\n      i0.ɵɵtext(129, \"\\n    \");\n      i0.ɵɵelementStart(130, \"form\", 7);\n      i0.ɵɵtext(131, \"\\n      \");\n      i0.ɵɵelementStart(132, \"div\", 29);\n      i0.ɵɵtext(133, \"\\n        \");\n      i0.ɵɵelementStart(134, \"div\", 30);\n      i0.ɵɵtext(135, \"\\n          \");\n      i0.ɵɵelementStart(136, \"label\", 31);\n      i0.ɵɵtext(137, \"Type Of Refund\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(138, \"\\n          \");\n      i0.ɵɵelement(139, \"p-dropdown\", 32);\n      i0.ɵɵtext(140, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(141, \"\\n\\n        \");\n      i0.ɵɵtemplate(142, OverpaymentInfoComponent_div_142_Template, 9, 1, \"div\", 33);\n      i0.ɵɵtext(143, \"\\n\\n        \");\n      i0.ɵɵelementStart(144, \"p-overlayPanel\", 34, 35);\n      i0.ɵɵtext(146, \"\\n          \");\n      i0.ɵɵelement(147, \"n2-file-upload\", 36, 37);\n      i0.ɵɵtext(149, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(150, \"\\n\\n        \");\n      i0.ɵɵelementStart(151, \"button\", 38);\n      i0.ɵɵlistener(\"click\", function OverpaymentInfoComponent_Template_button_click_151_listener($event) {\n        i0.ɵɵrestoreView(_r63);\n        const _r12 = i0.ɵɵreference(145);\n        return i0.ɵɵresetView(_r12.toggle($event));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(152, \"\\n\\n        \");\n      i0.ɵɵelementStart(153, \"div\", 39);\n      i0.ɵɵtext(154, \"\\n          \");\n      i0.ɵɵelementStart(155, \"span\", 40);\n      i0.ɵɵtext(156);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(157, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(158, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(159, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(160, \"\\n\\n    \");\n      i0.ɵɵelementStart(161, \"div\");\n      i0.ɵɵtext(162, \"\\n      \");\n      i0.ɵɵelementStart(163, \"p-table\", 41);\n      i0.ɵɵtext(164, \"\\n        \");\n      i0.ɵɵtemplate(165, OverpaymentInfoComponent_ng_template_165_Template, 56, 1, \"ng-template\", 1);\n      i0.ɵɵtext(166, \"\\n        \");\n      i0.ɵɵtemplate(167, OverpaymentInfoComponent_ng_template_167_Template, 62, 48, \"ng-template\", 42);\n      i0.ɵɵtext(168, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(169, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(170, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(171, \"\\n\\n  \");\n      i0.ɵɵtemplate(172, OverpaymentInfoComponent_p_messages_172_Template, 4, 0, \"p-messages\", 43);\n      i0.ɵɵtext(173, \"\\n\\n  \");\n      i0.ɵɵtemplate(174, OverpaymentInfoComponent_ng_template_174_Template, 17, 6, \"ng-template\", 25);\n      i0.ɵɵtext(175, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(176, \"\\n\\n\");\n      i0.ɵɵtext(177, \"\\n\");\n      i0.ɵɵelementStart(178, \"p-dialog\", 44);\n      i0.ɵɵlistener(\"visibleChange\", function OverpaymentInfoComponent_Template_p_dialog_visibleChange_178_listener($event) {\n        return ctx.showProtectPayable = $event;\n      });\n      i0.ɵɵtext(179, \"\\n\\n    \");\n      i0.ɵɵelementStart(180, \"form\", 7);\n      i0.ɵɵtext(181, \"\\n        \");\n      i0.ɵɵelementStart(182, \"div\", 8);\n      i0.ɵɵtext(183, \"\\n            \");\n      i0.ɵɵelementStart(184, \"label\", 45);\n      i0.ɵɵtext(185, \"NRIC\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(186, \"\\n            \");\n      i0.ɵɵelementStart(187, \"div\", 10);\n      i0.ɵɵtext(188, \"\\n                \");\n      i0.ɵɵelement(189, \"input\", 46);\n      i0.ɵɵtext(190, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(191, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(192, \"\\n\\n        \");\n      i0.ɵɵelementStart(193, \"div\", 8);\n      i0.ɵɵtext(194, \"\\n            \");\n      i0.ɵɵelementStart(195, \"label\", 47);\n      i0.ɵɵtext(196, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(197, \"\\n            \");\n      i0.ɵɵelementStart(198, \"div\", 10);\n      i0.ɵɵtext(199, \"\\n                \");\n      i0.ɵɵelement(200, \"input\", 48);\n      i0.ɵɵtext(201, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(202, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(203, \"\\n\\n        \");\n      i0.ɵɵelementStart(204, \"div\", 8);\n      i0.ɵɵtext(205, \"\\n            \");\n      i0.ɵɵelementStart(206, \"label\", 49);\n      i0.ɵɵtext(207, \"Protected Amount from Offset\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(208, \"\\n            \");\n      i0.ɵɵelementStart(209, \"div\", 10);\n      i0.ɵɵtext(210, \"\\n                \");\n      i0.ɵɵelement(211, \"p-inputNumber\", 50);\n      i0.ɵɵtext(212, \"\\n                \");\n      i0.ɵɵtemplate(213, OverpaymentInfoComponent_span_213_Template, 2, 0, \"span\", 51);\n      i0.ɵɵtext(214, \"\\n                \");\n      i0.ɵɵelementStart(215, \"div\", 52);\n      i0.ɵɵtext(216, \"\\n                    \");\n      i0.ɵɵelement(217, \"p-checkbox\", 53);\n      i0.ɵɵtext(218, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(219, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(220, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(221, \"\\n\\n        \");\n      i0.ɵɵelementStart(222, \"div\", 8);\n      i0.ɵɵtext(223, \"\\n            \");\n      i0.ɵɵelementStart(224, \"label\", 54);\n      i0.ɵɵtext(225, \"Supporting Documents\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(226, \"\\n            \");\n      i0.ɵɵelementStart(227, \"div\", 10);\n      i0.ɵɵtext(228, \"\\n                \");\n      i0.ɵɵelement(229, \"n2-file-upload\", 55, 56);\n      i0.ɵɵtext(231, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(232, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(233, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(234, \"\\n    \");\n      i0.ɵɵtemplate(235, OverpaymentInfoComponent_ng_template_235_Template, 13, 1, \"ng-template\", 25);\n      i0.ɵɵtext(236, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(237, \"\\n\");\n    }\n    if (rf & 2) {\n      let tmp_23_0;\n      let tmp_24_0;\n      let tmp_50_0;\n      let tmp_52_0;\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"selectedId\", ctx.selectedId)(\"opTabIsNSman\", ctx.isNSman);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"selectedId\", ctx.selectedId)(\"isNsman\", ctx.isNSman);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isNSman);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isNSman);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", true);\n      i0.ɵɵadvance(8);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(71, _c3));\n      i0.ɵɵproperty(\"breakpoints\", i0.ɵɵpureFunction0(72, _c4))(\"visible\", ctx.showCrRefundAuto)(\"resizable\", false)(\"draggable\", false)(\"modal\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.createRefundAutoForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(49, 59, ctx.sharedDetails.totalOS, \"SGD\", \"\"));\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(62, 63, ctx.sharedDetails.principalOS, \"SGD\", \"\"));\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(75, 67, ctx.sharedDetails.interestOS, \"SGD\", \"\"));\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"min\", 0)(\"minFractionDigits\", 2)(\"maxFractionDigits\", 2);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"options\", ctx.typeOfRefundAutoOptions);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.createRefundAutoForm.get(\"refundType\").value == \"MIPS\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_23_0 = ctx.createRefundAutoForm.get(\"refundAmt\")) == null ? null : tmp_23_0.value) > ctx.sharedDetails.totalOS);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_24_0 = ctx.createRefundAutoForm.get(\"refundAmt\")) == null ? null : tmp_24_0.value) < ctx.sharedDetails.totalOS);\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(73, _c5));\n      i0.ɵɵproperty(\"visible\", ctx.showCrRefundMan)(\"resizable\", false)(\"draggable\", false)(\"modal\", true);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.createRefundManForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"options\", ctx.typeOfRefundManOptions);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.createRefundManForm.get(\"refundType\").value == ctx.REFUND_TYPE_MIPS);\n      i0.ɵɵadvance(2);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(74, _c6));\n      i0.ɵɵproperty(\"showCloseIcon\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"contentHeight\", \"200px\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\" \\u00A0 \", ctx.selectedVerifiedFilesCount, \" files selected\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"value\", ctx.refundableOpList)(\"paginator\", true)(\"rows\", 10)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(75, _c7))(\"loading\", ctx.refundManualLoading);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.showExcessError);\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(76, _c3));\n      i0.ɵɵproperty(\"visible\", ctx.showProtectPayable)(\"resizable\", false)(\"draggable\", false)(\"modal\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.createProtectedPayableForm);\n      i0.ɵɵadvance(31);\n      i0.ɵɵproperty(\"disabled\", (tmp_50_0 = ctx.createProtectedPayableForm.get(\"protectSP\")) == null ? null : tmp_50_0.value)(\"minFractionDigits\", 2);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_52_0 = ctx.createProtectedPayableForm.get(\"protectedAmt\")) == null ? null : tmp_52_0.hasError(\"required\")) && ((tmp_52_0 = ctx.createProtectedPayableForm.get(\"protectedAmt\")) == null ? null : tmp_52_0.dirty));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"binary\", true);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\");\n    }\n  },\n  dependencies: [i9.ɵNgNoValidate, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgControlStatusGroup, i9.NgModel, i10.NgIf, i9.FormGroupDirective, i9.FormControlName, i11.PrimeTemplate, i12.ButtonDirective, i13.Checkbox, i14.Table, i14.SortableColumn, i14.SortIcon, i15.Dropdown, i16.InputText, i17.Dialog, i18.ConfirmPopup, i19.Messages, i20.InputNumber, i21.TranslateDirective, i22.FileUploadComponent, i23.TabView, i23.TabPanel, i24.OverlayPanel, i25.OverpaymentTabComponent, i26.RefundHistoryComponent, i27.InstalmentTabComponent, i28.ProtectedPayableTabComponent, i10.CurrencyPipe, i10.DatePipe, i29.DefaultStringPipe],\n  styles: [\".padding-bottom[_ngcontent-%COMP%] {\\n  padding-bottom: 16px;\\n}\\n\\n\\n[_nghost-%COMP%]     .p-dialog-mask {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n\\n\\n[_nghost-%COMP%]     .customButtonsOnlyTab .p-ripple.p-element.p-tabview-nav-link {\\n  padding: 0;\\n}\\n\\n[_nghost-%COMP%]     .customButtonsOnlyTab.flex.p-disabled.ng-star-inserted {\\n  pointer-events: auto !important;\\n  opacity: 100%;\\n}\\n\\n[_nghost-%COMP%]     .customButtonsOnlyTab.flex.p-disabled.ng-star-inserted > a > div > button {\\n  pointer-events: auto !important;\\n  cursor: pointer;\\n}\\n\\n\\n[_nghost-%COMP%]     li.customButtonsOnlyTab.ng-star-inserted {\\n  flex: 1;\\n}\\n\\n\\n[_nghost-%COMP%]     li.customButtonsOnlyTab.ng-star-inserted > a {\\n  flex: 1;\\n  justify-content: end;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm92ZXJwYXltZW50LWluZm8uY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHBheW1lbnRcXG92ZXJwYXltZW50XFxvdmVycGF5bWVudC1pbmZvXFxvdmVycGF5bWVudC1pbmZvLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQUE7QUNDRjs7QURFQTs7NEVBQUE7QUFHQTtFQUNFLG9DQUFBO0FDQ0Y7O0FER0E7Ozs0RUFBQTtBQUlBO0VBQ0UsVUFBQTtBQ0FGOztBREdBO0VBQ0UsK0JBQUE7RUFDQSxhQUFBO0FDQUY7O0FER0E7RUFDRSwrQkFBQTtFQUNBLGVBQUE7QUNBRjs7QURHQSwwREFBQTtBQUNBO0VBQ0UsT0FBQTtBQ0FGOztBREdBLHlEQUFBO0FBQ0E7RUFDRSxPQUFBO0VBQ0Esb0JBQUE7QUNBRiIsImZpbGUiOiJvdmVycGF5bWVudC1pbmZvLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZGRpbmctYm90dG9tIHtcclxuICBwYWRkaW5nLWJvdHRvbTogMTZweDtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59XHJcblxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgUHJpbWVORyBUYWJWaWV3IENTUyAtXHJcbiAgRW5hYmxlIGJ1dHRvbnMgdG8gYmUgcGxhY2VkIGluIGFuICdlbXB0eScgdGFiIHRoYXQgY2Fubm90IGJlIGFjdGl2YXRlZFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiIC5wLXJpcHBsZS5wLWVsZW1lbnQucC10YWJ2aWV3LW5hdi1saW5rIHtcclxuICBwYWRkaW5nOiAwO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiLmZsZXgucC1kaXNhYmxlZC5uZy1zdGFyLWluc2VydGVkIHtcclxuICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xyXG4gIG9wYWNpdHk6IDEwMCU7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuY3VzdG9tQnV0dG9uc09ubHlUYWIuZmxleC5wLWRpc2FibGVkLm5nLXN0YXItaW5zZXJ0ZWQ+YT5kaXY+YnV0dG9ue1xyXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvICFpbXBvcnRhbnQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4vKiB0aGUgbGkncyB3aWxsIG5vdyBhbHdheXMgZmlsbCB1cCB0aGUgc2l6ZSBvZiB0aGUgdWwncyAqL1xyXG46aG9zdCA6Om5nLWRlZXAgbGkuY3VzdG9tQnV0dG9uc09ubHlUYWIubmctc3Rhci1pbnNlcnRlZHtcclxuICBmbGV4OiAxO1xyXG59XHJcblxyXG4vKiB0aGUgYSdzIHdpbGwgbm93IGFsd2F5cyBmaWxsIHVwIHRoZSBzaXplIG9mIHRoZSB1bCdzICovXHJcbjpob3N0IDo6bmctZGVlcCBsaS5jdXN0b21CdXR0b25zT25seVRhYi5uZy1zdGFyLWluc2VydGVkPmF7XHJcbiAgZmxleDogMTtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcclxufVxyXG4iLCIucGFkZGluZy1ib3R0b20ge1xuICBwYWRkaW5nLWJvdHRvbTogMTZweDtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBQcmltZU5HIFRhYlZpZXcgQ1NTIC1cbiAgRW5hYmxlIGJ1dHRvbnMgdG8gYmUgcGxhY2VkIGluIGFuICdlbXB0eScgdGFiIHRoYXQgY2Fubm90IGJlIGFjdGl2YXRlZFxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjpob3N0IDo6bmctZGVlcCAuY3VzdG9tQnV0dG9uc09ubHlUYWIgLnAtcmlwcGxlLnAtZWxlbWVudC5wLXRhYnZpZXctbmF2LWxpbmsge1xuICBwYWRkaW5nOiAwO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiLmZsZXgucC1kaXNhYmxlZC5uZy1zdGFyLWluc2VydGVkIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcbiAgb3BhY2l0eTogMTAwJTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5jdXN0b21CdXR0b25zT25seVRhYi5mbGV4LnAtZGlzYWJsZWQubmctc3Rhci1pbnNlcnRlZCA+IGEgPiBkaXYgPiBidXR0b24ge1xuICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIHRoZSBsaSdzIHdpbGwgbm93IGFsd2F5cyBmaWxsIHVwIHRoZSBzaXplIG9mIHRoZSB1bCdzICovXG46aG9zdCA6Om5nLWRlZXAgbGkuY3VzdG9tQnV0dG9uc09ubHlUYWIubmctc3Rhci1pbnNlcnRlZCB7XG4gIGZsZXg6IDE7XG59XG5cbi8qIHRoZSBhJ3Mgd2lsbCBub3cgYWx3YXlzIGZpbGwgdXAgdGhlIHNpemUgb2YgdGhlIHVsJ3MgKi9cbjpob3N0IDo6bmctZGVlcCBsaS5jdXN0b21CdXR0b25zT25seVRhYi5uZy1zdGFyLWluc2VydGVkID4gYSB7XG4gIGZsZXg6IDE7XG4gIGp1c3RpZnktY29udGVudDogZW5kO1xufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9vdmVycGF5bWVudC9vdmVycGF5bWVudC1pbmZvL292ZXJwYXltZW50LWluZm8uY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL3BheW1lbnQvb3ZlcnBheW1lbnQvb3ZlcnBheW1lbnQtaW5mby9vdmVycGF5bWVudC1pbmZvLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQUE7QUNDRjs7QURFQTs7NEVBQUE7QUFHQTtFQUNFLG9DQUFBO0FDQ0Y7O0FER0E7Ozs0RUFBQTtBQUlBO0VBQ0UsVUFBQTtBQ0FGOztBREdBO0VBQ0UsK0JBQUE7RUFDQSxhQUFBO0FDQUY7O0FER0E7RUFDRSwrQkFBQTtFQUNBLGVBQUE7QUNBRjs7QURHQSwwREFBQTtBQUNBO0VBQ0UsT0FBQTtBQ0FGOztBREdBLHlEQUFBO0FBQ0E7RUFDRSxPQUFBO0VBQ0Esb0JBQUE7QUNBRjtBRENBLHd1SUFBd3VJIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZGRpbmctYm90dG9tIHtcclxuICBwYWRkaW5nLWJvdHRvbTogMTZweDtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgRGlhbG9nIG1hc2sgQ1NTIC0gQ2hhbmdlIGZyb20gVHJhbnNwYXJlbnQgYmFjayB0byBibGFja1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA2O1xyXG59XHJcblxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuT3ZlcnJpZGUgUHJpbWVORyBUYWJWaWV3IENTUyAtXHJcbiAgRW5hYmxlIGJ1dHRvbnMgdG8gYmUgcGxhY2VkIGluIGFuICdlbXB0eScgdGFiIHRoYXQgY2Fubm90IGJlIGFjdGl2YXRlZFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiIC5wLXJpcHBsZS5wLWVsZW1lbnQucC10YWJ2aWV3LW5hdi1saW5rIHtcclxuICBwYWRkaW5nOiAwO1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiLmZsZXgucC1kaXNhYmxlZC5uZy1zdGFyLWluc2VydGVkIHtcclxuICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xyXG4gIG9wYWNpdHk6IDEwMCU7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuY3VzdG9tQnV0dG9uc09ubHlUYWIuZmxleC5wLWRpc2FibGVkLm5nLXN0YXItaW5zZXJ0ZWQ+YT5kaXY+YnV0dG9ue1xyXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvICFpbXBvcnRhbnQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4vKiB0aGUgbGkncyB3aWxsIG5vdyBhbHdheXMgZmlsbCB1cCB0aGUgc2l6ZSBvZiB0aGUgdWwncyAqL1xyXG46aG9zdCA6Om5nLWRlZXAgbGkuY3VzdG9tQnV0dG9uc09ubHlUYWIubmctc3Rhci1pbnNlcnRlZHtcclxuICBmbGV4OiAxO1xyXG59XHJcblxyXG4vKiB0aGUgYSdzIHdpbGwgbm93IGFsd2F5cyBmaWxsIHVwIHRoZSBzaXplIG9mIHRoZSB1bCdzICovXHJcbjpob3N0IDo6bmctZGVlcCBsaS5jdXN0b21CdXR0b25zT25seVRhYi5uZy1zdGFyLWluc2VydGVkPmF7XHJcbiAgZmxleDogMTtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcclxufVxyXG4iLCIucGFkZGluZy1ib3R0b20ge1xuICBwYWRkaW5nLWJvdHRvbTogMTZweDtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk92ZXJyaWRlIERpYWxvZyBtYXNrIENTUyAtIENoYW5nZSBmcm9tIFRyYW5zcGFyZW50IGJhY2sgdG8gYmxhY2tcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46aG9zdCA6Om5nLWRlZXAgLnAtZGlhbG9nLW1hc2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PdmVycmlkZSBQcmltZU5HIFRhYlZpZXcgQ1NTIC1cbiAgRW5hYmxlIGJ1dHRvbnMgdG8gYmUgcGxhY2VkIGluIGFuICdlbXB0eScgdGFiIHRoYXQgY2Fubm90IGJlIGFjdGl2YXRlZFxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjpob3N0IDo6bmctZGVlcCAuY3VzdG9tQnV0dG9uc09ubHlUYWIgLnAtcmlwcGxlLnAtZWxlbWVudC5wLXRhYnZpZXctbmF2LWxpbmsge1xuICBwYWRkaW5nOiAwO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmN1c3RvbUJ1dHRvbnNPbmx5VGFiLmZsZXgucC1kaXNhYmxlZC5uZy1zdGFyLWluc2VydGVkIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcbiAgb3BhY2l0eTogMTAwJTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5jdXN0b21CdXR0b25zT25seVRhYi5mbGV4LnAtZGlzYWJsZWQubmctc3Rhci1pbnNlcnRlZCA+IGEgPiBkaXYgPiBidXR0b24ge1xuICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIHRoZSBsaSdzIHdpbGwgbm93IGFsd2F5cyBmaWxsIHVwIHRoZSBzaXplIG9mIHRoZSB1bCdzICovXG46aG9zdCA6Om5nLWRlZXAgbGkuY3VzdG9tQnV0dG9uc09ubHlUYWIubmctc3Rhci1pbnNlcnRlZCB7XG4gIGZsZXg6IDE7XG59XG5cbi8qIHRoZSBhJ3Mgd2lsbCBub3cgYWx3YXlzIGZpbGwgdXAgdGhlIHNpemUgb2YgdGhlIHVsJ3MgKi9cbjpob3N0IDo6bmctZGVlcCBsaS5jdXN0b21CdXR0b25zT25seVRhYi5uZy1zdGFyLWluc2VydGVkID4gYSB7XG4gIGZsZXg6IDE7XG4gIGp1c3RpZnktY29udGVudDogZW5kO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","OverpaymentInfoComponent","constructor","toastService","overpaymentService","refundService","protectedPayableService","paymentService","nspConfirmationService","codeService","router","overpayment_tab_model_1","nric","name","rank","sex","csn","forms_1","refundAmt","required","refundType","mipsId","supportingDocs","fileupload2_directive_1","allowableExtension","REFUND_TYPE_MIPS","protectedAmt","min","protectSP","ngOnInit","loadCodes","setDynamicValidations","setSharedDetails","isNSman","setTimeout","getSummaryByNric","selectedId","subscribe","res","data","body","sharedDetails","principalOS","interestOS","totalOS","Number","error","error_desc","getSummaryByCsn","gets","codes","typeOfRefundAutoOptions","typeOfRefundManOptions","setMipsIdValidation","setPPRefAmtValidation","refAmtControl","createProtectedPayableForm","get","valueChanges","protect","setValidators","markAsPristine","updateValueAndValidity","mipsIdAutoControl","createRefundAutoForm","type","mipsIdManControl","createRefundManForm","isCreateRefundAutoFormValid","valid","autoFileUploadComponent","verifiedFiles","length","showCrRefAutoDialog","setValue","showCrRefundAuto","closeCrRefAutoForm","reset","patchValue","confirmRefAuto","event","onConfirmPopup","submitCreateRefAuto","request","value","map","x","String","meta_data","id","createRefundAuto","success","isCreateRefundManFormValid","manualFileUploadComponent","selectedVerifiedFilesCount","showCrRefManDialog","showCrRefundMan","loadRefundableOPs","refundManualLoading","getOustandingOverpaymentsByNric","refundableOpList","initRefundAmt","getOustandingOverpaymentsByCsn","forEach","onChecked","op","outstandingPrincipalAmt","outstandingInterestAmt","sumAmtEntered","onBlur","input","replace","inputAsNumber","existOSRecord","some","existExcess","showExcessError","totalRefundAmtEntered","filter","reduce","sum","curr","confirmRefMan","submitCreateRefMan","refunds","refund","overpaymentId","createRefundManual","closeCrRefManForm","createManFormData","files","formData","FormData","append","index","file","isCreatePPManFormValid","ppFileUploadComponent","showProtectPayableDialog","showProtectPayable","confirmCreatePP","submitCreatePP","protectServicePayInd","console","log","postCreateProtectedPayable","closePPForm","clearAndReset","logForm","routeToCrIns","navigate","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\overpayment-info\\overpayment-info.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\overpayment\\overpayment-info\\overpayment-info.component.html"],"sourcesContent":["import {HttpErrorResponse, HttpResponse} from '@angular/common/http';\r\nimport {Component, Input, OnInit, ViewChild} from '@angular/core';\r\nimport {FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {IcCodeService} from 'app/ng-connect';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {OverpaymentType} from '../overpayment-tab/overpayment-tab.model';\r\nimport {OverpaymentService} from '../service/overpayment.service';\r\nimport {PaymentService} from '../service/payment.service';\r\nimport {RefundService} from '../service/refund-history.service';\r\nimport {IOPSummary, IRefundableOverpayment} from './overpayment-info.model';\r\nimport {ProtectedPayableService} from \"app/payment/protected-payable/service/protected-payable.service\";\r\nimport {Router} from \"@angular/router\";\r\nimport { FileUploadValidator2 } from 'app/shared/validator/fileupload2.directive';\r\nimport { FileUploadComponent } from 'app/shared/component/file-upload/file-upload.component';\r\n\r\n@Component({\r\n  selector: 'n2-overpayment-info',\r\n  templateUrl: './overpayment-info.component.html',\r\n  styleUrls: ['./overpayment-info.component.scss']\r\n})\r\nexport class OverpaymentInfoComponent implements OnInit {\r\n\r\n  @Input() selectedId = \"\";\r\n  @Input() isNSman = true;\r\n\r\n  typeOfRefundAutoOptions: any;\r\n  typeOfRefundManOptions: any;\r\n\r\n  REFUND_TYPE_MIPS = 'MIPS';\r\n  REFUND_TYPE_WAIVER = \"WAIVER\";\r\n  REFUND_TYPE_WRITE_OFF = \"WRITE_OFF\";\r\n\r\n  OverpaymentType: { [key: string]: OverpaymentType } = OverpaymentType\r\n\r\n  // dialog control\r\n  showCrRefundMan = false;\r\n  showCrRefundAuto = false;\r\n  showProtectPayable = false;\r\n\r\n  // Shared Details\r\n  sharedDetails: IOPSummary = {\r\n    nric: '',\r\n    name: '',\r\n    rank: '',\r\n    sex: '',\r\n    csn: ''\r\n  };\r\n\r\n  refundableOpList: IRefundableOverpayment[] = [];\r\n\r\n  // Create refund auto\r\n  createRefundAutoForm = new FormGroup({\r\n    refundAmt: new FormControl(0.0, Validators.required),\r\n    refundType: new FormControl('MIPS', Validators.required),\r\n    mipsId: new FormControl('', Validators.required),\r\n    supportingDocs: new FormControl([], [FileUploadValidator2.allowableExtension(\".pdf\")])\r\n  });\r\n\r\n  // Create refund manual\r\n  createRefundManForm = new FormGroup({\r\n    refundType: new FormControl(this.REFUND_TYPE_MIPS, Validators.required),\r\n    mipsId: new FormControl('', Validators.required),\r\n    supportingDocs: new FormControl([], [FileUploadValidator2.allowableExtension(\".pdf\")])\r\n  });\r\n\r\n  totalRefundAmtEntered = 0;\r\n  refundManualLoading = false;\r\n  showExcessError = false;\r\n\r\n  // Create protected payable\r\n  createProtectedPayableForm = new FormGroup({\r\n    nric: new FormControl(''),\r\n    name: new FormControl(''),\r\n    protectedAmt: new FormControl(0.0, [Validators.required, Validators.min(1)]),\r\n    protectSP: new FormControl(false),\r\n    supportingDocs: new FormControl([], [FileUploadValidator2.allowableExtension(\".pdf\")])\r\n  });\r\n\r\n  @ViewChild('fileUplRefAuto')\r\n  private autoFileUploadComponent: FileUploadComponent;\r\n\r\n  @ViewChild('fileUplRefMan')\r\n  private manualFileUploadComponent: FileUploadComponent;\r\n\r\n  @ViewChild('ppSuppDocFileUpload')\r\n  private ppFileUploadComponent: FileUploadComponent;\r\n\r\n  constructor(\r\n    private toastService: CustomToastService,\r\n    private overpaymentService: OverpaymentService,\r\n    private refundService: RefundService,\r\n    private protectedPayableService: ProtectedPayableService,\r\n    private paymentService: PaymentService,\r\n    private nspConfirmationService: NspConfirmationService,\r\n    private codeService: IcCodeService,\r\n    private router: Router\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadCodes();\r\n    this.setDynamicValidations();\r\n    this.setSharedDetails();\r\n\r\n  }\r\n\r\n  setSharedDetails(): void {\r\n    // TO-DO by api\r\n    if(this.isNSman) {\r\n      setTimeout(() => {\r\n        this.paymentService.getSummaryByNric(this.selectedId).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            const data: IOPSummary = res.body.data;\r\n            this.sharedDetails.nric = data.nric;\r\n            this.sharedDetails.name = data.name;\r\n            this.sharedDetails.rank = data.rank;\r\n            this.sharedDetails.sex = data.sex;\r\n            this.sharedDetails.principalOS = data.principalOS;\r\n            this.sharedDetails.interestOS = data.interestOS;\r\n            this.sharedDetails.totalOS = Number(data.principalOS) + Number(data.interestOS);\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            this.toastService.error(error.error?.error_desc as string);\r\n          }\r\n        );\r\n      }, 1000);\r\n    } else {\r\n      setTimeout(() => {\r\n        this.paymentService.getSummaryByCsn(this.selectedId).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            const data: IOPSummary = res.body.data;\r\n            this.sharedDetails.csn = data.csn;\r\n            this.sharedDetails.name = data.name;\r\n            this.sharedDetails.principalOS = data.principalOS;\r\n            this.sharedDetails.interestOS = data.interestOS;\r\n            this.sharedDetails.totalOS = Number(data.principalOS) + Number(data.interestOS);\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            this.toastService.error(error.error?.error_desc as string);\r\n          }\r\n        );\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  loadCodes(): void {\r\n    this.codeService.gets('refundType_auto,refundType_manual')\r\n      .subscribe((codes: any[]) => {\r\n        this.typeOfRefundAutoOptions = codes[0];\r\n        this.typeOfRefundManOptions = codes[1];\r\n      });\r\n  }\r\n\r\n  setDynamicValidations(): void {\r\n    this.setMipsIdValidation();\r\n    this.setPPRefAmtValidation();\r\n  }\r\n\r\n  setPPRefAmtValidation(): void {\r\n    const refAmtControl = this.createProtectedPayableForm.get('protectedAmt');\r\n\r\n    this.createProtectedPayableForm.get('protectSP')?.valueChanges.subscribe(\r\n      (protect: any) => {\r\n        if (protect) {\r\n          refAmtControl?.setValidators(null);\r\n        } else {\r\n          refAmtControl?.setValidators([Validators.required, Validators.min(1)]);\r\n          refAmtControl?.markAsPristine();\r\n        }\r\n\r\n        refAmtControl?.updateValueAndValidity();\r\n      });\r\n  }\r\n\r\n  setMipsIdValidation(): void {\r\n    const mipsIdAutoControl = this.createRefundAutoForm.get('mipsId');\r\n\r\n    this.createRefundAutoForm.get('refundType').valueChanges.subscribe(\r\n      type => {\r\n        if (type === this.REFUND_TYPE_MIPS) {\r\n          mipsIdAutoControl.setValidators(Validators.required);\r\n          mipsIdAutoControl.markAsPristine();\r\n        } else {\r\n          mipsIdAutoControl?.setValidators(null);\r\n        }\r\n\r\n        mipsIdAutoControl?.updateValueAndValidity();\r\n      });\r\n\r\n    const mipsIdManControl = this.createRefundManForm.get('mipsId');\r\n\r\n    this.createRefundManForm.get('refundType').valueChanges.subscribe(\r\n      type => {\r\n        if (type === this.REFUND_TYPE_MIPS) {\r\n          mipsIdManControl.setValidators(Validators.required);\r\n          mipsIdManControl.markAsPristine();\r\n        } else {\r\n          mipsIdManControl?.setValidators(null);\r\n        }\r\n\r\n        mipsIdManControl?.updateValueAndValidity();\r\n      });\r\n  }\r\n\r\n\r\n  /*\r\n  Create Refund (Auto)\r\n   */\r\n  isCreateRefundAutoFormValid(): boolean {\r\n    return this.createRefundAutoForm.valid\r\n      && this.autoFileUploadComponent.verifiedFiles.length > 0;\r\n  }\r\n\r\n  showCrRefAutoDialog(): void {\r\n    this.createRefundAutoForm.get('refundAmt').setValue(this.sharedDetails.totalOS);\r\n    this.showCrRefundAuto = true;\r\n\r\n  }\r\n\r\n  closeCrRefAutoForm(): void {\r\n    this.showCrRefundAuto = false;\r\n    this.createRefundAutoForm.reset();\r\n    this.createRefundAutoForm.markAsPristine();\r\n    this.createRefundAutoForm.get('refundAmt').patchValue(this.sharedDetails.totalOS);\r\n    this.createRefundAutoForm.get('refundType').patchValue(this.REFUND_TYPE_MIPS);\r\n  }\r\n\r\n  confirmRefAuto(event: Event): void {\r\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmRefAutoPopup\", null,\r\n      () => {\r\n        this.submitCreateRefAuto();\r\n      });\r\n  }\r\n\r\n  submitCreateRefAuto(): void {\r\n    const request = {\r\n      nric: this.sharedDetails.nric,\r\n      csn: this.sharedDetails.csn,\r\n      refundAmt: this.createRefundAutoForm.get('refundAmt').value,\r\n      refundType: this.createRefundAutoForm.get('refundType').value,\r\n      supportingDocs: this.autoFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\r\n      mipsId: this.createRefundAutoForm.get('mipsId').value\r\n    }\r\n\r\n    setTimeout(\r\n      () => {\r\n        this.refundService.createRefundAuto(request).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            if (res.body) {\r\n              this.toastService.success(\"Refund created successfully\");\r\n              this.closeCrRefAutoForm();\r\n            }\r\n          },\r\n          (error: HttpErrorResponse) => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      }, 1000);\r\n  }\r\n\r\n  /*\r\n    Create Refund Manual\r\n  */\r\n\r\n  isCreateRefundManFormValid(): boolean {\r\n    return this.createRefundManForm.valid && this.manualFileUploadComponent?.verifiedFiles?.length > 0;\r\n  }\r\n\r\n  get selectedVerifiedFilesCount(): number{\r\n    return this.manualFileUploadComponent?.verifiedFiles?.length;\r\n  }\r\n\r\n  showCrRefManDialog(): void {\r\n    this.showCrRefundMan = true;\r\n    this.loadRefundableOPs();\r\n  }\r\n\r\n  loadRefundableOPs(): void {\r\n    // TO-DO by API\r\n\r\n    this.refundManualLoading = true;\r\n\r\n    if (this.isNSman) {\r\n      setTimeout(\r\n        () => {\r\n          this.overpaymentService.getOustandingOverpaymentsByNric(this.selectedId).subscribe(\r\n            (res: HttpResponse<any>) => {\r\n              this.refundableOpList = res.body.data;\r\n              this.initRefundAmt();\r\n              this.refundManualLoading = false;\r\n            }\r\n          );\r\n        }, 1000);\r\n    } else {\r\n      setTimeout(\r\n        () => {\r\n          this.overpaymentService.getOustandingOverpaymentsByCsn(this.selectedId).subscribe(\r\n            (res: HttpResponse<any>) => {\r\n              this.refundableOpList = res.body.data;\r\n              this.initRefundAmt();\r\n              this.refundManualLoading = false;\r\n            }\r\n          );\r\n        }, 1000);\r\n    }\r\n  }\r\n\r\n  initRefundAmt(): void {\r\n    this.refundableOpList.forEach((value: IRefundableOverpayment) => {\r\n      value.refundAmt = 0;\r\n    })\r\n  }\r\n\r\n  onChecked(event: boolean, op: IRefundableOverpayment): void {\r\n    op.refundAmt = event ? (Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt)) : 0;\r\n\r\n    this.sumAmtEntered();\r\n  }\r\n\r\n  onBlur(input: string, totalOS: number): void {\r\n    // TODO validation.\r\n    input = input.replace(/,/g, '');\r\n    const inputAsNumber = Number(input);\r\n\r\n    // Check if there is current any outstanding op\r\n    const existOSRecord: boolean = this.refundableOpList.some((op: IRefundableOverpayment) =>\r\n      (op.refundAmt < (Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt)))\r\n    );\r\n\r\n    const existExcess: boolean = this.refundableOpList.some((op: IRefundableOverpayment) =>\r\n      (op.refundAmt > (Number(op.outstandingPrincipalAmt) + Number(op.outstandingInterestAmt)))\r\n    );\r\n\r\n    if ((existOSRecord && existExcess)) {\r\n      this.showExcessError = true;\r\n    } else if ((!existOSRecord && existExcess)\r\n      || (existOSRecord && !existExcess)) {\r\n      this.showExcessError = false;\r\n    }\r\n\r\n    this.sumAmtEntered();\r\n  }\r\n\r\n  sumAmtEntered(): void {\r\n    this.totalRefundAmtEntered = this.refundableOpList.filter(op => op.refundAmt > 0)\r\n      .reduce((sum, curr) => sum + curr.refundAmt, 0);\r\n  }\r\n\r\n  confirmRefMan(event: Event): void {\r\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmRefManPopup\", null,\r\n      () => {\r\n        this.submitCreateRefMan();\r\n      });\r\n  }\r\n\r\n  submitCreateRefMan(): void {\r\n    const refunds: { overpaymentId: string, refundAmt: number }[] = this.refundableOpList.filter((op: IRefundableOverpayment) => op.refundAmt > 0)\r\n      .map(refund => ({overpaymentId: refund.id, refundAmt: refund.refundAmt}));\r\n\r\n    const request = {\r\n      nric: this.sharedDetails.nric,\r\n      csn: this.sharedDetails.csn,\r\n      refundType: this.createRefundManForm.get('refundType').value,\r\n      supportingDocs: this.manualFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\r\n      mipsId: this.createRefundManForm.get('mipsId').value,\r\n      refunds\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.refundService.createRefundManual(request).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          if (res.body) {\r\n            this.toastService.success(\"Refund created successfully\");\r\n            this.closeCrRefManForm();\r\n          }\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          this.toastService.error(error.error?.error_desc);\r\n        }\r\n      );\r\n    }, 1000);\r\n  }\r\n\r\n  createManFormData(nric: string, csn: string, refundType: string, files: File[], mipsId?: string, refunds?: any[]): FormData {\r\n    const formData = new FormData();\r\n\r\n    formData.append('nric', nric);\r\n    formData.append('csn', csn);\r\n    formData.append('refundType', refundType);\r\n\r\n    refunds.forEach((refund, index) => {\r\n      formData.append(`refunds[${index}].overpaymentId`, refund.overpaymentId);\r\n      formData.append(`refunds[${index}].refundAmt`, refund.refundAmt)\r\n    })\r\n\r\n    if (mipsId) {\r\n      formData.append('mipsId', mipsId);\r\n    }\r\n\r\n    files.forEach(file => {\r\n      formData.append('supportingDocs', file);\r\n    })\r\n\r\n\r\n    return formData;\r\n  }\r\n\r\n  closeCrRefManForm(): void {\r\n    this.showCrRefundMan = false;\r\n    this.createRefundManForm.reset();\r\n    this.createRefundAutoForm.markAsPristine();\r\n    this.createRefundManForm.get('refundType').patchValue(this.REFUND_TYPE_MIPS);\r\n  }\r\n\r\n  /*\r\n    Create protected payable\r\n  */\r\n\r\n  isCreatePPManFormValid(): boolean {\r\n    return this.createProtectedPayableForm.valid && this.ppFileUploadComponent?.verifiedFiles?.length > 0;\r\n  }\r\n\r\n  showProtectPayableDialog(): void {\r\n    this.createProtectedPayableForm.get('nric').patchValue(this.sharedDetails.nric);\r\n    this.createProtectedPayableForm.get('name').patchValue(this.sharedDetails.name);\r\n\r\n    this.showProtectPayable = true;\r\n  }\r\n\r\n  confirmCreatePP(event: Event): void {\r\n    this.nspConfirmationService.onConfirmPopup(event, \"confirmPPpopup\", null,\r\n      () => {\r\n        this.submitCreatePP();\r\n      });\r\n  }\r\n\r\n  submitCreatePP(): void {\r\n    const request = {\r\n      nric: this.sharedDetails.nric,\r\n      protectedAmt: this.createProtectedPayableForm.get('protectedAmt').value,\r\n      protectServicePayInd: this.createProtectedPayableForm.get('protectSP').value,\r\n      supportingDocs: this.ppFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id)),\r\n    }\r\n\r\n    console.log(\"request\", request);\r\n\r\n    setTimeout(() => {\r\n      this.protectedPayableService.postCreateProtectedPayable(request).subscribe(\r\n        (res: HttpResponse<any>) => {\r\n          if (res.body.data) {\r\n            this.toastService.success(\"Protected Payable created successfully. Routed for approval\");\r\n            this.closePPForm();\r\n          }\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          this.toastService.error(error.error?.error_desc);\r\n        }\r\n      );\r\n    }, 1000);\r\n  }\r\n\r\n  closePPForm(): void {\r\n    console.log(\"ppForm\", this.createProtectedPayableForm);\r\n    this.showProtectPayable = false;\r\n    this.createProtectedPayableForm.reset();\r\n    this.createProtectedPayableForm.get('protectedAmt').patchValue(0.0);\r\n    this.ppFileUploadComponent.clearAndReset();\r\n  }\r\n\r\n  logForm(): void {\r\n    console.log(\"create refund\", this.createRefundAutoForm.value);\r\n    console.log(\"create refund auto control\", this.createRefundAutoForm);\r\n    // console.log(\"create manual\", this.createRefundManForm.value);\r\n    // console.log(\"create pp\", this.createProtectedPayableForm.value);\r\n\r\n    // console.log('refundable op - manual', this.refundableOpList);\r\n  }\r\n\r\n  /*\r\n  Create Instalment\r\n  */\r\n  routeToCrIns(): void {\r\n    console.log(\"Route to Create Instalment\");\r\n    this.router.navigate(['/payment/instalment/create/' + this.selectedId]);\r\n  }\r\n}\r\n\r\n\r\n","<!--<div class=\"flex justify-content-end gap-3\">-->\r\n<!--    <button pButton type=\"button\" label=\"Create Protected Payables\" (click)=\"showProtectPayableDialog()\"></button>-->\r\n<!--    <button pButton type=\"button\" label=\"Create Instalment\" (click)=\"routeToCrIns()\"></button>-->\r\n<!--    <button pButton type=\"button\" label=\"Create Refund (Auto)\" (click)=\"showCrRefAutoDialog()\"></button>-->\r\n<!--    <button pButton type=\"button\" label=\"Create Refund (Manual)\" (click)=\"showCrRefManDialog()\"></button>-->\r\n<!--</div>-->\r\n\r\n<p-tabView class=\"no-side-padding\">\r\n    <p-tabPanel>\r\n        <ng-template pTemplate=\"header\">\r\n            <span icTranslate=\"nspay2App.payment.overpayment.tabs.overpayment\"></span>\r\n        </ng-template>\r\n        <n2-overpayment-tab\r\n            [selectedId]=\"selectedId\"\r\n            [opTabIsNSman]=\"isNSman\">\r\n        </n2-overpayment-tab>\r\n    </p-tabPanel>\r\n    <p-tabPanel>\r\n        <ng-template pTemplate=\"header\">\r\n            <span icTranslate=\"nspay2App.payment.overpayment.tabs.refundHistory\"></span>\r\n        </ng-template>\r\n        <n2-refund-history\r\n            [selectedId]=\"selectedId\"\r\n            [isNsman]=\"isNSman\">\r\n        </n2-refund-history>\r\n    </p-tabPanel>\r\n    <p-tabPanel *ngIf=\"isNSman\">\r\n        <ng-template pTemplate=\"header\">\r\n            <span icTranslate=\"nspay2App.payment.overpayment.tabs.instalment\"></span>\r\n        </ng-template>\r\n        <n2-instalment-tab\r\n            [selectedId]=\"selectedId\">\r\n        </n2-instalment-tab>\r\n    </p-tabPanel>\r\n    <p-tabPanel *ngIf=\"isNSman\">\r\n        <ng-template pTemplate=\"header\">\r\n            <span icTranslate=\"nspay2App.payment.overpayment.tabs.protectedPayable\"></span>\r\n        </ng-template>\r\n        <n2-protected-payable-tab\r\n            [selectedId]=\"selectedId\">\r\n        </n2-protected-payable-tab>\r\n    </p-tabPanel>\r\n  <p-tabPanel headerStyleClass=\"customButtonsOnlyTab flex\" [disabled]=\"true\">\r\n    <ng-template pTemplate=\"header\">\r\n      <div class=\"flex gap-3 justify-content-end align-items-center\">\r\n        <button pButton type=\"button\" label=\"Create Protected Payables\" (click)=\"showProtectPayableDialog()\" *ngIf=\"isNSman\"></button>\r\n        <button pButton type=\"button\" label=\"Create Instalment\" (click)=\"routeToCrIns()\" *ngIf=\"isNSman\"></button>\r\n        <button pButton type=\"button\" label=\"Create Refund (Auto)\" (click)=\"showCrRefAutoDialog()\"></button>\r\n        <button pButton type=\"button\" label=\"Create Refund (Manual)\" (click)=\"showCrRefManDialog()\"></button>\r\n      </div>\r\n    </ng-template>\r\n  </p-tabPanel>\r\n</p-tabView>\r\n\r\n<!-- NSMAN -->\r\n<!-- create refund auto dialog -->\r\n<p-dialog header=\"Create Refund (Auto)\"\r\n    [breakpoints]=\"{'960px': '75vw'}\"\r\n    [style]=\"{width: '50vw'}\"\r\n    [(visible)]=\"showCrRefundAuto\"\r\n    [resizable]=\"false\"\r\n    [draggable]=\"false\"\r\n    [modal]=\"true\"\r\n    (onHide)=\"closeCrRefAutoForm()\">\r\n\r\n    <form [formGroup]=\"createRefundAutoForm\">\r\n        <div class=\"field grid\">\r\n            <label for=\"crRefAutoTotalOS\" class=\"col-fixed\" style=\"width:250px\">Total Outstanding Amount</label>\r\n            <div class=\"col\">\r\n                <span id=\"crRefAutoTotalOS\">{{sharedDetails.totalOS | currency:'SGD' : ''}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"crRefAutoPriOS\" class=\"col-fixed\" style=\"width:250px\">Principal O/S</label>\r\n            <div class=\"col\">\r\n                <span id=\"crRefAutoPriOS\">{{sharedDetails.principalOS | currency:'SGD' : ''}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"crRefAutoIntOS\" class=\"col-fixed\" style=\"width:250px\">Interest O/S</label>\r\n            <div class=\"col\">\r\n                <span id=\"crRefAutoIntOS\">{{sharedDetails.interestOS | currency:'SGD' : ''}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"refundAmtInput\" class=\"col-fixed\" style=\"width:250px\">Refund Amount</label>\r\n            <div class=\"col\">\r\n                <p-inputNumber id=\"refundAmtInput\" formControlName=\"refundAmt\" currency='SGD' [min]=\"0\" [minFractionDigits]=\"2\" [maxFractionDigits]=\"2\"></p-inputNumber>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"typeOfRefund\" class=\"col-fixed\" style=\"width:250px\">Type Of Refund</label>\r\n            <div class=\"col\">\r\n                <p-dropdown id=\"typeOfRefund\" formControlName=\"refundType\" placeholder=\"Select type of refund\" [options]=\"typeOfRefundAutoOptions\" optionLabel=\"label.en-US\" optionValue=\"codeId\"></p-dropdown>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\" *ngIf=\"createRefundAutoForm.get('refundType').value == 'MIPS'\">\r\n            <label for=\"mipsId\" class=\"col-fixed\" style=\"width:250px\">MIPS ID</label>\r\n            <div class=\"col\">\r\n                <input type=\"text\" pInputText id=\"mipsId\" formControlName=\"mipsId\" placeholder=\"Enter MIPS ID\"/>\r\n                <span *ngIf=\"createRefundAutoForm.get('mipsId')?.hasError('required')\r\n                    && createRefundAutoForm.get('mipsId')?.dirty\" class=\"p-error\">Required</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"crRefSuppDoc\" class=\"col-fixed\" style=\"width:250px\">Supporting Documents</label>\r\n            <div class=\"col\">\r\n              <n2-file-upload #fileUplRefAuto id=\"crRefSuppDoc\" formControlName=\"supportingDocs\" [contentHeight]=\"'100px'\" ></n2-file-upload>\r\n            </div>\r\n        </div>\r\n\r\n    </form>\r\n\r\n    <p-messages severity=\"warn\" *ngIf=\"createRefundAutoForm.get('refundAmt')?.value > sharedDetails.totalOS\">\r\n        <ng-template pTemplate=''>\r\n            <div class=\"ml-2\">There will be an excess refund of {{(createRefundAutoForm.get('refundAmt')?.value - sharedDetails.totalOS) | currency:'SGD' : ''}}</div>\r\n        </ng-template>\r\n    </p-messages>\r\n    <p-messages severity=\"warn\" *ngIf=\"createRefundAutoForm.get('refundAmt')?.value < sharedDetails.totalOS\">\r\n        <ng-template pTemplate=''>\r\n            <div class=\"ml-2\">There will be an outstanding balance of {{(sharedDetails.totalOS - createRefundAutoForm.get('refundAmt')?.value) | currency:'SGD' : ''}}</div>\r\n        </ng-template>\r\n    </p-messages>\r\n\r\n  <ng-template pTemplate='footer'>\r\n    <div class=\"flex justify-content-end align-items-center gap-3\">\r\n      <div class=\"flex justify-content-end align-items-center\">\r\n        <div>\r\n          <!-- <button pButton type=\"button\" label=\"Cancel\" (click)=\"closeCrRefAutoForm()\" class=\"p-button-danger\"></button> -->\r\n          <button pButton type=\"button\" label=\"Cancel\" (click)=\"logForm()\" class=\"p-button-danger\"></button>\r\n          <p-confirmPopup key = \"confirmRefAutoPopup\"></p-confirmPopup>\r\n          <button pButton type=\"button\" label=\"Submit\" (click)=\"confirmRefAuto($event)\"\r\n            [disabled]=\"!isCreateRefundAutoFormValid()\"></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n</p-dialog>\r\n\r\n<!-- NSMAN -->\r\n<!-- create refund manual dialog -->\r\n<p-dialog #createRefundManDialog header=\"Create Refund (Manual)\"\r\n  [(visible)]='showCrRefundMan'\r\n  [resizable]='false'\r\n  [draggable]='false'\r\n  [style]=\"{width: '98vw'}\"\r\n  [modal]='true'\r\n  (onHide)=\"closeCrRefManForm()\">\r\n  <div class='flex flex-column gap-3'>\r\n    <form [formGroup]=\"createRefundManForm\">\r\n      <div class=\"flex align-items-center py-1 gap-2\">\r\n        <div class=\"flex align-items-center\">\r\n          <label for=\"typeOfRefund2\" class='col-fixed'>Type Of Refund</label>\r\n          <p-dropdown id=\"typeOfRefund2\" formControlName=\"refundType\" placeholder=\"Select type of refund\" [options]=\"typeOfRefundManOptions\" optionLabel=\"label.en-US\" optionValue=\"codeId\"></p-dropdown>\r\n        </div>\r\n\r\n        <div class=\"flex align-items-center\" *ngIf=\"createRefundManForm.get('refundType').value == REFUND_TYPE_MIPS\">\r\n          <label for=\"mipsId2\" class=\"col-fixed\">MIPS ID</label>\r\n          <input type=\"text\" pInputText id=\"mipsId2\" formControlName=\"mipsId\" placeholder=\"Enter MIPS ID\"/>\r\n          <span *ngIf=\"createRefundManForm.get('mipsId')?.hasError('required')\r\n                      && createRefundManForm.get('mipsId')?.dirty\" class=\"p-error\">Required</span>\r\n        </div>\r\n\r\n        <p-overlayPanel #op [showCloseIcon]=\"true\" [style]=\"{width: '700px'}\">\r\n          <n2-file-upload #fileUplRefMan formControlName=\"supportingDocs\" [contentHeight]=\"'200px'\"></n2-file-upload>\r\n        </p-overlayPanel>\r\n\r\n        <button pButton type=\"button\" label=\"Select supporting documents\" (click)=\"op.toggle($event)\"></button>\r\n\r\n        <div class=\"flex\">\r\n          <span class=\"vertical-align-middle\"> &nbsp; {{selectedVerifiedFilesCount}} files selected</span>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div>\r\n      <p-table\r\n        [value]=\"refundableOpList\"\r\n        styleClass=\"p-datatable-gridlines\"\r\n        [paginator]=\"true\"\r\n        [rows]=\"10\"\r\n        currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n        [showCurrentPageReport]=\"true\"\r\n        [rowsPerPageOptions]=\"[10,25,50]\"\r\n        responsiveLayout=\"scroll\"\r\n        [loading]=\"refundManualLoading\">\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th scope=\"col\" style=\"width: 2%\">SN</th>\r\n            <th scope=\"col\" *ngIf=\"!isNSman\">NRIC</th>\r\n            <th scope=\"col\" pSortableColumn=\"discoveryDate\">Discovery Date<p-sortIcon field=\"discoveryDate\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"trgStart\">Trg Start<p-sortIcon field=\"trgStart\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"trgEnd\">Trg End<p-sortIcon field=\"trgEnd\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"type\" style=\"width: 15%\">Type<p-sortIcon field=\"type\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"paymentType\">Payment Type<p-sortIcon field=\"paymentType\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"caseId\">Case ID<p-sortIcon field=\"caseId\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"originalAmt\">Original Amt<p-sortIcon field=\"originalAmt\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"principalOS\">Principal O/S<p-sortIcon field=\"principalOS\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"interestOS\">Interest O/S<p-sortIcon field=\"interestOS\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"totalOS\">Total O/S<p-sortIcon field=\"totalOS\"></p-sortIcon></th>\r\n            <th scope=\"col\" pSortableColumn=\"totalRefund\">Total Refund<p-sortIcon field=\"totalRefund\"></p-sortIcon></th>\r\n            <th scope=\"col\" style=\"width: 100px\">Refund Amount</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-op let-i=\"rowIndex\">\r\n          <tr>\r\n            <td>{{i+1}}</td>\r\n            <td *ngIf=\"!isNSman\">{{op.nric}}</td>\r\n            <td>{{op.discoveryDate | date:'dd-MM-yyy'}}</td>\r\n            <td>{{op.trgStart | date:'dd-MM-yyy'}}</td>\r\n            <td>{{op.trgEnd | date:'dd-MM-yyy'}}</td>\r\n            <td style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis\">{{ OverpaymentType[op.overpaymentType] }}</td>\r\n            <td>{{op.paymentType | defaultString }}</td>\r\n            <td>{{op.caseId | defaultString}}</td>\r\n            <td>{{op.overpaymentAmt | currency:'SGD':''}}</td>\r\n            <td>{{op.outstandingPrincipalAmt | currency:'SGD':''}}</td>\r\n            <td>{{op.outstandingInterestAmt | currency:'SGD':''}}</td>\r\n            <td>{{op.outstandingPrincipalAmt + op.outstandingInterestAmt | currency:'SGD':''}}</td>\r\n            <td>{{op.totalRefund | currency:'SGD':''}}</td>\r\n            <td>\r\n              <div>\r\n                <p-inputNumber *ngIf=\"createRefundManForm.get('refundType')?.value !== REFUND_TYPE_WAIVER &&\r\n                                createRefundManForm.get('refundType')?.value !== REFUND_TYPE_WRITE_OFF\"\r\n                             id=\"refundAmtManInput{{i}}\"\r\n                             [(ngModel)]=\"op.refundAmt\"\r\n                             currency='SGD'\r\n                             type=\"number\"\r\n                             (onBlur)=\"onBlur($event.target?.value, op.outstandingPrincipalAmt + op.outstandingInterestAmt)\"\r\n                             [min]=\"0\"\r\n                             [minFractionDigits]=\"2\"\r\n                             [maxFractionDigits]=\"2\"\r\n                             placeholder=\"Amount\"></p-inputNumber>\r\n                <p-checkbox  *ngIf=\"createRefundManForm.get('refundType')?.value === REFUND_TYPE_WAIVER ||\r\n                                createRefundManForm.get('refundType')?.value === REFUND_TYPE_WRITE_OFF\"\r\n                              id=\"refundAmtManInputCheckbox{{i}}\"\r\n                              (onChange)=\"onChecked($event.checked, op)\"\r\n                              ></p-checkbox>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </div>\r\n\r\n  <p-messages severity=\"error\" *ngIf=\"showExcessError\">\r\n    <ng-template pTemplate>\r\n        <i class=\"p-message-icon pi pi-times-circle\"></i>\r\n        <span class=\"p-message-summary\">Error</span>\r\n        <div class=\"p-message-detail\">Excess refund not allowed. Refund other records first.</div>\r\n    </ng-template>\r\n  </p-messages>\r\n\r\n  <ng-template pTemplate='footer'>\r\n    <div class=\"flex justify-content-end align-items-center gap-3\">\r\n      <span>Total Refund Entered: {{totalRefundAmtEntered | currency:'SGD':''}}</span>\r\n      <div class='flex gap-1'>\r\n        <button pButton type=\"button\" label=\"Cancel\" (click)=\"closeCrRefManForm()\" class=\"p-button-danger\"></button>\r\n        <p-confirmPopup key = \"confirmRefManPopup\"></p-confirmPopup>\r\n        <button pButton type=\"button\" label=\"Submit\" (click)=\"confirmRefMan($event)\"\r\n        [disabled]=\"!isCreateRefundManFormValid() || showExcessError || (totalRefundAmtEntered <= 0)\"></button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n</p-dialog>\r\n\r\n<!-- create protected payable dialog -->\r\n<p-dialog header=\"Create Protected Payable\"\r\n    [style]=\"{width: '50vw'}\"\r\n    [(visible)]=\"showProtectPayable\"\r\n    [resizable]=\"false\"\r\n    [draggable]=\"false\"\r\n    [modal]=\"true\">\r\n\r\n    <form [formGroup]=\"createProtectedPayableForm\">\r\n        <div class=\"field grid\">\r\n            <label for=\"ppNricInput\" class=\"col-fixed\" style=\"width:250px\">NRIC</label>\r\n            <div class=\"col\">\r\n                <input type=\"text\" pInputText id=\"ppNricInput\" formControlName=\"nric\" readonly=\"true\" placeholder=\"Enter NRIC\"/>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"ppNameInput\" class=\"col-fixed\" style=\"width:250px\">Name</label>\r\n            <div class=\"col\">\r\n                <input type=\"text\" pInputText id=\"ppNameInput\" formControlName=\"name\" readonly=\"true\" placeholder=\"Enter Name\"/>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid \">\r\n            <label for=\"ppProcAmtOffset\" class=\"col-fixed\" style=\"width:250px\">Protected Amount from Offset</label>\r\n            <div class=\"col\">\r\n                <p-inputNumber id=\"ppProcAmtOffset\"\r\n                                formControlName=\"protectedAmt\"\r\n                                [disabled]=\"createProtectedPayableForm.get('protectSP')?.value\"\r\n                                currency='SGD'\r\n                                [minFractionDigits]=\"2\"\r\n                                placeholder=\"Enter Amount\"></p-inputNumber>\r\n                <span *ngIf=\"createProtectedPayableForm.get('protectedAmt')?.hasError('required')\r\n                                && createProtectedPayableForm.get('protectedAmt')?.dirty\" class=\"p-error\">Required</span>\r\n                <div style=\"align-items: center !important; display: inline-block;\">\r\n                    <p-checkbox formControlName=\"protectSP\" label=\"Protect Service Pay\" [binary]=\"true\" inputId=\"binary\"></p-checkbox>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"field grid\">\r\n            <label for=\"ppSuppDoc\" class=\"col-fixed\" style=\"width:250px\">Supporting Documents</label>\r\n            <div class=\"col\">\r\n                <n2-file-upload #ppSuppDocFileUpload id=\"ppSuppDoc\" formControlName=\"supportingDocs\" [contentHeight]=\"'100px'\"></n2-file-upload>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <ng-template pTemplate='footer'>\r\n      <div class=\"flex justify-content-end align-items-center\">\r\n        <div>\r\n          <button pButton type=\"button\" label=\"Cancel\" (click)=\"closePPForm()\" class=\"p-button-danger\"></button>\r\n          <p-confirmPopup key = \"confirmPPpopup\"></p-confirmPopup>\r\n          <button pButton type=\"button\" label=\"Submit\" (click)=\"confirmCreatePP($event)\"\r\n            [disabled]=\"!isCreatePPManFormValid()\"></button>\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
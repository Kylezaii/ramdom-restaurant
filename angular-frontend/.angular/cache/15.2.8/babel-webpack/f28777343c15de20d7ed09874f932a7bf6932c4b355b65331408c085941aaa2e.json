{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/D1347074/Desktop/projects 2/nspayiiapp/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryGeneratedLettersByDetailComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"../../service/letter.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/inputtextarea\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/autocomplete\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/multiselect\"));\nconst i15 = tslib_1.__importStar(require(\"@angular/common\"));\nconst _c0 = [\"queryGeneratedLettersTable\"];\nfunction QueryGeneratedLettersByDetailComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.filterByAll());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementStart(7, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.filterByPending());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementStart(9, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.filterByDone());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.filterByFavourites());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n            \");\n    i0.ɵɵelementStart(13, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onOpenEditFavourites());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelement(15, \"p-confirmPopup\", 18);\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementStart(17, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_3_Template_button_click_17_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.updateActionTaken($event, \"updateLetterActionTaken\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n    \");\n  }\n}\nfunction QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"div\", 44);\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"span\", 45);\n    i0.ɵɵtext(4, \"Letter Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                    \");\n  }\n}\nfunction QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_26_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                                \");\n    i0.ɵɵelementStart(1, \"span\", 48);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n                            \");\n  }\n  if (rf & 2) {\n    const option_r18 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(option_r18.letterTypeTitle);\n  }\n}\nfunction QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"p-multiSelect\", 46);\n    i0.ɵɵlistener(\"onChange\", function QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_26_Template_p_multiSelect_onChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const filter_r16 = restoredCtx.filterCallback;\n      return i0.ɵɵresetView(filter_r16($event.value));\n    });\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵtemplate(3, QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_26_ng_template_3_Template, 4, 1, \"ng-template\", 47);\n    i0.ɵɵtext(4, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                    \");\n  }\n  if (rf & 2) {\n    const value_r15 = ctx.$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", value_r15)(\"options\", ctx_r14.letterTypes);\n  }\n}\nfunction QueryGeneratedLettersByDetailComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"th\", 20);\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelement(5, \"p-tableHeaderCheckbox\");\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"th\", 21);\n    i0.ɵɵtext(9, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"th\", 22);\n    i0.ɵɵtext(12, \"Generation Date\\n                \");\n    i0.ɵɵelement(13, \"p-sortIcon\", 23);\n    i0.ɵɵtext(14, \"\\n                \");\n    i0.ɵɵelement(15, \"p-columnFilter\", 24);\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementStart(18, \"th\", 25);\n    i0.ɵɵtext(19, \"Letter Type\\n                \");\n    i0.ɵɵelement(20, \"p-sortIcon\", 26);\n    i0.ɵɵtext(21, \"\\n                \");\n    i0.ɵɵelementStart(22, \"p-columnFilter\", 27);\n    i0.ɵɵtext(23, \"\\n                    \");\n    i0.ɵɵtemplate(24, QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_24_Template, 7, 0, \"ng-template\", 3);\n    i0.ɵɵtext(25, \"\\n                    \");\n    i0.ɵɵtemplate(26, QueryGeneratedLettersByDetailComponent_ng_template_5_ng_template_26_Template, 6, 2, \"ng-template\", 28);\n    i0.ɵɵtext(27, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n            \");\n    i0.ɵɵelementStart(30, \"th\", 29);\n    i0.ɵɵtext(31, \"Email\\n                \");\n    i0.ɵɵelement(32, \"p-sortIcon\", 30);\n    i0.ɵɵtext(33, \"\\n                \");\n    i0.ɵɵelement(34, \"p-columnFilter\", 31);\n    i0.ɵɵtext(35, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n            \");\n    i0.ɵɵelementStart(37, \"th\", 32);\n    i0.ɵɵtext(38, \"Letter Successful\\n                \");\n    i0.ɵɵelement(39, \"p-sortIcon\", 33);\n    i0.ɵɵtext(40, \"\\n                \");\n    i0.ɵɵelement(41, \"p-columnFilter\", 34);\n    i0.ɵɵtext(42, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n            \");\n    i0.ɵɵelementStart(44, \"th\", 35);\n    i0.ɵɵtext(45, \"Letter Unsuccessful\\n                \");\n    i0.ɵɵelement(46, \"p-sortIcon\", 36);\n    i0.ɵɵtext(47, \"\\n                \");\n    i0.ɵɵelement(48, \"p-columnFilter\", 37);\n    i0.ɵɵtext(49, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n            \");\n    i0.ɵɵelementStart(51, \"th\", 38);\n    i0.ɵɵtext(52, \"Actioned By\\n                \");\n    i0.ɵɵelement(53, \"p-sortIcon\", 39);\n    i0.ɵɵtext(54, \"\\n                \");\n    i0.ɵɵelement(55, \"p-columnFilter\", 40);\n    i0.ɵɵtext(56, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(57, \"\\n            \");\n    i0.ɵɵelementStart(58, \"th\", 41);\n    i0.ɵɵtext(59, \"Actioned On\\n                \");\n    i0.ɵɵelement(60, \"p-sortIcon\", 42);\n    i0.ɵɵtext(61, \"\\n                \");\n    i0.ɵɵelement(62, \"p-columnFilter\", 43);\n    i0.ɵɵtext(63, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(65, \"\\n    \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"showMatchModes\", false)(\"showOperator\", false)(\"showAddButton\", false);\n  }\n}\nfunction QueryGeneratedLettersByDetailComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelement(5, \"p-tableCheckbox\", 49);\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementStart(18, \"td\", 50);\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementStart(20, \"a\", 51);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_7_Template_a_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const record_r21 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.onOpenEmailCount(record_r21.id));\n    });\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n            \");\n    i0.ɵɵelementStart(24, \"td\", 50);\n    i0.ɵɵtext(25, \"\\n                \");\n    i0.ɵɵelementStart(26, \"a\", 52);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n            \");\n    i0.ɵɵelementStart(30, \"td\", 50);\n    i0.ɵɵtext(31, \"\\n                \");\n    i0.ɵɵelementStart(32, \"a\", 52);\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n            \");\n    i0.ɵɵelementStart(36, \"td\");\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n            \");\n    i0.ɵɵelementStart(39, \"td\");\n    i0.ɵɵtext(40);\n    i0.ɵɵpipe(41, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n    \");\n  }\n  if (rf & 2) {\n    const record_r21 = ctx.$implicit;\n    const i_r22 = ctx.rowIndex;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"value\", record_r21);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r22 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 9, record_r21.genDte, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(record_r21.letterTypeTitle);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(record_r21.emailCount);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(record_r21.letterSuccessCount);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(record_r21.letterFailCount);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(record_r21.actionBy);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(41, 12, record_r21.actionDte, \"dd-MM-yyyy HH:mm\"));\n  }\n}\nconst _c1 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction QueryGeneratedLettersByDetailComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_17_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.onCloseEditFavourites());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelement(3, \"p-confirmPopup\", 54);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function QueryGeneratedLettersByDetailComponent_ng_template_17_Template_button_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.onConfirmFavourites($event, \"confirmEditFavourites\", ctx_r27.displayEditFavouritesDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c1));\n  }\n}\nconst _c2 = function () {\n  return [10, 25, 50];\n};\nconst _c3 = function () {\n  return {\n    width: \"60vw\"\n  };\n};\nconst _c4 = function () {\n  return {\n    width: \"20vw\"\n  };\n};\nclass QueryGeneratedLettersByDetailComponent {\n  constructor(letterService, toastService, nspConfirmationService, dateUtilsService) {\n    this.letterService = letterService;\n    this.toastService = toastService;\n    this.nspConfirmationService = nspConfirmationService;\n    this.dateUtilsService = dateUtilsService;\n    this.displayEditFavouritesDialog = {\n      display: false\n    };\n    this.displayEmailDialog = {\n      display: false\n    };\n    this.queriedLettersByDetail = [];\n    this.letterTypes = [];\n    // Email Case IDs\n    this.emailCaseIds = [];\n    // Edit Favourites\n    this.existingFavourites = [];\n    this.selectedFavourites = [];\n    this.suggestedFavourites = [];\n    // Update Action Taken\n    this.selectedLetters = [];\n  }\n  ngOnInit() {\n    this.load();\n  }\n  load() {\n    this.retrieveGeneratedLettersByDetail();\n    this.retrieveLetterTypes();\n    this.retrieveExistingFavourites();\n    this.oneYearAgo = new Date();\n    this.oneYearAgo.setFullYear(this.oneYearAgo.getFullYear() - 1);\n    this.filterByAll();\n  }\n  retrieveGeneratedLettersByDetail() {\n    this.letterService.getLetterHistory(null).subscribe(resp => {\n      if (resp.body.data.dtoList) {\n        const dtoList = resp.body.data.dtoList;\n        for (let i = 0; i < dtoList.length; i++) {\n          dtoList[i].genDte = this.dateUtilsService.convertUnixToDate(dtoList[i].genDte);\n          dtoList[i].actionDte = dtoList[i].actionDte === 0 ? null : this.dateUtilsService.convertUnixToDate(dtoList[i].actionDte);\n        }\n        this.queriedLettersByDetail = dtoList;\n        console.log(\"queried letters by detail\", this.queriedLettersByDetail);\n      }\n    });\n  }\n  retrieveLetterTypes() {\n    this.letterService.getAllLetterTypes(null).subscribe(resp => {\n      if (resp.body.data) {\n        this.letterTypes = resp.body.data;\n        console.log(\"all letter types\", this.letterTypes);\n      }\n    });\n  }\n  retrieveExistingFavourites() {\n    this.existingFavourites = [];\n    this.letterService.getFavourites(null).subscribe(resp => {\n      if (resp.body.data) {\n        for (const [k, v] of Object.entries(resp.body.data)) {\n          this.existingFavourites.push({\n            key: k,\n            value: v\n          });\n        }\n        console.log(\"existing favourites\", this.existingFavourites);\n      }\n    });\n  }\n  exportCSV() {\n    //\n  }\n  filterByAll() {\n    this.queryGeneratedLettersTable.clear();\n    this.queryGeneratedLettersTable.filter(this.oneYearAgo, 'genDte', 'after');\n  }\n  filterByPending() {\n    this.queryGeneratedLettersTable.clear();\n    this.queryGeneratedLettersTable.filter(0, 'actionDte', 'is');\n  }\n  filterByDone() {\n    this.queryGeneratedLettersTable.clear();\n    this.queryGeneratedLettersTable.filter(0, 'actionDte', 'is_not');\n  }\n  filterByFavourites() {\n    const favList = this.existingFavourites.map(x => x.value);\n    console.log(\"fav list\", favList);\n    this.queryGeneratedLettersTable.clear();\n    this.queryGeneratedLettersTable.filter(favList, 'letterTypeTitle', 'in');\n    this.queryGeneratedLettersTable.filter(this.oneYearAgo, 'genDte', 'after');\n  }\n  onOpenEditFavourites() {\n    this.displayEditFavouritesDialog.display = true;\n    this.selectedFavourites = this.existingFavourites;\n    console.log(\"opening dialog...current favourites\", this.selectedFavourites);\n  }\n  onCloseEditFavourites() {\n    this.displayEditFavouritesDialog.display = false;\n    this.selectedFavourites = this.existingFavourites;\n    console.log(\"closing dialog...current favourites\", this.selectedFavourites);\n  }\n  onConfirmFavourites(event, key, dialog) {\n    console.log(\"before confirming...selected favourites\", this.selectedFavourites);\n    this.nspConfirmationService.onConfirmPopup(event, key, dialog, () => {\n      const favourites = this.selectedFavourites.map(x => x.key);\n      console.log(\"string of favourites sent to backend\", favourites);\n      this.letterService.updateFavourites(favourites, null).subscribe(resp => {\n        if (resp && resp.status === 200) {\n          this.retrieveExistingFavourites();\n          console.log(\"favourites updated successfully\");\n        }\n      }, error => {\n        console.log(\"error is \" + String(error?.error?.error_desc));\n      });\n    });\n  }\n  searchLetterType(event) {\n    let params = new http_1.HttpParams();\n    params = params.append('letterTypeTitle', event.query);\n    this.letterService.getAllLetterTypes({\n      params\n    }).subscribe(resp => {\n      if (resp.body.data) {\n        this.suggestedFavourites = resp.body.data.map(x => ({\n          key: x.letterTypeCode,\n          value: x.letterTypeTitle\n        }));\n      }\n    });\n  }\n  updateActionTaken(event, key) {\n    console.log(\"selected letters\", this.selectedLetters);\n    this.nspConfirmationService.onConfirmPopup(event, key, null, () => {\n      if (this.selectedLetters.length > 0) {\n        const letterJobInstIds = this.selectedLetters.map(x => x.id);\n        console.log(\"letter job inst ids\", letterJobInstIds);\n        this.letterService.updateActionTaken(letterJobInstIds, null).subscribe(resp => {\n          if (resp && resp.status === 200) {\n            console.log(\"actions updated successfully\");\n            this.selectedLetters = [];\n            this.retrieveGeneratedLettersByDetail();\n            this.toastService.success(\"Letters Action Taken has been Updated\");\n          }\n        }, error => {\n          console.log(\"error is \" + String(error?.error?.error_desc));\n          this.toastService.error(String(error?.error?.error_desc));\n        });\n      } else {\n        this.toastService.warn(\"No valid letter selected\");\n      }\n    });\n  }\n  onOpenEmailCount(id) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      console.log(\"letter job inst id\", id);\n      const resp = yield _this.letterService.getEmailCaseIds(id, null).toPromise();\n      if (resp.body.data) {\n        _this.emailCaseIds = resp.body.data;\n        console.log(\"email case ids\", _this.emailCaseIds);\n      }\n      _this.displayEmailDialog.display = true;\n      console.log(\"email dialog opened\");\n    })();\n  }\n}\nexports.QueryGeneratedLettersByDetailComponent = QueryGeneratedLettersByDetailComponent;\nQueryGeneratedLettersByDetailComponent.ɵfac = function QueryGeneratedLettersByDetailComponent_Factory(t) {\n  return new (t || QueryGeneratedLettersByDetailComponent)(i0.ɵɵdirectiveInject(i1.LetterService), i0.ɵɵdirectiveInject(i2.CustomToastService), i0.ɵɵdirectiveInject(i3.NspConfirmationService), i0.ɵɵdirectiveInject(i4.DateUtilsService));\n};\nQueryGeneratedLettersByDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: QueryGeneratedLettersByDetailComponent,\n  selectors: [[\"n2-query-generated-letters-by-detail\"]],\n  viewQuery: function QueryGeneratedLettersByDetailComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.queryGeneratedLettersTable = _t.first);\n    }\n  },\n  decls: 25,\n  vars: 24,\n  consts: [[\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", \"selection\", \"selectionChange\"], [\"queryGeneratedLettersTable\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"header\", \"Update Letter Favourites Filter\", 3, \"visible\", \"modal\", \"dismissableMask\", \"draggable\", \"resizable\", \"visibleChange\"], [1, \"p-fluid\"], [\"field\", \"value\", \"appendTo\", \"body\", 3, \"ngModel\", \"suggestions\", \"minLength\", \"multiple\", \"ngModelChange\", \"completeMethod\"], [\"pTemplate\", \"footer\"], [3, \"visible\", \"visibleChange\"], [\"pInputTextarea\", \"\", \"appendTo\", \"body\", \"readonly\", \"\", 3, \"ngModel\", \"ngModelChange\"], [2, \"display\", \"flex\", \"align-items\", \"center\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"All\", 1, \"filter-button\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Pending\", 1, \"filter-button\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Done\", 1, \"filter-button\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Favourites\", 1, \"filter-button\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Edit Favourites\", 1, \"edit-favourites-button\", 3, \"click\"], [\"key\", \"updateLetterActionTaken\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Update Action Taken\", 1, \"update-action-button\", 3, \"click\"], [\"scope\", \"col\", 2, \"width\", \"1rem\"], [\"scope\", \"col\", 2, \"width\", \"5%\"], [\"scope\", \"col\", \"pSortableColumn\", \"genDte\"], [\"field\", \"genDte\"], [\"type\", \"date\", \"field\", \"genDte\", \"display\", \"menu\"], [\"scope\", \"col\", \"pSortableColumn\", \"letterTypeTitle\"], [\"field\", \"letterTypeTitle\"], [\"type\", \"text\", \"field\", \"letterTypeTitle\", \"matchMode\", \"in\", \"display\", \"menu\", 3, \"showMatchModes\", \"showOperator\", \"showAddButton\"], [\"pTemplate\", \"filter\"], [\"scope\", \"col\", \"pSortableColumn\", \"emailCount\", 1, \"number-field-column-header\"], [\"field\", \"emailCount\"], [\"type\", \"numeric\", \"field\", \"emailCount\", \"display\", \"menu\"], [\"scope\", \"col\", \"pSortableColumn\", \"letterSuccessCount\", 1, \"number-field-column-header\"], [\"field\", \"letterSuccessCount\"], [\"type\", \"numeric\", \"field\", \"letterSuccessCount\", \"display\", \"menu\"], [\"scope\", \"col\", \"pSortableColumn\", \"letterFailCount\", 1, \"number-field-column-header\"], [\"field\", \"letterFailCount\"], [\"type\", \"numeric\", \"field\", \"letterFailCount\", \"display\", \"menu\"], [\"scope\", \"col\", \"pSortableColumn\", \"actionBy\"], [\"field\", \"actionBy\"], [\"type\", \"text\", \"field\", \"actionBy\", \"display\", \"menu\"], [\"scope\", \"col\", \"pSortableColumn\", \"actionDte\"], [\"field\", \"actionDte\"], [\"type\", \"date\", \"field\", \"actionDte\", \"display\", \"menu\"], [1, \"px-3\", \"pt-3\", \"pb-0\"], [1, \"font-bold\"], [\"display\", \"chip\", \"placeholder\", \"Any\", \"optionLabel\", \"letterTypeTitle\", \"optionValue\", \"letterTypeTitle\", 3, \"ngModel\", \"options\", \"onChange\"], [\"pTemplate\", \"item\"], [1, \"ml-1\"], [3, \"value\"], [2, \"text-align\", \"right\"], [2, \"color\", \"blue\", 3, \"click\"], [2, \"color\", \"blue\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"confirmEditFavourites\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"click\"]],\n  template: function QueryGeneratedLettersByDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-table\", 0, 1);\n      i0.ɵɵlistener(\"selectionChange\", function QueryGeneratedLettersByDetailComponent_Template_p_table_selectionChange_0_listener($event) {\n        return ctx.selectedLetters = $event;\n      });\n      i0.ɵɵtext(2, \"\\n    \");\n      i0.ɵɵtemplate(3, QueryGeneratedLettersByDetailComponent_ng_template_3_Template, 20, 0, \"ng-template\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵtemplate(5, QueryGeneratedLettersByDetailComponent_ng_template_5_Template, 66, 3, \"ng-template\", 3);\n      i0.ɵɵtext(6, \"\\n    \");\n      i0.ɵɵtemplate(7, QueryGeneratedLettersByDetailComponent_ng_template_7_Template, 44, 15, \"ng-template\", 4);\n      i0.ɵɵtext(8, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(9, \"\\n\\n\");\n      i0.ɵɵelementStart(10, \"p-dialog\", 5);\n      i0.ɵɵlistener(\"visibleChange\", function QueryGeneratedLettersByDetailComponent_Template_p_dialog_visibleChange_10_listener($event) {\n        return ctx.displayEditFavouritesDialog.display = $event;\n      });\n      i0.ɵɵtext(11, \"\\n    \");\n      i0.ɵɵelementStart(12, \"div\", 6);\n      i0.ɵɵtext(13, \"\\n        \");\n      i0.ɵɵelementStart(14, \"p-autoComplete\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function QueryGeneratedLettersByDetailComponent_Template_p_autoComplete_ngModelChange_14_listener($event) {\n        return ctx.selectedFavourites = $event;\n      })(\"completeMethod\", function QueryGeneratedLettersByDetailComponent_Template_p_autoComplete_completeMethod_14_listener($event) {\n        return ctx.searchLetterType($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n\\n    \");\n      i0.ɵɵtemplate(17, QueryGeneratedLettersByDetailComponent_ng_template_17_Template, 7, 6, \"ng-template\", 8);\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\\n\");\n      i0.ɵɵelementStart(20, \"p-dialog\", 9);\n      i0.ɵɵlistener(\"visibleChange\", function QueryGeneratedLettersByDetailComponent_Template_p_dialog_visibleChange_20_listener($event) {\n        return ctx.displayEmailDialog.display = $event;\n      });\n      i0.ɵɵtext(21, \"\\n    \");\n      i0.ɵɵelementStart(22, \"textarea\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function QueryGeneratedLettersByDetailComponent_Template_textarea_ngModelChange_22_listener($event) {\n        return ctx.emailCaseIds = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"value\", ctx.queriedLettersByDetail)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(21, _c2))(\"showCurrentPageReport\", true)(\"selection\", ctx.selectedLetters);\n      i0.ɵɵadvance(10);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(22, _c3));\n      i0.ɵɵproperty(\"visible\", ctx.displayEditFavouritesDialog.display)(\"modal\", true)(\"dismissableMask\", true)(\"draggable\", false)(\"resizable\", false);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedFavourites)(\"suggestions\", ctx.suggestedFavourites)(\"minLength\", 3)(\"multiple\", true);\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(23, _c4));\n      i0.ɵɵproperty(\"visible\", ctx.displayEmailDialog.display);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.emailCaseIds);\n    }\n  },\n  dependencies: [i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.PrimeTemplate, i7.ButtonDirective, i8.Tooltip, i9.Table, i9.SortableColumn, i9.SortIcon, i9.TableCheckbox, i9.TableHeaderCheckbox, i9.ColumnFilter, i10.Dialog, i11.InputTextarea, i12.ConfirmPopup, i13.AutoComplete, i14.MultiSelect, i15.DatePipe],\n  styles: [\".filter-button {\\n  margin-left: 1em;\\n  width: 115px;\\n}\\n\\n.edit-favourites-button {\\n  margin-left: 1em;\\n  width: 150px;\\n}\\n\\n.update-action-button {\\n  margin-left: auto;\\n  margin-right: 0;\\n  width: 210px;\\n}\\n\\n.number-field-column-header {\\n  width: 10%;\\n}\\n\\n.p-column-filter-overlay-menu .p-column-filter-add-rule {\\n  display: flex !important;\\n}\\n\\n.p-column-filter-overlay-menu .p-column-filter-operator {\\n  display: flex !important;\\n}\\n\\n.p-column-filter-overlay-menu .p-column-filter-constraint .p-column-filter-matchmode-dropdown {\\n  display: flex !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXJ5LWdlbmVyYXRlZC1sZXR0ZXJzLWJ5LWRldGFpbC5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHJlcG9ydC1sZXR0ZXJcXGxldHRlclxccXVlcnktZ2VuZXJhdGVkLWxldHRlcnNcXGJ5LWRldGFpbFxccXVlcnktZ2VuZXJhdGVkLWxldHRlcnMtYnktZGV0YWlsLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLFlBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7QUNDSjs7QURFQTtFQUNJLFVBQUE7QUNDSjs7QURFQTtFQUNJLHdCQUFBO0FDQ0o7O0FERUE7RUFDSSx3QkFBQTtBQ0NKOztBREVBO0VBQ0ksd0JBQUE7QUNDSiIsImZpbGUiOiJxdWVyeS1nZW5lcmF0ZWQtbGV0dGVycy1ieS1kZXRhaWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmlsdGVyLWJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tbGVmdDogMWVtO1xyXG4gICAgd2lkdGg6IDExNXB4O1xyXG59XHJcblxyXG4uZWRpdC1mYXZvdXJpdGVzLWJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tbGVmdDogMWVtO1xyXG4gICAgd2lkdGg6IDE1MHB4O1xyXG59XHJcblxyXG4udXBkYXRlLWFjdGlvbi1idXR0b24ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XHJcbiAgICB3aWR0aDogMjEwcHg7XHJcbn1cclxuXHJcbi5udW1iZXItZmllbGQtY29sdW1uLWhlYWRlciB7XHJcbiAgICB3aWR0aDogMTAlO1xyXG59XHJcblxyXG4ucC1jb2x1bW4tZmlsdGVyLW92ZXJsYXktbWVudSAucC1jb2x1bW4tZmlsdGVyLWFkZC1ydWxlIHtcclxuICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxufVxyXG5cclxuLnAtY29sdW1uLWZpbHRlci1vdmVybGF5LW1lbnUgLnAtY29sdW1uLWZpbHRlci1vcGVyYXRvciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5wLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51IC5wLWNvbHVtbi1maWx0ZXItY29uc3RyYWludCAucC1jb2x1bW4tZmlsdGVyLW1hdGNobW9kZS1kcm9wZG93biB7XHJcbiAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XHJcbn1cclxuIiwiLmZpbHRlci1idXR0b24ge1xuICBtYXJnaW4tbGVmdDogMWVtO1xuICB3aWR0aDogMTE1cHg7XG59XG5cbi5lZGl0LWZhdm91cml0ZXMtYnV0dG9uIHtcbiAgbWFyZ2luLWxlZnQ6IDFlbTtcbiAgd2lkdGg6IDE1MHB4O1xufVxuXG4udXBkYXRlLWFjdGlvbi1idXR0b24ge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiAwO1xuICB3aWR0aDogMjEwcHg7XG59XG5cbi5udW1iZXItZmllbGQtY29sdW1uLWhlYWRlciB7XG4gIHdpZHRoOiAxMCU7XG59XG5cbi5wLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51IC5wLWNvbHVtbi1maWx0ZXItYWRkLXJ1bGUge1xuICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG59XG5cbi5wLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51IC5wLWNvbHVtbi1maWx0ZXItb3BlcmF0b3Ige1xuICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG59XG5cbi5wLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51IC5wLWNvbHVtbi1maWx0ZXItY29uc3RyYWludCAucC1jb2x1bW4tZmlsdGVyLW1hdGNobW9kZS1kcm9wZG93biB7XG4gIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcmVwb3J0LWxldHRlci9sZXR0ZXIvcXVlcnktZ2VuZXJhdGVkLWxldHRlcnMvYnktZGV0YWlsL3F1ZXJ5LWdlbmVyYXRlZC1sZXR0ZXJzLWJ5LWRldGFpbC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL3Byb2plY3RzJTIwMi9uc3BheWlpYXBwL3NyYy9tYWluL3dlYmFwcC9hcHAvcmVwb3J0LWxldHRlci9sZXR0ZXIvcXVlcnktZ2VuZXJhdGVkLWxldHRlcnMvYnktZGV0YWlsL3F1ZXJ5LWdlbmVyYXRlZC1sZXR0ZXJzLWJ5LWRldGFpbC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxpQkFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxVQUFBO0FDQ0o7O0FERUE7RUFDSSx3QkFBQTtBQ0NKOztBREVBO0VBQ0ksd0JBQUE7QUNDSjs7QURFQTtFQUNJLHdCQUFBO0FDQ0o7QURDQSw0N0VBQTQ3RSIsInNvdXJjZXNDb250ZW50IjpbIi5maWx0ZXItYnV0dG9uIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxZW07XHJcbiAgICB3aWR0aDogMTE1cHg7XHJcbn1cclxuXHJcbi5lZGl0LWZhdm91cml0ZXMtYnV0dG9uIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxZW07XHJcbiAgICB3aWR0aDogMTUwcHg7XHJcbn1cclxuXHJcbi51cGRhdGUtYWN0aW9uLWJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogMDtcclxuICAgIHdpZHRoOiAyMTBweDtcclxufVxyXG5cclxuLm51bWJlci1maWVsZC1jb2x1bW4taGVhZGVyIHtcclxuICAgIHdpZHRoOiAxMCU7XHJcbn1cclxuXHJcbi5wLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51IC5wLWNvbHVtbi1maWx0ZXItYWRkLXJ1bGUge1xyXG4gICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4ucC1jb2x1bW4tZmlsdGVyLW92ZXJsYXktbWVudSAucC1jb2x1bW4tZmlsdGVyLW9wZXJhdG9yIHtcclxuICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxufVxyXG5cclxuLnAtY29sdW1uLWZpbHRlci1vdmVybGF5LW1lbnUgLnAtY29sdW1uLWZpbHRlci1jb25zdHJhaW50IC5wLWNvbHVtbi1maWx0ZXItbWF0Y2htb2RlLWRyb3Bkb3duIHtcclxuICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxufVxyXG4iLCIuZmlsdGVyLWJ1dHRvbiB7XG4gIG1hcmdpbi1sZWZ0OiAxZW07XG4gIHdpZHRoOiAxMTVweDtcbn1cblxuLmVkaXQtZmF2b3VyaXRlcy1idXR0b24ge1xuICBtYXJnaW4tbGVmdDogMWVtO1xuICB3aWR0aDogMTUwcHg7XG59XG5cbi51cGRhdGUtYWN0aW9uLWJ1dHRvbiB7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IDA7XG4gIHdpZHRoOiAyMTBweDtcbn1cblxuLm51bWJlci1maWVsZC1jb2x1bW4taGVhZGVyIHtcbiAgd2lkdGg6IDEwJTtcbn1cblxuLnAtY29sdW1uLWZpbHRlci1vdmVybGF5LW1lbnUgLnAtY29sdW1uLWZpbHRlci1hZGQtcnVsZSB7XG4gIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbn1cblxuLnAtY29sdW1uLWZpbHRlci1vdmVybGF5LW1lbnUgLnAtY29sdW1uLWZpbHRlci1vcGVyYXRvciB7XG4gIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbn1cblxuLnAtY29sdW1uLWZpbHRlci1vdmVybGF5LW1lbnUgLnAtY29sdW1uLWZpbHRlci1jb25zdHJhaW50IC5wLWNvbHVtbi1maWx0ZXItbWF0Y2htb2RlLWRyb3Bkb3duIHtcbiAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","QueryGeneratedLettersByDetailComponent","constructor","letterService","toastService","nspConfirmationService","dateUtilsService","display","ngOnInit","load","retrieveGeneratedLettersByDetail","retrieveLetterTypes","retrieveExistingFavourites","oneYearAgo","Date","setFullYear","getFullYear","filterByAll","getLetterHistory","subscribe","resp","body","data","dtoList","i","length","genDte","convertUnixToDate","actionDte","queriedLettersByDetail","console","log","getAllLetterTypes","letterTypes","existingFavourites","getFavourites","k","v","Object","entries","push","key","value","exportCSV","queryGeneratedLettersTable","clear","filter","filterByPending","filterByDone","filterByFavourites","favList","map","x","onOpenEditFavourites","displayEditFavouritesDialog","selectedFavourites","onCloseEditFavourites","onConfirmFavourites","event","dialog","onConfirmPopup","favourites","updateFavourites","status","error","String","error_desc","searchLetterType","params","http_1","append","query","suggestedFavourites","letterTypeCode","letterTypeTitle","updateActionTaken","selectedLetters","letterJobInstIds","id","success","warn","onOpenEmailCount","getEmailCaseIds","toPromise","emailCaseIds","displayEmailDialog","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\report-letter\\letter\\query-generated-letters\\by-detail\\query-generated-letters-by-detail.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\report-letter\\letter\\query-generated-letters\\by-detail\\query-generated-letters-by-detail.component.html"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-return */\r\n\r\nimport { Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { Table } from 'primeng/table';\r\nimport { LetterService } from '../../service/letter.service';\r\nimport { ILetterType } from '../../model/letter.model';\r\nimport { IQueryGeneratedLetter } from '../../model/letter.model';\r\n\r\n@Component({\r\n  selector: 'n2-query-generated-letters-by-detail',\r\n  templateUrl: './query-generated-letters-by-detail.component.html',\r\n  styleUrls: ['./query-generated-letters-by-detail.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class QueryGeneratedLettersByDetailComponent implements OnInit {\r\n\r\n  displayEditFavouritesDialog: any = { display: false };\r\n  displayEmailDialog: any = { display: false };\r\n\r\n  queriedLettersByDetail: IQueryGeneratedLetter[] = [];\r\n\r\n  oneYearAgo: Date;\r\n  letterTypes: ILetterType[] = [];\r\n\r\n  // Email Case IDs\r\n  emailCaseIds: string[] = [];\r\n\r\n  // Edit Favourites\r\n  existingFavourites: any[] = [];\r\n  selectedFavourites: any[] = [];\r\n  suggestedFavourites: any[] = [];\r\n\r\n  // Update Action Taken\r\n  selectedLetters: IQueryGeneratedLetter[] = [];\r\n\r\n  @ViewChild('queryGeneratedLettersTable', { static: true })\r\n  private queryGeneratedLettersTable!: Table;\r\n\r\n  constructor(\r\n    private letterService: LetterService,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmationService: NspConfirmationService,\r\n    public dateUtilsService: DateUtilsService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.load();\r\n  }\r\n\r\n  load(): void {\r\n    this.retrieveGeneratedLettersByDetail();\r\n    this.retrieveLetterTypes();\r\n    this.retrieveExistingFavourites();\r\n\r\n    this.oneYearAgo = new Date();\r\n    this.oneYearAgo.setFullYear(this.oneYearAgo.getFullYear() - 1);\r\n    this.filterByAll();\r\n  }\r\n\r\n  retrieveGeneratedLettersByDetail(): void {\r\n    this.letterService.getLetterHistory(null).subscribe(resp => {\r\n      if (resp.body.data.dtoList) {\r\n        const dtoList = resp.body.data.dtoList;\r\n        for (let i = 0; i < dtoList.length; i++) {\r\n          dtoList[i].genDte = this.dateUtilsService.convertUnixToDate(dtoList[i].genDte);\r\n          dtoList[i].actionDte = dtoList[i].actionDte === 0 ? null : this.dateUtilsService.convertUnixToDate(dtoList[i].actionDte);\r\n        }\r\n        this.queriedLettersByDetail = dtoList;\r\n        console.log(\"queried letters by detail\", this.queriedLettersByDetail);\r\n      }\r\n    });  \r\n  }\r\n\r\n  retrieveLetterTypes(): void {\r\n    this.letterService.getAllLetterTypes(null).subscribe(resp => {\r\n      if (resp.body.data) {\r\n        this.letterTypes = resp.body.data;\r\n        console.log(\"all letter types\", this.letterTypes);\r\n      }\r\n    });\r\n  }\r\n\r\n  retrieveExistingFavourites(): void {\r\n    this.existingFavourites = [];\r\n    this.letterService.getFavourites(null).subscribe(resp => {\r\n      if (resp.body.data) {\r\n        for (const [k, v] of Object.entries(resp.body.data)) {\r\n          this.existingFavourites.push({\r\n            key: k,\r\n            value: v\r\n          });\r\n        }\r\n        console.log(\"existing favourites\", this.existingFavourites);\r\n      }\r\n    });\r\n  }\r\n\r\n  exportCSV(): void {\r\n    //\r\n  }\r\n\r\n  filterByAll(): void {\r\n    this.queryGeneratedLettersTable.clear();\r\n    this.queryGeneratedLettersTable.filter(this.oneYearAgo, 'genDte', 'after');\r\n  }\r\n\r\n  filterByPending(): void {\r\n    this.queryGeneratedLettersTable.clear();\r\n    this.queryGeneratedLettersTable.filter(0, 'actionDte', 'is');\r\n  }\r\n\r\n  filterByDone(): void {\r\n    this.queryGeneratedLettersTable.clear();\r\n    this.queryGeneratedLettersTable.filter(0, 'actionDte', 'is_not');\r\n  }\r\n\r\n  filterByFavourites(): void {\r\n    const favList = this.existingFavourites.map(x => x.value);\r\n    console.log(\"fav list\", favList);\r\n    this.queryGeneratedLettersTable.clear();\r\n    this.queryGeneratedLettersTable.filter(favList, 'letterTypeTitle', 'in');\r\n    this.queryGeneratedLettersTable.filter(this.oneYearAgo, 'genDte', 'after');\r\n  }\r\n\r\n  onOpenEditFavourites(): void {\r\n    this.displayEditFavouritesDialog.display = true;\r\n    this.selectedFavourites = this.existingFavourites;\r\n    console.log(\"opening dialog...current favourites\", this.selectedFavourites);\r\n  }\r\n\r\n  onCloseEditFavourites(): void {\r\n    this.displayEditFavouritesDialog.display = false;\r\n    this.selectedFavourites = this.existingFavourites;\r\n    console.log(\"closing dialog...current favourites\", this.selectedFavourites);\r\n  }\r\n\r\n  onConfirmFavourites(event: Event, key: string, dialog: any): void {\r\n    console.log(\"before confirming...selected favourites\", this.selectedFavourites);\r\n    this.nspConfirmationService.onConfirmPopup(event, key, dialog, () => {\r\n      const favourites = this.selectedFavourites.map(x => x.key);\r\n      console.log(\"string of favourites sent to backend\", favourites);\r\n\r\n      this.letterService.updateFavourites(favourites, null).subscribe(resp => {\r\n        if (resp && resp.status === 200) {\r\n          this.retrieveExistingFavourites();\r\n          console.log(\"favourites updated successfully\");\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(\"error is \" + String(error?.error?.error_desc));\r\n      });\r\n    });\r\n  }\r\n\r\n  searchLetterType(event: any): void {\r\n    let params = new HttpParams();\r\n    params = params.append('letterTypeTitle', event.query);\r\n\r\n    this.letterService\r\n      .getAllLetterTypes({params})\r\n      .subscribe(resp => {\r\n        if (resp.body.data) {\r\n          this.suggestedFavourites = resp.body.data.map((x:any)=>({\r\n            key: x.letterTypeCode,\r\n            value: x.letterTypeTitle\r\n          }))\r\n        }\r\n      });\r\n  }\r\n\r\n  updateActionTaken(event: Event, key: string): void {\r\n    console.log(\"selected letters\", this.selectedLetters);\r\n    this.nspConfirmationService.onConfirmPopup(event, key, null, () => {\r\n      if (this.selectedLetters.length > 0) {\r\n        const letterJobInstIds = this.selectedLetters.map(x => x.id);\r\n        console.log(\"letter job inst ids\", letterJobInstIds);\r\n        this.letterService.updateActionTaken(letterJobInstIds, null).subscribe(resp => {\r\n          if (resp && resp.status === 200) {\r\n            console.log(\"actions updated successfully\");        \r\n            this.selectedLetters = [];\r\n            this.retrieveGeneratedLettersByDetail();\r\n            this.toastService.success(\"Letters Action Taken has been Updated\");\r\n          }\r\n        },\r\n        (error: any) => {\r\n          console.log(\"error is \" + String(error?.error?.error_desc));\r\n          this.toastService.error(String(error?.error?.error_desc));\r\n        });\r\n      } else {\r\n        this.toastService.warn(\"No valid letter selected\");\r\n      }\r\n    });\r\n  }\r\n\r\n  async onOpenEmailCount(id: number): Promise<void> {\r\n    console.log(\"letter job inst id\", id);\r\n    const resp = await this.letterService.getEmailCaseIds(id, null).toPromise();\r\n    if (resp.body.data) {\r\n      this.emailCaseIds = resp.body.data;\r\n      console.log(\"email case ids\", this.emailCaseIds);\r\n    }\r\n\r\n    this.displayEmailDialog.display = true;\r\n    console.log(\"email dialog opened\");\r\n  }\r\n\r\n}\r\n","<p-table #queryGeneratedLettersTable\r\n    [value]=\"queriedLettersByDetail\"\r\n    styleClass=\"p-datatable-gridlines\"\r\n    [paginator]=\"true\"\r\n    [rows]=\"10\"\r\n    [rowsPerPageOptions]=\"[10,25,50]\"\r\n    [showCurrentPageReport]=\"true\"\r\n    currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\r\n    [(selection)]=\"selectedLetters\">\r\n    <ng-template pTemplate=\"caption\">\r\n        <div style=\"display: flex; align-items: center;\">\r\n            <button type=\"button\" pButton pRipple icon=\"pi pi-file\" (click)=\"exportCSV()\" pTooltip=\"Export as CSV\"\r\n                tooltipPosition=\"bottom\"></button>\r\n            <button type=\"button\" pButton label=\"All\" (click)=\"filterByAll()\" class=\"filter-button\"></button>\r\n            <button type=\"button\" pButton label=\"Pending\" (click)=\"filterByPending()\" class=\"filter-button\"></button>\r\n            <button type=\"button\" pButton label=\"Done\" (click)=\"filterByDone()\" class=\"filter-button\"></button>\r\n            <button type=\"button\" pButton label=\"Favourites\" (click)=\"filterByFavourites()\" class=\"filter-button\"></button>\r\n            <button type=\"button\" pButton label=\"Edit Favourites\" (click)=\"onOpenEditFavourites()\"\r\n                class=\"edit-favourites-button\"></button>\r\n            <p-confirmPopup key='updateLetterActionTaken'></p-confirmPopup>\r\n            <button type=\"button\" pButton label=\"Update Action Taken\" (click)=\"updateActionTaken($event, 'updateLetterActionTaken')\"\r\n                class=\"update-action-button\"></button>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"header\">\r\n        <tr>\r\n            <th scope=\"col\" style=\"width: 1rem;\">\r\n                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th scope=\"col\" style=\"width: 5%\">SN</th>\r\n            <th scope=\"col\" pSortableColumn=\"genDte\">Generation Date\r\n                <p-sortIcon field=\"genDte\"></p-sortIcon>\r\n                <p-columnFilter type=\"date\" field=\"genDte\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"letterTypeTitle\">Letter Type\r\n                <p-sortIcon field=\"letterTypeTitle\"></p-sortIcon>\r\n                <p-columnFilter type=\"text\" field=\"letterTypeTitle\" matchMode=\"in\" display=\"menu\"\r\n                    [showMatchModes]=\"false\" [showOperator]=\"false\" [showAddButton]=\"false\">\r\n                    <ng-template pTemplate=\"header\">\r\n                        <div class=\"px-3 pt-3 pb-0\">\r\n                            <span class=\"font-bold\">Letter Type</span>\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"filter\" let-value let-filter=\"filterCallback\">\r\n                        <p-multiSelect [ngModel]=\"value\" [options]=\"letterTypes\" display=\"chip\" placeholder=\"Any\"\r\n                            (onChange)=\"filter($event.value)\" optionLabel=\"letterTypeTitle\" optionValue=\"letterTypeTitle\">\r\n                            <ng-template let-option pTemplate=\"item\">\r\n                                <span class=\"ml-1\">{{ option.letterTypeTitle }}</span>\r\n                            </ng-template>\r\n                        </p-multiSelect>\r\n                    </ng-template>\r\n                </p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"emailCount\" class=\"number-field-column-header\">Email\r\n                <p-sortIcon field=\"emailCount\"></p-sortIcon>\r\n                <p-columnFilter type=\"numeric\" field=\"emailCount\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"letterSuccessCount\" class=\"number-field-column-header\">Letter Successful\r\n                <p-sortIcon field=\"letterSuccessCount\"></p-sortIcon>\r\n                <p-columnFilter type=\"numeric\" field=\"letterSuccessCount\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"letterFailCount\" class=\"number-field-column-header\">Letter Unsuccessful\r\n                <p-sortIcon field=\"letterFailCount\"></p-sortIcon>\r\n                <p-columnFilter type=\"numeric\" field=\"letterFailCount\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"actionBy\">Actioned By\r\n                <p-sortIcon field=\"actionBy\"></p-sortIcon>\r\n                <p-columnFilter type=\"text\" field=\"actionBy\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n            <th scope=\"col\" pSortableColumn=\"actionDte\">Actioned On\r\n                <p-sortIcon field=\"actionDte\"></p-sortIcon>\r\n                <p-columnFilter type=\"date\" field=\"actionDte\" display=\"menu\"></p-columnFilter>\r\n            </th>\r\n        </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-record let-i=\"rowIndex\">\r\n        <tr>\r\n            <td>\r\n                <p-tableCheckbox [value]=\"record\"></p-tableCheckbox>\r\n            </td>\r\n            <td>{{ i + 1 }}</td>\r\n            <td>{{ record.genDte | date:'dd-MM-yyyy HH:mm' }}</td>\r\n            <td>{{ record.letterTypeTitle }}</td>\r\n            <td style=\"text-align: right\">\r\n                <a style=\"color: blue\" (click)=\"onOpenEmailCount(record.id)\">{{ record.emailCount }}</a>\r\n            </td>\r\n            <td style=\"text-align: right\">\r\n                <a style=\"color: blue\">{{ record.letterSuccessCount }}</a>\r\n            </td>\r\n            <td style=\"text-align: right\">\r\n                <a style=\"color: blue\">{{ record.letterFailCount }}</a>\r\n            </td>\r\n            <td>{{ record.actionBy }}</td>\r\n            <td>{{ record.actionDte | date:'dd-MM-yyyy HH:mm' }}</td>\r\n        </tr>\r\n    </ng-template>\r\n</p-table>\r\n\r\n<p-dialog header=\"Update Letter Favourites Filter\" [(visible)]=\"displayEditFavouritesDialog.display\" [modal]=\"true\"\r\n          [style]=\"{width: '60vw'}\" [dismissableMask]=\"true\" [draggable]=\"false\" [resizable]=\"false\">\r\n    <div class=\"p-fluid\">\r\n        <p-autoComplete [(ngModel)]=\"selectedFavourites\" [suggestions]=\"suggestedFavourites\" (completeMethod)=\"searchLetterType($event)\"\r\n            field=\"value\" [minLength]=\"3\" [multiple]=\"true\" appendTo=\"body\"></p-autoComplete>\r\n    </div>\r\n\r\n    <ng-template pTemplate=\"footer\">\r\n        <button pButton class=\"p-button-danger\" label=\"Cancel\" (click)=\"onCloseEditFavourites()\"\r\n                [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n        <p-confirmPopup key=\"confirmEditFavourites\"></p-confirmPopup>\r\n        <button pButton label=\"Submit\"\r\n                (click)=\"onConfirmFavourites($event, 'confirmEditFavourites', displayEditFavouritesDialog)\"\r\n                [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n    </ng-template>\r\n</p-dialog>\r\n\r\n<p-dialog [(visible)]=\"displayEmailDialog.display\" [style]=\"{width: '20vw'}\">\r\n    <textarea pInputTextarea [(ngModel)]=\"emailCaseIds\" appendTo=\"body\" readonly></textarea>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
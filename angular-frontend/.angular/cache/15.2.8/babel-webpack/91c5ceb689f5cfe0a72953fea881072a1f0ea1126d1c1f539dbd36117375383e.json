{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InstalmentTerminateApprovalComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/payment/instalment/service/instalment.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/payment/overpayment/service/payment.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/shared/service/file-upload.service\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/messages\"));\nconst i14 = tslib_1.__importStar(require(\"app/shared/component/rejection-reason/rejection-reason.component\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i16 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i17 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i18 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"rejectionReasonDialog\"];\nfunction InstalmentTerminateApprovalComponent_ng_template_135_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"div\", 26);\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_ng_template_135_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelement(6, \"p-confirmPopup\", 28);\n    i0.ɵɵtext(7, \"\\n      \");\n  }\n}\nfunction InstalmentTerminateApprovalComponent_ng_template_137_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n\\n          \");\n    i0.ɵɵelementStart(3, \"th\", 29);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementStart(6, \"th\", 30);\n    i0.ɵɵtext(7, \"Collection Date\\n            \");\n    i0.ɵɵelement(8, \"p-sortIcon\", 31);\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n          \");\n    i0.ɵɵelementStart(11, \"th\", 32);\n    i0.ɵɵtext(12, \"Amount\\n            \");\n    i0.ɵɵelement(13, \"p-sortIcon\", 33);\n    i0.ɵɵtext(14, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n          \");\n    i0.ɵɵelementStart(16, \"th\", 34);\n    i0.ɵɵtext(17, \"Status\\n            \");\n    i0.ɵɵelement(18, \"p-sortIcon\", 35);\n    i0.ɵɵtext(19, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n          \");\n    i0.ɵɵelementStart(21, \"th\", 36);\n    i0.ɵɵtext(22, \"Principal O/S Refunded\\n            \");\n    i0.ɵɵelement(23, \"p-sortIcon\", 37);\n    i0.ɵɵtext(24, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n          \");\n    i0.ɵɵelementStart(26, \"th\", 38);\n    i0.ɵɵtext(27, \"Interest O/S Refunded\\n            \");\n    i0.ɵɵelement(28, \"p-sortIcon\", 39);\n    i0.ɵɵtext(29, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n          \");\n    i0.ɵɵelementStart(31, \"th\", 40);\n    i0.ɵɵtext(32, \"Excess Refund\\n            \");\n    i0.ɵɵelement(33, \"p-sortIcon\", 41);\n    i0.ɵɵtext(34, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n      \");\n  }\n}\nfunction InstalmentTerminateApprovalComponent_ng_template_139_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 42);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n          \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"defaultString\");\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n          \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n          \");\n    i0.ɵɵelementStart(20, \"td\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"defaultString\");\n    i0.ɵɵpipe(23, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n          \");\n    i0.ɵɵelementStart(25, \"td\");\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"defaultString\");\n    i0.ɵɵpipe(28, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n          \");\n    i0.ɵɵelementStart(30, \"td\");\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"defaultString\");\n    i0.ɵɵpipe(33, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n      \");\n  }\n  if (rf & 2) {\n    const refundRecord_r8 = ctx.$implicit;\n    const i_r9 = ctx.rowIndex;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i_r9 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 7, refundRecord_r8 == null ? null : refundRecord_r8.date));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 9, i0.ɵɵpipeBind3(14, 11, refundRecord_r8 == null ? null : refundRecord_r8.amount, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 15, refundRecord_r8 == null ? null : refundRecord_r8.status));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(22, 17, i0.ɵɵpipeBind3(23, 19, refundRecord_r8 == null ? null : refundRecord_r8.principalRefunded, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(27, 23, i0.ɵɵpipeBind3(28, 25, refundRecord_r8 == null ? null : refundRecord_r8.interestRefunded, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 29, i0.ɵɵpipeBind3(33, 31, refundRecord_r8 == null ? null : refundRecord_r8.excessRefundAmt, \"SGD\", \"\")));\n  }\n}\nfunction InstalmentTerminateApprovalComponent_ng_template_141_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"td\", 43);\n    i0.ɵɵtext(4, \"No Refund records found for this Instalment Plan.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n  }\n}\nconst _c1 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction InstalmentTerminateApprovalComponent_ng_template_175_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_ng_template_175_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.displayRejectionReasonDialog.display = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n      \");\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelement(10, \"p-confirmPopup\", 45);\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementStart(12, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_ng_template_175_Template_button_click_12_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onSubmit(false, $event, \"instalmentPlanRejectConfirmation\", ctx_r12.displayRejectionReasonDialog));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c1));\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c1));\n    i0.ɵɵproperty(\"disabled\", !ctx_r5.isRejectionFormValid());\n  }\n}\nconst _c2 = function () {\n  return [10, 25, 50];\n};\nconst _c3 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c4 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nclass InstalmentTerminateApprovalComponent {\n  constructor(router, route, toastService, nspConfirmService, instalmentService, paymentService, fileUploadService) {\n    this.router = router;\n    this.route = route;\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.instalmentService = instalmentService;\n    this.paymentService = paymentService;\n    this.fileUploadService = fileUploadService;\n    this.displayRejectionReasonDialog = {\n      display: false\n    };\n    this.summary = {\n      nric: '',\n      name: '',\n      rank: '',\n      sex: '',\n      csn: '',\n      principalOS: 0,\n      interestOS: 0,\n      protectedPayableInd: '',\n      protectedPayableSPInd: '',\n      instalmentInd: '',\n      cabInd: ''\n    };\n    this.msgs = [];\n  }\n  ngOnInit() {\n    this.msgs.push({\n      severity: 'warn',\n      summary: 'Warning',\n      detail: 'This Instalment record will be terminated upon approval'\n    });\n    this.route.params.subscribe(params => {\n      // Call API endpoint to retrieve the Instalment record\n      this.instalmentPlanId = params['instalmentId'];\n      if (this.instalmentPlanId) {\n        this.loadInstalmentPlan();\n      }\n    });\n  }\n  loadInstalmentPlan() {\n    this.instalmentService.getPendingTermination(this.instalmentPlanId).subscribe(res => {\n      if (res.body.data) {\n        this.instalmentPlan = res.body?.data;\n        this.loadSummary();\n      } else {\n        this.toastService.error(\"No record pending termination found for given Id\");\n      }\n    }, error => {\n      console.log(error.message);\n      if (error.status === 404 /* HttpStatusCode.NotFound */) {\n        this.toastService.error('No Instalment record found');\n      }\n    });\n  }\n  loadSummary() {\n    this.paymentService.getSummaryByNric(this.instalmentPlan.nric).subscribe(res => {\n      this.summary = res.body?.data;\n    });\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  downloadSupportingDocuments() {\n    const fileIds = this.instalmentPlan.supportingDocs?.map(x => String(x.documentId));\n    if (fileIds) {\n      this.fileUploadService.downloadZip(fileIds).subscribe(res => {\n        if (res) {\n          const data = res;\n          const contentDispositionHeader = data.headers.get('content-disposition');\n          const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\n          const blob = new Blob([data.body], {\n            type: data.headers.get('content-type')\n          });\n          const anchor = document.createElement(\"a\");\n          anchor.href = URL.createObjectURL(blob);\n          anchor.download = fileName;\n          anchor.click();\n        }\n      }, error => {\n        if (error.HttpStatusCode === 404 /* HttpStatusCode.NotFound */) {\n          this.toastService.error(error.error?.error_desc);\n        }\n      });\n    } else {\n      console.log(\"no documents\");\n    }\n  }\n  onCancel(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.router.navigate(['/inbox']);\n    });\n  }\n  onSubmit(approve, event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      if (approve) {\n        const request = {\n          approve: true\n        };\n        this.instalmentService.approve(this.instalmentPlanId, request).subscribe(res => {\n          this.toastService.success(\"Instalment Plan termination approved successfully\");\n          this.router.navigate(['/inbox']);\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      } else {\n        //reject\n        const request = {\n          approve: false,\n          reason: this.rejectionDialog.getReason()\n        };\n        this.instalmentService.approve(this.instalmentPlanId, request).subscribe(res => {\n          this.toastService.success(\"Instalment Plan termination rejected successfully\");\n          this.router.navigate(['/inbox']);\n        }, error => {\n          this.toastService.error(error.error?.error_desc);\n        });\n      }\n    });\n  }\n  isRejectionFormValid() {\n    return this.rejectionDialog.isValid();\n  }\n}\nexports.InstalmentTerminateApprovalComponent = InstalmentTerminateApprovalComponent;\nInstalmentTerminateApprovalComponent.ɵfac = function InstalmentTerminateApprovalComponent_Factory(t) {\n  return new (t || InstalmentTerminateApprovalComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CustomToastService), i0.ɵɵdirectiveInject(i3.NspConfirmationService), i0.ɵɵdirectiveInject(i4.InstalmentService), i0.ɵɵdirectiveInject(i5.PaymentService), i0.ɵɵdirectiveInject(i6.FileUploadService));\n};\nInstalmentTerminateApprovalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InstalmentTerminateApprovalComponent,\n  selectors: [[\"n2-instalment-terminate-approval\"]],\n  viewQuery: function InstalmentTerminateApprovalComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.rejectionDialog = _t.first);\n    }\n  },\n  decls: 178,\n  vars: 70,\n  consts: [[3, \"value\", \"valueChange\"], [1, \"flex\", \"flex-column\", \"gap-4\"], [\"header\", \"Personal Particulars\"], [1, \"particulars\"], [3, \"header\"], [1, \"grid\"], [1, \"col-10\"], [1, \"flex\"], [1, \"col-3\"], [1, \"col-2\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-download\", \"iconPos\", \"left\", \"label\", \"Supporting Documents\", \"pTooltip\", \"Download Supporting Documents\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [1, \"flex\", \"justify-content-end\", \"align-items-center\", \"gap-2\"], [\"id\", \"cancel\", \"key\", \"cancelPopup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"id\", \"reject\", \"key\", \"rejectPopup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Reject\", 1, \"p-button-outlined\", 3, \"disabled\", \"click\"], [\"id\", \"approve\", \"key\", \"approvePopup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Approve\", 3, \"disabled\", \"click\"], [\"header\", \"Reject Instalment Plan Termination\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"rejectionReasonDialog\", \"\"], [\"pTemplate\", \"footer\"], [1, \"flex\", \"justify-content-between\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"key\", \"terminateInstalmentRecords\"], [\"scope\", \"col\", 2, \"width\", \"5%\"], [\"scope\", \"col\", \"pSortableColumn\", \"date\"], [\"field\", \"date\"], [\"scope\", \"col\", \"pSortableColumn\", \"amount\"], [\"field\", \"amount\"], [\"scope\", \"col\", \"pSortableColumn\", \"status\"], [\"field\", \"status\"], [\"scope\", \"col\", \"pSortableColumn\", \"principalRefunded\"], [\"field\", \"principalRefunded\"], [\"scope\", \"col\", \"pSortableColumn\", \"interestRefunded\"], [\"field\", \"interestRefunded\"], [\"scope\", \"col\", \"pSortableColumn\", \"excessRefundAmt\"], [\"field\", \"excessRefundAmt\"], [3, \"routerLink\"], [\"colspan\", \"7\"], [\"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"key\", \"instalmentPlanRejectConfirmation\"], [\"pButton\", \"\", \"label\", \"Submit\", 3, \"disabled\", \"click\"]],\n  template: function InstalmentTerminateApprovalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-messages\", 0);\n      i0.ɵɵlistener(\"valueChange\", function InstalmentTerminateApprovalComponent_Template_p_messages_valueChange_0_listener($event) {\n        return ctx.msgs = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(1, \"\\n\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n  \");\n      i0.ɵɵelementStart(4, \"p-panel\", 2);\n      i0.ɵɵtext(5, \"\\n    \");\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵtext(7, \"\\n      \");\n      i0.ɵɵelementStart(8, \"h5\");\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"defaultString\");\n      i0.ɵɵpipe(11, \"defaultString\");\n      i0.ɵɵpipe(12, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n      \");\n      i0.ɵɵelementStart(14, \"span\");\n      i0.ɵɵtext(15, \"NSman (M)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n      \");\n      i0.ɵɵelementStart(17, \"span\");\n      i0.ɵɵtext(18, \"CAB:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"span\");\n      i0.ɵɵtext(20);\n      i0.ɵɵpipe(21, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n\");\n      i0.ɵɵtext(23, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n\\n  \");\n      i0.ɵɵelementStart(26, \"p-panel\", 4);\n      i0.ɵɵtext(27, \"\\n    \");\n      i0.ɵɵelementStart(28, \"div\", 5);\n      i0.ɵɵtext(29, \"\\n      \");\n      i0.ɵɵelementStart(30, \"div\", 6);\n      i0.ɵɵtext(31, \"\\n        \");\n      i0.ɵɵelementStart(32, \"div\", 7);\n      i0.ɵɵtext(33, \"\\n          \");\n      i0.ɵɵelementStart(34, \"div\", 8);\n      i0.ɵɵtext(35, \"\\n            \");\n      i0.ɵɵelementStart(36, \"span\");\n      i0.ɵɵtext(37, \"Terminated By:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \" \");\n      i0.ɵɵelementStart(39, \"span\");\n      i0.ɵɵtext(40);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n          \");\n      i0.ɵɵelementStart(43, \"div\", 8);\n      i0.ɵɵtext(44, \"\\n            \");\n      i0.ɵɵelementStart(45, \"span\");\n      i0.ɵɵtext(46, \"Terminated Reason:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(47, \" \");\n      i0.ɵɵelementStart(48, \"span\");\n      i0.ɵɵtext(49);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(50, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n        \");\n      i0.ɵɵelementStart(53, \"div\", 7);\n      i0.ɵɵtext(54, \"\\n          \");\n      i0.ɵɵelementStart(55, \"div\", 8);\n      i0.ɵɵtext(56, \"\\n            \");\n      i0.ɵɵelementStart(57, \"span\");\n      i0.ɵɵtext(58, \"Monthly Instalment Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \" \");\n      i0.ɵɵelementStart(60, \"span\");\n      i0.ɵɵtext(61);\n      i0.ɵɵpipe(62, \"defaultString\");\n      i0.ɵɵpipe(63, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(64, \"br\");\n      i0.ɵɵtext(65, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(66, \"\\n          \");\n      i0.ɵɵelementStart(67, \"div\", 8);\n      i0.ɵɵtext(68, \"\\n            \");\n      i0.ɵɵelementStart(69, \"span\");\n      i0.ɵɵtext(70, \"First Month:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(71, \" \");\n      i0.ɵɵelementStart(72, \"span\");\n      i0.ɵɵtext(73);\n      i0.ɵɵpipe(74, \"defaultString\");\n      i0.ɵɵpipe(75, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(76, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n          \");\n      i0.ɵɵelementStart(78, \"div\", 8);\n      i0.ɵɵtext(79, \"\\n            \");\n      i0.ɵɵelementStart(80, \"span\");\n      i0.ɵɵtext(81, \"Interest Rate:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(82, \" \");\n      i0.ɵɵelementStart(83, \"span\");\n      i0.ɵɵtext(84);\n      i0.ɵɵpipe(85, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(86, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(87, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(88, \"\\n        \");\n      i0.ɵɵelementStart(89, \"div\", 7);\n      i0.ɵɵtext(90, \"\\n          \");\n      i0.ɵɵelementStart(91, \"div\", 8);\n      i0.ɵɵtext(92, \"\\n            \");\n      i0.ɵɵelementStart(93, \"span\");\n      i0.ɵɵtext(94, \"Outstanding Principal:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(95, \" \");\n      i0.ɵɵelementStart(96, \"span\");\n      i0.ɵɵtext(97);\n      i0.ɵɵpipe(98, \"defaultString\");\n      i0.ɵɵpipe(99, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(100, \"br\");\n      i0.ɵɵtext(101, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n          \");\n      i0.ɵɵelementStart(103, \"div\", 8);\n      i0.ɵɵtext(104, \"\\n            \");\n      i0.ɵɵelementStart(105, \"span\");\n      i0.ɵɵtext(106, \"Outstanding Interest:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(107, \" \");\n      i0.ɵɵelementStart(108, \"span\");\n      i0.ɵɵtext(109);\n      i0.ɵɵpipe(110, \"defaultString\");\n      i0.ɵɵpipe(111, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(112, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(113, \"\\n          \");\n      i0.ɵɵelementStart(114, \"div\", 8);\n      i0.ɵɵtext(115, \"\\n            \");\n      i0.ɵɵelementStart(116, \"span\");\n      i0.ɵɵtext(117, \"Outstanding Amount:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(118, \" \");\n      i0.ɵɵelementStart(119, \"span\");\n      i0.ɵɵtext(120);\n      i0.ɵɵpipe(121, \"defaultString\");\n      i0.ɵɵpipe(122, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(123, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(124, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(125, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(126, \"\\n      \");\n      i0.ɵɵelementStart(127, \"div\", 9);\n      i0.ɵɵtext(128, \"\\n              \");\n      i0.ɵɵelementStart(129, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_Template_button_click_129_listener() {\n        return ctx.downloadSupportingDocuments();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(130, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(131, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(132, \"\\n\\n    \");\n      i0.ɵɵelementStart(133, \"p-table\", 11);\n      i0.ɵɵtext(134, \"\\n      \");\n      i0.ɵɵtemplate(135, InstalmentTerminateApprovalComponent_ng_template_135_Template, 8, 0, \"ng-template\", 12);\n      i0.ɵɵtext(136, \"\\n      \");\n      i0.ɵɵtemplate(137, InstalmentTerminateApprovalComponent_ng_template_137_Template, 37, 0, \"ng-template\", 13);\n      i0.ɵɵtext(138, \"\\n      \");\n      i0.ɵɵtemplate(139, InstalmentTerminateApprovalComponent_ng_template_139_Template, 36, 35, \"ng-template\", 14);\n      i0.ɵɵtext(140, \"\\n\\n      \");\n      i0.ɵɵtemplate(141, InstalmentTerminateApprovalComponent_ng_template_141_Template, 7, 0, \"ng-template\", 15);\n      i0.ɵɵtext(142, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(143, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(144, \"\\n\\n  \");\n      i0.ɵɵelementStart(145, \"div\", 16);\n      i0.ɵɵtext(146, \"\\n    \");\n      i0.ɵɵelementStart(147, \"div\");\n      i0.ɵɵtext(148, \"\\n      \");\n      i0.ɵɵelement(149, \"p-confirmPopup\", 17);\n      i0.ɵɵtext(150, \"\\n      \");\n      i0.ɵɵelementStart(151, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_Template_button_click_151_listener($event) {\n        return ctx.onCancel($event, \"cancelPopup\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(152, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(153, \"\\n    \");\n      i0.ɵɵelementStart(154, \"div\");\n      i0.ɵɵtext(155, \"\\n        \");\n      i0.ɵɵelement(156, \"p-confirmPopup\", 19);\n      i0.ɵɵtext(157, \"\\n        \");\n      i0.ɵɵelementStart(158, \"button\", 20);\n      i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_Template_button_click_158_listener() {\n        return ctx.displayRejectionReasonDialog.display = true;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(159, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(160, \"\\n    \");\n      i0.ɵɵelementStart(161, \"div\");\n      i0.ɵɵtext(162, \"\\n        \");\n      i0.ɵɵelement(163, \"p-confirmPopup\", 21);\n      i0.ɵɵtext(164, \"\\n        \");\n      i0.ɵɵelementStart(165, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function InstalmentTerminateApprovalComponent_Template_button_click_165_listener($event) {\n        return ctx.onSubmit(true, $event, \"approvePopup\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(166, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(167, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(168, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(169, \"\\n\\n\");\n      i0.ɵɵelementStart(170, \"p-dialog\", 23);\n      i0.ɵɵlistener(\"visibleChange\", function InstalmentTerminateApprovalComponent_Template_p_dialog_visibleChange_170_listener($event) {\n        return ctx.displayRejectionReasonDialog.display = $event;\n      });\n      i0.ɵɵtext(171, \"\\n\\n  \");\n      i0.ɵɵelement(172, \"n2-rejection-reason\", null, 24);\n      i0.ɵɵtext(174, \"\\n\\n  \");\n      i0.ɵɵtemplate(175, InstalmentTerminateApprovalComponent_ng_template_175_Template, 16, 7, \"ng-template\", 25);\n      i0.ɵɵtext(176, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(177, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"value\", ctx.msgs);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(10, 28, ctx.summary == null ? null : ctx.summary.nric), \"   \", i0.ɵɵpipeBind1(11, 30, ctx.summary == null ? null : ctx.summary.rank), \"   \", i0.ɵɵpipeBind1(12, 32, ctx.summary == null ? null : ctx.summary.name), \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 34, ctx.summary == null ? null : ctx.summary.cabInd));\n      i0.ɵɵadvance(6);\n      i0.ɵɵpropertyInterpolate1(\"header\", \"Instalment Plan: \", ctx.instalmentPlan == null ? null : ctx.instalmentPlan.id, \"\");\n      i0.ɵɵadvance(14);\n      i0.ɵɵtextInterpolate(ctx.instalmentPlan == null ? null : ctx.instalmentPlan.terminationRequestedBy);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(ctx.instalmentPlan == null ? null : ctx.instalmentPlan.reason);\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(62, 36, i0.ɵɵpipeBind3(63, 38, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.monthlyAmount, \"SGD\", \"\")));\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(74, 42, i0.ɵɵpipeBind2(75, 44, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.effectiveDate, \"MM-yyyy\")));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(85, 47, ctx.instalmentPlan == null ? null : ctx.instalmentPlan.compInterestRate));\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(98, 49, i0.ɵɵpipeBind3(99, 51, ctx.summary == null ? null : ctx.summary.principalOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(110, 55, i0.ɵɵpipeBind3(111, 57, ctx.summary == null ? null : ctx.summary.interestOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(121, 61, i0.ɵɵpipeBind3(122, 63, (ctx.summary == null ? null : ctx.summary.principalOS) + (ctx.summary == null ? null : ctx.summary.interestOS), \"SGD\", \"\")));\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"value\", ctx.instalmentPlan == null ? null : ctx.instalmentPlan.overpaymentRefunds)(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(67, _c2))(\"showCurrentPageReport\", true);\n      i0.ɵɵadvance(25);\n      i0.ɵɵproperty(\"disabled\", !ctx.instalmentPlan);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"disabled\", !ctx.instalmentPlan);\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(68, _c3));\n      i0.ɵɵproperty(\"visible\", ctx.displayRejectionReasonDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(69, _c4))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n    }\n  },\n  dependencies: [i1.RouterLink, i7.PrimeTemplate, i8.ButtonDirective, i9.Tooltip, i10.Table, i10.SortableColumn, i10.SortIcon, i11.Dialog, i12.ConfirmPopup, i13.Messages, i14.RejectionReasonComponent, i15.Panel, i16.Ripple, i17.CurrencyPipe, i17.DatePipe, i18.DefaultStringPipe],\n  styles: [\".particulars[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .particulars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  display: inline !important;\\n  padding: 16px;\\n}\\n\\n  .p-tooltip {\\n  max-width: -moz-fit-content;\\n  max-width: fit-content;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhbG1lbnQtdGVybWluYXRlLWFwcHJvdmFsLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxccHJvamVjdHMlMjAyXFxuc3BheWlpYXBwXFxzcmNcXG1haW5cXHdlYmFwcFxcYXBwXFxwYXltZW50XFxpbnN0YWxtZW50XFxpbnN0YWxtZW50LXRlcm1pbmF0ZS1hcHByb3ZhbFxcaW5zdGFsbWVudC10ZXJtaW5hdGUtYXBwcm92YWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBQTtFQUNBLGFBQUE7QUNDRjs7QURHRTtFQUNFLDJCQUFBO0VBQUEsc0JBQUE7QUNBSiIsImZpbGUiOiJpbnN0YWxtZW50LXRlcm1pbmF0ZS1hcHByb3ZhbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wYXJ0aWN1bGFycyBoNSwgLnBhcnRpY3VsYXJzIHNwYW4ge1xyXG4gIGRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbn1cclxuXHJcbjo6bmctZGVlcCB7XHJcbiAgLnAtdG9vbHRpcCB7XHJcbiAgICBtYXgtd2lkdGg6IGZpdC1jb250ZW50O1xyXG4gIH1cclxufVxyXG4iLCIucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDE2cHg7XG59XG5cbjo6bmctZGVlcCAucC10b29sdGlwIHtcbiAgbWF4LXdpZHRoOiBmaXQtY29udGVudDtcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9pbnN0YWxtZW50L2luc3RhbG1lbnQtdGVybWluYXRlLWFwcHJvdmFsL2luc3RhbG1lbnQtdGVybWluYXRlLWFwcHJvdmFsLmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vcHJvamVjdHMlMjAyL25zcGF5aWlhcHAvc3JjL21haW4vd2ViYXBwL2FwcC9wYXltZW50L2luc3RhbG1lbnQvaW5zdGFsbWVudC10ZXJtaW5hdGUtYXBwcm92YWwvaW5zdGFsbWVudC10ZXJtaW5hdGUtYXBwcm92YWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBQTtFQUNBLGFBQUE7QUNDRjs7QURHRTtFQUNFLDJCQUFBO0VBQUEsc0JBQUE7QUNBSjtBREVBLHdoQ0FBd2hDIiwic291cmNlc0NvbnRlbnQiOlsiLnBhcnRpY3VsYXJzIGg1LCAucGFydGljdWxhcnMgc3BhbiB7XHJcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XHJcbiAgcGFkZGluZzogMTZweDtcclxufVxyXG5cclxuOjpuZy1kZWVwIHtcclxuICAucC10b29sdGlwIHtcclxuICAgIG1heC13aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcbiIsIi5wYXJ0aWN1bGFycyBoNSwgLnBhcnRpY3VsYXJzIHNwYW4ge1xuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMTZweDtcbn1cblxuOjpuZy1kZWVwIC5wLXRvb2x0aXAge1xuICBtYXgtd2lkdGg6IGZpdC1jb250ZW50O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","InstalmentTerminateApprovalComponent","constructor","router","route","toastService","nspConfirmService","instalmentService","paymentService","fileUploadService","display","nric","name","rank","sex","csn","principalOS","interestOS","protectedPayableInd","protectedPayableSPInd","instalmentInd","cabInd","ngOnInit","msgs","push","severity","summary","detail","params","subscribe","instalmentPlanId","loadInstalmentPlan","getPendingTermination","res","body","data","instalmentPlan","loadSummary","error","console","log","message","status","getSummaryByNric","exportCSV","downloadSupportingDocuments","fileIds","supportingDocs","map","x","String","documentId","downloadZip","contentDispositionHeader","headers","get","fileName","split","trim","replace","blob","Blob","type","anchor","document","createElement","href","URL","createObjectURL","download","click","HttpStatusCode","error_desc","onCancel","event","key","dialog","onConfirmPopup","navigate","onSubmit","approve","request","success","reason","rejectionDialog","getReason","isRejectionFormValid","isValid","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-terminate-approval\\instalment-terminate-approval.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-terminate-approval\\instalment-terminate-approval.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { InstalmentService } from 'app/payment/instalment/service/instalment.service';\r\nimport { IInstalmentRecord } from 'app/payment/instalment/model/instalment-record.model';\r\nimport { HttpErrorResponse, HttpResponse, HttpStatusCode } from '@angular/common/http';\r\nimport { Message } from 'primeng/api';\r\nimport { PaymentService } from 'app/payment/overpayment/service/payment.service';\r\nimport { IOPSummary } from 'app/payment/overpayment/overpayment-info/overpayment-info.model';\r\nimport { IInstalmentPlan } from '../model/instalment-plan.model';\r\nimport { RejectionReasonComponent } from 'app/shared/component/rejection-reason/rejection-reason.component';\r\nimport { FileUploadService } from 'app/shared/service/file-upload.service';\r\n\r\n@Component({\r\n  selector: 'n2-instalment-terminate-approval',\r\n  templateUrl: './instalment-terminate-approval.component.html',\r\n  styleUrls: ['./instalment-terminate-approval.component.scss']\r\n})\r\nexport class InstalmentTerminateApprovalComponent implements OnInit {\r\n  \r\n  displayRejectionReasonDialog: any = { display: false };\r\n\r\n  instalmentPlan: IInstalmentPlan;\r\n  instalmentPlanId: string;\r\n\r\n  summary: IOPSummary = {\r\n    nric: '',\r\n    name: '',\r\n    rank: '',\r\n    sex: '',\r\n    csn: '',\r\n    principalOS: 0,\r\n    interestOS: 0,\r\n    protectedPayableInd: '',\r\n    protectedPayableSPInd: '',\r\n    instalmentInd: '',\r\n    cabInd: ''\r\n  };\r\n\r\n\r\n  msgs: Message[] = [];\r\n\r\n  @ViewChild('rejectionReasonDialog')\r\n  private rejectionDialog: RejectionReasonComponent;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private instalmentService: InstalmentService,\r\n    private paymentService: PaymentService,\r\n    private fileUploadService: FileUploadService) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.msgs.push({severity:'warn', summary:'Warning', detail:'This Instalment record will be terminated upon approval'});\r\n    this.route.params.subscribe(params => {\r\n      // Call API endpoint to retrieve the Instalment record\r\n      this.instalmentPlanId = params['instalmentId'];\r\n      if(this.instalmentPlanId) {\r\n        this.loadInstalmentPlan();\r\n      }\r\n    });\r\n  }\r\n\r\n  loadInstalmentPlan(): void {\r\n    this.instalmentService.getPendingTermination(this.instalmentPlanId).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        if(res.body.data) {\r\n          this.instalmentPlan = res.body?.data;\r\n          this.loadSummary();\r\n        } else {\r\n          this.toastService.error(\"No record pending termination found for given Id\");\r\n        }\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error.message);\r\n        if (error.status === HttpStatusCode.NotFound) {\r\n          this.toastService.error('No Instalment record found');\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  loadSummary(): void {\r\n    this.paymentService.getSummaryByNric(this.instalmentPlan.nric).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        this.summary = res.body?.data;\r\n      }\r\n    );\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  downloadSupportingDocuments(): void {\r\n    const fileIds = this.instalmentPlan.supportingDocs?.map(x => String(x.documentId));\r\n\r\n    if(fileIds) {\r\n      this.fileUploadService.downloadZip(fileIds).subscribe(\r\n        res => {\r\n          if(res) {\r\n            const data = res;\r\n            const contentDispositionHeader: string = data.headers.get('content-disposition');\r\n            const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');        \r\n            const blob = new Blob([data.body], { type: data.headers.get('content-type')});\r\n            const anchor = document.createElement(\"a\");\r\n            anchor.href = URL.createObjectURL(blob);\r\n            anchor.download = fileName;\r\n            anchor.click();\r\n          }\r\n        },\r\n        error => {\r\n          if(error.HttpStatusCode === HttpStatusCode.NotFound) {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      console.log(\"no documents\");\r\n    }\r\n  }\r\n\r\n  onCancel(event: Event, key: any, dialog:any) {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      this.router.navigate(['/inbox']);\r\n    });\r\n  }\r\n\r\n  onSubmit(approve: boolean, event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      if(approve) {\r\n        const request = {\r\n          approve: true\r\n        };\r\n\r\n        this.instalmentService.approve(this.instalmentPlanId, request).subscribe(\r\n          res => {\r\n            this.toastService.success(\"Instalment Plan termination approved successfully\");\r\n            this.router.navigate(['/inbox']);\r\n          }, error => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      } else {\r\n        //reject\r\n        const request = {\r\n          approve: false,\r\n          reason: this.rejectionDialog.getReason()\r\n        };\r\n\r\n        this.instalmentService.approve(this.instalmentPlanId, request).subscribe(\r\n          res => {\r\n            this.toastService.success(\"Instalment Plan termination rejected successfully\");\r\n            this.router.navigate(['/inbox']);\r\n          }, error => {\r\n            this.toastService.error(error.error?.error_desc);\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  isRejectionFormValid(): boolean {\r\n    return this.rejectionDialog.isValid();\r\n  }\r\n}\r\n","<p-messages [(value)]=\"msgs\"></p-messages>\r\n<div class='flex flex-column gap-4'>\r\n  <p-panel header='Personal Particulars'>\r\n    <div class='particulars'>\r\n      <h5>{{summary?.nric | defaultString}}   {{summary?.rank | defaultString}}   {{summary?.name | defaultString}}</h5>\r\n      <span>NSman (M)</span>\r\n      <span>CAB:</span><span>{{summary?.cabInd | defaultString}}</span>\r\n<!--      <span>Instalment Bank Account:</span><span>{{instalmentPlan?.bankAccount | defaultString}}</span>-->\r\n    </div>\r\n  </p-panel>\r\n\r\n  <p-panel header='Instalment Plan: {{instalmentPlan?.id}}'>\r\n    <div class=\"grid\">\r\n      <div class=\"col-10\">\r\n        <div class=\"flex\">\r\n          <div class=\"col-3\">\r\n            <span>Terminated By:</span> <span>{{instalmentPlan?.terminationRequestedBy}}</span>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <span>Terminated Reason:</span> <span>{{instalmentPlan?.reason}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex\">\r\n          <div class=\"col-3\">\r\n            <span>Monthly Instalment Amount:</span> <span>{{instalmentPlan?.monthlyAmount | currency:'SGD':'' | defaultString}}</span><br/>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <span>First Month:</span> <span>{{instalmentPlan?.effectiveDate | date:\"MM-yyyy\" | defaultString}}</span>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <span>Interest Rate:</span> <span>{{instalmentPlan?.compInterestRate | defaultString}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex\">\r\n          <div class=\"col-3\">\r\n            <span>Outstanding Principal:</span> <span>{{summary?.principalOS | currency:'SGD':'' | defaultString}}</span><br/>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <span>Outstanding Interest:</span> <span>{{summary?.interestOS | currency:'SGD':'' | defaultString}}</span>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <span>Outstanding Amount:</span> <span>{{summary?.principalOS + summary?.interestOS | currency:'SGD':'' | defaultString}}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-2\">\r\n              <button type='button' pButton pRipple icon='pi pi-download' iconPos='left' label='Supporting Documents'\r\n              (click)='downloadSupportingDocuments()' pTooltip='Download Supporting Documents'\r\n              tooltipPosition='bottom'></button>\r\n      </div>\r\n    </div>\r\n\r\n    <p-table\r\n            [value]='instalmentPlan?.overpaymentRefunds!' styleClass='p-datatable-gridlines' [paginator]='true' [rows]='5'\r\n            currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'\r\n            [rowsPerPageOptions]='[10,25,50]' [showCurrentPageReport]='true'>\r\n      <ng-template pTemplate='caption'>\r\n        <div class='flex justify-content-between'>\r\n          <button type='button' pButton pRipple icon='pi pi-file' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                  tooltipPosition='bottom'></button>\r\n        </div>\r\n        <p-confirmPopup key='terminateInstalmentRecords'></p-confirmPopup>\r\n      </ng-template>\r\n      <ng-template pTemplate='header'>\r\n        <tr>\r\n\r\n          <th scope=\"col\" style='width: 5%'>SN</th>\r\n          <th scope=\"col\" pSortableColumn='date'>Collection Date\r\n            <p-sortIcon field='date'></p-sortIcon>\r\n          </th>\r\n          <th scope=\"col\" pSortableColumn='amount'>Amount\r\n            <p-sortIcon field='amount'></p-sortIcon>\r\n          </th>\r\n          <th scope=\"col\" pSortableColumn='status'>Status\r\n            <p-sortIcon field='status'></p-sortIcon>\r\n          </th>\r\n          <th scope=\"col\" pSortableColumn='principalRefunded'>Principal O/S Refunded\r\n            <p-sortIcon field='principalRefunded'></p-sortIcon>\r\n          </th>\r\n          <th scope=\"col\" pSortableColumn='interestRefunded'>Interest O/S Refunded\r\n            <p-sortIcon field='interestRefunded'></p-sortIcon>\r\n          </th>\r\n          <th scope=\"col\" pSortableColumn='excessRefundAmt'>Excess Refund\r\n            <p-sortIcon field='excessRefundAmt'></p-sortIcon>\r\n          </th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate='body' let-refundRecord let-i='rowIndex'>\r\n        <tr>\r\n          <td><a [routerLink]=''>{{i + 1}}</a></td>\r\n          <td>{{refundRecord?.date | defaultString}}</td>\r\n          <td>{{refundRecord?.amount | currency:'SGD':'' | defaultString}}</td>\r\n          <td>{{refundRecord?.status | defaultString}}</td>\r\n          <td>{{refundRecord?.principalRefunded | currency:'SGD':'' | defaultString}}</td>\r\n          <td>{{refundRecord?.interestRefunded | currency:'SGD':'' | defaultString}}</td>\r\n          <td>{{refundRecord?.excessRefundAmt | currency:'SGD':'' | defaultString}}</td>\r\n        </tr>\r\n      </ng-template>\r\n\r\n      <ng-template pTemplate='emptymessage'>\r\n        <tr>\r\n          <td colspan='7'>No Refund records found for this Instalment Plan.</td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n  </p-panel>\r\n\r\n  <div class=\"flex justify-content-end align-items-center gap-2\">\r\n    <div>\r\n      <p-confirmPopup id=\"cancel\" key=\"cancelPopup\"></p-confirmPopup>\r\n      <button pButton type=\"button\" label=\"Cancel\" class=\"p-button-danger\" (click)=\"onCancel($event, 'cancelPopup', null)\"></button>\r\n  </div>\r\n    <div>\r\n        <p-confirmPopup id=\"reject\" key=\"rejectPopup\"></p-confirmPopup>\r\n        <button pButton type=\"button\" label=\"Reject\" class=\"p-button-outlined\" (click)=\"displayRejectionReasonDialog.display = true;\"\r\n        [disabled]=\"!instalmentPlan\"></button>\r\n    </div>\r\n    <div>\r\n        <p-confirmPopup id=\"approve\" key=\"approvePopup\"></p-confirmPopup>\r\n        <button pButton type=\"button\" label=\"Approve\" (click)=\"onSubmit(true, $event, 'approvePopup', null)\"\r\n        [disabled]=\"!instalmentPlan\"></button>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<p-dialog header='Reject Instalment Plan Termination' [(visible)]='displayRejectionReasonDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '50vw'}\" [draggable]='false' [resizable]='false' [modal]='true'>\r\n\r\n  <n2-rejection-reason #rejectionReasonDialog></n2-rejection-reason>\r\n\r\n  <ng-template pTemplate='footer'>\r\n    <div class=\"flex justify-content-end align-items-center gap-2\">\r\n      <div>\r\n        <button pButton class='p-button-danger' label='Cancel' (click)='displayRejectionReasonDialog.display=false'\r\n        [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"></button>\r\n      </div>\r\n      <div>\r\n        <p-confirmPopup key='instalmentPlanRejectConfirmation'></p-confirmPopup>\r\n        <button pButton label='Submit' (click)=\"onSubmit(false, $event, 'instalmentPlanRejectConfirmation', displayRejectionReasonDialog)\"\r\n          [style]=\"{'margin-left': '.5em' , 'margin-bottom': '.5em'}\"\r\n          [disabled]=\"!isRejectionFormValid()\"></button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InstalmentEditRejectedComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst forms_1 = require(\"@angular/forms\");\nconst nspapp_constants_1 = require(\"app/shared/constants/nspapp.constants\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/payment/instalment/service/instalment.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/payment/overpayment/service/payment.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/confirmpopup\"));\nconst i14 = tslib_1.__importStar(require(\"primeng/calendar\"));\nconst i15 = tslib_1.__importStar(require(\"primeng/inputnumber\"));\nconst i16 = tslib_1.__importStar(require(\"../../../shared/component/file-upload/file-upload.component\"));\nconst i17 = tslib_1.__importStar(require(\"primeng/panel\"));\nconst i18 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i19 = tslib_1.__importStar(require(\"../instalment-create-generate-email/instalment-create-generate-email.component\"));\nconst i20 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"approvalEmailFileUpload\"];\nconst _c1 = [\"nsmanLetterFileUpload\"];\nconst _c2 = [\"bankLetterFileUpload\"];\nconst _c3 = [\"createGenerateEmailComponent\"];\nfunction InstalmentEditRejectedComponent_span_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 64);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InstalmentEditRejectedComponent_span_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 64);\n    i0.ɵɵtext(1, \"Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InstalmentEditRejectedComponent_p_table_60_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelementStart(3, \"button\", 70);\n    i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_p_table_60_ng_template_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n              \");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Estimated Plan Computed on \", i0.ɵɵpipeBind1(7, 1, ctx_r8.rejectedInstalmentPlan.computedDate), \"\");\n  }\n}\nfunction InstalmentEditRejectedComponent_p_table_60_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelementStart(3, \"th\", 71);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n              \");\n    i0.ɵɵelementStart(6, \"th\", 72);\n    i0.ɵɵtext(7, \"Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n              \");\n    i0.ɵɵelementStart(9, \"th\", 72);\n    i0.ɵɵtext(10, \"Principal O/S\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n              \");\n    i0.ɵɵelementStart(12, \"th\", 72);\n    i0.ɵɵtext(13, \"Payment Per Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n              \");\n    i0.ɵɵelementStart(15, \"th\", 72);\n    i0.ɵɵtext(16, \"Interest Per Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n          \");\n  }\n}\nfunction InstalmentEditRejectedComponent_p_table_60_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n              \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"defaultString\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n              \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"defaultString\");\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n              \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"defaultString\");\n    i0.ɵɵpipe(19, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n              \");\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"defaultString\");\n    i0.ɵɵpipe(24, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n          \");\n  }\n  if (rf & 2) {\n    const computedInstalmentPayment_r14 = ctx.$implicit;\n    const i_r15 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r15 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, i0.ɵɵpipeBind2(9, 7, computedInstalmentPayment_r14 == null ? null : computedInstalmentPayment_r14.paymentMonth, \"MM-yyyy\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 10, i0.ɵɵpipeBind3(14, 12, computedInstalmentPayment_r14 == null ? null : computedInstalmentPayment_r14.principalOSBalance, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 16, i0.ɵɵpipeBind3(19, 18, computedInstalmentPayment_r14 == null ? null : computedInstalmentPayment_r14.paymentAmount, \"SGD\", \"\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 22, i0.ɵɵpipeBind3(24, 24, computedInstalmentPayment_r14 == null ? null : computedInstalmentPayment_r14.interestAmount, \"SGD\", \"\")));\n  }\n}\nfunction InstalmentEditRejectedComponent_p_table_60_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n            \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n              \");\n    i0.ɵɵelementStart(3, \"td\", 73);\n    i0.ɵɵtext(4, \"No Computed Instalment Payments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n          \");\n  }\n}\nconst _c4 = function () {\n  return [10, 25, 50];\n};\nfunction InstalmentEditRejectedComponent_p_table_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\", 65);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵtemplate(2, InstalmentEditRejectedComponent_p_table_60_ng_template_2_Template, 10, 3, \"ng-template\", 66);\n    i0.ɵɵtext(3, \"\\n          \");\n    i0.ɵɵtemplate(4, InstalmentEditRejectedComponent_p_table_60_ng_template_4_Template, 19, 0, \"ng-template\", 67);\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵtemplate(6, InstalmentEditRejectedComponent_p_table_60_ng_template_6_Template, 27, 28, \"ng-template\", 68);\n    i0.ɵɵtext(7, \"\\n\\n          \");\n    i0.ɵɵtemplate(8, InstalmentEditRejectedComponent_p_table_60_ng_template_8_Template, 7, 0, \"ng-template\", 69);\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", ctx_r2.rejectedInstalmentPlan.instalmentComputedPaymentList)(\"paginator\", true)(\"rows\", 10)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(5, _c4))(\"showCurrentPageReport\", true);\n  }\n}\nfunction InstalmentEditRejectedComponent_ng_template_231_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n  \");\n  }\n}\nconst _c5 = function () {\n  return {\n    \"width\": \"0%\"\n  };\n};\nconst _c6 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c7 = function () {\n  return {\n    \"960px\": \"75vw\"\n  };\n};\nclass InstalmentEditRejectedComponent {\n  constructor(router, route, fb, toastService, nspConfirmService, instalmentService, paymentService) {\n    this.router = router;\n    this.route = route;\n    this.fb = fb;\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.instalmentService = instalmentService;\n    this.paymentService = paymentService;\n    this.previousUrl = \"\";\n    this.fileUploadFileLimit = 1;\n    this.displayGenerateApprovalEmailDialog = {\n      display: false\n    };\n    this.summary = {\n      nric: '',\n      name: '',\n      rank: '',\n      sex: '',\n      csn: '',\n      principalOS: 0,\n      interestOS: 0,\n      protectedPayableInd: '',\n      protectedPayableSPInd: '',\n      instalmentInd: '',\n      cabInd: ''\n    };\n    this.computeInstalmentForm = this.fb.group({\n      monthlyAmount: new forms_1.FormControl(null, forms_1.Validators.required),\n      effectiveDate: new forms_1.FormControl(null, forms_1.Validators.required),\n      compInterestRate: new forms_1.FormControl({\n        value: nspapp_constants_1.NSPAppConstants.INSTALMENT_INTEREST_RATE,\n        disabled: true\n      }, forms_1.Validators.required)\n    });\n    this.instalmentSuppDocsForm = this.fb.group({\n      approvalEmail: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")]),\n      nsManLetter: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")]),\n      bankLetter: new forms_1.FormControl([], [fileupload2_directive_1.FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), fileupload2_directive_1.FileUploadValidator2.allowableExtension(\".pdf\")])\n    });\n    this.instalmentSuppDocsSentDatesForm = this.fb.group({\n      approvalEmailSentDate: new forms_1.FormControl(null, forms_1.Validators.required),\n      letterNSmanSentDate: new forms_1.FormControl(null, forms_1.Validators.required),\n      letterBankSentDate: new forms_1.FormControl(null, forms_1.Validators.required)\n    });\n    this.disableSaveButton = true;\n    // this.previousUrl = this.router.getCurrentNavigation().previousNavigation.finalUrl.toString();\n    this.previousUrl = \"/inbox\";\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.rejectedInstalmentPlanId = params['instalmentId'];\n      if (this.rejectedInstalmentPlanId) {\n        this.loadInstalment();\n      }\n    });\n  }\n  loadInstalment() {\n    this.instalmentService.getRejectedInstalment(this.rejectedInstalmentPlanId).subscribe(res => {\n      // Pipe response to an array of Interface model\n      if (res.body?.data) {\n        this.rejectedInstalmentPlan = res.body?.data;\n        this.patchFormValues();\n        this.loadSummary(this.rejectedInstalmentPlan.nric);\n      } else {\n        this.toastService.error(\"No rejected record found with the given id\");\n        this.router.navigate(['/inbox']);\n      }\n    }, error => {\n      console.log(error.message);\n      if (error.status === 404 /* HttpStatusCode.NotFound */) {\n        this.toastService.error(\"No rejected record found with the given id\");\n        this.router.navigate(['/inbox']);\n      }\n    });\n  }\n  loadSummary(nric) {\n    this.paymentService.getSummaryByNric(nric).subscribe(summaryRes => {\n      this.summary = summaryRes.body?.data;\n    });\n  }\n  patchFormValues() {\n    this.computeInstalmentForm.get('monthlyAmount').patchValue(this.rejectedInstalmentPlan.monthlyAmount);\n    this.computeInstalmentForm.get('effectiveDate').patchValue(new Date(this.rejectedInstalmentPlan.effectiveDate));\n    this.computeInstalmentForm.get('compInterestRate').patchValue(this.rejectedInstalmentPlan.compInterestRate);\n    if (this.rejectedInstalmentPlan.supportingDocs?.length > 0) {\n      const approvalEmailIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"APP\").map(doc => doc.documentId);\n      this.approvalEmailFileUploadComponent.preloadFiles(approvalEmailIds);\n      const nsmanLetterIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"NSM\").map(doc => doc.documentId);\n      this.nsmanLetterFileUploadComponent.preloadFiles(nsmanLetterIds);\n      const bankLetterIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"BNK\").map(doc => doc.documentId);\n      this.bankLetterFileUploadComponent.preloadFiles(bankLetterIds);\n    }\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  // Pop up the Confirmation dialog to Cancel current transaction\n  onCancel(event, key) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      // Define function that will be called upon confirmation of the cancellation dialog\n      // Will route back to Inbox upon cancellation in this case\n      this.router.navigate(['/inbox']);\n    });\n  }\n  onSubmit(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog);\n  }\n  onCompute(event, key) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.computeInterestPlan();\n    });\n  }\n  computeInterestPlan() {\n    const instalmentPlanToCompute = {\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\n      nric: this.summary.nric\n    };\n    console.log(\"computeInterestPlan\", instalmentPlanToCompute);\n    // Call API endpoint to compute an Instalment Plan\n    this.instalmentService.computePaymentPlan(instalmentPlanToCompute).subscribe(res => {\n      // Pipe response to an array of Interface model\n      const computed = res.body?.data;\n      // Set newly computed to instalmentPlan\n      this.rejectedInstalmentPlan.instalmentComputedPaymentList = computed.instalmentComputedPaymentList;\n      this.rejectedInstalmentPlan.computedDate = computed.computedDate;\n      if (this.rejectedInstalmentPlan.instalmentComputedPaymentList?.length > 0) {\n        this.disableSaveButton = false;\n      }\n    }, error => {\n      console.log(error.message);\n      if (error.status === 404 /* HttpStatusCode.NotFound */) {\n        this.toastService.error('Error computing an Instalment Plan with given parameters');\n      }\n    });\n  }\n  // Save/Return to draft\n  onSave(event, key) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.saveDraftInstalmentPlan();\n    });\n  }\n  saveDraftInstalmentPlan() {\n    const approvalEmail = this.approvalEmailFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id))[0];\n    const nsmanLetter = this.nsmanLetterFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id))[0];\n    const bankLetter = this.bankLetterFileUploadComponent.verifiedFiles?.map(x => String(x.meta_data.id))[0];\n    // TODO: Include DMS API calling to save & link all supporting documents to this Instalment plan?\n    const instalmentPlanToSave = {\n      nric: this.rejectedInstalmentPlan.nric,\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\n      computedDate: new Date(this.rejectedInstalmentPlan.computedDate).toISOString(),\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\n      approvalEmailSentDate: this.instalmentSuppDocsSentDatesForm.get('approvalEmailSentDate')?.value,\n      letterNSmanSentDate: this.instalmentSuppDocsSentDatesForm.get('letterNSmanSentDate')?.value,\n      letterBankSentDate: this.instalmentSuppDocsSentDatesForm.get('letterBankSentDate')?.value,\n      instalmentComputedPaymentList: this.rejectedInstalmentPlan.instalmentComputedPaymentList,\n      approvalEmailDocument: approvalEmail,\n      nsManReturnLetterDocument: nsmanLetter,\n      bankReturnLetterDocument: bankLetter,\n      isEditRejected: true\n    };\n    console.log(\"instalmentPlanToSave\", instalmentPlanToSave);\n    // Call API endpoint to persist draft of Instalment Plan into database\n    this.instalmentService.saveDraftInstalmentPlan(instalmentPlanToSave).subscribe(saveDraftRes => {\n      if (saveDraftRes.body && saveDraftRes.body.data) {\n        this.toastService.success('Successfully saved draft of Instalment Plan');\n      }\n    }, error => {\n      console.log(error.message);\n      this.toastService.error('Error saving draft of Instalment Plan with given parameters');\n    });\n  }\n  // Generate approval email\n  onSubmitGenerateApprovalEmail(dialog) {\n    dialog.display = true;\n    this.instalmentCreateGenerateEmailComponent.generate();\n  }\n  onSubmitGenerate(event, key, dialog) {\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\n      console.log(\"generate email\");\n    });\n  }\n  // Create instalment plan\n  onSubmitCreate(event, key) {\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\n      this.createInstalmentPlan();\n    });\n  }\n  // Create Instalment Plan\n  createInstalmentPlan() {\n    const approvalEmail = this.approvalEmailFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))[0];\n    const nsmanLetter = this.nsmanLetterFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))[0];\n    const bankLetter = this.bankLetterFileUploadComponent.verifiedFiles.map(x => String(x.meta_data.id))[0];\n    const instalmentPlan = {\n      nric: this.summary.nric,\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\n      computedDate: new Date(this.rejectedInstalmentPlan.computedDate).toISOString(),\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\n      approvalEmailSentDate: this.instalmentSuppDocsSentDatesForm.get('approvalEmailSentDate')?.value,\n      letterNSmanSentDate: this.instalmentSuppDocsSentDatesForm.get('letterNSmanSentDate')?.value,\n      letterBankSentDate: this.instalmentSuppDocsSentDatesForm.get('letterBankSentDate')?.value,\n      instalmentComputedPaymentList: this.rejectedInstalmentPlan.instalmentComputedPaymentList,\n      approvalEmailDocument: approvalEmail,\n      nsManReturnLetterDocument: nsmanLetter,\n      bankReturnLetterDocument: bankLetter,\n      isEditRejected: true\n    };\n    this.instalmentService.create(instalmentPlan).subscribe(res => {\n      if (res) {\n        this.toastService.success(\"Instalment created succesfully\");\n        this.router.navigate([this.previousUrl]);\n      }\n    }, error => {\n      this.toastService.error(error.error?.error_desc);\n    });\n  }\n}\nexports.InstalmentEditRejectedComponent = InstalmentEditRejectedComponent;\nInstalmentEditRejectedComponent.ɵfac = function InstalmentEditRejectedComponent_Factory(t) {\n  return new (t || InstalmentEditRejectedComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.CustomToastService), i0.ɵɵdirectiveInject(i4.NspConfirmationService), i0.ɵɵdirectiveInject(i5.InstalmentService), i0.ɵɵdirectiveInject(i6.PaymentService));\n};\nInstalmentEditRejectedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InstalmentEditRejectedComponent,\n  selectors: [[\"n2-instalment-edit-rejected\"]],\n  viewQuery: function InstalmentEditRejectedComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n      i0.ɵɵviewQuery(_c3, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.approvalEmailFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.nsmanLetterFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.bankLetterFileUploadComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.instalmentCreateGenerateEmailComponent = _t.first);\n    }\n  },\n  decls: 234,\n  vars: 72,\n  consts: [[1, \"flex\", \"flex-column\"], [1, \"grid\"], [1, \"col-6\", \"flex\"], [\"header\", \"Create Instalment\", 1, \"flex-auto\", \"flex\", \"create-instalment\"], [3, \"formGroup\"], [1, \"col-5\", \"flex\", \"align-items-center\", \"gap-2\"], [1, \"flex-shrink-0\"], [\"formControlName\", \"monthlyAmount\", \"id\", \"monthlyInstalmentAmount\", \"currency\", \"SGD\", 3, \"inputStyle\", \"minFractionDigits\", \"maxFractionDigits\", \"max\"], [1, \"col-3\", \"flex\", \"align-items-center\", \"gap-2\"], [\"formControlName\", \"effectiveDate\", \"view\", \"month\", \"dateFormat\", \"mm-yy\", 1, \"computationCalendar\", 3, \"inputStyle\"], [1, \"col-4\", \"flex\", \"align-items-center\", \"gap-2\", \"justify-content-between\"], [1, \"flex\", \"align-items-center\", \"gap-2\"], [\"formControlName\", \"compInterestRate\", \"id\", \"interestRate\", \"currency\", \"SGD\", 3, \"inputStyle\", \"minFractionDigits\", \"maxFractionDigits\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Compute\", 1, \"flex-shrink-0\", 3, \"disabled\", \"click\"], [1, \"col-5\", \"flex\", \"justify-content-end\"], [\"class\", \"p-error\", 4, \"ngIf\"], [1, \"col-3\", \"flex\", \"justify-content-end\"], [\"key\", \"computeInterest\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", 4, \"ngIf\"], [1, \"col-6\"], [1, \"flex\", \"flex-column\", \"gap-2\"], [\"header\", \"Personal Particulars\"], [1, \"particulars\"], [\"header\", \"Supporting Documents\"], [1, \"flex\", \"gap-4\"], [1, \"flex\", \"flex-column\", \"justify-content-around\", \"gap-2\"], [1, \"flex-auto\", \"flex\", \"flex-column\", \"justify-content-around\", \"gap-2\"], [\"formControlName\", \"approvalEmail\", \"id\", \"approvalEmail\", 3, \"contentHeight\", \"externalFileLimit\"], [\"approvalEmailFileUpload\", \"\"], [\"formControlName\", \"nsManLetter\", \"id\", \"nsManLetter\", 3, \"contentHeight\", \"externalFileLimit\"], [\"nsmanLetterFileUpload\", \"\"], [\"formControlName\", \"bankLetter\", \"id\", \"bankLetter\", 3, \"contentHeight\", \"externalFileLimit\"], [\"bankLetterFileUpload\", \"\"], [1, \"flex\", \"justify-content-between\"], [1, \"flex\", \"gap-2\"], [1, \"flex\", \"flex-column\", \"gap-1\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Generate Approval Email\", 3, \"click\"], [\"placeholder\", \"Select sent date\", \"appendTo\", \"body\", \"formControlName\", \"approvalEmailSentDate\", \"view\", \"month\", \"dateFormat\", \"mm-yy\", 1, \"flex\", \"nsManLetterCalendar\", 3, \"inputStyle\"], [\"key\", \"generateNSmanLetter\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Generate Letter for NSman\", 3, \"click\"], [\"placeholder\", \"Select sent date\", \"appendTo\", \"body\", \"formControlName\", \"letterNSmanSentDate\", \"view\", \"month\", \"dateFormat\", \"mm-yy\", 1, \"flex\", \"nsManLetterCalendar\", 3, \"inputStyle\"], [\"key\", \"generateBankLetter\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Generate Letter for Bank\", 3, \"click\"], [\"placeholder\", \"Select sent date\", \"appendTo\", \"body\", \"formControlName\", \"letterBankSentDate\", \"view\", \"month\", \"dateFormat\", \"mm-yy\", 1, \"flex\", \"nsManLetterCalendar\", 3, \"inputStyle\"], [1, \"flex\", \"align-items-start\", \"justify-content-end\", \"gap-2\"], [\"key\", \"editRejectedInstalmentCancel\"], [\"key\", \"editRejectedInstalmentReturnToDraft\"], [\"key\", \"editRejectedInstalmentRemoveWithNoAction\"], [\"key\", \"editRejectedInstalmentSubmit\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Cancel\", 1, \"p-button-danger\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Return to Draft\", 1, \"p-button-info\", \"p-button-outlined\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Remove with No Action\", 1, \"p-button-outlined\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"Submit\", 3, \"click\"], [1, \"h-2rem\"], [1, \"flex\", \"justify-content-center\", \"gap-2\"], [\"key\", \"editRejectedInstalmentBack\"], [\"key\", \"editRejectedInstalmentNext\"], [\"key\", \"editRejectedInstalmentNextSameType\"], [\"icon\", \"pi pi-chevron-left\", \"iconPos\", \"left\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Back\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", \"iconPos\", \"right\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Next\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", \"iconPos\", \"right\", \"type\", \"button\", \"pButton\", \"\", \"label\", \"Next Same Type\", 1, \"p-button-outlined\", \"p-button-info\", 3, \"click\"], [\"header\", \"Approval Email\", 3, \"visible\", \"breakpoints\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"createGenerateEmailComponent\", \"\"], [\"pTemplate\", \"footer\"], [1, \"p-error\"], [\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"scope\", \"col\", 2, \"width\", \"10%\"], [\"scope\", \"col\"], [\"colspan\", \"5\"]],\n  template: function InstalmentEditRejectedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵelementStart(6, \"p-panel\", 3);\n      i0.ɵɵtext(7, \"\\n        \");\n      i0.ɵɵelementStart(8, \"form\", 4);\n      i0.ɵɵtext(9, \"\\n          \");\n      i0.ɵɵelementStart(10, \"div\", 1);\n      i0.ɵɵtext(11, \"\\n            \");\n      i0.ɵɵelementStart(12, \"div\", 5);\n      i0.ɵɵtext(13, \"\\n              \");\n      i0.ɵɵelementStart(14, \"span\", 6);\n      i0.ɵɵtext(15, \"Monthly Instalment Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n              \");\n      i0.ɵɵelement(17, \"p-inputNumber\", 7);\n      i0.ɵɵtext(18, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n            \");\n      i0.ɵɵelementStart(20, \"div\", 8);\n      i0.ɵɵtext(21, \"\\n              \");\n      i0.ɵɵelementStart(22, \"span\", 6);\n      i0.ɵɵtext(23, \"First Month\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24, \"\\n              \");\n      i0.ɵɵelement(25, \"p-calendar\", 9);\n      i0.ɵɵtext(26, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(27, \"\\n            \");\n      i0.ɵɵelementStart(28, \"div\", 10);\n      i0.ɵɵtext(29, \"\\n              \");\n      i0.ɵɵelementStart(30, \"div\", 11);\n      i0.ɵɵtext(31, \"\\n                \");\n      i0.ɵɵelementStart(32, \"span\", 6);\n      i0.ɵɵtext(33, \"Interest Rate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n                \");\n      i0.ɵɵelement(35, \"p-inputNumber\", 12);\n      i0.ɵɵtext(36, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n              \");\n      i0.ɵɵelementStart(38, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_38_listener($event) {\n        return ctx.onCompute($event, \"computeInterest\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n          \");\n      i0.ɵɵelementStart(42, \"div\", 1);\n      i0.ɵɵtext(43, \"\\n            \");\n      i0.ɵɵelementStart(44, \"div\", 14);\n      i0.ɵɵtext(45, \"\\n              \");\n      i0.ɵɵtemplate(46, InstalmentEditRejectedComponent_span_46_Template, 2, 0, \"span\", 15);\n      i0.ɵɵtext(47, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(48, \"\\n            \");\n      i0.ɵɵelementStart(49, \"div\", 16);\n      i0.ɵɵtext(50, \"\\n            \");\n      i0.ɵɵtemplate(51, InstalmentEditRejectedComponent_span_51_Template, 2, 0, \"span\", 15);\n      i0.ɵɵtext(52, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(54, \"\\n          \");\n      i0.ɵɵelement(55, \"p-confirmPopup\", 17);\n      i0.ɵɵtext(56, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(57, \"\\n        \");\n      i0.ɵɵelement(58, \"br\");\n      i0.ɵɵtext(59, \"\\n        \");\n      i0.ɵɵtemplate(60, InstalmentEditRejectedComponent_p_table_60_Template, 10, 6, \"p-table\", 18);\n      i0.ɵɵtext(61, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n    \");\n      i0.ɵɵelementStart(64, \"div\", 19);\n      i0.ɵɵtext(65, \"\\n      \");\n      i0.ɵɵelementStart(66, \"div\", 20);\n      i0.ɵɵtext(67, \"\\n        \");\n      i0.ɵɵelementStart(68, \"p-panel\", 21);\n      i0.ɵɵtext(69, \"\\n          \");\n      i0.ɵɵelementStart(70, \"div\", 22);\n      i0.ɵɵtext(71, \"\\n            \");\n      i0.ɵɵelementStart(72, \"h5\");\n      i0.ɵɵtext(73);\n      i0.ɵɵpipe(74, \"defaultString\");\n      i0.ɵɵpipe(75, \"defaultString\");\n      i0.ɵɵpipe(76, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(77, \"\\n            \");\n      i0.ɵɵelementStart(78, \"span\");\n      i0.ɵɵtext(79, \"NSman (M)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(80, \"\\n            \");\n      i0.ɵɵelementStart(81, \"span\");\n      i0.ɵɵtext(82, \"CAB:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"span\");\n      i0.ɵɵtext(84);\n      i0.ɵɵpipe(85, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(86, \"\\n            \");\n      i0.ɵɵelementStart(87, \"span\");\n      i0.ɵɵtext(88, \"Protected Payable:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(89, \"span\");\n      i0.ɵɵtext(90);\n      i0.ɵɵpipe(91, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(92, \"\\n            \");\n      i0.ɵɵelement(93, \"br\");\n      i0.ɵɵtext(94, \"\\n            \");\n      i0.ɵɵelementStart(95, \"span\");\n      i0.ɵɵtext(96, \"Outstanding Principal:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(97, \"span\");\n      i0.ɵɵtext(98);\n      i0.ɵɵpipe(99, \"defaultString\");\n      i0.ɵɵpipe(100, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(101, \"\\n            \");\n      i0.ɵɵelementStart(102, \"span\");\n      i0.ɵɵtext(103, \"Outstanding Interest:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(104, \"span\");\n      i0.ɵɵtext(105);\n      i0.ɵɵpipe(106, \"defaultString\");\n      i0.ɵɵpipe(107, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(108, \"\\n            \");\n      i0.ɵɵelementStart(109, \"span\");\n      i0.ɵɵtext(110, \"Instalment:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(111, \"span\");\n      i0.ɵɵtext(112);\n      i0.ɵɵpipe(113, \"defaultString\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(114, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(115, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(116, \"\\n        \");\n      i0.ɵɵelementStart(117, \"p-panel\", 23);\n      i0.ɵɵtext(118, \"\\n          \");\n      i0.ɵɵelementStart(119, \"form\", 4);\n      i0.ɵɵtext(120, \"\\n            \");\n      i0.ɵɵelementStart(121, \"div\", 24);\n      i0.ɵɵtext(122, \"\\n              \");\n      i0.ɵɵelementStart(123, \"div\", 25);\n      i0.ɵɵtext(124, \"\\n                \");\n      i0.ɵɵelementStart(125, \"span\");\n      i0.ɵɵtext(126, \"Approval Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(127, \"\\n                \");\n      i0.ɵɵelementStart(128, \"span\");\n      i0.ɵɵtext(129, \"Return Letter from Bank\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(130, \"\\n                \");\n      i0.ɵɵelementStart(131, \"span\");\n      i0.ɵɵtext(132, \"Return Letter from NSman\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(133, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(134, \"\\n              \");\n      i0.ɵɵelementStart(135, \"div\", 26);\n      i0.ɵɵtext(136, \"\\n                \");\n      i0.ɵɵelement(137, \"n2-file-upload\", 27, 28);\n      i0.ɵɵtext(139, \"\\n                \");\n      i0.ɵɵelement(140, \"n2-file-upload\", 29, 30);\n      i0.ɵɵtext(142, \"\\n                \");\n      i0.ɵɵelement(143, \"n2-file-upload\", 31, 32);\n      i0.ɵɵtext(145, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(146, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(147, \"\\n          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(148, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(149, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(150, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(151, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(152, \"\\n\\n  \");\n      i0.ɵɵelementStart(153, \"form\", 4);\n      i0.ɵɵtext(154, \"\\n    \");\n      i0.ɵɵelementStart(155, \"div\", 33);\n      i0.ɵɵtext(156, \"\\n      \");\n      i0.ɵɵelementStart(157, \"div\", 34);\n      i0.ɵɵtext(158, \"\\n        \");\n      i0.ɵɵelementStart(159, \"div\", 35);\n      i0.ɵɵtext(160, \"\\n          \");\n      i0.ɵɵelement(161, \"p-confirmPopup\");\n      i0.ɵɵtext(162, \"\\n          \");\n      i0.ɵɵelementStart(163, \"button\", 36);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_163_listener() {\n        return ctx.onSubmitGenerateApprovalEmail(ctx.displayGenerateApprovalEmailDialog);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(164, \"\\n          \");\n      i0.ɵɵelement(165, \"p-calendar\", 37);\n      i0.ɵɵtext(166, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(167, \"\\n        \");\n      i0.ɵɵelementStart(168, \"div\", 35);\n      i0.ɵɵtext(169, \"\\n          \");\n      i0.ɵɵelement(170, \"p-confirmPopup\", 38);\n      i0.ɵɵtext(171, \"\\n          \");\n      i0.ɵɵelementStart(172, \"button\", 39);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_172_listener($event) {\n        return ctx.onSubmitGenerate($event, \"generateNSmanLetter\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(173, \"\\n          \");\n      i0.ɵɵelement(174, \"p-calendar\", 40);\n      i0.ɵɵtext(175, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(176, \"\\n        \");\n      i0.ɵɵelementStart(177, \"div\", 35);\n      i0.ɵɵtext(178, \"\\n          \");\n      i0.ɵɵelement(179, \"p-confirmPopup\", 41);\n      i0.ɵɵtext(180, \"\\n          \");\n      i0.ɵɵelementStart(181, \"button\", 42);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_181_listener($event) {\n        return ctx.onSubmitGenerate($event, \"generateBankLetter\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(182, \"\\n          \");\n      i0.ɵɵelement(183, \"p-calendar\", 43);\n      i0.ɵɵtext(184, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(185, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(186, \"\\n      \");\n      i0.ɵɵelementStart(187, \"div\", 44);\n      i0.ɵɵtext(188, \"\\n        \");\n      i0.ɵɵelement(189, \"p-confirmPopup\", 45);\n      i0.ɵɵtext(190, \"\\n        \");\n      i0.ɵɵelement(191, \"p-confirmPopup\", 46);\n      i0.ɵɵtext(192, \"\\n        \");\n      i0.ɵɵelement(193, \"p-confirmPopup\", 47);\n      i0.ɵɵtext(194, \"\\n        \");\n      i0.ɵɵelement(195, \"p-confirmPopup\", 48);\n      i0.ɵɵtext(196, \"\\n        \");\n      i0.ɵɵelementStart(197, \"button\", 49);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_197_listener($event) {\n        return ctx.onCancel($event, \"editRejectedInstalmentCancel\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(198, \"\\n        \");\n      i0.ɵɵelementStart(199, \"button\", 50);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_199_listener($event) {\n        return ctx.onSave($event, \"editRejectedInstalmentReturnToDraft\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(200, \"\\n        \");\n      i0.ɵɵelementStart(201, \"button\", 51);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_201_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedInstalmentRemoveWithNoAction\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(202, \"\\n        \");\n      i0.ɵɵelementStart(203, \"button\", 52);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_203_listener($event) {\n        return ctx.onSubmitCreate($event, \"editRejectedInstalmentSubmit\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(204, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(205, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(206, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(207, \"\\n\\n  \");\n      i0.ɵɵelement(208, \"div\", 53);\n      i0.ɵɵtext(209, \"\\n  \");\n      i0.ɵɵelementStart(210, \"div\", 54);\n      i0.ɵɵtext(211, \"\\n    \");\n      i0.ɵɵelement(212, \"p-confirmPopup\", 55);\n      i0.ɵɵtext(213, \"\\n    \");\n      i0.ɵɵelement(214, \"p-confirmPopup\", 56);\n      i0.ɵɵtext(215, \"\\n    \");\n      i0.ɵɵelement(216, \"p-confirmPopup\", 57);\n      i0.ɵɵtext(217, \"\\n    \");\n      i0.ɵɵelementStart(218, \"button\", 58);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_218_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedInstalmentBack\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(219, \"\\n    \");\n      i0.ɵɵelementStart(220, \"button\", 59);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_220_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedInstalmentNext\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(221, \"\\n    \");\n      i0.ɵɵelementStart(222, \"button\", 60);\n      i0.ɵɵlistener(\"click\", function InstalmentEditRejectedComponent_Template_button_click_222_listener($event) {\n        return ctx.onSubmit($event, \"editRejectedInstalmentNextSameType\", null);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(223, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(224, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(225, \"\\n\\n\");\n      i0.ɵɵelementStart(226, \"p-dialog\", 61);\n      i0.ɵɵlistener(\"visibleChange\", function InstalmentEditRejectedComponent_Template_p_dialog_visibleChange_226_listener($event) {\n        return ctx.displayGenerateApprovalEmailDialog.display = $event;\n      });\n      i0.ɵɵtext(227, \"\\n\\n  \");\n      i0.ɵɵelement(228, \"n2-instalment-create-generate-email\", null, 62);\n      i0.ɵɵtext(230, \"\\n\\n  \");\n      i0.ɵɵtemplate(231, InstalmentEditRejectedComponent_ng_template_231_Template, 1, 0, \"ng-template\", 63);\n      i0.ɵɵtext(232, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(233, \"\\n\");\n    }\n    if (rf & 2) {\n      let tmp_10_0;\n      let tmp_11_0;\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.computeInstalmentForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(64, _c5))(\"minFractionDigits\", 2)(\"maxFractionDigits\", 2)(\"max\", 1000);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(65, _c5));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(66, _c5))(\"minFractionDigits\", 2)(\"maxFractionDigits\", 2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.computeInstalmentForm.valid);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", (ctx.computeInstalmentForm == null ? null : (tmp_10_0 = ctx.computeInstalmentForm.get(\"monthlyInstalmentAmount\")) == null ? null : tmp_10_0.hasError(\"required\")) && (ctx.computeInstalmentForm == null ? null : (tmp_10_0 = ctx.computeInstalmentForm.get(\"monthlyInstalmentAmount\")) == null ? null : tmp_10_0.dirty));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (ctx.computeInstalmentForm == null ? null : (tmp_11_0 = ctx.computeInstalmentForm.get(\"firstMonth\")) == null ? null : tmp_11_0.hasError(\"required\")) && (ctx.computeInstalmentForm == null ? null : (tmp_11_0 = ctx.computeInstalmentForm.get(\"firstMonth\")) == null ? null : tmp_11_0.dirty));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.rejectedInstalmentPlan);\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(74, 40, ctx.summary == null ? null : ctx.summary.nric), \"   \", i0.ɵɵpipeBind1(75, 42, ctx.summary == null ? null : ctx.summary.rank), \"   \", i0.ɵɵpipeBind1(76, 44, ctx.summary == null ? null : ctx.summary.name), \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(85, 46, ctx.summary == null ? null : ctx.summary.cabInd));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate2(\"\", (ctx.summary == null ? null : ctx.summary.protectedPayableInd) === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(91, 48, \"No\"), \" \", (ctx.summary == null ? null : ctx.summary.protectedPayableSPInd) === \"Y\" ? \"(Service Pay)\" : \"\", \"\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(99, 50, i0.ɵɵpipeBind3(100, 52, ctx.summary == null ? null : ctx.summary.principalOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(106, 56, i0.ɵɵpipeBind3(107, 58, ctx.summary == null ? null : ctx.summary.interestOS, \"SGD\", \"\")));\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.summary.instalmentInd === \"Y\" ? \"Yes\" : i0.ɵɵpipeBind1(113, 62, \"No\"));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.instalmentSuppDocsForm);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\")(\"externalFileLimit\", ctx.fileUploadFileLimit);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\")(\"externalFileLimit\", ctx.fileUploadFileLimit);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"contentHeight\", \"100px\")(\"externalFileLimit\", ctx.fileUploadFileLimit);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"formGroup\", ctx.instalmentSuppDocsSentDatesForm);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(67, _c5));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(68, _c5));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(69, _c5));\n      i0.ɵɵadvance(43);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(70, _c6));\n      i0.ɵɵproperty(\"visible\", ctx.displayGenerateApprovalEmailDialog.display)(\"breakpoints\", i0.ɵɵpureFunction0(71, _c7))(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n    }\n  },\n  dependencies: [i7.NgIf, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i8.PrimeTemplate, i9.ButtonDirective, i10.Tooltip, i11.Table, i12.Dialog, i13.ConfirmPopup, i14.Calendar, i15.InputNumber, i16.FileUploadComponent, i17.Panel, i18.Ripple, i19.InstalmentCreateGenerateEmailComponent, i7.CurrencyPipe, i7.DatePipe, i20.DefaultStringPipe],\n  styles: [\".create-instalment > .p-panel.p-component {\\n  display: flex;\\n  flex-direction: column;\\n  flex: auto;\\n}\\n\\n  .create-instalment > .p-panel.p-component > .p-toggleable-content {\\n  display: flex;\\n  flex: auto;\\n}\\n\\n  .create-instalment > .p-panel.p-component > .p-toggleable-content > .p-panel-content {\\n  flex: auto;\\n}\\n\\n\\n\\n  .nsManLetterCalendar > .p-calendar {\\n  flex: auto;\\n}\\n\\n\\n.particulars[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .particulars[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  display: inline !important;\\n  padding: 16px;\\n}\\n\\n[_nghost-%COMP%]     .computationCalendar > .p-calendar > .p-datepicker-monthpicker {\\n  width: 25rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhbG1lbnQtZWRpdC1yZWplY3RlZC5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXHByb2plY3RzJTIwMlxcbnNwYXlpaWFwcFxcc3JjXFxtYWluXFx3ZWJhcHBcXGFwcFxccGF5bWVudFxcaW5zdGFsbWVudFxcaW5zdGFsbWVudC1lZGl0LXJlamVjdGVkXFxpbnN0YWxtZW50LWVkaXQtcmVqZWN0ZWQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O2dGQUFBO0FBR0E7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxVQUFBO0FDQ0Y7O0FERUE7RUFDRSxhQUFBO0VBQ0EsVUFBQTtBQ0NGOztBREVBO0VBQ0UsVUFBQTtBQ0NGOztBRENBOztnRkFBQTtBQUtBOzttRkFBQTtBQUdBO0VBQ0UsVUFBQTtBQ0FGOztBREVBOzttRkFBQTtBQUtBO0VBQ0UsMEJBQUE7RUFDQSxhQUFBO0FDREY7O0FESUE7RUFDRSxZQUFBO0FDREYiLCJmaWxlIjoiaW5zdGFsbWVudC1lZGl0LXJlamVjdGVkLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbkN1c3RvbSBQcmltZU5HIFAtcGFuZWwgQ1NTIC0gTWFrZSBjb250ZW50IHBhbmVsIGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgaGVpZ2h0XHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcblxyXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQgPiAucC10b2dnbGVhYmxlLWNvbnRlbnQge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleDogYXV0bztcclxufVxyXG5cclxuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50ID4gLnAtdG9nZ2xlYWJsZS1jb250ZW50ID4gLnAtcGFuZWwtY29udGVudCB7XHJcbiAgZmxleDogYXV0bztcclxufVxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuQ3VzdG9tIFByaW1lTkcgUC1wYW5lbCBDU1MgLSBNYWtlIGNvbnRlbnQgcGFuZWwgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCBoZWlnaHRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbkN1c3RvbSBQcmltZU5HIFAtY2FsZW5kYXIgQ1NTIC0gTWFrZSBDYWxlbmRhciBpbnB1dCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IHdpZHRoXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG46Om5nLWRlZXAgLm5zTWFuTGV0dGVyQ2FsZW5kYXIgPiAucC1jYWxlbmRhciB7XHJcbiAgZmxleDogYXV0bztcclxufVxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuQ3VzdG9tIFByaW1lTkcgUC1jYWxlbmRhciBDU1MgLSBNYWtlIENhbGVuZGFyIGlucHV0IGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgd2lkdGhcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG5cclxuLnBhcnRpY3VsYXJzIGg1LCAucGFydGljdWxhcnMgc3BhbiB7XHJcbiAgZGlzcGxheTogaW5saW5lICFpbXBvcnRhbnQ7XHJcbiAgcGFkZGluZzogMTZweDtcclxufVxyXG5cclxuOmhvc3QgOjpuZy1kZWVwIC5jb21wdXRhdGlvbkNhbGVuZGFyID4gLnAtY2FsZW5kYXIgPiAucC1kYXRlcGlja2VyLW1vbnRocGlja2Vye1xyXG4gIHdpZHRoOiAyNXJlbTtcclxufVxyXG4iLCIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkN1c3RvbSBQcmltZU5HIFAtcGFuZWwgQ1NTIC0gTWFrZSBjb250ZW50IHBhbmVsIGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgaGVpZ2h0XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZsZXg6IGF1dG87XG59XG5cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IGF1dG87XG59XG5cbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCA+IC5wLXBhbmVsLWNvbnRlbnQge1xuICBmbGV4OiBhdXRvO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkN1c3RvbSBQcmltZU5HIFAtcGFuZWwgQ1NTIC0gTWFrZSBjb250ZW50IHBhbmVsIGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgaGVpZ2h0XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQ3VzdG9tIFByaW1lTkcgUC1jYWxlbmRhciBDU1MgLSBNYWtlIENhbGVuZGFyIGlucHV0IGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgd2lkdGhcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOjpuZy1kZWVwIC5uc01hbkxldHRlckNhbGVuZGFyID4gLnAtY2FsZW5kYXIge1xuICBmbGV4OiBhdXRvO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkN1c3RvbSBQcmltZU5HIFAtY2FsZW5kYXIgQ1NTIC0gTWFrZSBDYWxlbmRhciBpbnB1dCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IHdpZHRoXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi5wYXJ0aWN1bGFycyBoNSwgLnBhcnRpY3VsYXJzIHNwYW4ge1xuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMTZweDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIC5jb21wdXRhdGlvbkNhbGVuZGFyID4gLnAtY2FsZW5kYXIgPiAucC1kYXRlcGlja2VyLW1vbnRocGlja2VyIHtcbiAgd2lkdGg6IDI1cmVtO1xufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9pbnN0YWxtZW50L2luc3RhbG1lbnQtZWRpdC1yZWplY3RlZC9pbnN0YWxtZW50LWVkaXQtcmVqZWN0ZWQuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL3BheW1lbnQvaW5zdGFsbWVudC9pbnN0YWxtZW50LWVkaXQtcmVqZWN0ZWQvaW5zdGFsbWVudC1lZGl0LXJlamVjdGVkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztnRkFBQTtBQUdBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsVUFBQTtBQ0NGOztBREVBO0VBQ0UsYUFBQTtFQUNBLFVBQUE7QUNDRjs7QURFQTtFQUNFLFVBQUE7QUNDRjs7QURDQTs7Z0ZBQUE7QUFLQTs7bUZBQUE7QUFHQTtFQUNFLFVBQUE7QUNBRjs7QURFQTs7bUZBQUE7QUFLQTtFQUNFLDBCQUFBO0VBQ0EsYUFBQTtBQ0RGOztBRElBO0VBQ0UsWUFBQTtBQ0RGO0FEQ0EsNG5LQUE0bksiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuQ3VzdG9tIFByaW1lTkcgUC1wYW5lbCBDU1MgLSBNYWtlIGNvbnRlbnQgcGFuZWwgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCBoZWlnaHRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGZsZXg6IGF1dG87XHJcbn1cclxuXHJcbjo6bmctZGVlcCAuY3JlYXRlLWluc3RhbG1lbnQgPiAucC1wYW5lbC5wLWNvbXBvbmVudCA+IC5wLXRvZ2dsZWFibGUtY29udGVudCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcblxyXG46Om5nLWRlZXAgLmNyZWF0ZS1pbnN0YWxtZW50ID4gLnAtcGFuZWwucC1jb21wb25lbnQgPiAucC10b2dnbGVhYmxlLWNvbnRlbnQgPiAucC1wYW5lbC1jb250ZW50IHtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5DdXN0b20gUHJpbWVORyBQLXBhbmVsIENTUyAtIE1ha2UgY29udGVudCBwYW5lbCBncm93IHRvIGNvbnRhaW5pbmcgcGFyZW50IGhlaWdodFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuQ3VzdG9tIFByaW1lTkcgUC1jYWxlbmRhciBDU1MgLSBNYWtlIENhbGVuZGFyIGlucHV0IGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgd2lkdGhcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbjo6bmctZGVlcCAubnNNYW5MZXR0ZXJDYWxlbmRhciA+IC5wLWNhbGVuZGFyIHtcclxuICBmbGV4OiBhdXRvO1xyXG59XHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5DdXN0b20gUHJpbWVORyBQLWNhbGVuZGFyIENTUyAtIE1ha2UgQ2FsZW5kYXIgaW5wdXQgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCB3aWR0aFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcblxyXG4ucGFydGljdWxhcnMgaDUsIC5wYXJ0aWN1bGFycyBzcGFuIHtcclxuICBkaXNwbGF5OiBpbmxpbmUgIWltcG9ydGFudDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmNvbXB1dGF0aW9uQ2FsZW5kYXIgPiAucC1jYWxlbmRhciA+IC5wLWRhdGVwaWNrZXItbW9udGhwaWNrZXJ7XHJcbiAgd2lkdGg6IDI1cmVtO1xyXG59XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQ3VzdG9tIFByaW1lTkcgUC1wYW5lbCBDU1MgLSBNYWtlIGNvbnRlbnQgcGFuZWwgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCBoZWlnaHRcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZmxleDogYXV0bztcbn1cblxuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50ID4gLnAtdG9nZ2xlYWJsZS1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogYXV0bztcbn1cblxuOjpuZy1kZWVwIC5jcmVhdGUtaW5zdGFsbWVudCA+IC5wLXBhbmVsLnAtY29tcG9uZW50ID4gLnAtdG9nZ2xlYWJsZS1jb250ZW50ID4gLnAtcGFuZWwtY29udGVudCB7XG4gIGZsZXg6IGF1dG87XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQ3VzdG9tIFByaW1lTkcgUC1wYW5lbCBDU1MgLSBNYWtlIGNvbnRlbnQgcGFuZWwgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCBoZWlnaHRcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5DdXN0b20gUHJpbWVORyBQLWNhbGVuZGFyIENTUyAtIE1ha2UgQ2FsZW5kYXIgaW5wdXQgZ3JvdyB0byBjb250YWluaW5nIHBhcmVudCB3aWR0aFxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG46Om5nLWRlZXAgLm5zTWFuTGV0dGVyQ2FsZW5kYXIgPiAucC1jYWxlbmRhciB7XG4gIGZsZXg6IGF1dG87XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQ3VzdG9tIFByaW1lTkcgUC1jYWxlbmRhciBDU1MgLSBNYWtlIENhbGVuZGFyIGlucHV0IGdyb3cgdG8gY29udGFpbmluZyBwYXJlbnQgd2lkdGhcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLnBhcnRpY3VsYXJzIGg1LCAucGFydGljdWxhcnMgc3BhbiB7XG4gIGRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50O1xuICBwYWRkaW5nOiAxNnB4O1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmNvbXB1dGF0aW9uQ2FsZW5kYXIgPiAucC1jYWxlbmRhciA+IC5wLWRhdGVwaWNrZXItbW9udGhwaWNrZXIge1xuICB3aWR0aDogMjVyZW07XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","InstalmentEditRejectedComponent","constructor","router","route","fb","toastService","nspConfirmService","instalmentService","paymentService","display","nric","name","rank","sex","csn","principalOS","interestOS","protectedPayableInd","protectedPayableSPInd","instalmentInd","cabInd","group","monthlyAmount","forms_1","required","effectiveDate","compInterestRate","value","nspapp_constants_1","INSTALMENT_INTEREST_RATE","disabled","approvalEmail","fileupload2_directive_1","maxFileLimit","fileUploadFileLimit","allowableExtension","nsManLetter","bankLetter","approvalEmailSentDate","letterNSmanSentDate","letterBankSentDate","previousUrl","ngOnInit","params","subscribe","rejectedInstalmentPlanId","loadInstalment","getRejectedInstalment","res","body","data","rejectedInstalmentPlan","patchFormValues","loadSummary","error","navigate","console","log","message","status","getSummaryByNric","summaryRes","summary","computeInstalmentForm","get","patchValue","Date","supportingDocs","length","approvalEmailIds","filter","d","documentType","map","doc","documentId","approvalEmailFileUploadComponent","preloadFiles","nsmanLetterIds","nsmanLetterFileUploadComponent","bankLetterIds","bankLetterFileUploadComponent","exportCSV","onCancel","event","key","onConfirmPopup","onSubmit","dialog","onCompute","computeInterestPlan","instalmentPlanToCompute","computePaymentPlan","computed","instalmentComputedPaymentList","computedDate","disableSaveButton","onSave","saveDraftInstalmentPlan","verifiedFiles","x","String","meta_data","id","nsmanLetter","instalmentPlanToSave","toISOString","instalmentSuppDocsSentDatesForm","approvalEmailDocument","nsManReturnLetterDocument","bankReturnLetterDocument","isEditRejected","saveDraftRes","success","onSubmitGenerateApprovalEmail","instalmentCreateGenerateEmailComponent","generate","onSubmitGenerate","onSubmitCreate","createInstalmentPlan","instalmentPlan","create","error_desc","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-edit-rejected\\instalment-edit-rejected.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\instalment\\instalment-edit-rejected\\instalment-edit-rejected.component.html"],"sourcesContent":["import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {HttpErrorResponse, HttpResponse, HttpStatusCode} from '@angular/common/http';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {CustomToastService} from 'app/layouts/service/customtoast.service';\r\nimport {NspConfirmationService} from 'app/shared/confirm/nsp-confirm.service';\r\nimport {FileUploadComponent} from 'app/shared/component/file-upload/file-upload.component';\r\nimport {InstalmentService} from 'app/payment/instalment/service/instalment.service';\r\nimport {IInstalmentPlan} from '../model/instalment-plan.model';\r\nimport {PaymentService} from \"app/payment/overpayment/service/payment.service\";\r\nimport {IOPSummary} from 'app/payment/overpayment/overpayment-info/overpayment-info.model';\r\nimport {InstalmentCreateGenerateEmailComponent} from '../instalment-create-generate-email/instalment-create-generate-email.component';\r\nimport {NSPAppConstants} from 'app/shared/constants/nspapp.constants';\r\nimport {FileUploadValidator2} from 'app/shared/validator/fileupload2.directive';\r\n\r\n@Component({\r\n  selector: 'n2-instalment-edit-rejected',\r\n  templateUrl: './instalment-edit-rejected.component.html',\r\n  styleUrls: ['./instalment-edit-rejected.component.scss']\r\n})\r\nexport class InstalmentEditRejectedComponent implements OnInit {\r\n  previousUrl = \"\";\r\n  fileUploadFileLimit = 1;\r\n  rejectedInstalmentPlan: IInstalmentPlan;\r\n  rejectedInstalmentPlanId: string;\r\n\r\n  displayGenerateApprovalEmailDialog: any = {display: false};\r\n\r\n  summary: IOPSummary = {\r\n    nric: '',\r\n    name: '',\r\n    rank: '',\r\n    sex: '',\r\n    csn: '',\r\n    principalOS: 0,\r\n    interestOS: 0,\r\n    protectedPayableInd: '',\r\n    protectedPayableSPInd: '',\r\n    instalmentInd: '',\r\n    cabInd: ''\r\n  };\r\n\r\n  computeInstalmentForm: FormGroup = this.fb.group({\r\n    monthlyAmount: new FormControl(null, Validators.required),\r\n    effectiveDate: new FormControl(null, Validators.required),\r\n    compInterestRate: new FormControl({\r\n      value: NSPAppConstants.INSTALMENT_INTEREST_RATE,\r\n      disabled: true\r\n    }, Validators.required)\r\n  });\r\n\r\n  instalmentSuppDocsForm: FormGroup = this.fb.group({\r\n    approvalEmail: new FormControl([], [FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), FileUploadValidator2.allowableExtension(\".pdf\")]),\r\n    nsManLetter: new FormControl([], [FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), FileUploadValidator2.allowableExtension(\".pdf\")]),\r\n    bankLetter: new FormControl([], [FileUploadValidator2.maxFileLimit(this.fileUploadFileLimit), FileUploadValidator2.allowableExtension(\".pdf\")])\r\n  });\r\n\r\n  instalmentSuppDocsSentDatesForm: FormGroup = this.fb.group({\r\n    approvalEmailSentDate: new FormControl(null, Validators.required),\r\n    letterNSmanSentDate: new FormControl(null, Validators.required),\r\n    letterBankSentDate: new FormControl(null, Validators.required)\r\n  });\r\n\r\n  disableSaveButton = true;\r\n\r\n  @ViewChild('approvalEmailFileUpload')\r\n  private approvalEmailFileUploadComponent: FileUploadComponent;\r\n\r\n  @ViewChild('nsmanLetterFileUpload')\r\n  private nsmanLetterFileUploadComponent: FileUploadComponent;\r\n\r\n  @ViewChild('bankLetterFileUpload')\r\n  private bankLetterFileUploadComponent: FileUploadComponent;\r\n\r\n  @ViewChild('createGenerateEmailComponent')\r\n  private instalmentCreateGenerateEmailComponent: InstalmentCreateGenerateEmailComponent;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private fb: FormBuilder,\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private instalmentService: InstalmentService,\r\n    private paymentService: PaymentService\r\n  ) {\r\n    // this.previousUrl = this.router.getCurrentNavigation().previousNavigation.finalUrl.toString();\r\n    this.previousUrl = \"/inbox\";\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.params.subscribe((params: any) => {\r\n      this.rejectedInstalmentPlanId = params['instalmentId'];\r\n\r\n      if (this.rejectedInstalmentPlanId) {\r\n        this.loadInstalment();\r\n      }\r\n    });\r\n  }\r\n\r\n  loadInstalment(): void {\r\n    this.instalmentService.getRejectedInstalment(this.rejectedInstalmentPlanId).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        // Pipe response to an array of Interface model\r\n\r\n        if (res.body?.data) {\r\n          this.rejectedInstalmentPlan = res.body?.data;\r\n          this.patchFormValues();\r\n          this.loadSummary(this.rejectedInstalmentPlan.nric);\r\n        } else {\r\n          this.toastService.error(\"No rejected record found with the given id\");\r\n          this.router.navigate(['/inbox']);\r\n        }\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error.message);\r\n        if (error.status === HttpStatusCode.NotFound) {\r\n          this.toastService.error(\"No rejected record found with the given id\");\r\n          this.router.navigate(['/inbox']);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  loadSummary(nric: string): void {\r\n    this.paymentService.getSummaryByNric(nric).subscribe(\r\n      (summaryRes: HttpResponse<any>) => {\r\n        this.summary = summaryRes.body?.data;\r\n      }\r\n    );\r\n  }\r\n\r\n  patchFormValues(): void {\r\n    this.computeInstalmentForm.get('monthlyAmount').patchValue(this.rejectedInstalmentPlan.monthlyAmount);\r\n    this.computeInstalmentForm.get('effectiveDate').patchValue(new Date(this.rejectedInstalmentPlan.effectiveDate));\r\n    this.computeInstalmentForm.get('compInterestRate').patchValue(this.rejectedInstalmentPlan.compInterestRate);\r\n\r\n    if (this.rejectedInstalmentPlan.supportingDocs?.length > 0) {\r\n      const approvalEmailIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"APP\").map(doc => doc.documentId);\r\n      this.approvalEmailFileUploadComponent.preloadFiles(approvalEmailIds);\r\n\r\n      const nsmanLetterIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"NSM\").map(doc => doc.documentId);\r\n      this.nsmanLetterFileUploadComponent.preloadFiles(nsmanLetterIds);\r\n\r\n      const bankLetterIds = this.rejectedInstalmentPlan.supportingDocs?.filter(d => d.documentType === \"BNK\").map(doc => doc.documentId);\r\n      this.bankLetterFileUploadComponent.preloadFiles(bankLetterIds);\r\n    }\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  // Pop up the Confirmation dialog to Cancel current transaction\r\n  onCancel(event: Event, key: string): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      // Define function that will be called upon confirmation of the cancellation dialog\r\n      // Will route back to Inbox upon cancellation in this case\r\n      this.router.navigate(['/inbox']);\r\n    });\r\n  }\r\n\r\n  onSubmit(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog);\r\n  }\r\n\r\n  onCompute(event: Event, key: string): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      this.computeInterestPlan();\r\n    });\r\n  }\r\n\r\n  computeInterestPlan(): void {\r\n    const instalmentPlanToCompute: IInstalmentPlan = {\r\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\r\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\r\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\r\n      nric: this.summary.nric,\r\n    };\r\n\r\n    console.log(\"computeInterestPlan\", instalmentPlanToCompute);\r\n    // Call API endpoint to compute an Instalment Plan\r\n    this.instalmentService.computePaymentPlan(instalmentPlanToCompute).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        // Pipe response to an array of Interface model\r\n        const computed: IInstalmentPlan = res.body?.data;\r\n\r\n        // Set newly computed to instalmentPlan\r\n        this.rejectedInstalmentPlan.instalmentComputedPaymentList = computed.instalmentComputedPaymentList;\r\n        this.rejectedInstalmentPlan.computedDate = computed.computedDate;\r\n        if (this.rejectedInstalmentPlan.instalmentComputedPaymentList?.length > 0) {\r\n          this.disableSaveButton = false;\r\n        }\r\n\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error.message);\r\n        if (error.status === HttpStatusCode.NotFound) {\r\n          this.toastService.error('Error computing an Instalment Plan with given parameters');\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  // Save/Return to draft\r\n  onSave(event: Event, key: string): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      this.saveDraftInstalmentPlan();\r\n    })\r\n  }\r\n\r\n  saveDraftInstalmentPlan(): void {\r\n    const approvalEmail: string = this.approvalEmailFileUploadComponent.verifiedFiles?.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n    const nsmanLetter: string = this.nsmanLetterFileUploadComponent.verifiedFiles?.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n    const bankLetter: string = this.bankLetterFileUploadComponent.verifiedFiles?.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n\r\n    // TODO: Include DMS API calling to save & link all supporting documents to this Instalment plan?\r\n    const instalmentPlanToSave: IInstalmentPlan = {\r\n      nric: this.rejectedInstalmentPlan.nric,\r\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\r\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\r\n      computedDate: new Date(this.rejectedInstalmentPlan.computedDate).toISOString(),\r\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\r\n      approvalEmailSentDate: this.instalmentSuppDocsSentDatesForm.get('approvalEmailSentDate')?.value,\r\n      letterNSmanSentDate: this.instalmentSuppDocsSentDatesForm.get('letterNSmanSentDate')?.value,\r\n      letterBankSentDate: this.instalmentSuppDocsSentDatesForm.get('letterBankSentDate')?.value,\r\n      instalmentComputedPaymentList: this.rejectedInstalmentPlan.instalmentComputedPaymentList,\r\n      approvalEmailDocument: approvalEmail,\r\n      nsManReturnLetterDocument: nsmanLetter,\r\n      bankReturnLetterDocument: bankLetter,\r\n      isEditRejected: true\r\n    }\r\n\r\n    console.log(\"instalmentPlanToSave\", instalmentPlanToSave);\r\n\r\n    // Call API endpoint to persist draft of Instalment Plan into database\r\n    this.instalmentService.saveDraftInstalmentPlan(instalmentPlanToSave).subscribe(\r\n      (saveDraftRes: HttpResponse<any>) => {\r\n        if (saveDraftRes.body && saveDraftRes.body.data) {\r\n          this.toastService.success('Successfully saved draft of Instalment Plan');\r\n        }\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        console.log(error.message);\r\n        this.toastService.error('Error saving draft of Instalment Plan with given parameters');\r\n      }\r\n    );\r\n  }\r\n\r\n  // Generate approval email\r\n  onSubmitGenerateApprovalEmail(dialog: any): void {\r\n    dialog.display = true;\r\n    this.instalmentCreateGenerateEmailComponent.generate();\r\n  }\r\n\r\n  onSubmitGenerate(event: Event, key: string, dialog: any): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, dialog, () => {\r\n      console.log(\"generate email\");\r\n    })\r\n  }\r\n\r\n  // Create instalment plan\r\n  onSubmitCreate(event: Event, key: string): void {\r\n    this.nspConfirmService.onConfirmPopup(event, key, null, () => {\r\n      this.createInstalmentPlan();\r\n    })\r\n  }\r\n\r\n  // Create Instalment Plan\r\n  createInstalmentPlan(): void {\r\n\r\n    const approvalEmail: string = this.approvalEmailFileUploadComponent.verifiedFiles.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n    const nsmanLetter: string = this.nsmanLetterFileUploadComponent.verifiedFiles.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n    const bankLetter: string = this.bankLetterFileUploadComponent.verifiedFiles.map(x =>\r\n      String(x.meta_data.id)\r\n    )[0];\r\n\r\n    const instalmentPlan: IInstalmentPlan = {\r\n      nric: this.summary.nric,\r\n      monthlyAmount: this.computeInstalmentForm.get('monthlyAmount')?.value,\r\n      effectiveDate: this.computeInstalmentForm.get('effectiveDate')?.value,\r\n      computedDate: new Date(this.rejectedInstalmentPlan.computedDate).toISOString(),\r\n      compInterestRate: this.computeInstalmentForm.get('compInterestRate')?.value,\r\n      approvalEmailSentDate: this.instalmentSuppDocsSentDatesForm.get('approvalEmailSentDate')?.value,\r\n      letterNSmanSentDate: this.instalmentSuppDocsSentDatesForm.get('letterNSmanSentDate')?.value,\r\n      letterBankSentDate: this.instalmentSuppDocsSentDatesForm.get('letterBankSentDate')?.value,\r\n      instalmentComputedPaymentList: this.rejectedInstalmentPlan.instalmentComputedPaymentList,\r\n      approvalEmailDocument: approvalEmail,\r\n      nsManReturnLetterDocument: nsmanLetter,\r\n      bankReturnLetterDocument: bankLetter,\r\n      isEditRejected: true\r\n    }\r\n\r\n    this.instalmentService.create(instalmentPlan).subscribe(\r\n      res => {\r\n        if (res) {\r\n          this.toastService.success(\"Instalment created succesfully\");\r\n          this.router.navigate([this.previousUrl]);\r\n        }\r\n      },\r\n      error => {\r\n        this.toastService.error(error.error?.error_desc)\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class='flex flex-column'>\r\n  <div class='grid'>\r\n    <div class='col-6 flex'>\r\n      <p-panel class='flex-auto flex create-instalment' header='Create Instalment'>\r\n        <form [formGroup]='computeInstalmentForm'>\r\n          <div class='grid'>\r\n            <div class='col-5 flex align-items-center gap-2'>\r\n              <span class='flex-shrink-0'>Monthly Instalment Amount</span>\r\n              <p-inputNumber [inputStyle]=\"{'width': '0%'}\" formControlName='monthlyAmount'\r\n                             id='monthlyInstalmentAmount'\r\n                             currency='SGD' [minFractionDigits]='2' [maxFractionDigits]='2'\r\n                             [max]='1000'></p-inputNumber>\r\n            </div>\r\n            <div class='col-3 flex align-items-center gap-2'>\r\n              <span class='flex-shrink-0'>First Month</span>\r\n              <p-calendar  class='computationCalendar' [inputStyle]=\"{'width': '0%'}\"\r\n                          formControlName='effectiveDate' view='month'\r\n                          dateFormat='mm-yy'></p-calendar>\r\n            </div>\r\n            <div class='col-4 flex align-items-center gap-2 justify-content-between'>\r\n              <div class='flex align-items-center gap-2'>\r\n                <span class='flex-shrink-0'>Interest Rate</span>\r\n                <p-inputNumber [inputStyle]=\"{'width': '0%'}\" formControlName='compInterestRate' id='interestRate'\r\n                               currency='SGD' [minFractionDigits]='2' [maxFractionDigits]='2'></p-inputNumber>\r\n              </div>\r\n              <button [disabled]='!computeInstalmentForm.valid' class='flex-shrink-0' type='button' pButton\r\n                      label='Compute'\r\n                      (click)=\"onCompute($event,'computeInterest')\"></button>\r\n            </div>\r\n          </div>\r\n          <div class='grid'>\r\n            <div class='col-5 flex justify-content-end'>\r\n              <span *ngIf=\"(computeInstalmentForm?.get('monthlyInstalmentAmount')?.hasError('required')\r\n              && computeInstalmentForm?.get('monthlyInstalmentAmount')?.dirty)\" class='p-error'>Required</span>\r\n            </div>\r\n            <div class='col-3 flex justify-content-end'>\r\n            <span *ngIf=\"(computeInstalmentForm?.get('firstMonth')?.hasError('required')\r\n              && computeInstalmentForm?.get('firstMonth')?.dirty)\" class='p-error'>Required</span>\r\n            </div>\r\n          </div>\r\n          <p-confirmPopup key='computeInterest'></p-confirmPopup>\r\n        </form>\r\n        <br>\r\n        <p-table *ngIf='rejectedInstalmentPlan'\r\n                 [value]='rejectedInstalmentPlan.instalmentComputedPaymentList!' styleClass='p-datatable-gridlines' [paginator]='true'\r\n                 [rows]='10'\r\n                 currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'\r\n                 [rowsPerPageOptions]='[10,25,50]' [showCurrentPageReport]='true'>\r\n          <ng-template pTemplate='caption'>\r\n            <div class='flex align-items-center gap-2'>\r\n              <button type='button' pButton pRipple icon='pi pi-file' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                      tooltipPosition='bottom'></button>\r\n              <span>Estimated Plan Computed on {{rejectedInstalmentPlan.computedDate | defaultString}}</span>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate='header'>\r\n            <tr>\r\n              <th scope=\"col\" style='width: 10%'>SN</th>\r\n              <th scope=\"col\">Month</th>\r\n              <th scope=\"col\">Principal O/S</th>\r\n              <th scope=\"col\">Payment Per Month</th>\r\n              <th scope=\"col\">Interest Per Month</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate='body' let-computedInstalmentPayment let-i='rowIndex'>\r\n            <tr>\r\n              <td>{{i + 1}}</td>\r\n              <td>{{computedInstalmentPayment?.paymentMonth | date:'MM-yyyy' | defaultString}}</td>\r\n              <td>{{computedInstalmentPayment?.principalOSBalance | currency:'SGD':'' | defaultString}}</td>\r\n              <td>{{computedInstalmentPayment?.paymentAmount | currency:'SGD':'' | defaultString}}</td>\r\n              <td>{{computedInstalmentPayment?.interestAmount | currency:'SGD':'' | defaultString}}</td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate='emptymessage'>\r\n            <tr>\r\n              <td colspan='5'>No Computed Instalment Payments</td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </p-panel>\r\n    </div>\r\n    <div class='col-6'>\r\n      <div class='flex flex-column gap-2'>\r\n        <p-panel header='Personal Particulars'>\r\n          <div class='particulars'>\r\n            <h5>{{summary?.nric | defaultString}}   {{summary?.rank | defaultString}}   {{summary?.name | defaultString}}</h5>\r\n            <span>NSman (M)</span>\r\n            <span>CAB:</span><span>{{summary?.cabInd | defaultString}}</span>\r\n            <span>Protected Payable:</span><span>{{summary?.protectedPayableInd === 'Y' ? 'Yes' : 'No' | defaultString}} {{summary?.protectedPayableSPInd === 'Y' ? '(Service Pay)' : ''}}</span>\r\n            <br/>\r\n            <span>Outstanding Principal:</span><span>{{summary?.principalOS | currency:'SGD':'' | defaultString}}</span>\r\n            <span>Outstanding Interest:</span><span>{{summary?.interestOS | currency:'SGD':'' | defaultString}}</span>\r\n            <span>Instalment:</span><span>{{summary.instalmentInd === 'Y' ? 'Yes' : 'No' | defaultString}}</span>\r\n          </div>\r\n        </p-panel>\r\n        <p-panel header='Supporting Documents'>\r\n          <form [formGroup]=\"instalmentSuppDocsForm\">\r\n            <div class='flex gap-4'>\r\n              <div class='flex flex-column justify-content-around gap-2'>\r\n                <span>Approval Email</span>\r\n                <span>Return Letter from Bank</span>\r\n                <span>Return Letter from NSman</span>\r\n              </div>\r\n              <div class='flex-auto flex flex-column justify-content-around gap-2'>\r\n                <n2-file-upload [contentHeight]=\"'100px'\" #approvalEmailFileUpload formControlName='approvalEmail' id='approvalEmail' [externalFileLimit]=\"fileUploadFileLimit\"></n2-file-upload>\r\n                <n2-file-upload [contentHeight]=\"'100px'\" #nsmanLetterFileUpload formControlName='nsManLetter' id='nsManLetter' [externalFileLimit]=\"fileUploadFileLimit\"></n2-file-upload>\r\n                <n2-file-upload [contentHeight]=\"'100px'\" #bankLetterFileUpload formControlName='bankLetter' id='bankLetter' [externalFileLimit]=\"fileUploadFileLimit\"></n2-file-upload>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </p-panel>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <form [formGroup]='instalmentSuppDocsSentDatesForm'>\r\n    <div class='flex justify-content-between'>\r\n      <div class='flex gap-2'>\r\n        <div class='flex flex-column gap-1'>\r\n          <p-confirmPopup></p-confirmPopup>\r\n          <button type='button' pButton label='Generate Approval Email'\r\n            (click)=\"onSubmitGenerateApprovalEmail(displayGenerateApprovalEmailDialog)\"></button>\r\n          <p-calendar class='flex nsManLetterCalendar' placeholder='Select sent date' [inputStyle]=\"{'width': '0%'}\" appendTo='body'\r\n                      formControlName='approvalEmailSentDate' view='month'\r\n                      dateFormat='mm-yy'></p-calendar>\r\n        </div>\r\n        <div class='flex flex-column gap-1'>\r\n          <p-confirmPopup key='generateNSmanLetter'></p-confirmPopup>\r\n          <button type='button' pButton label='Generate Letter for NSman'\r\n            (click)=\"onSubmitGenerate($event,'generateNSmanLetter', null)\"></button>\r\n          <p-calendar class='flex nsManLetterCalendar' placeholder='Select sent date' [inputStyle]=\"{'width': '0%'}\"\r\n                      appendTo='body' formControlName='letterNSmanSentDate' view='month'\r\n                      dateFormat='mm-yy'></p-calendar>\r\n        </div>\r\n        <div class='flex flex-column gap-1'>\r\n          <p-confirmPopup key='generateBankLetter'></p-confirmPopup>\r\n          <button type='button' pButton label='Generate Letter for Bank'\r\n            (click)=\"onSubmitGenerate($event,'generateBankLetter', null)\"></button>\r\n          <p-calendar class='flex nsManLetterCalendar' placeholder='Select sent date' [inputStyle]=\"{'width': '0%'}\" appendTo='body'\r\n                      formControlName='letterBankSentDate' view='month'\r\n                      dateFormat='mm-yy'></p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class='flex align-items-start justify-content-end gap-2'>\r\n        <p-confirmPopup key='editRejectedInstalmentCancel'></p-confirmPopup>\r\n        <p-confirmPopup key='editRejectedInstalmentReturnToDraft'></p-confirmPopup>\r\n        <p-confirmPopup key='editRejectedInstalmentRemoveWithNoAction'></p-confirmPopup>\r\n        <p-confirmPopup key='editRejectedInstalmentSubmit'></p-confirmPopup>\r\n        <button class='p-button-danger' type='button' pButton label='Cancel'\r\n                (click)=\"onCancel($event,'editRejectedInstalmentCancel')\"></button>\r\n        <button class='p-button-info p-button-outlined' type='button' pButton label='Return to Draft'\r\n                (click)=\"onSave($event,'editRejectedInstalmentReturnToDraft')\"></button>\r\n        <button class='p-button-outlined' type='button' pButton label='Remove with No Action'\r\n                (click)=\"onSubmit($event,'editRejectedInstalmentRemoveWithNoAction', null)\"></button>\r\n        <button type='button' pButton label='Submit'\r\n                (click)=\"onSubmitCreate($event,'editRejectedInstalmentSubmit')\"></button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <div class=\"h-2rem\"></div>\r\n  <div class='flex justify-content-center gap-2'>\r\n    <p-confirmPopup key='editRejectedInstalmentBack'></p-confirmPopup>\r\n    <p-confirmPopup key='editRejectedInstalmentNext'></p-confirmPopup>\r\n    <p-confirmPopup key='editRejectedInstalmentNextSameType'></p-confirmPopup>\r\n    <button icon='pi pi-chevron-left' iconPos='left' class='p-button-outlined p-button-info' type='button' pButton\r\n            label='Back'\r\n            (click)=\"onSubmit($event, 'editRejectedInstalmentBack', null)\"\r\n    ></button>\r\n    <button icon='pi pi-chevron-right' iconPos='right' class='p-button-outlined p-button-info' type='button' pButton\r\n            label='Next'\r\n            (click)=\"onSubmit($event, 'editRejectedInstalmentNext', null)\"\r\n    ></button>\r\n    <button icon='pi pi-chevron-right' iconPos='right' class='p-button-outlined p-button-info' type='button' pButton\r\n            label='Next Same Type'\r\n            (click)=\"onSubmit($event, 'editRejectedInstalmentNextSameType', null)\"\r\n    ></button>\r\n  </div>\r\n</div>\r\n\r\n<p-dialog header='Approval Email' [(visible)]='displayGenerateApprovalEmailDialog.display'\r\n          [breakpoints]=\"{'960px': '75vw'}\"\r\n          [style]=\"{width: '50vw'}\" [draggable]='false' [resizable]='false' [modal]='true'>\r\n\r\n  <n2-instalment-create-generate-email #createGenerateEmailComponent></n2-instalment-create-generate-email>\r\n\r\n  <ng-template pTemplate='footer'>\r\n  </ng-template>\r\n</p-dialog>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
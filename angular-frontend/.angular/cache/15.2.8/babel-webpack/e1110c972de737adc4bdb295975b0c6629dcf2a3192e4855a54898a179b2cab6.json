{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KahRnsaReleaseHistoryComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i2 = tslib_1.__importStar(require(\"app/shared/confirm/nsp-confirm.service\"));\nconst i3 = tslib_1.__importStar(require(\"../service/kah-rnsa.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/service/ns2-http.service\"));\nconst i5 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i6 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/tooltip\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/ripple\"));\nconst i11 = tslib_1.__importStar(require(\"../../../../shared/pipe/default-string.pipe\"));\nfunction KahRnsaReleaseHistoryComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 5);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function KahRnsaReleaseHistoryComponent_ng_template_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.exportCSV());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n  \");\n  }\n}\nfunction KahRnsaReleaseHistoryComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"th\", 8);\n    i0.ɵɵtext(4, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"th\", 9);\n    i0.ɵɵtext(7, \"Released Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n      \");\n    i0.ɵɵelementStart(9, \"th\", 10);\n    i0.ɵɵtext(10, \"Total Released Record\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n      \");\n    i0.ɵɵelementStart(12, \"th\", 11);\n    i0.ɵɵtext(13, \"Total Released Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n  \");\n  }\n}\nfunction KahRnsaReleaseHistoryComponent_ng_template_6_br_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"br\");\n  }\n}\nfunction KahRnsaReleaseHistoryComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"defaultString\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵtemplate(10, KahRnsaReleaseHistoryComponent_ng_template_6_br_10_Template, 1, 0, \"br\", 12);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n      \");\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"defaultString\");\n    i0.ɵɵpipe(19, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n  \");\n  }\n  if (rf & 2) {\n    const kahRnsaReleaseRecord_r6 = ctx.$implicit;\n    const i_r7 = ctx.rowIndex;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r7 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 6, i0.ɵɵpipeBind2(9, 8, kahRnsaReleaseRecord_r6 == null ? null : kahRnsaReleaseRecord_r6.releasedDt, \"dd-MM-yyyy\")));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", kahRnsaReleaseRecord_r6 == null ? null : kahRnsaReleaseRecord_r6.releasedDt);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(kahRnsaReleaseRecord_r6 == null ? null : kahRnsaReleaseRecord_r6.releasedBy);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(kahRnsaReleaseRecord_r6 == null ? null : kahRnsaReleaseRecord_r6.totalNoOfRecords);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 11, i0.ɵɵpipeBind3(19, 13, kahRnsaReleaseRecord_r6 == null ? null : kahRnsaReleaseRecord_r6.totalAmount, \"SGD\", \"symbol-narrow\")));\n  }\n}\nfunction KahRnsaReleaseHistoryComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"td\", 13);\n    i0.ɵɵtext(4, \"No KAH/RNSA Release History records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n  }\n}\nconst _c0 = function () {\n  return [10, 25, 50];\n};\nclass KahRnsaReleaseHistoryComponent {\n  constructor(toastService, nspConfirmService, kahRnsaService, ns2httpService) {\n    this.toastService = toastService;\n    this.nspConfirmService = nspConfirmService;\n    this.kahRnsaService = kahRnsaService;\n    this.ns2httpService = ns2httpService;\n    //Lazy\n    this.loading = false;\n    this.totalRecords = 0;\n    this.pageData = {\n      currentPage: 0\n    };\n    this.pageSize = 10;\n  }\n  ngOnInit() {\n    //\n  }\n  exportCSV() {\n    // TODO: Implement export CSV function or call it from a utility class\n  }\n  loadReleaseHistory(event) {\n    this.loading = true;\n    const options = this.ns2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\n    this.kahRnsaService.getKahRnsaReleaseHistory(options).subscribe(res => {\n      // Pipe response to an array of Interface model\n      this.kahRnsaReleaseRecordArray = res.body?.data?.content;\n      this.loading = false;\n      this.totalRecords = res.body.data.totalElements;\n    }, error => {\n      this.toastService.error(error.error?.error_desc);\n      this.loading = false;\n    });\n  }\n  onPage(event) {\n    this.pageSize = event.rows;\n    this.pageData.currentPage = event.first / event.rows;\n  }\n}\nexports.KahRnsaReleaseHistoryComponent = KahRnsaReleaseHistoryComponent;\nKahRnsaReleaseHistoryComponent.ɵfac = function KahRnsaReleaseHistoryComponent_Factory(t) {\n  return new (t || KahRnsaReleaseHistoryComponent)(i0.ɵɵdirectiveInject(i1.CustomToastService), i0.ɵɵdirectiveInject(i2.NspConfirmationService), i0.ɵɵdirectiveInject(i3.KahRnsaService), i0.ɵɵdirectiveInject(i4.Ns2HttpService));\n};\nKahRnsaReleaseHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: KahRnsaReleaseHistoryComponent,\n  selectors: [[\"n2-kah-rnsa-release-history\"]],\n  decls: 11,\n  vars: 9,\n  consts: [[\"styleClass\", \"p-datatable-gridlines\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"rowsPerPageOptions\", \"showCurrentPageReport\", \"lazy\", \"totalRecords\", \"loading\", \"onLazyLoad\", \"onPage\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\", \"flex\", \"justify-content-start\", \"align-items-center\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file-o\", \"pTooltip\", \"Export as CSV\", \"tooltipPosition\", \"bottom\", 3, \"click\"], [\"scope\", \"col\", 1, \"sn-header\"], [\"scope\", \"col\", 1, \"released-by-header\"], [\"scope\", \"col\", 1, \"total-records-released-header\"], [\"scope\", \"col\", 1, \"total-amount-released-header\"], [4, \"ngIf\"], [\"colspan\", \"4\"]],\n  template: function KahRnsaReleaseHistoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-table\", 0);\n      i0.ɵɵlistener(\"onLazyLoad\", function KahRnsaReleaseHistoryComponent_Template_p_table_onLazyLoad_0_listener($event) {\n        return ctx.loadReleaseHistory($event);\n      })(\"onPage\", function KahRnsaReleaseHistoryComponent_Template_p_table_onPage_0_listener($event) {\n        return ctx.onPage($event);\n      });\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵtemplate(2, KahRnsaReleaseHistoryComponent_ng_template_2_Template, 9, 0, \"ng-template\", 1);\n      i0.ɵɵtext(3, \"\\n  \");\n      i0.ɵɵtemplate(4, KahRnsaReleaseHistoryComponent_ng_template_4_Template, 16, 0, \"ng-template\", 2);\n      i0.ɵɵtext(5, \"\\n\\n  \");\n      i0.ɵɵtemplate(6, KahRnsaReleaseHistoryComponent_ng_template_6_Template, 22, 17, \"ng-template\", 3);\n      i0.ɵɵtext(7, \"\\n\\n  \");\n      i0.ɵɵtemplate(8, KahRnsaReleaseHistoryComponent_ng_template_8_Template, 7, 0, \"ng-template\", 4);\n      i0.ɵɵtext(9, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"value\", ctx.kahRnsaReleaseRecordArray)(\"paginator\", true)(\"rows\", 5)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(8, _c0))(\"showCurrentPageReport\", true)(\"lazy\", true)(\"totalRecords\", ctx.totalRecords)(\"loading\", ctx.loading);\n    }\n  },\n  dependencies: [i5.ButtonDirective, i6.PrimeTemplate, i7.NgIf, i8.Tooltip, i9.Table, i10.Ripple, i7.CurrencyPipe, i7.DatePipe, i11.DefaultStringPipe],\n  styles: [\".sn-header[_ngcontent-%COMP%] {\\n  width: 1rem;\\n}\\n\\n.released-by-header[_ngcontent-%COMP%] {\\n  width: 5rem;\\n}\\n\\n.total-records-released-header[_ngcontent-%COMP%] {\\n  width: 5rem;\\n}\\n\\n.total-amount-released-header[_ngcontent-%COMP%] {\\n  width: 5rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImthaC1ybnNhLXJlbGVhc2UtaGlzdG9yeS5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxwcm9qZWN0cyUyMDJcXG5zcGF5aWlhcHBcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXHBheW1lbnRcXGJhbmtmaWxlLXN0b3AtcGF5bWVudFxcc3RvcC1wYXltZW50XFxrYWgtcm5zYS1yZWxlYXNlLWhpc3RvcnlcXGthaC1ybnNhLXJlbGVhc2UtaGlzdG9yeS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7QUNDRiIsImZpbGUiOiJrYWgtcm5zYS1yZWxlYXNlLWhpc3RvcnkuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc24taGVhZGVyIHtcclxuICB3aWR0aDogMXJlbTtcclxufVxyXG5cclxuLnJlbGVhc2VkLWJ5LWhlYWRlciB7XHJcbiAgd2lkdGg6IDVyZW07XHJcbn1cclxuXHJcbi50b3RhbC1yZWNvcmRzLXJlbGVhc2VkLWhlYWRlciB7XHJcbiAgd2lkdGg6IDVyZW07XHJcbn1cclxuXHJcbi50b3RhbC1hbW91bnQtcmVsZWFzZWQtaGVhZGVyIHtcclxuICB3aWR0aDogNXJlbTtcclxufVxyXG4iLCIuc24taGVhZGVyIHtcbiAgd2lkdGg6IDFyZW07XG59XG5cbi5yZWxlYXNlZC1ieS1oZWFkZXIge1xuICB3aWR0aDogNXJlbTtcbn1cblxuLnRvdGFsLXJlY29yZHMtcmVsZWFzZWQtaGVhZGVyIHtcbiAgd2lkdGg6IDVyZW07XG59XG5cbi50b3RhbC1hbW91bnQtcmVsZWFzZWQtaGVhZGVyIHtcbiAgd2lkdGg6IDVyZW07XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvcGF5bWVudC9iYW5rZmlsZS1zdG9wLXBheW1lbnQvc3RvcC1wYXltZW50L2thaC1ybnNhLXJlbGVhc2UtaGlzdG9yeS9rYWgtcm5zYS1yZWxlYXNlLWhpc3RvcnkuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi9wcm9qZWN0cyUyMDIvbnNwYXlpaWFwcC9zcmMvbWFpbi93ZWJhcHAvYXBwL3BheW1lbnQvYmFua2ZpbGUtc3RvcC1wYXltZW50L3N0b3AtcGF5bWVudC9rYWgtcm5zYS1yZWxlYXNlLWhpc3Rvcnkva2FoLXJuc2EtcmVsZWFzZS1oaXN0b3J5LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtBQ0NGO0FEQ0Esb3FDQUFvcUMiLCJzb3VyY2VzQ29udGVudCI6WyIuc24taGVhZGVyIHtcclxuICB3aWR0aDogMXJlbTtcclxufVxyXG5cclxuLnJlbGVhc2VkLWJ5LWhlYWRlciB7XHJcbiAgd2lkdGg6IDVyZW07XHJcbn1cclxuXHJcbi50b3RhbC1yZWNvcmRzLXJlbGVhc2VkLWhlYWRlciB7XHJcbiAgd2lkdGg6IDVyZW07XHJcbn1cclxuXHJcbi50b3RhbC1hbW91bnQtcmVsZWFzZWQtaGVhZGVyIHtcclxuICB3aWR0aDogNXJlbTtcclxufVxyXG4iLCIuc24taGVhZGVyIHtcbiAgd2lkdGg6IDFyZW07XG59XG5cbi5yZWxlYXNlZC1ieS1oZWFkZXIge1xuICB3aWR0aDogNXJlbTtcbn1cblxuLnRvdGFsLXJlY29yZHMtcmVsZWFzZWQtaGVhZGVyIHtcbiAgd2lkdGg6IDVyZW07XG59XG5cbi50b3RhbC1hbW91bnQtcmVsZWFzZWQtaGVhZGVyIHtcbiAgd2lkdGg6IDVyZW07XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","KahRnsaReleaseHistoryComponent","constructor","toastService","nspConfirmService","kahRnsaService","ns2httpService","currentPage","ngOnInit","exportCSV","loadReleaseHistory","event","loading","options","convertLazyEvent","pageData","pageSize","getKahRnsaReleaseHistory","subscribe","res","kahRnsaReleaseRecordArray","body","data","content","totalRecords","totalElements","error","error_desc","onPage","rows","first","exports","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\bankfile-stop-payment\\stop-payment\\kah-rnsa-release-history\\kah-rnsa-release-history.component.html","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\payment\\bankfile-stop-payment\\stop-payment\\kah-rnsa-release-history\\kah-rnsa-release-history.component.ts"],"sourcesContent":["<p-table [value]='kahRnsaReleaseRecordArray' styleClass='p-datatable-gridlines' [paginator]='true' [rows]='5'\r\n          [rowsPerPageOptions]='[10,25,50]'\r\n          [showCurrentPageReport]='true'\r\n          currentPageReportTemplate='Showing {first} to {last} of {totalRecords} entries'\r\n          [lazy]='true'\r\n          [totalRecords]='totalRecords'\r\n          [loading]='loading'\r\n          (onLazyLoad)='loadReleaseHistory($event)'\r\n          (onPage) = \"onPage($event)\">\r\n  <ng-template pTemplate='caption'>\r\n    <div class='grid'>\r\n      <div class='col-6 nsp-align-left flex justify-content-start align-items-center'>\r\n        <button type='button' pButton pRipple icon='pi pi-file-o' (click)='exportCSV()' pTooltip='Export as CSV'\r\n                tooltipPosition='bottom'></button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template pTemplate='header'>\r\n    <tr>\r\n      <th scope=\"col\" class='sn-header'>SN</th>\r\n      <th scope=\"col\" class='released-by-header'>Released Date</th>\r\n      <th scope=\"col\" class='total-records-released-header'>Total Released Record</th>\r\n      <th scope=\"col\" class='total-amount-released-header'>Total Released Amount</th>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='body' let-kahRnsaReleaseRecord let-i='rowIndex'>\r\n    <tr>\r\n      <td>{{i + 1}}</td>\r\n      <td>{{kahRnsaReleaseRecord?.releasedDt | date:'dd-MM-yyyy' | defaultString}}<br\r\n        *ngIf='kahRnsaReleaseRecord?.releasedDt'>{{kahRnsaReleaseRecord?.releasedBy }}</td>\r\n      <td>{{kahRnsaReleaseRecord?.totalNoOfRecords}}</td>\r\n      <td>{{kahRnsaReleaseRecord?.totalAmount | currency:'SGD':'symbol-narrow' | defaultString}}</td>\r\n    </tr>\r\n  </ng-template>\r\n\r\n  <ng-template pTemplate='emptymessage'>\r\n    <tr>\r\n      <td colspan='4'>No KAH/RNSA Release History records found.</td>\r\n    </tr>\r\n  </ng-template>\r\n</p-table>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { NspConfirmationService } from 'app/shared/confirm/nsp-confirm.service';\r\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\r\nimport { IKahRnsaReleaseRecord } from 'app/payment/bankfile-stop-payment/stop-payment/model/kah-rnsa-release-record.model';\r\nimport { Ns2HttpService } from 'app/shared/service/ns2-http.service';\r\nimport { LazyLoadEvent } from 'primeng/api';\r\nimport { KahRnsaService } from '../service/kah-rnsa.service';\r\n\r\n@Component({\r\n  selector: 'n2-kah-rnsa-release-history',\r\n  templateUrl: './kah-rnsa-release-history.component.html',\r\n  styleUrls: ['./kah-rnsa-release-history.component.scss']\r\n})\r\nexport class KahRnsaReleaseHistoryComponent implements OnInit {\r\n  kahRnsaReleaseRecordArray: IKahRnsaReleaseRecord[];\r\n\r\n  //Lazy\r\n  loading = false;\r\n  totalRecords = 0;\r\n  pageData: { currentPage: number } = {\r\n    currentPage: 0\r\n  }\r\n  pageSize = 10;\r\n\r\n  constructor(\r\n    private toastService: CustomToastService,\r\n    private nspConfirmService: NspConfirmationService,\r\n    private kahRnsaService: KahRnsaService,\r\n    private ns2httpService: Ns2HttpService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //\r\n  }\r\n\r\n  exportCSV(): void {\r\n    // TODO: Implement export CSV function or call it from a utility class\r\n  }\r\n\r\n  loadReleaseHistory(event: LazyLoadEvent): void {\r\n    this.loading = true;\r\n\r\n    const options = this.ns2httpService.convertLazyEvent(event, this.pageData, this.pageSize);\r\n\r\n    this.kahRnsaService.getKahRnsaReleaseHistory(options).subscribe(\r\n      (res: HttpResponse<any>) => {\r\n        // Pipe response to an array of Interface model\r\n        this.kahRnsaReleaseRecordArray = res.body?.data?.content;\r\n        this.loading = false;\r\n        this.totalRecords = res.body.data.totalElements;\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        this.toastService.error(error.error?.error_desc);\r\n        this.loading = false;\r\n      }\r\n    ); \r\n  }\r\n\r\n  onPage(event: any): void {\r\n    this.pageSize = event.rows;\r\n    this.pageData.currentPage = event.first / event.rows;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
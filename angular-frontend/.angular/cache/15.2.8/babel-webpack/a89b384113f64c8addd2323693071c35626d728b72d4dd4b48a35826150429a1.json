{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TemplatePopupComponent = exports.TemplateDialogComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@ng-bootstrap/ng-bootstrap\"));\nconst i2 = tslib_1.__importStar(require(\"./template.service\"));\nconst i3 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i7 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/fileupload\"));\nconst i9 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i10 = tslib_1.__importStar(require(\"../../../shared/alert/alert.component\"));\nconst i11 = tslib_1.__importStar(require(\"../../../shared/alert/alert-error.component\"));\nconst i12 = tslib_1.__importStar(require(\"./template-popup.service\"));\nfunction TemplateDialogComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵelementStart(2, \"div\", 14);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"label\", 15);\n    i0.ɵɵtext(5, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n    i0.ɵɵelementStart(7, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function TemplateDialogComponent_div_21_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.template.id = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n\\n      \");\n    i0.ɵɵelementStart(10, \"div\", 17);\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementStart(12, \"label\", 18);\n    i0.ɵɵtext(13, \"Template Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n        \");\n    i0.ɵɵelementStart(15, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function TemplateDialogComponent_div_21_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.template.templateName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n        \");\n    i0.ɵɵelementStart(17, \"div\", 20);\n    i0.ɵɵtext(18, \"\\n          \");\n    i0.ɵɵelementStart(19, \"small\", 21);\n    i0.ɵɵtext(20, \"\\n            This field is required.\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n\\n      \");\n    i0.ɵɵelementStart(24, \"div\", 17);\n    i0.ɵɵtext(25, \"\\n        \");\n    i0.ɵɵelementStart(26, \"label\", 22);\n    i0.ɵɵtext(27, \"Template File Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n        \");\n    i0.ɵɵelementStart(29, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function TemplateDialogComponent_div_21_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.template.templateLastFileName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n\\n      \");\n    i0.ɵɵelementStart(32, \"div\", 17);\n    i0.ɵɵtext(33, \"\\n        \");\n    i0.ɵɵelementStart(34, \"label\", 24);\n    i0.ɵɵtext(35, \"Upload file \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n        \");\n    i0.ɵɵelementStart(37, \"p-fileUpload\", 25);\n    i0.ɵɵlistener(\"uploadHandler\", function TemplateDialogComponent_div_21_Template_p_fileUpload_uploadHandler_37_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.upload($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n        \");\n    i0.ɵɵelementStart(39, \"div\")(40, \"label\", 26);\n    i0.ɵɵtext(41, \"upLoadDesc\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(42, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    const _r0 = i0.ɵɵreference(1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !ctx_r1.template.id);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.template.id);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.template.templateName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !((_r0.controls.name == null ? null : _r0.controls.name.dirty) && (_r0.controls.name == null ? null : _r0.controls.name.invalid)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(_r0.controls.name == null ? null : _r0.controls.name.errors == null ? null : _r0.controls.name.errors.required));\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.template.templateLastFileName);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"customUpload\", true)(\"auto\", true);\n  }\n}\nclass TemplateDialogComponent {\n  constructor(activeModal, templateService, eventManager, router) {\n    this.activeModal = activeModal;\n    this.templateService = templateService;\n    this.eventManager = eventManager;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.isSaving = false;\n  }\n  clear() {\n    this.activeModal.dismiss('cancel');\n    this.backToPrevious();\n  }\n  save() {\n    this.isSaving = true;\n    if (this.template.id !== undefined && null !== this.template.id) {\n      this.subscribeToSaveResponse(this.templateService.update(this.template));\n    } else {\n      this.subscribeToSaveResponse(this.templateService.create(this.template));\n    }\n  }\n  upload(event) {\n    const files = event.files;\n    const singleFile = files[0];\n    const fileName = document.getElementById('fileName');\n    fileName.value = singleFile.name;\n    this.template.templateLastFileName = singleFile.name;\n    const formData = new FormData();\n    formData.append('file', singleFile);\n    this.templateService.upLoadFile(formData).subscribe();\n  }\n  backToPrevious() {\n    setTimeout(() => {\n      this.router.navigate(['admin/reportTemplate']);\n    }, 0);\n  }\n  subscribeToSaveResponse(result) {\n    result.subscribe(res => this.onSaveSuccess(res.body), () => this.onSaveError());\n  }\n  onSaveSuccess(result) {\n    this.eventManager.broadcast({\n      name: 'templateListModification',\n      content: 'OK'\n    });\n    this.isSaving = false;\n    this.activeModal.dismiss(result);\n    this.backToPrevious();\n  }\n  onSaveError() {\n    this.isSaving = false;\n  }\n}\nexports.TemplateDialogComponent = TemplateDialogComponent;\nTemplateDialogComponent.ɵfac = function TemplateDialogComponent_Factory(t) {\n  return new (t || TemplateDialogComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal), i0.ɵɵdirectiveInject(i2.TemplateService), i0.ɵɵdirectiveInject(i3.EventManager), i0.ɵɵdirectiveInject(i4.Router));\n};\nTemplateDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TemplateDialogComponent,\n  selectors: [[\"ic-template-dialog\"]],\n  decls: 44,\n  vars: 4,\n  consts: [[\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editForm\", \"ngForm\"], [1, \"modal-header\"], [\"id\", \"myTemplateLabel\", \"icTranslate\", \"reportAdmin.template.home.createOrEditLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [1, \"modal-body\"], [1, \"row\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"modal-footer\"], [\"id\", \"saveNewTemplate\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [3, \"icon\"], [\"icTranslate\", \"entity.action.save\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"icTranslate\", \"entity.action.cancel\"], [1, \"rounded-pill\", \"col-md-6\", 3, \"hidden\"], [\"for\", \"id\", \"icTranslate\", \"global.field.id\"], [\"type\", \"text\", \"id\", \"id\", \"name\", \"id\", \"readonly\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"rounded-pill\", \"col-md-6\"], [\"icTranslate\", \"reportAdmin.template.templateName\", \"for\", \"field_name\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"field_name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [\"icTranslate\", \"reportAdmin.template.fileName\", 1, \"form-control-label\"], [\"type\", \"text\", \"name\", \"templateLastFileName\", \"id\", \"fileName\", \"readonly\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"file\", \"icTranslate\", \"reportAdmin.menue.home.upLoadFile\", 1, \"form-control-label\"], [\"mode\", \"basic\", \"accept\", \".jrxml\", 3, \"customUpload\", \"auto\", \"uploadHandler\"], [\"icTranslate\", \"reportAdmin.template.upLoadDesc\", 1, \"form-control-label\"]],\n  template: function TemplateDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function TemplateDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(2, \"\\n  \");\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"h4\", 3);\n      i0.ɵɵtext(6, \"Create or edit a Template\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function TemplateDialogComponent_Template_button_click_8_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(9, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n  \");\n      i0.ɵɵelement(12, \"ic-alert\");\n      i0.ɵɵtext(13, \"\\n  \");\n      i0.ɵɵelementStart(14, \"div\", 5);\n      i0.ɵɵtext(15, \"\\n    \");\n      i0.ɵɵelementStart(16, \"div\", 6);\n      i0.ɵɵtext(17, \"\\n      \");\n      i0.ɵɵelement(18, \"ic-alert-error\");\n      i0.ɵɵtext(19, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(20, \"\\n    \");\n      i0.ɵɵtemplate(21, TemplateDialogComponent_div_21_Template, 44, 8, \"div\", 7);\n      i0.ɵɵtext(22, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n  \");\n      i0.ɵɵelementStart(24, \"div\", 8);\n      i0.ɵɵtext(25, \"\\n    \");\n      i0.ɵɵelementStart(26, \"button\", 9);\n      i0.ɵɵtext(27, \"\\n      \");\n      i0.ɵɵelement(28, \"fa-icon\", 10);\n      i0.ɵɵtext(29, \"\\u00A0\");\n      i0.ɵɵelementStart(30, \"span\", 11);\n      i0.ɵɵtext(31, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(32, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(33, \"\\n    \");\n      i0.ɵɵelementStart(34, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function TemplateDialogComponent_Template_button_click_34_listener() {\n        return ctx.clear();\n      });\n      i0.ɵɵtext(35, \"\\n      \");\n      i0.ɵɵelement(36, \"fa-icon\", 10);\n      i0.ɵɵtext(37, \"\\u00A0\");\n      i0.ɵɵelementStart(38, \"span\", 13);\n      i0.ɵɵtext(39, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(41, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngIf\", ctx.template);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"disabled\", _r0.invalid || ctx.isSaving);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"icon\", \"save\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"icon\", \"ban\");\n    }\n  },\n  dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i6.NgIf, i7.FaIconComponent, i8.FileUpload, i9.TranslateDirective, i10.AlertComponent, i11.AlertErrorComponent],\n  encapsulation: 2\n});\nclass TemplatePopupComponent {\n  constructor(route, templatePopupService) {\n    this.route = route;\n    this.templatePopupService = templatePopupService;\n  }\n  ngOnInit() {\n    this.routeSub = this.route.params.subscribe(params => {\n      if (params['id']) {\n        this.templatePopupService.open(TemplateDialogComponent, params['id']);\n      } else {\n        this.templatePopupService.open(TemplateDialogComponent);\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.routeSub.unsubscribe();\n  }\n}\nexports.TemplatePopupComponent = TemplatePopupComponent;\nTemplatePopupComponent.ɵfac = function TemplatePopupComponent_Factory(t) {\n  return new (t || TemplatePopupComponent)(i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i12.TemplatePopupService));\n};\nTemplatePopupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TemplatePopupComponent,\n  selectors: [[\"ic-template-popup\"]],\n  decls: 0,\n  vars: 0,\n  template: function TemplatePopupComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","TemplateDialogComponent","constructor","activeModal","templateService","eventManager","router","ngOnInit","isSaving","clear","dismiss","backToPrevious","save","template","id","undefined","subscribeToSaveResponse","update","create","upload","event","files","singleFile","fileName","document","getElementById","value","name","templateLastFileName","formData","FormData","append","upLoadFile","subscribe","setTimeout","navigate","result","res","onSaveSuccess","body","onSaveError","broadcast","content","exports","selectors","decls","vars","consts","ctx","TemplatePopupComponent","route","templatePopupService","routeSub","params","open","ngOnDestroy","unsubscribe","encapsulation"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\report\\report-template\\template-dialog.component.html","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\report\\report-template\\template-dialog.component.ts"],"sourcesContent":["<form name=\"editForm\" role=\"form\"  (ngSubmit)=\"save()\" #editForm=\"ngForm\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"myTemplateLabel\" icTranslate=\"reportAdmin.template.home.createOrEditLabel\">Create or edit a Template</h4>\r\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" (click)=\"clear()\">&times;</button>\r\n  </div>\r\n  <ic-alert></ic-alert>\r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <ic-alert-error></ic-alert-error>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\"template\">\r\n      <div class=\"rounded-pill col-md-6\" [hidden]=\"!template.id\">\r\n        <label for=\"id\" icTranslate=\"global.field.id\">ID</label>\r\n        <input type=\"text\" class=\"form-control\" id=\"id\" name=\"id\" [(ngModel)]=\"template.id\" readonly />\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"reportAdmin.template.templateName\" for=\"field_name\">Template Name</label>\r\n        <input type=\"text\" class=\"form-control\" name=\"name\" id=\"field_name\" [(ngModel)]=\"template.templateName\" required />\r\n        <div [hidden]=\"!(editForm.controls.name?.dirty && editForm.controls.name?.invalid)\">\r\n          <small\r\n            class=\"form-text text-danger\"\r\n            [hidden]=\"!editForm.controls.name?.errors?.required\"\r\n            icTranslate=\"entity.validation.required\"\r\n          >\r\n            This field is required.\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" icTranslate=\"reportAdmin.template.fileName\">Template File Name </label>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          name=\"templateLastFileName\"\r\n          id=\"fileName\"\r\n          [(ngModel)]=\"template.templateLastFileName\"\r\n          readonly\r\n        />\r\n      </div>\r\n\r\n      <div class=\"rounded-pill col-md-6\">\r\n        <label class=\"form-control-label\" for=\"file\" icTranslate=\"reportAdmin.menue.home.upLoadFile\">Upload file </label>\r\n        <p-fileUpload mode=\"basic\" [customUpload]=\"true\" [auto]=\"true\" accept=\".jrxml\" (uploadHandler)=\"upload($event)\"></p-fileUpload>\r\n        <div><label class=\"form-control-label\" icTranslate=\"reportAdmin.template.upLoadDesc\">upLoadDesc</label></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button id=\"saveNewTemplate\" type=\"submit\" [disabled]=\"editForm.invalid || isSaving\" class=\"btn btn-primary btn-sm\">\r\n      <fa-icon [icon]=\"'save'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.save\">Save</span>\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-dismiss=\"modal\" (click)=\"clear()\">\r\n      <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { Template } from './template.model';\r\nimport { TemplatePopupService } from './template-popup.service';\r\nimport { TemplateService } from './template.service';\r\n\r\n@Component({\r\n  selector: 'ic-template-dialog',\r\n  templateUrl: './template-dialog.component.html',\r\n})\r\nexport class TemplateDialogComponent implements OnInit {\r\n  template?: Template;\r\n  isSaving?: boolean;\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private templateService: TemplateService,\r\n    private eventManager: EventManager,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isSaving = false;\r\n  }\r\n\r\n  clear(): void {\r\n    this.activeModal.dismiss('cancel');\r\n    this.backToPrevious();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    if ((this.template as any).id !== undefined && null !== (this.template as any).id) {\r\n      this.subscribeToSaveResponse(this.templateService.update(this.template as any));\r\n    } else {\r\n      this.subscribeToSaveResponse(this.templateService.create(this.template as any));\r\n    }\r\n  }\r\n\r\n  upload(event: any): void {\r\n    const files: any = event.files;\r\n    const singleFile = files[0];\r\n    const fileName = document.getElementById('fileName') as HTMLInputElement;\r\n    fileName.value = singleFile.name;\r\n    (this.template as any).templateLastFileName = singleFile.name;\r\n    const formData: FormData = new FormData();\r\n    formData.append('file', singleFile);\r\n    this.templateService.upLoadFile(formData).subscribe();\r\n  }\r\n\r\n  backToPrevious(): void {\r\n    setTimeout(() => {\r\n      this.router.navigate(['admin/reportTemplate']);\r\n    }, 0);\r\n  }\r\n\r\n  private subscribeToSaveResponse(result: Observable<HttpResponse<Template>>): void {\r\n    result.subscribe(\r\n      (res: HttpResponse<Template>) => this.onSaveSuccess(res.body as any),\r\n      () => this.onSaveError()\r\n    );\r\n  }\r\n\r\n  private onSaveSuccess(result: Template): void {\r\n    this.eventManager.broadcast({ name: 'templateListModification', content: 'OK' });\r\n    this.isSaving = false;\r\n    this.activeModal.dismiss(result);\r\n    this.backToPrevious();\r\n  }\r\n\r\n  private onSaveError(): void {\r\n    this.isSaving = false;\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'ic-template-popup',\r\n  template: '',\r\n})\r\nexport class TemplatePopupComponent implements OnInit, OnDestroy {\r\n  routeSub: any;\r\n\r\n  constructor(private route: ActivatedRoute, private templatePopupService: TemplatePopupService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.routeSub = this.route.params.subscribe(params => {\r\n      if (params['id']) {\r\n        this.templatePopupService.open(TemplateDialogComponent as Component, params['id']);\r\n      } else {\r\n        this.templatePopupService.open(TemplateDialogComponent as Component);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
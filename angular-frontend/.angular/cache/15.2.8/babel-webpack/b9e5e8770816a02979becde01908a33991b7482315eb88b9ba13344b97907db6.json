{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FunctionEditComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst resource_model_1 = require(\"../resource/resource.model\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"./function.service\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i3 = tslib_1.__importStar(require(\"app/core/util/event-manager.service\"));\nconst i4 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i5 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i6 = tslib_1.__importStar(require(\"@fortawesome/angular-fontawesome\"));\nconst i7 = tslib_1.__importStar(require(\"../../../shared/language/translate.directive\"));\nconst i8 = tslib_1.__importStar(require(\"../../../shared/alert/alert.component\"));\nfunction FunctionEditComponent_div_0_form_18_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"input\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function FunctionEditComponent_div_0_form_18_div_15_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.func.application.appName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r11.func.application.appName);\n  }\n}\nconst _c0 = function () {\n  return [\"../../../../admin/acm/ic-function\"];\n};\nfunction FunctionEditComponent_div_0_form_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 19, 20);\n    i0.ɵɵlistener(\"ngSubmit\", function FunctionEditComponent_div_0_form_18_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.save());\n    });\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"div\", 8);\n    i0.ɵɵtext(6, \"Function Detail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n          \");\n    i0.ɵɵelementStart(8, \"div\", 9);\n    i0.ɵɵtext(9, \"\\n            \");\n    i0.ɵɵelementStart(10, \"div\", 21);\n    i0.ɵɵtext(11, \"\\n              \");\n    i0.ɵɵelementStart(12, \"label\", 22);\n    i0.ɵɵtext(13, \"Application\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n              \");\n    i0.ɵɵtemplate(15, FunctionEditComponent_div_0_form_18_div_15_Template, 4, 1, \"div\", 23);\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n\\n            \");\n    i0.ɵɵelementStart(18, \"div\", 21);\n    i0.ɵɵtext(19, \"\\n              \");\n    i0.ɵɵelementStart(20, \"label\", 24);\n    i0.ɵɵtext(21, \"Role Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n              \");\n    i0.ɵɵelementStart(23, \"div\", 25);\n    i0.ɵɵtext(24, \"\\n                \");\n    i0.ɵɵelementStart(25, \"input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function FunctionEditComponent_div_0_form_18_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.func.resourceName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n                \");\n    i0.ɵɵelementStart(27, \"div\", 27);\n    i0.ɵɵtext(28, \"\\n                  \");\n    i0.ɵɵelementStart(29, \"small\", 28);\n    i0.ɵɵtext(30, \"\\n                    This field is required.\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n\\n            \");\n    i0.ɵɵelementStart(35, \"div\", 21);\n    i0.ɵɵtext(36, \"\\n              \");\n    i0.ɵɵelementStart(37, \"div\", 4);\n    i0.ɵɵtext(38, \"\\n\");\n    i0.ɵɵtext(39, \"\\n\\n                \");\n    i0.ɵɵelementStart(40, \"button\", 29);\n    i0.ɵɵtext(41, \"\\n                  \");\n    i0.ɵɵelement(42, \"fa-icon\", 30);\n    i0.ɵɵtext(43, \"\\u00A0\");\n    i0.ɵɵelementStart(44, \"span\", 31);\n    i0.ɵɵtext(45, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(47, \"\\n                \");\n    i0.ɵɵelementStart(48, \"button\", 32);\n    i0.ɵɵtext(49, \"\\n                  \");\n    i0.ɵɵelement(50, \"fa-icon\", 30);\n    i0.ɵɵtext(51, \"\\u00A0\");\n    i0.ɵɵelementStart(52, \"span\", 33);\n    i0.ɵɵtext(53, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(56, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(57, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \"\\n      \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(1);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.func.application);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.func.resourceName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !((_r10.controls.resourceName == null ? null : _r10.controls.resourceName.dirty) && (_r10.controls.resourceName == null ? null : _r10.controls.resourceName.invalid)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(_r10.controls.resourceName == null ? null : _r10.controls.resourceName.errors == null ? null : _r10.controls.resourceName.errors.required));\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"disabled\", _r10.form.invalid || ctx_r1.isSaving);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"save\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"ban\");\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_57_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"td\")(3, \"input\", 36);\n    i0.ɵɵlistener(\"click\", function FunctionEditComponent_div_0_tbody_57_tr_2_Template_input_click_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const resource_r18 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r20.selectOneResource($event, resource_r18));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(4, \"\\n                  \");\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                  \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                  \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                  \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                  \");\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const resource_r18 = ctx.$implicit;\n    const idx_r19 = ctx.index;\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"checked\", ctx_r17.selectedAllResources);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(idx_r19 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(resource_r18.resourceName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(resource_r18.resourceType);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(resource_r18.resourcePath);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(resource_r18.status);\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵtemplate(2, FunctionEditComponent_div_0_tbody_57_tr_2_Template, 20, 6, \"tr\", 35);\n    i0.ɵɵtext(3, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.assignedResources);\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵtext(3, \"\\n                  \");\n    i0.ɵɵelementStart(4, \"td\", 37);\n    i0.ɵɵtext(5, \"No Matching Records Found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FunctionEditComponent_div_0_button_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function FunctionEditComponent_div_0_button_65_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.unAssignResources());\n    });\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelement(2, \"fa-icon\", 30);\n    i0.ɵɵtext(3, \"\\u00A0\");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Unassign Resources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r4.selectedResources || ctx_r4.selectedResources.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"times\");\n  }\n}\nconst _c1 = function (a1, a2) {\n  return [\"../assign/resources\", a1, a2];\n};\nfunction FunctionEditComponent_div_0_button_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 39);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelement(2, \"fa-icon\", 30);\n    i0.ɵɵtext(3, \"\\u00A0\");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Assign Resources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(3, _c1, ctx_r5.func.application.appId, ctx_r5.func.resourceId))(\"replaceUrl\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"check\");\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_101_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"td\")(3, \"input\", 36);\n    i0.ɵɵlistener(\"click\", function FunctionEditComponent_div_0_tbody_101_tr_2_Template_input_click_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const role_r25 = restoredCtx.$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r27.selectOneRole($event, role_r25));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(4, \"\\n                  \");\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                  \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const role_r25 = ctx.$implicit;\n    const idx_r26 = ctx.index;\n    const ctx_r24 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"checked\", ctx_r24.selectedAllRoles);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(idx_r26 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(role_r25.resourceName);\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_101_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵtemplate(2, FunctionEditComponent_div_0_tbody_101_tr_2_Template, 11, 3, \"tr\", 35);\n    i0.ɵɵtext(3, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.assignedRoles);\n  }\n}\nfunction FunctionEditComponent_div_0_tbody_103_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵtext(3, \"\\n                  \");\n    i0.ɵɵelementStart(4, \"td\", 40);\n    i0.ɵɵtext(5, \"No Matching Records Found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FunctionEditComponent_div_0_button_109_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function FunctionEditComponent_div_0_button_109_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.unAssignRoles());\n    });\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelement(2, \"fa-icon\", 30);\n    i0.ɵɵtext(3, \"\\u00A0\");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Unassign Roles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r8.selectedRoles || ctx_r8.selectedRoles.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"times\");\n  }\n}\nconst _c2 = function (a1, a2) {\n  return [\"../assign/roles\", a1, a2];\n};\nfunction FunctionEditComponent_div_0_button_111_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 39);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelement(2, \"fa-icon\", 30);\n    i0.ɵɵtext(3, \"\\u00A0\");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Assign Roles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(3, _c2, ctx_r9.func.application.appId, ctx_r9.func.resourceId))(\"replaceUrl\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", \"check\");\n  }\n}\nfunction FunctionEditComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementStart(4, \"span\", 1);\n    i0.ɵɵtext(5, \"Edit Function\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n  \");\n    i0.ɵɵelement(8, \"p\", 2);\n    i0.ɵɵtext(9, \"\\n  \");\n    i0.ɵɵelement(10, \"ic-alert\");\n    i0.ɵɵtext(11, \"\\n  \");\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵtext(13, \"\\n  \");\n    i0.ɵɵelementStart(14, \"div\", 3);\n    i0.ɵɵtext(15, \"\\n    \");\n    i0.ɵɵelementStart(16, \"div\", 4);\n    i0.ɵɵtext(17, \"\\n      \");\n    i0.ɵɵtemplate(18, FunctionEditComponent_div_0_form_18_Template, 60, 9, \"form\", 5);\n    i0.ɵɵtext(19, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n\\n    \");\n    i0.ɵɵelementStart(21, \"div\", 6);\n    i0.ɵɵtext(22, \"\\n      \");\n    i0.ɵɵelementStart(23, \"div\", 7);\n    i0.ɵɵtext(24, \"\\n        \");\n    i0.ɵɵelementStart(25, \"div\", 8);\n    i0.ɵɵtext(26, \"Resources Assigned to Function\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n        \");\n    i0.ɵɵelementStart(28, \"div\", 9);\n    i0.ɵɵtext(29, \"\\n          \");\n    i0.ɵɵelementStart(30, \"div\", 10);\n    i0.ɵɵtext(31, \"\\n            \");\n    i0.ɵɵelementStart(32, \"table\", 11);\n    i0.ɵɵtext(33, \"\\n              \");\n    i0.ɵɵelementStart(34, \"thead\");\n    i0.ɵɵtext(35, \"\\n                \");\n    i0.ɵɵelementStart(36, \"tr\");\n    i0.ɵɵtext(37, \"\\n                  \");\n    i0.ɵɵelementStart(38, \"th\", 12);\n    i0.ɵɵtext(39, \"\\n                    \");\n    i0.ɵɵelementStart(40, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function FunctionEditComponent_div_0_Template_input_ngModelChange_40_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.selectedAllResources = $event);\n    })(\"click\", function FunctionEditComponent_div_0_Template_input_click_40_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.selectAllResources($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(41, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n                  \");\n    i0.ɵɵelementStart(43, \"th\", 14);\n    i0.ɵɵtext(44, \"S/No.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(45, \"\\n                  \");\n    i0.ɵɵelementStart(46, \"th\", 15);\n    i0.ɵɵtext(47, \"Resource Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n                  \");\n    i0.ɵɵelementStart(49, \"th\", 15);\n    i0.ɵɵtext(50, \"Resource Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(51, \"\\n                  \");\n    i0.ɵɵelementStart(52, \"th\", 15);\n    i0.ɵɵtext(53, \"Resource Path\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(56, \"\\n              \");\n    i0.ɵɵtemplate(57, FunctionEditComponent_div_0_tbody_57_Template, 4, 1, \"tbody\", 0);\n    i0.ɵɵtext(58, \"\\n              \");\n    i0.ɵɵtemplate(59, FunctionEditComponent_div_0_tbody_59_Template, 8, 0, \"tbody\", 0);\n    i0.ɵɵtext(60, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(62, \"\\n\\n          \");\n    i0.ɵɵelementStart(63, \"div\", 16);\n    i0.ɵɵtext(64, \"\\n            \");\n    i0.ɵɵtemplate(65, FunctionEditComponent_div_0_button_65_Template, 7, 2, \"button\", 17);\n    i0.ɵɵtext(66, \"\\n            \");\n    i0.ɵɵtemplate(67, FunctionEditComponent_div_0_button_67_Template, 7, 6, \"button\", 18);\n    i0.ɵɵtext(68, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(69, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(70, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(71, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(72, \"\\n\\n    \");\n    i0.ɵɵelementStart(73, \"div\", 6);\n    i0.ɵɵtext(74, \"\\n      \");\n    i0.ɵɵelementStart(75, \"div\", 7);\n    i0.ɵɵtext(76, \"\\n        \");\n    i0.ɵɵelementStart(77, \"div\", 8);\n    i0.ɵɵtext(78, \"Roles Assigned to Function\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(79, \"\\n        \");\n    i0.ɵɵelementStart(80, \"div\", 9);\n    i0.ɵɵtext(81, \"\\n          \");\n    i0.ɵɵelementStart(82, \"div\", 10);\n    i0.ɵɵtext(83, \"\\n            \");\n    i0.ɵɵelementStart(84, \"table\", 11);\n    i0.ɵɵtext(85, \"\\n              \");\n    i0.ɵɵelementStart(86, \"thead\");\n    i0.ɵɵtext(87, \"\\n                \");\n    i0.ɵɵelementStart(88, \"tr\");\n    i0.ɵɵtext(89, \"\\n                  \");\n    i0.ɵɵelementStart(90, \"th\", 12)(91, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function FunctionEditComponent_div_0_Template_input_ngModelChange_91_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.selectedAllRoles = $event);\n    })(\"click\", function FunctionEditComponent_div_0_Template_input_click_91_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.selectAllRoles($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(92, \"\\n                  \");\n    i0.ɵɵelementStart(93, \"th\", 14);\n    i0.ɵɵtext(94, \"S/No.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(95, \"\\n                  \");\n    i0.ɵɵelementStart(96, \"th\", 15);\n    i0.ɵɵtext(97, \"Role Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(98, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(99, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(100, \"\\n              \");\n    i0.ɵɵtemplate(101, FunctionEditComponent_div_0_tbody_101_Template, 4, 1, \"tbody\", 0);\n    i0.ɵɵtext(102, \"\\n              \");\n    i0.ɵɵtemplate(103, FunctionEditComponent_div_0_tbody_103_Template, 8, 0, \"tbody\", 0);\n    i0.ɵɵtext(104, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(105, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(106, \"\\n\\n          \");\n    i0.ɵɵelementStart(107, \"div\", 16);\n    i0.ɵɵtext(108, \"\\n            \");\n    i0.ɵɵtemplate(109, FunctionEditComponent_div_0_button_109_Template, 7, 2, \"button\", 17);\n    i0.ɵɵtext(110, \"\\n            \");\n    i0.ɵɵtemplate(111, FunctionEditComponent_div_0_button_111_Template, 7, 6, \"button\", 18);\n    i0.ɵɵtext(112, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(113, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(114, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(115, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(116, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(117, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.func);\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selectedAllResources);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedResourcesLength() > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedResourcesLength() == 0);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedResourcesLength() > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.func.application);\n    i0.ɵɵadvance(24);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selectedAllRoles);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedRolesLength() > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedRolesLength() == 0);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedRolesLength() > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.func.application);\n  }\n}\nclass FunctionEditComponent {\n  constructor(functionService, route, eventManager) {\n    this.functionService = functionService;\n    this.route = route;\n    this.eventManager = eventManager;\n    this.func = new resource_model_1.Resource();\n    this.assignedResources = [];\n    this.assignedRoles = [];\n    this.selectedResources = [];\n    this.selectedRoles = [];\n  }\n  ngOnInit() {\n    this.isSaving = false;\n    this.subscription = this.route.params.subscribe(params => {\n      this.resourceId = params['id'];\n    });\n    // get function object\n    this.load(this.resourceId);\n    // register assign changed\n    this.registerChangeInAssignedResources();\n    this.registerChangeInAssignedRoles();\n  }\n  ngOnDestroy() {\n    if (this.eventSubscriber) {\n      this.eventManager.destroy(this.eventSubscriber);\n    }\n  }\n  load(id) {\n    this.functionService.find(id).subscribe(func => {\n      this.func = func;\n      // get assigned resources and roles\n      this.getAllAssignedResources();\n      this.getAllAssignedRoles();\n    });\n  }\n  getAllAssignedResources() {\n    this.selectedAllResources = false;\n    this.selectedResources = [];\n    this.assignedResources = [];\n    if (this.func.res2RessForParentResId) {\n      for (let i = 0; i < this.func.res2RessForParentResId.length; i++) {\n        const resource = this.func.res2RessForParentResId[i];\n        if (resource.resourceByParentResId) {\n          this.assignedResources.push(resource.resourceByParentResId);\n        }\n      }\n    }\n  }\n  getAllAssignedRoles() {\n    this.selectedAllRoles = false;\n    this.selectedRoles = [];\n    this.assignedRoles = [];\n    if (this.func.res2RessForResourceId) {\n      for (let i = 0; i < this.func.res2RessForResourceId.length; i++) {\n        const role = this.func.res2RessForResourceId[i];\n        if (role.resourceByParentResId) {\n          this.assignedRoles.push(role.resourceByParentResId);\n        }\n      }\n    }\n  }\n  save() {\n    this.isSaving = true;\n    this.subscribeToSaveResponse(this.functionService.update(this.func));\n  }\n  selectAllResources(event) {\n    this.selectedResources = [];\n    this.selectedAllResources = event.target.checked;\n    if (this.selectedAllResources) {\n      for (let i = 0; i < this.assignedResources.length; i++) {\n        this.selectedResources.push(this.assignedResources[i]);\n      }\n    }\n  }\n  selectOneResource(event, resource) {\n    if (event.target.checked) {\n      if (this.selectedResources.length === 0) {\n        this.selectedResources = [];\n      }\n      this.selectedResources.push(resource);\n    } else {\n      const index = this.selectedResources.indexOf(resource);\n      if (index >= 0) {\n        this.selectedResources.splice(index, 1);\n      }\n      if (this.selectedResources.length === 0) {\n        this.selectedAllResources = false;\n      }\n    }\n  }\n  selectAllRoles(event) {\n    this.selectedRoles = [];\n    this.selectedAllRoles = event.target.checked;\n    if (this.selectedAllRoles) {\n      for (let i = 0; i < this.assignedRoles.length; i++) {\n        this.selectedRoles.push(this.assignedRoles[i]);\n      }\n    }\n  }\n  selectOneRole(event, role) {\n    if (event.target.checked) {\n      if (this.selectedRoles.length === 0) {\n        this.selectedRoles = [];\n      }\n      this.selectedRoles.push(role);\n    } else {\n      const index = this.selectedRoles.indexOf(role);\n      if (index >= 0) {\n        this.selectedRoles.splice(index, 1);\n      }\n      if (this.selectedRoles.length === 0) {\n        this.selectedAllRoles = false;\n      }\n    }\n  }\n  assignedResourcesLength() {\n    return this.assignedResources.length;\n  }\n  assignedRolesLength() {\n    return this.assignedRoles.length;\n  }\n  unAssignResources() {\n    if (this.selectedResources.length > 0) {\n      this.functionService.unAssignResources(this.resourceId, this.selectedResources).subscribe(() => {\n        this.eventManager.broadcast({\n          name: 'assignedResourceListModification',\n          content: 'OK'\n        });\n      });\n    }\n  }\n  unAssignRoles() {\n    if (this.selectedRoles.length > 0) {\n      this.functionService.unAssignRoles(this.resourceId, this.selectedRoles).subscribe(() => {\n        this.eventManager.broadcast({\n          name: 'assignedRoleListModification',\n          content: 'OK'\n        });\n      });\n    }\n  }\n  registerChangeInAssignedResources() {\n    this.eventSubscriber = this.eventManager.subscribe('assignedResourceListModification', () => this.load(this.resourceId));\n  }\n  registerChangeInAssignedRoles() {\n    this.eventSubscriber = this.eventManager.subscribe('assignedRoleListModification', () => this.load(this.resourceId));\n  }\n  subscribeToSaveResponse(result) {\n    result.subscribe(() => this.onSaveSuccess(), res => this.onSaveError(res));\n  }\n  onSaveSuccess() {\n    this.isSaving = false;\n  }\n  onSaveError(error) {\n    this.isSaving = false;\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\n    document.getElementById('appDialogErrorMsg').innerHTML = appDialogErrorMsg;\n    document.getElementById('appDialogErrorMsg').style.display = 'block';\n  }\n}\nexports.FunctionEditComponent = FunctionEditComponent;\nFunctionEditComponent.ɵfac = function FunctionEditComponent_Factory(t) {\n  return new (t || FunctionEditComponent)(i0.ɵɵdirectiveInject(i1.FunctionService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.EventManager));\n};\nFunctionEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionEditComponent,\n  selectors: [[\"ic-function-edit\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [\"icTranslate\", \"acmAdmin.function.home.editLabel\"], [\"id\", \"appDialogErrorMsg\", 1, \"alert-dismissible\", \"alert-danger\", \"alert\", 2, \"display\", \"none\"], [1, \"row\"], [1, \"col-sm-12\"], [\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\", 4, \"ngIf\"], [1, \"col-sm-12\", 2, \"margin-top\", \"20px\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\", 2, \"padding\", \"1.5% 1.5% 1% 1.5%\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\", 2, \"width\", \"60px\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [\"scope\", \"col\", 2, \"width\", \"100px\"], [\"scope\", \"col\"], [2, \"margin-top\", \"20px\"], [\"type\", \"button\", \"class\", \"btn btn-danger btn-sm\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-primary btn-sm\", 3, \"routerLink\", \"replaceUrl\", 4, \"ngIf\"], [\"name\", \"editForm\", \"role\", \"form\", 3, \"ngSubmit\"], [\"editForm\", \"ngForm\"], [1, \"rounded-pill\", \"row\"], [\"icTranslate\", \"acmAdmin.function.application\", \"for\", \"field_application\", 1, \"col-sm-2\", \"form-control-label\"], [\"class\", \"col-sm-4\", 4, \"ngIf\"], [\"icTranslate\", \"acmAdmin.function.resourceName\", \"for\", \"field_resourceName\", 1, \"col-sm-2\", \"form-control-label\"], [1, \"col-sm-4\"], [\"type\", \"text\", \"name\", \"resourceName\", \"id\", \"field_resourceName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"hidden\"], [\"icTranslate\", \"entity.validation.required\", 1, \"form-text\", \"text-danger\", 3, \"hidden\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"disabled\"], [3, \"icon\"], [\"icTranslate\", \"entity.action.save\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"routerLink\"], [\"icTranslate\", \"entity.action.cancel\"], [\"type\", \"text\", \"name\", \"appName\", \"id\", \"field_application\", \"readonly\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", 3, \"checked\", \"click\"], [\"colspan\", \"6\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"routerLink\", \"replaceUrl\"], [\"colspan\", \"4\"]],\n  template: function FunctionEditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, FunctionEditComponent_div_0_Template, 118, 11, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.func);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.NgForOf, i5.NgIf, i6.FaIconComponent, i2.RouterLink, i7.TranslateDirective, i8.AlertComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","FunctionEditComponent","constructor","functionService","route","eventManager","resource_model_1","ngOnInit","isSaving","subscription","params","subscribe","resourceId","load","registerChangeInAssignedResources","registerChangeInAssignedRoles","ngOnDestroy","eventSubscriber","destroy","id","find","func","getAllAssignedResources","getAllAssignedRoles","selectedAllResources","selectedResources","assignedResources","res2RessForParentResId","i","length","resource","resourceByParentResId","push","selectedAllRoles","selectedRoles","assignedRoles","res2RessForResourceId","role","save","subscribeToSaveResponse","update","selectAllResources","event","target","checked","selectOneResource","index","indexOf","splice","selectAllRoles","selectOneRole","assignedResourcesLength","assignedRolesLength","unAssignResources","broadcast","name","content","unAssignRoles","result","onSaveSuccess","res","onSaveError","error","appDialogErrorMsg","headers","get","document","getElementById","innerHTML","style","display","exports","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\function\\function-edit.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\admin\\access-control\\function\\function-edit.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { EventManager } from 'app/core/util/event-manager.service';\r\nimport { Resource } from '../resource/resource.model';\r\nimport { FunctionService } from './function.service';\r\nimport { Group } from '../group/group.model';\r\n\r\n@Component({\r\n  selector: 'ic-function-edit',\r\n  templateUrl: './function-edit.component.html',\r\n})\r\nexport class FunctionEditComponent implements OnInit, OnDestroy {\r\n  currentAccount: any;\r\n  error: any;\r\n  success: any;\r\n  eventSubscriber?: Subscription;\r\n  links: any;\r\n  totalItems: any;\r\n  queryCount: any;\r\n  itemsPerPage: any;\r\n  page: any;\r\n  predicate!: string;\r\n  reverse: any;\r\n\r\n  isSaving?: boolean;\r\n  resourceId?: any;\r\n  func: Resource = new Resource();\r\n\r\n  assignedResources: Resource[] = [];\r\n  assignedRoles: Resource[] = [];\r\n\r\n  selectedAllResources?: boolean;\r\n  selectedResources: Resource[] = [];\r\n\r\n  selectedAllRoles?: boolean;\r\n  selectedRoles: Resource[] = [];\r\n\r\n  subscription?: Subscription;\r\n\r\n  constructor(private functionService: FunctionService, private route: ActivatedRoute, private eventManager: EventManager) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isSaving = false;\r\n    this.subscription = this.route.params.subscribe(params => {\r\n      this.resourceId = params['id'];\r\n    });\r\n\r\n    // get function object\r\n    this.load(this.resourceId);\r\n\r\n    // register assign changed\r\n    this.registerChangeInAssignedResources();\r\n    this.registerChangeInAssignedRoles();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.eventSubscriber) {\r\n      this.eventManager.destroy(this.eventSubscriber);\r\n    }\r\n  }\r\n\r\n  load(id: any): void {\r\n    this.functionService.find(id).subscribe(func => {\r\n      this.func = func;\r\n\r\n      // get assigned resources and roles\r\n      this.getAllAssignedResources();\r\n      this.getAllAssignedRoles();\r\n    });\r\n  }\r\n\r\n  getAllAssignedResources(): void {\r\n    this.selectedAllResources = false;\r\n    this.selectedResources = [];\r\n    this.assignedResources = [];\r\n    if (this.func.res2RessForParentResId) {\r\n      for (let i = 0; i < this.func.res2RessForParentResId.length; i++) {\r\n        const resource: Resource = this.func.res2RessForParentResId[i];\r\n        if (resource.resourceByParentResId) {\r\n          this.assignedResources.push(resource.resourceByParentResId);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getAllAssignedRoles(): void {\r\n    this.selectedAllRoles = false;\r\n    this.selectedRoles = [];\r\n    this.assignedRoles = [];\r\n    if (this.func.res2RessForResourceId) {\r\n      for (let i = 0; i < this.func.res2RessForResourceId.length; i++) {\r\n        const role: Resource = this.func.res2RessForResourceId[i];\r\n        if (role.resourceByParentResId) {\r\n          this.assignedRoles.push(role.resourceByParentResId);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    this.subscribeToSaveResponse(this.functionService.update(this.func));\r\n  }\r\n\r\n  selectAllResources(event: MouseEvent): void {\r\n    this.selectedResources = [];\r\n    this.selectedAllResources = (event.target as HTMLInputElement).checked;\r\n    if (this.selectedAllResources) {\r\n      for (let i = 0; i < this.assignedResources.length; i++) {\r\n        this.selectedResources.push(this.assignedResources[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  selectOneResource(event: MouseEvent, resource: any): void {\r\n    if ((event.target as HTMLInputElement).checked) {\r\n      if (this.selectedResources.length === 0) {\r\n        this.selectedResources = [];\r\n      }\r\n      this.selectedResources.push(resource);\r\n    } else {\r\n      const index = this.selectedResources.indexOf(resource);\r\n      if (index >= 0) {\r\n        this.selectedResources.splice(index, 1);\r\n      }\r\n      if (this.selectedResources.length === 0) {\r\n        this.selectedAllResources = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  selectAllRoles(event: MouseEvent): void {\r\n    this.selectedRoles = [];\r\n    this.selectedAllRoles = (event.target as HTMLInputElement).checked;\r\n    if (this.selectedAllRoles) {\r\n      for (let i = 0; i < this.assignedRoles.length; i++) {\r\n        this.selectedRoles.push(this.assignedRoles[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  selectOneRole(event: MouseEvent, role: any): void {\r\n    if ((event.target as HTMLInputElement).checked) {\r\n      if (this.selectedRoles.length === 0) {\r\n        this.selectedRoles = [];\r\n      }\r\n      this.selectedRoles.push(role);\r\n    } else {\r\n      const index = this.selectedRoles.indexOf(role);\r\n      if (index >= 0) {\r\n        this.selectedRoles.splice(index, 1);\r\n      }\r\n      if (this.selectedRoles.length === 0) {\r\n        this.selectedAllRoles = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  assignedResourcesLength(): number {\r\n    return this.assignedResources.length;\r\n  }\r\n\r\n  assignedRolesLength(): number {\r\n    return this.assignedRoles.length;\r\n  }\r\n\r\n  unAssignResources(): void {\r\n    if (this.selectedResources.length > 0) {\r\n      this.functionService.unAssignResources(this.resourceId, this.selectedResources).subscribe(() => {\r\n        this.eventManager.broadcast({ name: 'assignedResourceListModification', content: 'OK' });\r\n      });\r\n    }\r\n  }\r\n\r\n  unAssignRoles(): void {\r\n    if (this.selectedRoles.length > 0) {\r\n      this.functionService.unAssignRoles(this.resourceId, this.selectedRoles).subscribe(() => {\r\n        this.eventManager.broadcast({ name: 'assignedRoleListModification', content: 'OK' });\r\n      });\r\n    }\r\n  }\r\n\r\n  registerChangeInAssignedResources(): void {\r\n    this.eventSubscriber = this.eventManager.subscribe('assignedResourceListModification', () => this.load(this.resourceId));\r\n  }\r\n\r\n  registerChangeInAssignedRoles(): void {\r\n    this.eventSubscriber = this.eventManager.subscribe('assignedRoleListModification', () => this.load(this.resourceId));\r\n  }\r\n\r\n  private subscribeToSaveResponse(result: Observable<Group>): void {\r\n    result.subscribe(\r\n      () => this.onSaveSuccess(),\r\n      (res: HttpResponse<any>) => this.onSaveError(res)\r\n    );\r\n  }\r\n\r\n  private onSaveSuccess(): void {\r\n    this.isSaving = false;\r\n  }\r\n\r\n  private onSaveError(error: any): void {\r\n    this.isSaving = false;\r\n    const appDialogErrorMsg = error.headers.get('X-nspay2App-alert');\r\n    document.getElementById('appDialogErrorMsg')!.innerHTML = appDialogErrorMsg;\r\n    document.getElementById('appDialogErrorMsg')!.style.display = 'block';\r\n  }\r\n}\r\n","<div *ngIf=\"func\">\r\n  <h2>\r\n    <span icTranslate=\"acmAdmin.function.home.editLabel\">Edit Function</span>\r\n  </h2>\r\n  <p style=\"display: none\" id=\"appDialogErrorMsg\" class=\"alert-dismissible alert-danger alert\"></p>\r\n  <ic-alert></ic-alert>\r\n  <br />\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <form *ngIf=\"func\" name=\"editForm\" role=\"form\"  (ngSubmit)=\"save()\" #editForm=\"ngForm\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Function Detail</div>\r\n          <div class=\"card-block\" style=\"padding: 1.5% 1.5% 1% 1.5%\">\r\n            <div class=\"rounded-pill row\">\r\n              <label class=\"col-sm-2 form-control-label\" icTranslate=\"acmAdmin.function.application\" for=\"field_application\"\r\n                >Application</label\r\n              >\r\n              <div *ngIf=\"func.application\" class=\"col-sm-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  name=\"appName\"\r\n                  id=\"field_application\"\r\n                  [(ngModel)]=\"func.application.appName\"\r\n                  readonly\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"rounded-pill row\">\r\n              <label class=\"col-sm-2 form-control-label\" icTranslate=\"acmAdmin.function.resourceName\" for=\"field_resourceName\"\r\n                >Role Name</label\r\n              >\r\n              <div class=\"col-sm-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  name=\"resourceName\"\r\n                  id=\"field_resourceName\"\r\n                  [(ngModel)]=\"func.resourceName\"\r\n                  required\r\n                />\r\n                <div [hidden]=\"!(editForm.controls.resourceName?.dirty && editForm.controls.resourceName?.invalid)\">\r\n                  <small\r\n                    class=\"form-text text-danger\"\r\n                    [hidden]=\"!editForm.controls.resourceName?.errors?.required\"\r\n                    icTranslate=\"entity.validation.required\"\r\n                  >\r\n                    This field is required.\r\n                  </small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"rounded-pill row\">\r\n              <div class=\"col-sm-12\">\r\n<!--                <input type=\"hidden\" id=\"resourceId\" name=\"resourceId\" [(ngModel)]=\"func.resourceId\" />-->\r\n\r\n                <button type=\"submit\" [disabled]=\"editForm.form.invalid || isSaving\" class=\"btn btn-primary btn-sm\">\r\n                  <fa-icon [icon]=\"'save'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.save\">Save</span>\r\n                </button>\r\n                <button type=\"button\" [routerLink]=\"['../../../../admin/acm/ic-function']\" class=\"btn btn-secondary btn-sm\">\r\n                  <fa-icon [icon]=\"'ban'\"></fa-icon>&nbsp;<span icTranslate=\"entity.action.cancel\">Cancel</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 20px\" class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">Resources Assigned to Function</div>\r\n        <div class=\"card-block\" style=\"padding: 1.5% 1.5% 1% 1.5%\">\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" style=\"width: 60px\">\r\n                    <input type=\"checkbox\" [(ngModel)]=\"selectedAllResources\" (click)=\"selectAllResources($event)\" />\r\n                  </th>\r\n                  <th scope=\"col\" style=\"width: 100px\">S/No.</th>\r\n                  <th scope=\"col\">Resource Name</th>\r\n                  <th scope=\"col\">Resource Type</th>\r\n                  <th scope=\"col\">Resource Path</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngIf=\"assignedResourcesLength() > 0\">\r\n                <tr *ngFor=\"let resource of assignedResources; let idx = index\">\r\n                  <td><input type=\"checkbox\" [checked]=\"selectedAllResources\" (click)=\"selectOneResource($event, resource)\" /></td>\r\n                  <td>{{ idx + 1 }}</td>\r\n                  <td>{{ resource.resourceName }}</td>\r\n                  <td>{{ resource.resourceType }}</td>\r\n                  <td>{{ resource.resourcePath }}</td>\r\n                  <td>{{ resource.status }}</td>\r\n                </tr>\r\n              </tbody>\r\n              <tbody *ngIf=\"assignedResourcesLength() == 0\">\r\n                <tr>\r\n                  <td colspan=\"6\">No Matching Records Found.</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div style=\"margin-top: 20px\">\r\n            <button\r\n              type=\"button\"\r\n              (click)=\"unAssignResources()\"\r\n              *ngIf=\"assignedResourcesLength() > 0\"\r\n              [disabled]=\"!selectedResources || selectedResources.length === 0\"\r\n              class=\"btn btn-danger btn-sm\"\r\n            >\r\n              <fa-icon [icon]=\"'times'\"></fa-icon>&nbsp;<span>Unassign Resources</span>\r\n            </button>\r\n            <button\r\n              *ngIf=\"func.application\"\r\n              type=\"button\"\r\n              [routerLink]=\"['../assign/resources', func.application.appId, func.resourceId]\"\r\n              [replaceUrl]=\"true\"\r\n              class=\"btn btn-primary btn-sm\"\r\n            >\r\n              <fa-icon [icon]=\"'check'\"></fa-icon>&nbsp;<span>Assign Resources</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 20px\" class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">Roles Assigned to Function</div>\r\n        <div class=\"card-block\" style=\"padding: 1.5% 1.5% 1% 1.5%\">\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" style=\"width: 60px\"><input type=\"checkbox\" [(ngModel)]=\"selectedAllRoles\" (click)=\"selectAllRoles($event)\" /></th>\r\n                  <th scope=\"col\" style=\"width: 100px\">S/No.</th>\r\n                  <th scope=\"col\">Role Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngIf=\"assignedRolesLength() > 0\">\r\n                <tr *ngFor=\"let role of assignedRoles; let idx = index\">\r\n                  <td><input type=\"checkbox\" [checked]=\"selectedAllRoles\" (click)=\"selectOneRole($event, role)\" /></td>\r\n                  <td>{{ idx + 1 }}</td>\r\n                  <td>{{ role.resourceName }}</td>\r\n                </tr>\r\n              </tbody>\r\n              <tbody *ngIf=\"assignedRolesLength() == 0\">\r\n                <tr>\r\n                  <td colspan=\"4\">No Matching Records Found.</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div style=\"margin-top: 20px\">\r\n            <button\r\n              type=\"button\"\r\n              (click)=\"unAssignRoles()\"\r\n              *ngIf=\"assignedRolesLength() > 0\"\r\n              [disabled]=\"!selectedRoles || selectedRoles.length === 0\"\r\n              class=\"btn btn-danger btn-sm\"\r\n            >\r\n              <fa-icon [icon]=\"'times'\"></fa-icon>&nbsp;<span>Unassign Roles</span>\r\n            </button>\r\n            <button\r\n              *ngIf=\"func.application\"\r\n              type=\"button\"\r\n              [routerLink]=\"['../assign/roles', func.application.appId, func.resourceId]\"\r\n              [replaceUrl]=\"true\"\r\n              class=\"btn btn-primary btn-sm\"\r\n            >\r\n              <fa-icon [icon]=\"'check'\"></fa-icon>&nbsp;<span>Assign Roles</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReplacementComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst core_1 = require(\"@angular/core\");\nconst forms_1 = require(\"@angular/forms\");\nconst http_1 = require(\"@angular/common/http\");\nconst nric_directive_1 = require(\"app/shared/validator/nric.directive\");\nconst fileupload2_directive_1 = require(\"app/shared/validator/fileupload2.directive\");\nconst common_1 = require(\"@angular/common\");\nconst nspay2_constants_1 = require(\"app/nspay2.constants\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"app/claim/se-claim/service/se-claim.service\"));\nconst i2 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i3 = tslib_1.__importStar(require(\"app/core/util/clone.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/shared/service/file-upload.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/core/util/export-utils.service\"));\nconst i6 = tslib_1.__importStar(require(\"app/core/auth/account.service\"));\nconst i7 = tslib_1.__importStar(require(\"@angular/common\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/inputtext\"));\nconst i12 = tslib_1.__importStar(require(\"primeng/dialog\"));\nconst i13 = tslib_1.__importStar(require(\"primeng/inputnumber\"));\nconst i14 = tslib_1.__importStar(require(\"../../../../../shared/language/translate.directive\"));\nconst i15 = tslib_1.__importStar(require(\"../../../../../shared/component/file-upload/file-upload.component\"));\nconst _c0 = [\"attachDocFileUpload\"];\nfunction ReplacementComponent_div_0_ng_template_7_span_13_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_7_span_13_a_2_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r18.openFileInNewTab(ctx_r18.replacementFormGroup.get(\"manualCompDocId\").value));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n                      \", ctx_r15.replacementFormGroup.get(\"manualCompDocFileName\").value, \"\\n                    \");\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_span_13_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\n                      \", ctx_r16.replacementFormGroup.get(\"manualCompDocFileName\").value, \"\\n                    \");\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_span_13_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"(\", ctx_r17.replacementFormGroup.get(\"manualCompDocUpdatedDt\").value, \" by \", ctx_r17.replacementFormGroup.get(\"manualCompDocUpdatedByInitials\").value, \")\");\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵtemplate(2, ReplacementComponent_div_0_ng_template_7_span_13_a_2_Template, 2, 1, \"a\", 22);\n    i0.ɵɵtext(3, \"\\n                    \");\n    i0.ɵɵtemplate(4, ReplacementComponent_div_0_ng_template_7_span_13_span_4_Template, 2, 1, \"span\", 0);\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵtemplate(6, ReplacementComponent_div_0_ng_template_7_span_13_span_6_Template, 2, 2, \"span\", 0);\n    i0.ɵɵtext(7, \"\\n                  \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.replacementFormGroup.get(\"manualCompDocUpdatedByInitials\").value !== null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.replacementFormGroup.get(\"manualCompDocUpdatedByInitials\").value === null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.replacementFormGroup.get(\"manualCompDocUpdatedByInitials\").value !== null);\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"None\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c1 = function () {\n  return {\n    \"margin-left\": \".5em\",\n    \"margin-right\": \".5em\"\n  };\n};\nfunction ReplacementComponent_div_0_ng_template_7_p_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-button\", 24);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_7_p_button_18_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r20.displayAttachDocumentDialog = true);\n    });\n    i0.ɵɵtext(1, \"Attach Document\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_p_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-button\", 24);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_7_p_button_23_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.displayReplacementDialog = true);\n    });\n    i0.ɵɵtext(1, \"Insert Replacement\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_th_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 20);\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"th\", 12);\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"div\", 13);\n    i0.ɵɵtext(6, \"\\n              \");\n    i0.ɵɵelementStart(7, \"div\", 14);\n    i0.ɵɵtext(8, \"\\n                \");\n    i0.ɵɵelementStart(9, \"p-button\", 15);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_7_Template_p_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r25);\n      i0.ɵɵnextContext();\n      const _r1 = i0.ɵɵreference(5);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.exportToCSV(_r1));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                \");\n    i0.ɵɵelementStart(11, \"label\");\n    i0.ɵɵtext(12, \"Manual Computation:\\n                  \");\n    i0.ɵɵtemplate(13, ReplacementComponent_div_0_ng_template_7_span_13_Template, 8, 3, \"span\", 0);\n    i0.ɵɵtext(14, \"\\n                  \");\n    i0.ɵɵtemplate(15, ReplacementComponent_div_0_ng_template_7_span_15_Template, 2, 0, \"span\", 0);\n    i0.ɵɵtext(16, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                \");\n    i0.ɵɵtemplate(18, ReplacementComponent_div_0_ng_template_7_p_button_18_Template, 2, 3, \"p-button\", 16);\n    i0.ɵɵtext(19, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n              \");\n    i0.ɵɵelementStart(21, \"div\", 17);\n    i0.ɵɵtext(22, \"\\n                \");\n    i0.ɵɵtemplate(23, ReplacementComponent_div_0_ng_template_7_p_button_23_Template, 2, 0, \"p-button\", 18);\n    i0.ɵɵtext(24, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n        \");\n    i0.ɵɵelementStart(29, \"tr\");\n    i0.ɵɵtext(30, \"\\n          \");\n    i0.ɵɵelementStart(31, \"th\", 19);\n    i0.ɵɵtext(32, \"Name of Replacement\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n          \");\n    i0.ɵɵelementStart(34, \"th\", 20);\n    i0.ɵɵtext(35, \"Rate Per Session\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n          \");\n    i0.ɵɵelementStart(37, \"th\", 20);\n    i0.ɵɵtext(38, \"No Of Session\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n          \");\n    i0.ɵɵelementStart(40, \"th\", 20);\n    i0.ɵɵtext(41, \"Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n          \");\n    i0.ɵɵtemplate(43, ReplacementComponent_div_0_ng_template_7_th_43_Template, 2, 0, \"th\", 21);\n    i0.ɵɵtext(44, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(45, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"colspan\", ctx_r2.isActive() && !ctx_r2.readOnly && ctx_r2.hasValidAuthorityAndStation() ? 6 : 5);\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(8, _c1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.replacementFormGroup.get(\"manualCompDocId\").value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.replacementFormGroup.get(\"manualCompDocId\").value);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isActive() && !ctx_r2.readOnly && ctx_r2.hasValidAuthorityAndStation());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isActive() && !ctx_r2.readOnly && ctx_r2.hasValidAuthorityAndStation());\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isActive() && !ctx_r2.readOnly && ctx_r2.hasValidAuthorityAndStation());\n  }\n}\nconst _c2 = function () {\n  return {\n    \"text-align\": \"center\",\n    \"width\": \"12%\"\n  };\n};\nconst _c3 = function () {\n  return {\n    \"margin-left\": \".5em\"\n  };\n};\nfunction ReplacementComponent_div_0_ng_template_9_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementStart(2, \"p-button\", 28);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_9_td_18_Template_p_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      const replacementInfo_r26 = ctx_r30.$implicit;\n      const rowIndex_r27 = ctx_r30.rowIndex;\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.openEditReplacementInfoDialog(replacementInfo_r26, rowIndex_r27));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n              \");\n    i0.ɵɵelementStart(4, \"p-button\", 29);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_9_td_18_Template_p_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const rowIndex_r27 = i0.ɵɵnextContext().rowIndex;\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r32.deleteReplacementInfo(rowIndex_r27));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c2));\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c3));\n  }\n}\nconst _c4 = function () {\n  return {\n    \"width\": \"34%\"\n  };\n};\nconst _c5 = function () {\n  return {\n    \"text-align\": \"right\",\n    \"width\": \"18%\"\n  };\n};\nfunction ReplacementComponent_div_0_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"td\", 26);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n            \");\n    i0.ɵɵelementStart(10, \"td\", 26);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n            \");\n    i0.ɵɵelementStart(14, \"td\", 26);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵtemplate(18, ReplacementComponent_div_0_ng_template_9_td_18_Template, 6, 6, \"td\", 27);\n    i0.ɵɵtext(19, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n        \");\n  }\n  if (rf & 2) {\n    const replacementInfo_r26 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(23, _c4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", replacementInfo_r26.get(\"nric\").value, \" \", replacementInfo_r26.get(\"name\").value, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(24, _c5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 14, replacementInfo_r26.get(\"ratePerSession\").value, \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(25, _c5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 17, replacementInfo_r26.get(\"totalSessions\").value, \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(16, 20, replacementInfo_r26.get(\"ratePerSession\").value * replacementInfo_r26.get(\"totalSessions\").value, \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.isActive() && !ctx_r3.readOnly && ctx_r3.hasValidAuthorityAndStation());\n  }\n}\nconst _c6 = function () {\n  return {\n    \"border-left\": \"none\",\n    \"background-color\": \"white\"\n  };\n};\nfunction ReplacementComponent_div_0_ng_template_11_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"td\", 26);\n  }\n  if (rf & 2) {\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c6));\n  }\n}\nconst _c7 = function () {\n  return {\n    \"text-align\": \"right\"\n  };\n};\nconst _c8 = function (a1) {\n  return {\n    \"text-align\": \"right\",\n    \"border-right\": a1,\n    \"background-color\": \"white\"\n  };\n};\nfunction ReplacementComponent_div_0_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"td\", 30);\n    i0.ɵɵtext(4, \"Total Payable\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"td\", 26);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n            \");\n    i0.ɵɵtemplate(10, ReplacementComponent_div_0_ng_template_11_td_10_Template, 1, 3, \"td\", 27);\n    i0.ɵɵtext(11, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n        \");\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(9, _c7));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction1(10, _c8, ctx_r4.isActive() && !ctx_r4.readOnly && ctx_r4.hasValidAuthorityAndStation() ? \"none\" : \"\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 6, ctx_r4.calculateTotalPayable(), \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isActive() && !ctx_r4.readOnly && ctx_r4.hasValidAuthorityAndStation());\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n          \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6, \"\\n              \");\n    i0.ɵɵelement(7, \"i\", 31);\n    i0.ɵɵtext(8, \"\\n              No records found.\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n      \");\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"colspan\", ctx_r5.isActive() && !ctx_r5.readOnly && ctx_r5.hasValidAuthorityAndStation() ? 6 : 5);\n  }\n}\nconst _c9 = function () {\n  return {\n    field: \"NRIC\"\n  };\n};\nfunction ReplacementComponent_div_0_div_19_small_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 43);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c9));\n  }\n}\nfunction ReplacementComponent_div_0_div_19_small_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c9));\n  }\n}\nconst _c10 = function () {\n  return {\n    field: \"Name\"\n  };\n};\nfunction ReplacementComponent_div_0_div_19_small_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c10));\n  }\n}\nconst _c11 = function () {\n  return {\n    field: \"No. Of Session\"\n  };\n};\nfunction ReplacementComponent_div_0_div_19_small_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c11));\n  }\n}\nconst _c12 = function () {\n  return {\n    field: \"Rate Per Session\"\n  };\n};\nfunction ReplacementComponent_div_0_div_19_small_100_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 44);\n    i0.ɵɵtext(1, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"translateValues\", i0.ɵɵpureFunction0(1, _c12));\n  }\n}\nconst _c13 = function () {\n  return {\n    \"width\": \"30%\"\n  };\n};\nconst _c14 = function () {\n  return {\n    \"width\": \"70%\"\n  };\n};\nfunction ReplacementComponent_div_0_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵelementStart(2, \"form\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"div\", 32);\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementStart(6, \"div\", 33);\n    i0.ɵɵtext(7, \"NRIC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n          \");\n    i0.ɵɵelementStart(9, \"div\", 33);\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelement(11, \"input\", 34);\n    i0.ɵɵtext(12, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n        \");\n    i0.ɵɵelementStart(15, \"div\", 35);\n    i0.ɵɵtext(16, \"\\n          \");\n    i0.ɵɵelement(17, \"div\", 33);\n    i0.ɵɵtext(18, \"\\n          \");\n    i0.ɵɵelementStart(19, \"div\", 33);\n    i0.ɵɵtext(20, \"\\n            \");\n    i0.ɵɵelementStart(21, \"div\");\n    i0.ɵɵtext(22, \"\\n              \");\n    i0.ɵɵtemplate(23, ReplacementComponent_div_0_div_19_small_23_Template, 2, 2, \"small\", 36);\n    i0.ɵɵtext(24, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n            \");\n    i0.ɵɵelementStart(26, \"div\");\n    i0.ɵɵtext(27, \"\\n              \");\n    i0.ɵɵtemplate(28, ReplacementComponent_div_0_div_19_small_28_Template, 2, 2, \"small\", 37);\n    i0.ɵɵtext(29, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n        \");\n    i0.ɵɵelementStart(33, \"div\", 38);\n    i0.ɵɵtext(34, \"\\n          \");\n    i0.ɵɵelementStart(35, \"div\", 33);\n    i0.ɵɵtext(36, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n          \");\n    i0.ɵɵelementStart(38, \"div\", 33);\n    i0.ɵɵtext(39, \"\\n            \");\n    i0.ɵɵelement(40, \"input\", 39);\n    i0.ɵɵtext(41, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n        \");\n    i0.ɵɵelementStart(44, \"div\", 35);\n    i0.ɵɵtext(45, \"\\n          \");\n    i0.ɵɵelement(46, \"div\", 33);\n    i0.ɵɵtext(47, \"\\n          \");\n    i0.ɵɵelementStart(48, \"div\", 33);\n    i0.ɵɵtext(49, \"\\n            \");\n    i0.ɵɵelementStart(50, \"div\");\n    i0.ɵɵtext(51, \"\\n              \");\n    i0.ɵɵtemplate(52, ReplacementComponent_div_0_div_19_small_52_Template, 2, 2, \"small\", 37);\n    i0.ɵɵtext(53, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(56, \"\\n        \");\n    i0.ɵɵelementStart(57, \"div\", 38);\n    i0.ɵɵtext(58, \"\\n          \");\n    i0.ɵɵelementStart(59, \"div\", 33);\n    i0.ɵɵtext(60, \"No. Of Session:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n          \");\n    i0.ɵɵelementStart(62, \"div\", 33);\n    i0.ɵɵtext(63, \"\\n            \");\n    i0.ɵɵelement(64, \"p-inputNumber\", 40);\n    i0.ɵɵtext(65, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(66, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(67, \"\\n        \");\n    i0.ɵɵelementStart(68, \"div\", 35);\n    i0.ɵɵtext(69, \"\\n          \");\n    i0.ɵɵelement(70, \"div\", 33);\n    i0.ɵɵtext(71, \"\\n          \");\n    i0.ɵɵelementStart(72, \"div\", 33);\n    i0.ɵɵtext(73, \"\\n            \");\n    i0.ɵɵelementStart(74, \"div\");\n    i0.ɵɵtext(75, \"\\n              \");\n    i0.ɵɵtemplate(76, ReplacementComponent_div_0_div_19_small_76_Template, 2, 2, \"small\", 37);\n    i0.ɵɵtext(77, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(78, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(79, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(80, \"\\n        \");\n    i0.ɵɵelementStart(81, \"div\", 38);\n    i0.ɵɵtext(82, \"\\n          \");\n    i0.ɵɵelementStart(83, \"div\", 33);\n    i0.ɵɵtext(84, \"Rate Per Session:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(85, \"\\n          \");\n    i0.ɵɵelementStart(86, \"div\", 33);\n    i0.ɵɵtext(87, \"\\n            \");\n    i0.ɵɵelement(88, \"p-inputNumber\", 41);\n    i0.ɵɵtext(89, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(90, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(91, \"\\n        \");\n    i0.ɵɵelementStart(92, \"div\", 35);\n    i0.ɵɵtext(93, \"\\n          \");\n    i0.ɵɵelement(94, \"div\", 33);\n    i0.ɵɵtext(95, \"\\n          \");\n    i0.ɵɵelementStart(96, \"div\", 33);\n    i0.ɵɵtext(97, \"\\n            \");\n    i0.ɵɵelementStart(98, \"div\");\n    i0.ɵɵtext(99, \"\\n              \");\n    i0.ɵɵtemplate(100, ReplacementComponent_div_0_div_19_small_100_Template, 2, 2, \"small\", 37);\n    i0.ɵɵtext(101, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(102, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(103, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(104, \"\\n        \");\n    i0.ɵɵelementStart(105, \"div\", 42);\n    i0.ɵɵtext(106, \"\\n          \");\n    i0.ɵɵelementStart(107, \"div\", 33);\n    i0.ɵɵtext(108, \"Amount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(109, \"\\n          \");\n    i0.ɵɵelementStart(110, \"div\", 33);\n    i0.ɵɵtext(111);\n    i0.ɵɵpipe(112, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(113, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(114, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(115, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    let tmp_4_0;\n    let tmp_5_0;\n    let tmp_9_0;\n    let tmp_14_0;\n    let tmp_20_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r6.replacementDialogFormGroup);\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(41, _c13));\n    i0.ɵɵadvance(11);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(42, _c13));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(43, _c14));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r6.replacementDialogFormGroup.get(\"nric\")) == null ? null : tmp_4_0.dirty) && ((tmp_4_0 = ctx_r6.replacementDialogFormGroup.get(\"nric\")) == null ? null : tmp_4_0.hasError(\"nric\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx_r6.replacementDialogFormGroup.get(\"nric\")) == null ? null : tmp_5_0.dirty) && ((tmp_5_0 = ctx_r6.replacementDialogFormGroup.get(\"nric\")) == null ? null : tmp_5_0.hasError(\"required\")));\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(44, _c13));\n    i0.ɵɵadvance(11);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(45, _c13));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(46, _c14));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx_r6.replacementDialogFormGroup.get(\"name\")) == null ? null : tmp_9_0.dirty) && ((tmp_9_0 = ctx_r6.replacementDialogFormGroup.get(\"name\")) == null ? null : tmp_9_0.hasError(\"required\")));\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(47, _c13));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(48, _c7));\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(49, _c13));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(50, _c14));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_14_0 = ctx_r6.replacementDialogFormGroup.get(\"totalSessions\")) == null ? null : tmp_14_0.dirty) && ((tmp_14_0 = ctx_r6.replacementDialogFormGroup.get(\"totalSessions\")) == null ? null : tmp_14_0.hasError(\"required\")));\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(51, _c13));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"inputStyle\", i0.ɵɵpureFunction0(52, _c7))(\"minFractionDigits\", 2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(53, _c13));\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(54, _c14));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_20_0 = ctx_r6.replacementDialogFormGroup.get(\"ratePerSession\")) == null ? null : tmp_20_0.dirty) && ((tmp_20_0 = ctx_r6.replacementDialogFormGroup.get(\"ratePerSession\")) == null ? null : tmp_20_0.hasError(\"required\")));\n    i0.ɵɵadvance(7);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(55, _c13));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(56, _c14));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(112, 38, ctx_r6.replacementDialogFormGroup.get(\"ratePerSession\").value * ctx_r6.replacementDialogFormGroup.get(\"totalSessions\").value, \"1.2-2\"));\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n      \");\n    i0.ɵɵelementStart(1, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_21_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r40.displayReplacementDialog = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_21_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r42.replaceOrInsertReplacementInfo());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r7.replacementDialogFormGroup.untouched || ctx_r7.replacementDialogFormGroup.invalid);\n  }\n}\nfunction ReplacementComponent_div_0_ng_template_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n      \");\n    i0.ɵɵelementStart(1, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_32_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r43 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r43.displayAttachDocumentDialog = false);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function ReplacementComponent_div_0_ng_template_32_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r45 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r45.submitDocument());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n    \");\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", (tmp_0_0 = ctx_r9.manualDocFileForm.get(\"supportingDocuments\")) == null ? null : tmp_0_0.hasError(\"invalidFileExtension\"));\n  }\n}\nconst _c15 = function () {\n  return {\n    \"width\": \"70vw\"\n  };\n};\nconst _c16 = function () {\n  return {\n    width: \"30vw\"\n  };\n};\nconst _c17 = function () {\n  return {\n    width: \"40vw\",\n    height: \"30vw\"\n  };\n};\nfunction ReplacementComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"form\", 1);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementStart(4, \"p-table\", 2, 3);\n    i0.ɵɵtext(6, \"\\n\\n      \");\n    i0.ɵɵtemplate(7, ReplacementComponent_div_0_ng_template_7_Template, 46, 9, \"ng-template\", 4);\n    i0.ɵɵtext(8, \"\\n\\n        \");\n    i0.ɵɵtemplate(9, ReplacementComponent_div_0_ng_template_9_Template, 21, 27, \"ng-template\", 5);\n    i0.ɵɵtext(10, \"\\n        \");\n    i0.ɵɵtemplate(11, ReplacementComponent_div_0_ng_template_11_Template, 13, 12, \"ng-template\", 6);\n    i0.ɵɵtext(12, \"\\n      \");\n    i0.ɵɵtemplate(13, ReplacementComponent_div_0_ng_template_13_Template, 12, 1, \"ng-template\", 7);\n    i0.ɵɵtext(14, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n\\n  \");\n    i0.ɵɵelementStart(17, \"p-dialog\", 8);\n    i0.ɵɵlistener(\"visibleChange\", function ReplacementComponent_div_0_Template_p_dialog_visibleChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r46.displayReplacementDialog = $event);\n    })(\"onHide\", function ReplacementComponent_div_0_Template_p_dialog_onHide_17_listener() {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r48 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r48.onHideReplacementDialog());\n    });\n    i0.ɵɵtext(18, \"\\n    \");\n    i0.ɵɵtemplate(19, ReplacementComponent_div_0_div_19_Template, 116, 57, \"div\", 0);\n    i0.ɵɵtext(20, \"\\n    \");\n    i0.ɵɵtemplate(21, ReplacementComponent_div_0_ng_template_21_Template, 5, 1, \"ng-template\", 6);\n    i0.ɵɵtext(22, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n\\n\\n  \");\n    i0.ɵɵelementStart(24, \"p-dialog\", 9);\n    i0.ɵɵlistener(\"visibleChange\", function ReplacementComponent_div_0_Template_p_dialog_visibleChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r49 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r49.displayAttachDocumentDialog = $event);\n    });\n    i0.ɵɵtext(25, \"\\n    \");\n    i0.ɵɵelementStart(26, \"form\", 1);\n    i0.ɵɵtext(27, \"\\n      \");\n    i0.ɵɵelement(28, \"n2-file-upload\", 10, 11);\n    i0.ɵɵtext(30, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n    \");\n    i0.ɵɵtemplate(32, ReplacementComponent_div_0_ng_template_32_Template, 5, 1, \"ng-template\", 6);\n    i0.ɵɵtext(33, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.replacementFormGroup);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(20, _c15));\n    i0.ɵɵproperty(\"value\", ctx_r0.workingDataReplacementInfoList.controls);\n    i0.ɵɵadvance(13);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(21, _c16));\n    i0.ɵɵpropertyInterpolate(\"header\", (ctx_r0.editReplacementInfoIndex !== undefined ? \"Edit\" : \"Insert\") + \" Replacement\");\n    i0.ɵɵproperty(\"visible\", ctx_r0.displayReplacementDialog)(\"modal\", true)(\"draggable\", false)(\"resizable\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.replacementDialogFormGroup !== undefined);\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(22, _c17));\n    i0.ɵɵproperty(\"visible\", ctx_r0.displayAttachDocumentDialog)(\"modal\", true)(\"draggable\", false)(\"resizable\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.manualDocFileForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"externalFileLimit\", 1);\n  }\n}\nclass ReplacementComponent {\n  constructor(seClaimService, formBuilder, cloneService, fileUploadService, exportUtilsService, accountService, localeId) {\n    this.seClaimService = seClaimService;\n    this.formBuilder = formBuilder;\n    this.cloneService = cloneService;\n    this.fileUploadService = fileUploadService;\n    this.exportUtilsService = exportUtilsService;\n    this.accountService = accountService;\n    this.localeId = localeId;\n    this.selectedWDOption = {};\n    this.displayReplacementDialog = false;\n    this.displayAttachDocumentDialog = false;\n    this.ALLOWABLE_EXTENSION = \".jpg,.png,.gif,.pdf,.csv\";\n    this.manualDocFileForm = this.formBuilder.group({\n      manualDoc: [[], [fileupload2_directive_1.FileUploadValidator2.allowableExtension(this.ALLOWABLE_EXTENSION), forms_1.Validators.compose([fileupload2_directive_1.FileUploadValidator2.maxFileLimit(1), fileupload2_directive_1.FileUploadValidator2.maxSingleFileSize(7)])]]\n    });\n    console.log(\"test\");\n  }\n  static mapReplacementWDToFormGroup(replacementWD, formBuilder) {\n    const replacementFormGroup = formBuilder.group({\n      id: new forms_1.FormControl(replacementWD.id, null),\n      workingDataId: new forms_1.FormControl(replacementWD.workingDataId, null),\n      totalReplacementAmt: new forms_1.FormControl(replacementWD.totalReplacementAmt, null),\n      manualCompDocId: new forms_1.FormControl(replacementWD.manualCompDocId, null),\n      manualCompDocFileName: new forms_1.FormControl(replacementWD.manualCompDocFileName, null),\n      manualCompDocUpdatedByInitials: new forms_1.FormControl(replacementWD.manualCompDocUpdatedByInitials, null),\n      manualCompDocUpdatedDt: new forms_1.FormControl(replacementWD.manualCompDocUpdatedDt, null),\n      workingDataReplacementInfoList: new forms_1.FormArray([])\n    });\n    replacementWD.workingDataReplacementInfoList.forEach(replacementWDInfo => {\n      const replacementInfoFormGroup = formBuilder.group({\n        id: new forms_1.FormControl(replacementWDInfo.id, null),\n        nric: new forms_1.FormControl(replacementWDInfo.nric, [forms_1.Validators.required, (0, nric_directive_1.NRICValidator)()]),\n        name: new forms_1.FormControl(replacementWDInfo.name, [forms_1.Validators.required]),\n        ratePerSession: new forms_1.FormControl(replacementWDInfo.ratePerSession, [forms_1.Validators.required]),\n        totalSessions: new forms_1.FormControl(replacementWDInfo.totalSessions, [forms_1.Validators.required])\n      });\n      // replacementInfoFormGroup.disable();\n      replacementFormGroup.get('workingDataReplacementInfoList').push(replacementInfoFormGroup);\n    });\n    return replacementFormGroup;\n  }\n  static mapReplacementFormGroupToWD(fg, obj) {\n    const workingDataReplacementInfoList = [];\n    const replacementWD = {\n      id: fg.get('id').value,\n      workingDataId: fg.get('workingDataId').value,\n      totalReplacementAmt: fg.get('totalReplacementAmt').value,\n      manualCompDocId: fg.get('manualCompDocId').value,\n      workingDataReplacementInfoList,\n      archiveDt: obj.archiveDt\n    };\n    fg.get('workingDataReplacementInfoList').controls.forEach(control => {\n      const replacementWDInfo = {\n        id: null,\n        nric: control.get('nric').value,\n        name: control.get('name').value,\n        ratePerSession: control.get('ratePerSession').value,\n        totalSessions: control.get('totalSessions').value\n      };\n      workingDataReplacementInfoList.push(replacementWDInfo);\n    });\n    return replacementWD;\n  }\n  static createNewReplacementFormGroup(formBuilder) {\n    const replacementFormGroup = formBuilder.group({\n      id: new forms_1.FormControl(null, null),\n      workingDataId: new forms_1.FormControl(null, null),\n      totalReplacementAmt: new forms_1.FormControl(null, null),\n      manualCompDocId: new forms_1.FormControl(null, null),\n      manualCompDocFileName: new forms_1.FormControl(null, null),\n      manualCompDocUpdatedByInitials: new forms_1.FormControl(null, null),\n      manualCompDocUpdatedDt: new forms_1.FormControl(null, null),\n      workingDataReplacementInfoList: new forms_1.FormArray([])\n    });\n    return replacementFormGroup;\n  }\n  ngOnInit() {\n    this.initalizeEmptyReplacementInfoFormGroup();\n  }\n  ngOnChanges(changes) {\n    // if(changes.seHardCopyDetails?.currentValue){\n    //   this.currHardCopyDetails=changes.seHardCopyDetails.currentValue;\n    // }\n    if (changes.selectedWDOption?.currentValue) {\n      this.currSelectedOption = changes.selectedWDOption?.currentValue;\n      // if(changes.selectedWDOption?.isFirstChange()) {\n      //   this.loadCodes();\n      // }\n      this.retrieveReplacementWD();\n    }\n  }\n  retrieveReplacementWD() {\n    this.replacementFormGroup = undefined;\n    if (!this.currSelectedOption.changes && !this.currSelectedOption.newWD) {\n      let params = new http_1.HttpParams();\n      params = params.append(\"workingDataId\", this.currSelectedOption?.obj?.workingDataId);\n      this.seClaimService.retrieveReplacementWD(params).subscribe(res => {\n        if (res.data) {\n          this.replacementFormGroup = ReplacementComponent.mapReplacementWDToFormGroup(res.data, this.formBuilder);\n          this.valueChangeSubcriptions();\n        }\n      });\n    } else if (this.currSelectedOption.changes && !this.currSelectedOption.newWD) {\n      console.log(\"get from changes WD Map\");\n      this.replacementFormGroup = this.workingDataWithChanges.get(this.currSelectedOption?.obj?.workingDataId).formGroup;\n    } else if (this.currSelectedOption.newWD) {\n      console.log(\"get from new WD Map\");\n      this.replacementFormGroup = this.newUnsavedWorkingData.get(this.currSelectedOption?.key.toString()).formGroup;\n    }\n  }\n  valueChangeSubcriptions() {\n    this.replacementFormGroup.valueChanges.subscribe(() => {\n      this.currSelectedOption.changes = true;\n      this.saveSEClaimRequest.workingDataSectionInd = true;\n      if (!this.workingDataWithChanges.has(this.currSelectedOption?.obj?.workingDataId)) {\n        this.workingDataWithChanges.set(this.currSelectedOption?.obj?.workingDataId, {\n          obj: this.currSelectedOption.obj,\n          formGroup: this.replacementFormGroup\n        });\n      }\n    });\n  }\n  get workingDataReplacementInfoList() {\n    return this.replacementFormGroup.get('workingDataReplacementInfoList');\n  }\n  replaceOrInsertReplacementInfo() {\n    if (this.editReplacementInfoIndex === undefined) {\n      this.workingDataReplacementInfoList.push(this.replacementDialogFormGroup);\n    } else if (this.editReplacementInfoIndex !== undefined) {\n      this.workingDataReplacementInfoList.removeAt(this.editReplacementInfoIndex);\n      this.workingDataReplacementInfoList.insert(this.editReplacementInfoIndex, this.replacementDialogFormGroup);\n    }\n    this.displayReplacementDialog = false;\n  }\n  deleteReplacementInfo(index) {\n    this.workingDataReplacementInfoList.removeAt(index);\n  }\n  onHideReplacementDialog() {\n    this.replacementDialogFormGroup = undefined;\n    this.editReplacementInfoIndex = undefined;\n    this.initalizeEmptyReplacementInfoFormGroup();\n  }\n  openEditReplacementInfoDialog(control, index) {\n    this.editReplacementInfoIndex = index;\n    this.replacementDialogFormGroup = this.cloneService.deepCloneFormControlValuesAndValidators(control);\n    this.displayReplacementDialog = true;\n  }\n  initalizeEmptyReplacementInfoFormGroup() {\n    this.replacementDialogFormGroup = this.formBuilder.group({\n      id: new forms_1.FormControl(null, null),\n      nric: new forms_1.FormControl(null, [forms_1.Validators.required, (0, nric_directive_1.NRICValidator)()]),\n      name: new forms_1.FormControl(null, [forms_1.Validators.required]),\n      ratePerSession: new forms_1.FormControl(null, [forms_1.Validators.required]),\n      totalSessions: new forms_1.FormControl(null, [forms_1.Validators.required])\n    });\n  }\n  calculateTotalPayable() {\n    let sum = 0;\n    this.workingDataReplacementInfoList.controls.forEach(control => {\n      sum += control.get('ratePerSession').value * control.get('totalSessions').value;\n    });\n    return sum ? sum : 0;\n  }\n  submitDocument() {\n    this.replacementFormGroup.get('manualCompDocId').setValue(this.attachDocFileUpload.verifiedFiles[0].meta_data.id);\n    this.replacementFormGroup.get('manualCompDocFileName').setValue(this.attachDocFileUpload.verifiedFiles[0].meta_data.fileName);\n    this.replacementFormGroup.get('manualCompDocUpdatedDt').setValue(null);\n    this.replacementFormGroup.get('manualCompDocUpdatedByInitials').setValue(null);\n    this.displayAttachDocumentDialog = false;\n  }\n  openFileInNewTab(id) {\n    this.fileUploadService.downloadTxnId(id).subscribe(res => {\n      if (res) {\n        console.log('download res', res);\n        const data = res;\n        const contentDispositionHeader = data.headers.get('content-disposition');\n        const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\n        const blob = new Blob([data.body], {\n          type: data.headers.get('content-type')\n        });\n        const anchor = document.createElement(\"a\");\n        anchor.href = URL.createObjectURL(blob);\n        anchor.target = \"_blank\";\n        // anchor.rel=\"noopener noreferrer\";\n        anchor.click();\n        document.removeChild(anchor);\n      }\n    });\n  }\n  isActive() {\n    return this.currSelectedOption?.obj?.archiveDt === 0;\n  }\n  exportToCSV(dataTable) {\n    const columns = [{\n      field: 'name',\n      header: 'Name of Replacement',\n      index: 0\n    }, {\n      field: 'nric',\n      header: ' ',\n      index: 1\n    }, {\n      field: 'ratePerSession',\n      header: 'Rate Per Session',\n      index: 2\n    }, {\n      field: 'totalSessions',\n      header: 'No. Of Session',\n      index: 3\n    }, {\n      field: 'amount',\n      header: 'Amount',\n      index: 4\n    }];\n    const dtoList = [];\n    let sum = 0;\n    this.workingDataReplacementInfoList.controls.forEach(control => {\n      const dto = {\n        nric: control.get('nric').value,\n        name: control.get('name').value,\n        ratePerSession: Number(control.get('ratePerSession').value).toFixed(2),\n        totalSessions: control.get('totalSessions').value,\n        amount: Number(control.get('ratePerSession').value * control.get('totalSessions').value).toFixed(2)\n      };\n      sum = sum + control.get('ratePerSession').value * control.get('totalSessions').value;\n      dtoList.push(dto);\n    });\n    const lastRow = {\n      nric: \"\",\n      name: \"\",\n      ratePerSession: \"\",\n      totalSessions: \"Total Payable\",\n      amount: sum.toFixed(2)\n    };\n    dtoList.push(lastRow);\n    this.exportUtilsService.exportCSV(dataTable, dtoList, this.workingDataReplacementInfoList.length, columns, \"replacement_data_\".concat((0, common_1.formatDate)(new Date(), \"dd-MM-YYYY\", this.localeId)));\n  }\n  //allows input on need basis\n  hasValidAuthorityAndStation() {\n    if (this.accountService.hasAnyAuthority(nspay2_constants_1.NSPAY2_ROLES.CLAIMS_VERIFIER) && this.station === nspay2_constants_1.NSPAY2_STATION.STATION_VERIFICATION) {\n      return true;\n    }\n    if (this.accountService.hasAnyAuthority(nspay2_constants_1.NSPAY2_ROLES.CLAIMS_APPROVER) && this.station === nspay2_constants_1.NSPAY2_STATION.STATION_CERTIFICATION) {\n      return false;\n    }\n    if (this.accountService.hasAnyAuthority(nspay2_constants_1.NSPAY2_ROLES.CLAIMS_APPROVER) && this.station === nspay2_constants_1.NSPAY2_STATION.STATION_APPROVAL) {\n      return false;\n    }\n    return false;\n  }\n}\nexports.ReplacementComponent = ReplacementComponent;\nReplacementComponent.ɵfac = function ReplacementComponent_Factory(t) {\n  return new (t || ReplacementComponent)(i0.ɵɵdirectiveInject(i1.SEClaimService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.CloneService), i0.ɵɵdirectiveInject(i4.FileUploadService), i0.ɵɵdirectiveInject(i5.ExportUtilsService), i0.ɵɵdirectiveInject(i6.AccountService), i0.ɵɵdirectiveInject(core_1.LOCALE_ID));\n};\nReplacementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReplacementComponent,\n  selectors: [[\"n2-replacement\"]],\n  viewQuery: function ReplacementComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.attachDocFileUpload = _t.first);\n    }\n  },\n  inputs: {\n    selectedWDOption: \"selectedWDOption\",\n    workingDataWithChanges: \"workingDataWithChanges\",\n    newUnsavedWorkingData: \"newUnsavedWorkingData\",\n    saveSEClaimRequest: \"saveSEClaimRequest\",\n    readOnly: \"readOnly\",\n    station: \"station\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [3, \"formGroup\"], [\"styleClass\", \"p-datatable-gridlines p-datatable-striped\", 3, \"value\"], [\"replaceTable\", \"\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"footer\"], [\"pTemplate\", \"emptymessage\"], [3, \"header\", \"visible\", \"modal\", \"draggable\", \"resizable\", \"visibleChange\", \"onHide\"], [\"header\", \"Upload Replacement Manual Computation\", 3, \"visible\", \"modal\", \"draggable\", \"resizable\", \"visibleChange\"], [\"formControlName\", \"manualDoc\", 3, \"externalFileLimit\"], [\"attachDocFileUpload\", \"\"], [\"scope\", \"col\"], [1, \"grid\"], [1, \"col-10\", \"flex\", \"align-items-center\"], [\"icon\", \"pi pi-file-o\", 3, \"click\"], [3, \"style\", \"click\", 4, \"ngIf\"], [1, \"col-2\", \"flex\", \"justify-content-end\"], [3, \"click\", 4, \"ngIf\"], [\"scope\", \"col\", \"colspan\", \"2\"], [\"scope\", \"col\", \"colspan\", \"1\"], [\"scope\", \"col\", \"colspan\", \"1\", 4, \"ngIf\"], [\"href\", \"javascript:\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"javascript:\", 3, \"click\"], [3, \"click\"], [\"colspan\", \"2\"], [\"colspan\", \"1\"], [\"colspan\", \"1\", 3, \"style\", 4, \"ngIf\"], [\"icon\", \"pi pi-pencil\", 3, \"click\"], [\"icon\", \"pi pi-trash\", 3, \"click\"], [\"colspan\", \"4\"], [1, \"pi\", \"pi-info-circle\"], [1, \"field\", \"grid\", \"mb-0\"], [1, \"col-1\", \"flex\", \"align-items-center\"], [\"formControlName\", \"nric\", \"type\", \"text\", \"pInputText\", \"\", \"oninput\", \"this.value = this.value.toUpperCase()\"], [1, \"field\", \"grid\", \"my-0\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 3, \"translateValues\", 4, \"ngIf\"], [\"class\", \"p-error\", \"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 3, \"translateValues\", 4, \"ngIf\"], [1, \"field\", \"grid\", \"mt-2\", \"mb-0\"], [\"formControlName\", \"name\", \"type\", \"text\", \"pInputText\", \"\"], [\"formControlName\", \"totalSessions\", 3, \"inputStyle\"], [\"formControlName\", \"ratePerSession\", \"mode\", \"decimal\", 3, \"inputStyle\", \"minFractionDigits\"], [1, \"field\", \"grid\", \"mt-3\", \"mb-0\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V002\", 1, \"p-error\", 3, \"translateValues\"], [\"icTranslate\", \"nspay2App.claim.validation.CLM-V001\", 1, \"p-error\", 3, \"translateValues\"], [\"pButton\", \"\", \"label\", \"Cancel\", \"type\", \"button\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Save\", \"type\", \"button\", 3, \"disabled\", \"click\"], [\"pButton\", \"\", \"label\", \"Submit\", \"type\", \"button\", 3, \"disabled\", \"click\"]],\n  template: function ReplacementComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ReplacementComponent_div_0_Template, 35, 23, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.replacementFormGroup !== undefined);\n    }\n  },\n  dependencies: [i7.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i8.PrimeTemplate, i9.ButtonDirective, i9.Button, i10.Table, i11.InputText, i12.Dialog, i13.InputNumber, i14.TranslateDirective, i15.FileUploadComponent, i7.DecimalPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZXBsYWNlbWVudC5jb21wb25lbnQuc2NzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvY2xhaW0vc2UtY2xhaW0vc2UtY2xhaW0tdmVyaWZpY2F0aW9uL3dvcmtpbmctZGF0YS1zZWN0aW9uL3JlcGxhY2VtZW50L3JlcGxhY2VtZW50LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx3S0FBd0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r18","ReplacementComponent","constructor","seClaimService","formBuilder","cloneService","fileUploadService","exportUtilsService","accountService","localeId","group","manualDoc","fileupload2_directive_1","allowableExtension","ALLOWABLE_EXTENSION","forms_1","compose","maxFileLimit","maxSingleFileSize","console","log","mapReplacementWDToFormGroup","replacementWD","replacementFormGroup","id","workingDataId","totalReplacementAmt","manualCompDocId","manualCompDocFileName","manualCompDocUpdatedByInitials","manualCompDocUpdatedDt","workingDataReplacementInfoList","forEach","replacementWDInfo","replacementInfoFormGroup","nric","required","name","ratePerSession","totalSessions","get","push","mapReplacementFormGroupToWD","fg","obj","value","archiveDt","controls","control","createNewReplacementFormGroup","ngOnInit","initalizeEmptyReplacementInfoFormGroup","ngOnChanges","changes","selectedWDOption","currentValue","currSelectedOption","retrieveReplacementWD","undefined","newWD","params","http_1","append","subscribe","res","data","valueChangeSubcriptions","workingDataWithChanges","formGroup","newUnsavedWorkingData","key","toString","valueChanges","saveSEClaimRequest","workingDataSectionInd","has","set","replaceOrInsertReplacementInfo","editReplacementInfoIndex","replacementDialogFormGroup","removeAt","insert","displayReplacementDialog","deleteReplacementInfo","index","onHideReplacementDialog","openEditReplacementInfoDialog","deepCloneFormControlValuesAndValidators","calculateTotalPayable","sum","submitDocument","setValue","attachDocFileUpload","verifiedFiles","meta_data","fileName","displayAttachDocumentDialog","openFileInNewTab","downloadTxnId","contentDispositionHeader","headers","split","trim","replace","blob","Blob","body","type","anchor","document","createElement","href","URL","createObjectURL","target","click","removeChild","isActive","exportToCSV","dataTable","columns","field","header","dtoList","dto","Number","toFixed","amount","lastRow","exportCSV","length","concat","Date","hasValidAuthorityAndStation","hasAnyAuthority","nspay2_constants_1","CLAIMS_VERIFIER","station","STATION_VERIFICATION","CLAIMS_APPROVER","STATION_CERTIFICATION","STATION_APPROVAL","exports","core_1","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\se-claim-verification\\working-data-section\\replacement\\replacement.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\se-claim\\se-claim-verification\\working-data-section\\replacement\\replacement.component.html"],"sourcesContent":["import {Component, Inject, Input, LOCALE_ID, OnChanges, OnInit, SimpleChanges, ViewChild} from '@angular/core';\r\nimport {SaveSEClaimRequest} from \"app/claim/se-claim/model/save-se-claim-request.model\";\r\nimport {AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators} from \"@angular/forms\";\r\nimport {ReplacementWDInfo} from \"app/claim/se-claim/model/replacement-info.model\";\r\nimport {ReplacementWD} from \"app/claim/se-claim/model/replacement.model\";\r\nimport {HttpParams} from \"@angular/common/http\";\r\nimport {Ns2Response} from \"app/shared/model/ns2-response.model\";\r\nimport {SEClaimService} from \"app/claim/se-claim/service/se-claim.service\";\r\nimport {NRICValidator} from \"app/shared/validator/nric.directive\";\r\nimport {CloneService} from \"app/core/util/clone.service\";\r\nimport {FileUploadComponent} from \"app/shared/component/file-upload/file-upload.component\";\r\nimport {FileUploadValidator2} from \"app/shared/validator/fileupload2.directive\";\r\nimport {FileUploadService} from \"app/shared/service/file-upload.service\";\r\nimport {ExportUtilsService} from \"app/core/util/export-utils.service\";\r\nimport {Table} from \"primeng/table\";\r\nimport {formatDate} from \"@angular/common\";\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { NSPAY2_ROLES, NSPAY2_STATION } from 'app/nspay2.constants';\r\n\r\n@Component({\r\n  selector: 'n2-replacement',\r\n  templateUrl: './replacement.component.html',\r\n  styleUrls: ['./replacement.component.scss']\r\n})\r\nexport class ReplacementComponent implements OnInit, OnChanges {\r\n\r\n  @Input() selectedWDOption: any = {};\r\n  @Input() workingDataWithChanges: Map<string, any>;\r\n  @Input() newUnsavedWorkingData: Map<string, any>;\r\n  @Input() saveSEClaimRequest: SaveSEClaimRequest;\r\n  //meant for routing from enquiry\r\n  @Input() readOnly: boolean;\r\n  @Input() station: string;\r\n\r\n  currSelectedOption: any;\r\n\r\n  replacementFormGroup: FormGroup;\r\n  replacementDialogFormGroup: FormGroup;\r\n  editReplacementInfoIndex: number;\r\n  displayReplacementDialog = false;\r\n  displayAttachDocumentDialog = false;\r\n\r\n  readonly ALLOWABLE_EXTENSION: string = \".jpg,.png,.gif,.pdf,.csv\";\r\n\r\n  manualDocFileForm: FormGroup = this.formBuilder.group({\r\n    manualDoc: [[], [FileUploadValidator2.allowableExtension(this.ALLOWABLE_EXTENSION),Validators.compose([FileUploadValidator2.maxFileLimit(1),\r\n      FileUploadValidator2.maxSingleFileSize(7),\r\n    ])]],\r\n  });\r\n\r\n  @ViewChild('attachDocFileUpload', {static: false})\r\n  private attachDocFileUpload: FileUploadComponent;\r\n\r\n  constructor(private seClaimService: SEClaimService,\r\n              private formBuilder: FormBuilder,\r\n              private cloneService: CloneService,\r\n              private fileUploadService: FileUploadService,\r\n              private exportUtilsService: ExportUtilsService,\r\n              public accountService: AccountService,\r\n              @Inject(LOCALE_ID) protected localeId: string) {\r\n    console.log(\"test\");\r\n  }\r\n\r\n  static mapReplacementWDToFormGroup(replacementWD: ReplacementWD, formBuilder: FormBuilder): FormGroup{\r\n    const replacementFormGroup: FormGroup = formBuilder.group({\r\n      id: new FormControl(replacementWD.id,null),\r\n      workingDataId: new FormControl(replacementWD.workingDataId,null),\r\n      totalReplacementAmt: new FormControl(replacementWD.totalReplacementAmt,null),\r\n      manualCompDocId: new FormControl(replacementWD.manualCompDocId,null),\r\n      manualCompDocFileName: new FormControl(replacementWD.manualCompDocFileName,null),\r\n      manualCompDocUpdatedByInitials: new FormControl(replacementWD.manualCompDocUpdatedByInitials,null),\r\n      manualCompDocUpdatedDt: new FormControl(replacementWD.manualCompDocUpdatedDt,null),\r\n      workingDataReplacementInfoList: new FormArray([])\r\n    });\r\n\r\n    replacementWD.workingDataReplacementInfoList.forEach((replacementWDInfo: ReplacementWDInfo) => {\r\n      const replacementInfoFormGroup : FormGroup = formBuilder.group({\r\n        id: new FormControl(replacementWDInfo.id,null),\r\n        nric: new FormControl(replacementWDInfo.nric,[Validators.required, NRICValidator()]),\r\n        name: new FormControl(replacementWDInfo.name,[Validators.required]),\r\n        ratePerSession: new FormControl(replacementWDInfo.ratePerSession,[Validators.required]),\r\n        totalSessions: new FormControl(replacementWDInfo.totalSessions,[Validators.required])\r\n      });\r\n      // replacementInfoFormGroup.disable();\r\n      (replacementFormGroup.get('workingDataReplacementInfoList') as FormArray).push(replacementInfoFormGroup);\r\n    });\r\n\r\n    return replacementFormGroup;\r\n  }\r\n\r\n  static mapReplacementFormGroupToWD(fg: FormGroup, obj: any): ReplacementWD {\r\n\r\n    const workingDataReplacementInfoList: ReplacementWDInfo[] = [];\r\n    const replacementWD: ReplacementWD = {\r\n      id: fg.get('id').value,\r\n      workingDataId: fg.get('workingDataId').value,\r\n      totalReplacementAmt: fg.get('totalReplacementAmt').value,\r\n      manualCompDocId: fg.get('manualCompDocId').value,\r\n      workingDataReplacementInfoList,\r\n      archiveDt: obj.archiveDt\r\n    };\r\n\r\n    (fg.get('workingDataReplacementInfoList') as FormArray).controls.forEach((control: AbstractControl) => {\r\n      const replacementWDInfo: ReplacementWDInfo = {\r\n        id: null,\r\n        nric: control.get('nric').value,\r\n        name: control.get('name').value,\r\n        ratePerSession: control.get('ratePerSession').value,\r\n        totalSessions: control.get('totalSessions').value\r\n      }\r\n      workingDataReplacementInfoList.push(replacementWDInfo);\r\n    });\r\n    return replacementWD\r\n  }\r\n\r\n  static createNewReplacementFormGroup(formBuilder: FormBuilder): FormGroup{\r\n    const replacementFormGroup: FormGroup = formBuilder.group({\r\n      id: new FormControl(null,null),\r\n      workingDataId: new FormControl(null,null),\r\n      totalReplacementAmt: new FormControl(null,null),\r\n      manualCompDocId: new FormControl(null,null),\r\n      manualCompDocFileName: new FormControl(null,null),\r\n      manualCompDocUpdatedByInitials: new FormControl(null,null),\r\n      manualCompDocUpdatedDt: new FormControl(null,null),\r\n      workingDataReplacementInfoList: new FormArray([])\r\n    });\r\n    return replacementFormGroup;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initalizeEmptyReplacementInfoFormGroup();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void{\r\n    // if(changes.seHardCopyDetails?.currentValue){\r\n    //   this.currHardCopyDetails=changes.seHardCopyDetails.currentValue;\r\n    // }\r\n    if(changes.selectedWDOption?.currentValue) {\r\n      this.currSelectedOption = changes.selectedWDOption?.currentValue;\r\n      // if(changes.selectedWDOption?.isFirstChange()) {\r\n      //   this.loadCodes();\r\n      // }\r\n      this.retrieveReplacementWD();\r\n    }\r\n  }\r\n\r\n  retrieveReplacementWD(): void {\r\n    this.replacementFormGroup = undefined;\r\n    if(!this.currSelectedOption.changes && !this.currSelectedOption.newWD) {\r\n      let params = new HttpParams();\r\n      params = params.append(\"workingDataId\", this.currSelectedOption?.obj?.workingDataId);\r\n      this.seClaimService.retrieveReplacementWD(params)\r\n        .subscribe((res: Ns2Response<ReplacementWD>) => {\r\n          if (res.data) {\r\n            this.replacementFormGroup = ReplacementComponent.mapReplacementWDToFormGroup(res.data, this.formBuilder);\r\n            this.valueChangeSubcriptions();\r\n          }\r\n        });\r\n    } else if(this.currSelectedOption.changes && !this.currSelectedOption.newWD) {\r\n      console.log(\"get from changes WD Map\")\r\n      this.replacementFormGroup = this.workingDataWithChanges.get(this.currSelectedOption?.obj?.workingDataId).formGroup as FormGroup;\r\n    } else if(this.currSelectedOption.newWD) {\r\n      console.log(\"get from new WD Map\");\r\n      this.replacementFormGroup = this.newUnsavedWorkingData.get(this.currSelectedOption?.key.toString()).formGroup as FormGroup;\r\n    }\r\n  }\r\n\r\n  valueChangeSubcriptions() {\r\n    this.replacementFormGroup.valueChanges.subscribe(() => {\r\n      this.currSelectedOption.changes = true;\r\n      this.saveSEClaimRequest.workingDataSectionInd = true;\r\n      if (!this.workingDataWithChanges.has(this.currSelectedOption?.obj?.workingDataId)) {\r\n        this.workingDataWithChanges.set(this.currSelectedOption?.obj?.workingDataId,\r\n          {\r\n            obj: this.currSelectedOption.obj,\r\n            formGroup: this.replacementFormGroup\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  get workingDataReplacementInfoList(): FormArray {\r\n    return this.replacementFormGroup.get('workingDataReplacementInfoList') as FormArray\r\n  }\r\n\r\n  replaceOrInsertReplacementInfo(): void{\r\n    if(this.editReplacementInfoIndex === undefined) {\r\n      this.workingDataReplacementInfoList.push(this.replacementDialogFormGroup);\r\n    } else if (this.editReplacementInfoIndex !== undefined){\r\n      this.workingDataReplacementInfoList.removeAt(this.editReplacementInfoIndex);\r\n      this.workingDataReplacementInfoList.insert(this.editReplacementInfoIndex,this.replacementDialogFormGroup);\r\n    }\r\n    this.displayReplacementDialog = false;\r\n  }\r\n\r\n  deleteReplacementInfo(index: number): void{\r\n    this.workingDataReplacementInfoList.removeAt(index);\r\n  }\r\n\r\n  onHideReplacementDialog(): void{\r\n    this.replacementDialogFormGroup = undefined;\r\n    this.editReplacementInfoIndex = undefined;\r\n    this.initalizeEmptyReplacementInfoFormGroup();\r\n  }\r\n\r\n  openEditReplacementInfoDialog(control: AbstractControl, index: number): void {\r\n    this.editReplacementInfoIndex = index;\r\n    this.replacementDialogFormGroup = this.cloneService.deepCloneFormControlValuesAndValidators(control) as FormGroup;\r\n    this.displayReplacementDialog = true;\r\n  }\r\n\r\n  initalizeEmptyReplacementInfoFormGroup(): void{\r\n    this.replacementDialogFormGroup = this.formBuilder.group({\r\n      id: new FormControl(null,null),\r\n      nric: new FormControl(null,[Validators.required, NRICValidator()]),\r\n      name: new FormControl(null,[Validators.required]),\r\n      ratePerSession: new FormControl(null,[Validators.required]),\r\n      totalSessions: new FormControl(null,[Validators.required])\r\n    });\r\n  }\r\n\r\n  calculateTotalPayable(): number{\r\n    let sum = 0;\r\n    this.workingDataReplacementInfoList.controls.forEach((control: AbstractControl) =>{\r\n      sum += (control.get('ratePerSession').value * control.get('totalSessions').value);\r\n    });\r\n\r\n    return sum ? sum : 0;\r\n  }\r\n\r\n  submitDocument():void {\r\n    this.replacementFormGroup.get('manualCompDocId').setValue(this.attachDocFileUpload.verifiedFiles[0].meta_data.id);\r\n    this.replacementFormGroup.get('manualCompDocFileName').setValue(this.attachDocFileUpload.verifiedFiles[0].meta_data.fileName);\r\n    this.replacementFormGroup.get('manualCompDocUpdatedDt').setValue(null);\r\n    this.replacementFormGroup.get('manualCompDocUpdatedByInitials').setValue(null);\r\n    this.displayAttachDocumentDialog = false;\r\n  }\r\n\r\n  openFileInNewTab(id:string): void {\r\n    this.fileUploadService.downloadTxnId(id).subscribe((res:any) => {\r\n      if (res) {\r\n        console.log('download res', res);\r\n        const data = res;\r\n        const contentDispositionHeader: string = data.headers.get('content-disposition');\r\n        const fileName = contentDispositionHeader.split(';')[1].trim().split('=')[1].replace(/\"/g, '');\r\n        const blob = new Blob([data.body], { type: data.headers.get('content-type') });\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.href = URL.createObjectURL(blob);\r\n        anchor.target = \"_blank\";\r\n        // anchor.rel=\"noopener noreferrer\";\r\n        anchor.click();\r\n        document.removeChild(anchor);\r\n      }\r\n    });\r\n  }\r\n\r\n  isActive(): boolean{\r\n    return this.currSelectedOption?.obj?.archiveDt===0;\r\n  }\r\n\r\n  exportToCSV(dataTable: Table): void{\r\n\r\n    const columns =\r\n      [\r\n        {field: 'name', header: 'Name of Replacement', index: 0},\r\n        {field: 'nric', header: ' ', index: 1},\r\n        {field: 'ratePerSession', header: 'Rate Per Session', index: 2},\r\n        {field: 'totalSessions', header: 'No. Of Session', index: 3},\r\n        {field: 'amount', header: 'Amount', index: 4},\r\n      ];\r\n\r\n    const dtoList:any[] = [];\r\n    let sum = 0;\r\n    this.workingDataReplacementInfoList.controls.forEach((control: AbstractControl) => {\r\n      const dto = {\r\n        nric: control.get('nric').value,\r\n        name: control.get('name').value,\r\n        ratePerSession: Number(control.get('ratePerSession').value).toFixed(2),\r\n        totalSessions: control.get('totalSessions').value,\r\n        amount: Number(control.get('ratePerSession').value * control.get('totalSessions').value).toFixed(2)\r\n      };\r\n      sum = sum + (control.get('ratePerSession').value * control.get('totalSessions').value);\r\n      dtoList.push(dto);\r\n    });\r\n\r\n    const lastRow = {\r\n      nric: \"\",\r\n      name: \"\",\r\n      ratePerSession: \"\",\r\n      totalSessions: \"Total Payable\",\r\n      amount: sum.toFixed(2)\r\n    }\r\n    dtoList.push(lastRow);\r\n    this.exportUtilsService.exportCSV(dataTable, dtoList,this.workingDataReplacementInfoList.length, columns,\r\n      \"replacement_data_\".concat(formatDate(new Date(),\"dd-MM-YYYY\", this.localeId)));\r\n    }\r\n\r\n  //allows input on need basis\r\n  hasValidAuthorityAndStation(): boolean{\r\n    if(this.accountService.hasAnyAuthority(NSPAY2_ROLES.CLAIMS_VERIFIER) && \r\n      this.station === NSPAY2_STATION.STATION_VERIFICATION){\r\n        return true;\r\n      }\r\n    if(this.accountService.hasAnyAuthority(NSPAY2_ROLES.CLAIMS_APPROVER) && \r\n    this.station === NSPAY2_STATION.STATION_CERTIFICATION) {\r\n      return false;\r\n    }\r\n    if(this.accountService.hasAnyAuthority(NSPAY2_ROLES.CLAIMS_APPROVER) && \r\n    this.station === NSPAY2_STATION.STATION_APPROVAL) {\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","<div *ngIf = \"this.replacementFormGroup !== undefined\">\r\n  <form [formGroup]=\"replacementFormGroup\">\r\n    <p-table #replaceTable\r\n      [value] = \"workingDataReplacementInfoList.controls\"\r\n      [style] = \"{'width' : '70vw'}\"\r\n      styleClass=\"p-datatable-gridlines p-datatable-striped\">\r\n\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th scope=\"col\" [attr.colspan] = \"isActive() && !readOnly && hasValidAuthorityAndStation() ? 6 : 5\">\r\n            <div class = \"grid\">\r\n              <div class = \"col-10 flex align-items-center\">\r\n                <p-button icon=\"pi pi-file-o\" (click) = \"exportToCSV(replaceTable)\" [style]= \"{'margin-left': '.5em', 'margin-right': '.5em'}\"></p-button>\r\n                <label >Manual Computation:\r\n                  <span *ngIf = \"this.replacementFormGroup.get('manualCompDocId').value\">\r\n                    <a href='javascript:'  *ngIf = \"this.replacementFormGroup.get('manualCompDocUpdatedByInitials').value !== null\"\r\n                          (click) = \"openFileInNewTab(this.replacementFormGroup.get('manualCompDocId').value)\">\r\n                      {{this.replacementFormGroup.get('manualCompDocFileName').value}}\r\n                    </a>\r\n                    <span *ngIf = \"this.replacementFormGroup.get('manualCompDocUpdatedByInitials').value === null\">\r\n                      {{this.replacementFormGroup.get('manualCompDocFileName').value}}\r\n                    </span>\r\n                    <span *ngIf = \"this.replacementFormGroup.get('manualCompDocUpdatedByInitials').value !== null\">({{this.replacementFormGroup.get('manualCompDocUpdatedDt').value}} by {{this.replacementFormGroup.get('manualCompDocUpdatedByInitials').value}})</span>\r\n                  </span>\r\n                  <span *ngIf = \"!this.replacementFormGroup.get('manualCompDocId').value\">None</span>\r\n                </label>\r\n                <p-button *ngIf = \"isActive() && !readOnly && hasValidAuthorityAndStation()\" (click) = \"this.displayAttachDocumentDialog = true\"[style]= \"{'margin-left': '.5em', 'margin-right': '.5em'}\">Attach Document</p-button>\r\n              </div>\r\n              <div class =\"col-2 flex justify-content-end\">\r\n                <p-button *ngIf = \"isActive() && !readOnly && hasValidAuthorityAndStation()\" (click) = \"displayReplacementDialog = true\">Insert Replacement</p-button>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"col\" colspan = \"2\">Name of Replacement</th>\r\n          <th scope=\"col\" colspan = \"1\">Rate Per Session</th>\r\n          <th scope=\"col\" colspan = \"1\">No Of Session</th>\r\n          <th scope=\"col\" colspan = \"1\">Amount</th>\r\n          <th scope=\"col\" *ngIf = \"isActive() && !readOnly && hasValidAuthorityAndStation()\" colspan = \"1\">Action</th>\r\n        </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-replacementInfo let-rowIndex=\"rowIndex\">\r\n          <tr>\r\n            <td [style] = \"{'width':'34%'}\"colspan = \"2\">{{replacementInfo.get('nric').value}} {{replacementInfo.get('name').value}}</td>\r\n            <td [style] = \"{'text-align':'right','width':'18%'}\" colspan = \"1\">{{replacementInfo.get('ratePerSession').value | number : '1.2-2'}}</td>\r\n            <td [style] = \"{'text-align':'right','width':'18%'}\" colspan = \"1\">{{replacementInfo.get('totalSessions').value | number : '1.2-2'}}</td>\r\n            <td [style] = \"{'text-align':'right','width':'18%'}\" colspan = \"1\">{{(replacementInfo.get('ratePerSession').value * replacementInfo.get('totalSessions').value) | number : '1.2-2'}}</td>\r\n            <td *ngIf = \"isActive() && !readOnly && hasValidAuthorityAndStation()\" [style] = \"{'text-align':'center','width':'12%'}\"colspan = \"1\">\r\n              <p-button icon=\"pi pi-pencil\" (click) = \"openEditReplacementInfoDialog(replacementInfo, rowIndex)\"></p-button>\r\n              <p-button icon=\"pi pi-trash\" (click) = \"deleteReplacementInfo(rowIndex)\" [style]= \"{'margin-left': '.5em'}\"></p-button>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"footer\">\r\n          <tr>\r\n            <td [style] = \"{'text-align':'right'}\" colspan = \"4\">Total Payable</td>\r\n            <td [style] = \"{'text-align':'right','border-right': isActive() && !readOnly && hasValidAuthorityAndStation()? 'none' : '','background-color':'white'}\"  colspan = \"1\">{{this.calculateTotalPayable() | number: '1.2-2'}}</td>\r\n            <td *ngIf = \"isActive() && !readOnly && hasValidAuthorityAndStation()\" [style] = \"{'border-left':'none','background-color':'white'}\" colspan = \"1\"></td>\r\n          </tr>\r\n        </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td [attr.colspan] = \"isActive() && !readOnly && hasValidAuthorityAndStation() ? 6 : 5\">\r\n            <span>\r\n              <i class=\"pi pi-info-circle\"></i>\r\n              No records found.\r\n            </span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n  </form>\r\n\r\n  <p-dialog header = \"{{(this.editReplacementInfoIndex !== undefined ? 'Edit' : 'Insert') +' Replacement'}}\" [(visible)]=\"displayReplacementDialog\" [modal]=\"true\" [style]=\"{width: '30vw'}\"\r\n            [draggable]=\"false\" [resizable]=\"false\" (onHide)=\"onHideReplacementDialog()\">\r\n    <div *ngIf = \"this.replacementDialogFormGroup !== undefined\">\r\n      <form [formGroup]=\"replacementDialogFormGroup\">\r\n        <div class = \"field grid mb-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\">NRIC:</div>\r\n          <div class = \"col-1 flex align-items-center\">\r\n            <input formControlName = \"nric\" type=\"text\" pInputText oninput=\"this.value = this.value.toUpperCase()\"/>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid my-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\"></div>\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'70%'}\">\r\n            <div>\r\n              <small *ngIf=\"this.replacementDialogFormGroup.get('nric')?.dirty && this.replacementDialogFormGroup.get('nric')?.hasError('nric')\"\r\n                     class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V002\"\r\n                     [translateValues]=\"{ field: 'NRIC' }\">\r\n              </small>\r\n            </div>\r\n            <div>\r\n              <small *ngIf=\"this.replacementDialogFormGroup.get('nric')?.dirty && this.replacementDialogFormGroup.get('nric')?.hasError('required')\"\r\n                     class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                     [translateValues]=\"{ field: 'NRIC' }\">\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid mt-2 mb-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\">Name:</div>\r\n          <div class = \"col-1 flex align-items-center\">\r\n            <input formControlName = \"name\" type=\"text\" pInputText />\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid my-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\"></div>\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'70%'}\">\r\n            <div>\r\n              <small *ngIf=\"this.replacementDialogFormGroup.get('name')?.dirty && this.replacementDialogFormGroup.get('name')?.hasError('required')\"\r\n                     class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                     [translateValues]=\"{ field: 'Name' }\">\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid mt-2 mb-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\">No. Of Session:</div>\r\n          <div class = \"col-1 flex align-items-center\">\r\n            <p-inputNumber [inputStyle]=\"{'text-align':'right'}\" formControlName = \"totalSessions\"></p-inputNumber>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid my-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\"></div>\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'70%'}\">\r\n            <div>\r\n              <small *ngIf=\"this.replacementDialogFormGroup.get('totalSessions')?.dirty && this.replacementDialogFormGroup.get('totalSessions')?.hasError('required')\"\r\n                     class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                     [translateValues]=\"{ field: 'No. Of Session' }\">\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid mt-2 mb-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\">Rate Per Session:</div>\r\n          <div class = \"col-1 flex align-items-center\">\r\n            <p-inputNumber [inputStyle]=\"{'text-align':'right'}\" formControlName = \"ratePerSession\" mode=\"decimal\" [minFractionDigits]=\"2\"></p-inputNumber>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid my-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\"></div>\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'70%'}\">\r\n            <div>\r\n              <small *ngIf=\"this.replacementDialogFormGroup.get('ratePerSession')?.dirty && this.replacementDialogFormGroup.get('ratePerSession')?.hasError('required')\"\r\n                     class=\"p-error\" icTranslate=\"nspay2App.claim.validation.CLM-V001\"\r\n                     [translateValues]=\"{ field: 'Rate Per Session' }\">\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class = \"field grid mt-3 mb-0\">\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'30%'}\">Amount:</div>\r\n          <div class = \"col-1 flex align-items-center\" [style]=\"{'width':'70%'}\">{{(this.replacementDialogFormGroup.get('ratePerSession').value * this.replacementDialogFormGroup.get('totalSessions').value ) | number: '1.2-2'}}</div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <ng-template pTemplate=\"footer\">\r\n      <button pButton label=\"Cancel\" (click) = \"displayReplacementDialog = false\" type=\"button\" class=\"p-button-danger\"></button>\r\n      <button pButton label=\"Save\" (click) = \"replaceOrInsertReplacementInfo()\" [disabled] = \"this.replacementDialogFormGroup.untouched || this.replacementDialogFormGroup.invalid\" type=\"button\"></button>\r\n    </ng-template>\r\n  </p-dialog>\r\n\r\n\r\n  <p-dialog header=\"Upload Replacement Manual Computation\" [(visible)]=\"displayAttachDocumentDialog\" [modal]=\"true\" [style]=\"{width: '40vw', height:'30vw'}\"\r\n            [draggable]=\"false\" [resizable]=\"false\">\r\n    <form [formGroup]=\"manualDocFileForm\">\r\n      <n2-file-upload #attachDocFileUpload [externalFileLimit]= \"1\" formControlName='manualDoc'></n2-file-upload>\r\n    </form>\r\n    <ng-template pTemplate=\"footer\">\r\n      <button pButton label=\"Cancel\" type=\"button\" (click)=\"this.displayAttachDocumentDialog = false\" class=\"p-button-danger\"></button>\r\n      <button pButton label=\"Submit\" type=\"button\" (click)=\"submitDocument()\"\r\n              [disabled]=\"manualDocFileForm.get('supportingDocuments')?.hasError('invalidFileExtension')\"></button>\r\n    </ng-template>\r\n  </p-dialog>\r\n</div>\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}
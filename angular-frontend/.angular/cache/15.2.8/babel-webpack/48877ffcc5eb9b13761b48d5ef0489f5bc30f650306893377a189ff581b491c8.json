{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewRemarksComponent = void 0;\nconst tslib_1 = require(\"tslib\");\nconst http_1 = require(\"@angular/common/http\");\nconst forms_1 = require(\"@angular/forms\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nconst i1 = tslib_1.__importStar(require(\"@angular/forms\"));\nconst i2 = tslib_1.__importStar(require(\"../../se-claim/service/se-claim.service\"));\nconst i3 = tslib_1.__importStar(require(\"../../service/claim.service\"));\nconst i4 = tslib_1.__importStar(require(\"app/layouts/service/customtoast.service\"));\nconst i5 = tslib_1.__importStar(require(\"app/core/util/date-utils.service\"));\nconst i6 = tslib_1.__importStar(require(\"@angular/router\"));\nconst i7 = tslib_1.__importStar(require(\"primeng/api\"));\nconst i8 = tslib_1.__importStar(require(\"primeng/button\"));\nconst i9 = tslib_1.__importStar(require(\"primeng/checkbox\"));\nconst i10 = tslib_1.__importStar(require(\"primeng/table\"));\nconst i11 = tslib_1.__importStar(require(\"primeng/inputtextarea\"));\nconst i12 = tslib_1.__importStar(require(\"../../../shared/pipe/default-string.pipe\"));\nconst _c0 = [\"dataTable\"];\nconst _c1 = function () {\n  return {\n    \"margin-right\": \".5em\",\n    \"margin-bottom\": \".5em\"\n  };\n};\nfunction ViewRemarksComponent_ng_template_51_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵtext(4, \"\\n                                \");\n    i0.ɵɵelementStart(5, \"p-button\", 21);\n    i0.ɵɵlistener(\"click\", function ViewRemarksComponent_ng_template_51_Template_p_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      const _r0 = i0.ɵɵreference(49);\n      return i0.ɵɵresetView(ctx_r10.exportCSV(_r0));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nfunction ViewRemarksComponent_ng_template_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"th\", 22);\n    i0.ɵɵtext(4, \"Updated On\");\n    i0.ɵɵelement(5, \"p-sortIcon\", 23);\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                            \");\n    i0.ɵɵelementStart(8, \"th\", 24);\n    i0.ɵɵtext(9, \"Updated By\");\n    i0.ɵɵelement(10, \"p-sortIcon\", 25);\n    i0.ɵɵtext(11, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                            \");\n    i0.ɵɵelementStart(13, \"th\", 26);\n    i0.ɵɵtext(14, \"Jam\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                            \");\n    i0.ɵɵelementStart(16, \"th\", 27);\n    i0.ɵɵtext(17, \"Remarks\");\n    i0.ɵɵelement(18, \"p-sortIcon\", 28);\n    i0.ɵɵtext(19, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n                    \");\n  }\n}\nfunction ViewRemarksComponent_ng_template_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\", 29);\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                            \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelement(12, \"p-checkbox\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                            \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                    \");\n  }\n  if (rf & 2) {\n    const remarkRecord_r13 = ctx.$implicit;\n    const rowIndex_r14 = ctx.rowIndex;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", rowIndex_r14);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 7, ctx_r3.dateUtilsService.convertUnixToDateString(remarkRecord_r13.value.dateTimeUpdated, ctx_r3.dateFormat)));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 9, remarkRecord_r13.value.updatedBy));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", remarkRecord_r13.value.jamIndRecord)(\"binary\", true)(\"disabled\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(remarkRecord_r13.value.remark);\n  }\n}\nfunction ViewRemarksComponent_ng_template_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"td\", 31);\n    i0.ɵɵtext(4, \"No records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                    \");\n  }\n}\nfunction ViewRemarksComponent_ng_template_73_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵtext(4, \"\\n                                \");\n    i0.ɵɵelementStart(5, \"p-button\", 21);\n    i0.ɵɵlistener(\"click\", function ViewRemarksComponent_ng_template_73_Template_p_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      const _r0 = i0.ɵɵreference(49);\n      return i0.ɵɵresetView(ctx_r16.exportCSV(_r0));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nfunction ViewRemarksComponent_ng_template_75_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"th\", 22);\n    i0.ɵɵtext(4, \"Updated On\");\n    i0.ɵɵelement(5, \"p-sortIcon\", 23);\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                            \");\n    i0.ɵɵelementStart(8, \"th\", 24);\n    i0.ɵɵtext(9, \"Updated By\");\n    i0.ɵɵelement(10, \"p-sortIcon\", 25);\n    i0.ɵɵtext(11, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n                            \");\n    i0.ɵɵelementStart(13, \"th\", 26);\n    i0.ɵɵtext(14, \"Jam\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                            \");\n    i0.ɵɵelementStart(16, \"th\", 27);\n    i0.ɵɵtext(17, \"Remarks\");\n    i0.ɵɵelement(18, \"p-sortIcon\", 28);\n    i0.ɵɵtext(19, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n                    \");\n  }\n}\nfunction ViewRemarksComponent_ng_template_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\", 29);\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                            \");\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"defaultString\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n                            \");\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelement(12, \"p-checkbox\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n                            \");\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                    \");\n  }\n  if (rf & 2) {\n    const remarkRecord_r19 = ctx.$implicit;\n    const rowIndex_r20 = ctx.rowIndex;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", rowIndex_r20);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 7, ctx_r8.dateUtilsService.convertUnixToDateString(remarkRecord_r19.value.dateTimeUpdated, ctx_r8.dateFormat)));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 9, remarkRecord_r19.value.updatedBy));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", remarkRecord_r19.value.jamIndRecord)(\"binary\", true)(\"disabled\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(remarkRecord_r19.value.remark);\n  }\n}\nfunction ViewRemarksComponent_ng_template_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                        \");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtext(2, \"\\n                            \");\n    i0.ɵɵelementStart(3, \"td\", 31);\n    i0.ɵɵtext(4, \"No records found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                    \");\n  }\n}\nconst _c2 = function () {\n  return {\n    \"margin-bottom\": \"1em\"\n  };\n};\nclass ViewRemarksComponent {\n  constructor(formBuilder, seClaimService, claimService, toastService, dateUtilsService, route) {\n    this.formBuilder = formBuilder;\n    this.seClaimService = seClaimService;\n    this.claimService = claimService;\n    this.toastService = toastService;\n    this.dateUtilsService = dateUtilsService;\n    this.route = route;\n    this.selectedRows = [];\n    this.remarksList = [];\n    this.internetRemarksList = [];\n    this.dateFormat = \"DD-MM-YYYY\";\n    this.remarksForm = this.formBuilder.group({\n      isJam: new forms_1.FormControl(true, null),\n      remark: new forms_1.FormControl('', forms_1.Validators.required),\n      remarkTableArray: this.formBuilder.array([]),\n      remarkInternetTblArray: this.formBuilder.array([])\n    });\n  }\n  get remarkTableArray() {\n    return this.remarksForm?.get('remarkTableArray');\n  }\n  get remarkInternetTblArray() {\n    return this.remarksForm?.get('remarkInternetTblArray');\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.params = params;\n      console.log(\"the params are\", this.params);\n      this.getRemarksData(this.params.caseId);\n    });\n  }\n  saveRemarks() {\n    setTimeout(() => {\n      const req = {\n        remark: this.remarksForm.get('remark').value,\n        jamIndicator: this.remarksForm.get('isJam').value,\n        caseId: this.params.caseId\n      };\n      this.claimService.saveRemarks(req).subscribe(resp => {\n        if (resp) {\n          if (resp.status === 200) {\n            this.toastService.success(String(resp.body.success_message));\n            // this.remarksForm.reset();\n            window.location.reload();\n          }\n        }\n        // this.resetDataTable();\n      }, error => {\n        console.log(\"error is\" + String(error?.error?.error_desc));\n        this.toastService.error(String(error?.error?.error_desc));\n      });\n    });\n  }\n  //gets remarks for both Internet and normal users\n  getRemarksData(caseId) {\n    this.loading = true;\n    let params = new http_1.HttpParams();\n    console.log(\"case id is \", caseId);\n    params = params.append('caseId', caseId);\n    setTimeout(() => {\n      this.claimService.retrieveRemarks({\n        params\n      }).subscribe(resp => {\n        if (resp.body.data) {\n          // this.remarksList = resp.body.data;\n          // let fullList = resp.body.data as [];\n          this.internetRemarksList = resp.body.data.filter(x => x.updatedBy === 'INTERNET');\n          this.remarksList = resp.body.data.filter(x => x.updatedBy !== 'INTERNET');\n          this.constructTableForm();\n          this.loading = false;\n        }\n      }, error => {\n        console.log(\"error is\" + String(error?.error?.error_desc));\n        this.toastService.error(String(error?.error?.error_desc));\n      });\n    }, 0);\n  }\n  constructTableForm() {\n    const remarkTableArray = this.remarksForm.get('remarkTableArray');\n    const remarkInternetTblArray = this.remarksForm.get('remarkInternetTblArray');\n    remarkTableArray.clear();\n    remarkInternetTblArray.clear();\n    this.remarksList.sort((a, b) => b.dateTimeUpdated - a.dateTimeUpdated);\n    this.remarksList.forEach((data, index) => {\n      {\n        remarkTableArray.push(this.formBuilder.group({\n          dateTimeUpdated: new forms_1.FormControl(data.dateTimeUpdated, null),\n          updatedBy: new forms_1.FormControl(data.updatedBy, null),\n          jamIndRecord: new forms_1.FormControl(data.jamIndicator),\n          remark: new forms_1.FormControl(data.remark, null)\n        }));\n      }\n    });\n    this.internetRemarksList.sort((a, b) => b.dateTimeUpdated - a.dateTimeUpdated);\n    this.internetRemarksList.forEach((data, index) => {\n      {\n        remarkInternetTblArray.push(this.formBuilder.group({\n          dateTimeUpdated: new forms_1.FormControl(data.dateTimeUpdated, null),\n          updatedBy: new forms_1.FormControl(data.updatedBy, null),\n          jamIndRecord: new forms_1.FormControl(data.jamIndicator),\n          remark: new forms_1.FormControl(data.remark, null)\n        }));\n      }\n    });\n  }\n  exportCSV(dataTable) {\n    console.log('text');\n  }\n  resetDataTable() {\n    this.table.reset();\n  }\n}\nexports.ViewRemarksComponent = ViewRemarksComponent;\nViewRemarksComponent.ɵfac = function ViewRemarksComponent_Factory(t) {\n  return new (t || ViewRemarksComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.SEClaimService), i0.ɵɵdirectiveInject(i3.ClaimService), i0.ɵɵdirectiveInject(i4.CustomToastService), i0.ɵɵdirectiveInject(i5.DateUtilsService), i0.ɵɵdirectiveInject(i6.ActivatedRoute));\n};\nViewRemarksComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ViewRemarksComponent,\n  selectors: [[\"n2-view-remarks\"]],\n  viewQuery: function ViewRemarksComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  decls: 84,\n  vars: 18,\n  consts: [[1, \"grid\", \"col-4\"], [1, \"col\"], [1, \"row\"], [\"for\", \"remark\", 1, \"col-auto\", \"col-form-label\"], [3, \"formGroup\"], [\"rows\", \"5\", \"inputId\", \"remark\", \"formControlName\", \"remark\", \"maxlength\", \"500\", \"pInputTextarea\", \"\", 1, \"inputfield\", \"w-full\"], [1, \"flex\", \"justify-content-center\", \"align-items-center\", 2, \"margin\", \"1em 0\"], [1, \"field-check-box\"], [\"formControlName\", \"isJam\", \"inputId\", \"isJam\", 3, \"binary\", \"disabled\"], [\"for\", \"isJam\"], [\"pButton\", \"\", \"label\", \"Save Remarks\", 1, \"flex\", \"justify-content-center\", \"align-items-center\", 2, \"margin\", \"auto 1em\", 3, \"disabled\", \"click\"], [\"formArrayName\", \"remarkTableArray\"], [\"styleClass\", \"p-datatable-gridlines p-datatable-striped\", 3, \"value\", \"selection\", \"filterDelay\", \"loading\", \"selectionChange\"], [\"dataTable\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"formArrayName\", \"remarkInternetTblArray\"], [1, \"grid\"], [1, \"col-6\", \"nsp-align-left\", \"flex\", \"justify-content-start\", \"align-items-center\"], [\"icon\", \"pi pi-file-o\", 3, \"click\"], [\"scope\", \"col\", \"pSortableColumn\", \"updatedOn\"], [\"field\", \"updatedOn\"], [\"scope\", \"col\", \"pSortableColumn\", \"updatedBy\"], [\"field\", \"updatedBy\"], [\"scope\", \"col\"], [\"scope\", \"col\", \"pSortableColumn\", \"remarks\"], [\"field\", \"remarks\"], [3, \"formGroupName\"], [\"formControlName\", \"jamIndRecord\", 3, \"value\", \"binary\", \"disabled\"], [\"colspan\", \"4\"]],\n  template: function ViewRemarksComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(4, \"\\n    \");\n      i0.ɵɵelementStart(5, \"div\", 1);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"\\n    \");\n      i0.ɵɵelementStart(8, \"div\", 1);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(10, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"\\n\");\n      i0.ɵɵelementStart(12, \"h6\");\n      i0.ɵɵtext(13, \"Remarks\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n\");\n      i0.ɵɵelement(15, \"hr\");\n      i0.ɵɵtext(16, \"\\n\");\n      i0.ɵɵelementStart(17, \"div\", 2);\n      i0.ɵɵtext(18, \"\\n    \");\n      i0.ɵɵelementStart(19, \"label\", 3);\n      i0.ɵɵtext(20, \"Please enter remarks below:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(21, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n\");\n      i0.ɵɵelementStart(23, \"form\", 4);\n      i0.ɵɵtext(24, \"\\n        \");\n      i0.ɵɵelement(25, \"textarea\", 5);\n      i0.ɵɵtext(26, \"\\n    \");\n      i0.ɵɵelementStart(27, \"div\", 2);\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵelementStart(29, \"div\", 6);\n      i0.ɵɵtext(30, \"\\n            \");\n      i0.ɵɵelementStart(31, \"div\", 7);\n      i0.ɵɵtext(32, \"\\n                \");\n      i0.ɵɵelement(33, \"p-checkbox\", 8);\n      i0.ɵɵtext(34, \"\\n                \");\n      i0.ɵɵelementStart(35, \"label\", 9);\n      i0.ɵɵtext(36, \"Jam?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \"\\n            \");\n      i0.ɵɵelementStart(39, \"div\");\n      i0.ɵɵtext(40, \"\\n                \");\n      i0.ɵɵelementStart(41, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function ViewRemarksComponent_Template_button_click_41_listener() {\n        return ctx.saveRemarks();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(42, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(44, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(45, \"\\n    \");\n      i0.ɵɵelementStart(46, \"div\", 11);\n      i0.ɵɵtext(47, \"\\n        \");\n      i0.ɵɵelementStart(48, \"p-table\", 12, 13);\n      i0.ɵɵlistener(\"selectionChange\", function ViewRemarksComponent_Template_p_table_selectionChange_48_listener($event) {\n        return ctx.selectedRows = $event;\n      });\n      i0.ɵɵtext(50, \"\\n                    \");\n      i0.ɵɵtemplate(51, ViewRemarksComponent_ng_template_51_Template, 9, 3, \"ng-template\", 14);\n      i0.ɵɵtext(52, \"\\n                    \");\n      i0.ɵɵtemplate(53, ViewRemarksComponent_ng_template_53_Template, 22, 0, \"ng-template\", 15);\n      i0.ɵɵtext(54, \"\\n                    \");\n      i0.ɵɵtemplate(55, ViewRemarksComponent_ng_template_55_Template, 18, 11, \"ng-template\", 16);\n      i0.ɵɵtext(56, \"\\n                    \");\n      i0.ɵɵtemplate(57, ViewRemarksComponent_ng_template_57_Template, 7, 0, \"ng-template\", 17);\n      i0.ɵɵtext(58, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60, \"\\n    \");\n      i0.ɵɵelement(61, \"br\");\n      i0.ɵɵtext(62, \"\\n    \");\n      i0.ɵɵelementStart(63, \"h6\");\n      i0.ɵɵtext(64, \"Remarks from Internet\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65, \"\\n    \");\n      i0.ɵɵelement(66, \"hr\");\n      i0.ɵɵtext(67, \"\\n    \");\n      i0.ɵɵelementStart(68, \"div\", 18);\n      i0.ɵɵtext(69, \"\\n        \");\n      i0.ɵɵelementStart(70, \"p-table\", 12, 13);\n      i0.ɵɵlistener(\"selectionChange\", function ViewRemarksComponent_Template_p_table_selectionChange_70_listener($event) {\n        return ctx.selectedRows = $event;\n      });\n      i0.ɵɵtext(72, \"\\n                    \");\n      i0.ɵɵtemplate(73, ViewRemarksComponent_ng_template_73_Template, 9, 3, \"ng-template\", 14);\n      i0.ɵɵtext(74, \"\\n                    \");\n      i0.ɵɵtemplate(75, ViewRemarksComponent_ng_template_75_Template, 22, 0, \"ng-template\", 15);\n      i0.ɵɵtext(76, \"\\n                    \");\n      i0.ɵɵtemplate(77, ViewRemarksComponent_ng_template_77_Template, 18, 11, \"ng-template\", 16);\n      i0.ɵɵtext(78, \"\\n                    \");\n      i0.ɵɵtemplate(79, ViewRemarksComponent_ng_template_79_Template, 7, 0, \"ng-template\", 17);\n      i0.ɵɵtext(80, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(81, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(82, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(83, \"\\n\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(17, _c2));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        NRIC: \", ctx.params.nric, \"\\n    \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        Name:  \", ctx.params.name, \"\\n    \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\\n        Case ID: \", ctx.params.caseId, \"\\n    \");\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"formGroup\", ctx.remarksForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"binary\", true)(\"disabled\", !ctx.params.isDataEntry);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"disabled\", ctx.remarksForm.invalid);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"value\", ctx.remarkTableArray.controls)(\"selection\", ctx.selectedRows)(\"filterDelay\", 0)(\"loading\", ctx.loading);\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"value\", ctx.remarkInternetTblArray.controls)(\"selection\", ctx.selectedRows)(\"filterDelay\", 0)(\"loading\", ctx.loading);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName, i7.PrimeTemplate, i8.ButtonDirective, i8.Button, i9.Checkbox, i10.Table, i10.SortableColumn, i10.SortIcon, i11.InputTextarea, i12.DefaultStringPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWV3LXJlbWFya3MuY29tcG9uZW50LnNjc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvY2xhaW0vcG9wLXVwL3ZpZXctcmVtYXJrcy92aWV3LXJlbWFya3MuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLDRLQUE0SyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ViewRemarksComponent","constructor","formBuilder","seClaimService","claimService","toastService","dateUtilsService","route","group","isJam","forms_1","remark","required","remarkTableArray","array","remarkInternetTblArray","remarksForm","get","ngOnInit","queryParams","subscribe","params","console","log","getRemarksData","caseId","saveRemarks","setTimeout","req","value","jamIndicator","resp","status","success","String","body","success_message","window","location","reload","error","error_desc","loading","http_1","append","retrieveRemarks","data","internetRemarksList","filter","x","updatedBy","remarksList","constructTableForm","clear","sort","a","b","dateTimeUpdated","forEach","index","push","jamIndRecord","exportCSV","dataTable","resetDataTable","table","reset","exports","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\pop-up\\view-remarks\\view-remarks.component.ts","C:\\Users\\D1347074\\Desktop\\projects 2\\nspayiiapp\\src\\main\\webapp\\app\\claim\\pop-up\\view-remarks\\view-remarks.component.html"],"sourcesContent":["import { HttpParams } from '@angular/common/http';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ViewRemarks } from 'app/claim/model/view-remarks.model';\r\nimport { DateUtilsService } from 'app/core/util/date-utils.service';\r\nimport { CustomToastService } from 'app/layouts/service/customtoast.service';\r\nimport { LazyLoadEvent } from 'primeng/api';\r\nimport { DynamicDialogConfig } from 'primeng/dynamicdialog';\r\nimport { Table } from 'primeng/table';\r\nimport { SEClaimService } from '../../se-claim/service/se-claim.service';\r\nimport { ClaimService } from '../../service/claim.service';\r\n\r\n@Component({\r\n  selector: 'n2-view-remarks',\r\n  templateUrl: './view-remarks.component.html',\r\n  styleUrls: ['./view-remarks.component.scss']\r\n})\r\nexport class ViewRemarksComponent implements OnInit {\r\n\r\n  params: any;\r\n  loading!: boolean;\r\n  public selectedRows: any[] = [];\r\n  public remarksList: ViewRemarks[] = [];\r\n  public internetRemarksList: ViewRemarks[] = [];\r\n\r\n  dateFormat = \"DD-MM-YYYY\";\r\n  @ViewChild('dataTable') table: Table;\r\n\r\n  remarksForm: FormGroup = this.formBuilder.group({\r\n    isJam: new FormControl(true, null),\r\n    remark: new FormControl('', Validators.required),\r\n    remarkTableArray: this.formBuilder.array([]),\r\n    remarkInternetTblArray: this.formBuilder.array([])\r\n  });\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private seClaimService: SEClaimService,\r\n    private claimService: ClaimService,\r\n    private toastService: CustomToastService,\r\n    public dateUtilsService: DateUtilsService,\r\n    private route: ActivatedRoute,\r\n\r\n  ) {\r\n   }\r\n\r\n  get remarkTableArray(): FormArray {\r\n    return this.remarksForm?.get('remarkTableArray') as FormArray\r\n  }\r\n\r\n  get remarkInternetTblArray(): FormArray {\r\n    return this.remarksForm?.get('remarkInternetTblArray') as FormArray\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.params = params;\r\n      console.log(\"the params are\", this.params)\r\n\r\n      this.getRemarksData(this.params.caseId);\r\n    });\r\n  }\r\n\r\n  saveRemarks(): void{\r\n\r\n    setTimeout(() => {\r\n      const req = {\r\n        remark: this.remarksForm.get('remark').value,\r\n        jamIndicator: this.remarksForm.get('isJam').value,\r\n        caseId: this.params.caseId\r\n      }\r\n    this.claimService.saveRemarks(req).subscribe(resp => {\r\n      if(resp){\r\n        if(resp.status === 200){\r\n          this.toastService.success(String(resp.body.success_message));\r\n          // this.remarksForm.reset();\r\n          window.location.reload();\r\n        }\r\n      }\r\n      // this.resetDataTable();\r\n\r\n    },\r\n    (error: any) => {\r\n      console.log(\"error is\" + String(error?.error?.error_desc));\r\n      this.toastService.error(String(error?.error?.error_desc));\r\n    }\r\n\r\n  )})\r\n\r\n  }\r\n\r\n  //gets remarks for both Internet and normal users\r\n  getRemarksData(caseId: string): void {\r\n    this.loading = true;\r\n    let params = new HttpParams();\r\n    console.log(\"case id is \", caseId)\r\n    params = params.append('caseId',caseId);\r\n    setTimeout(() => {\r\n    this.claimService.retrieveRemarks({params}).subscribe(resp => {\r\n      if (resp.body.data) {\r\n        // this.remarksList = resp.body.data;\r\n        // let fullList = resp.body.data as [];\r\n        this.internetRemarksList = resp.body.data.filter((x:any)=> x.updatedBy === 'INTERNET');\r\n        this.remarksList = resp.body.data.filter((x:any)=> x.updatedBy !== 'INTERNET');\r\n\r\n        this.constructTableForm();\r\n        this.loading = false;\r\n\r\n      }\r\n      },\r\n      (error: any) => {\r\n        console.log(\"error is\" + String(error?.error?.error_desc));\r\n        this.toastService.error(String(error?.error?.error_desc));\r\n      }\r\n\r\n    );\r\n    }, 0);\r\n  }\r\n\r\n\r\n\r\n  constructTableForm(): void{\r\n    const remarkTableArray = this.remarksForm.get('remarkTableArray') as FormArray;\r\n    const remarkInternetTblArray = this.remarksForm.get('remarkInternetTblArray') as FormArray;\r\n\r\n    remarkTableArray.clear();\r\n    remarkInternetTblArray.clear();\r\n    this.remarksList.sort((a,b)=> b.dateTimeUpdated - a.dateTimeUpdated)\r\n    this.remarksList.forEach((data, index) => {\r\n      {\r\n        remarkTableArray.push(\r\n          this.formBuilder.group({\r\n            dateTimeUpdated: new FormControl(data.dateTimeUpdated, null),\r\n            updatedBy: new FormControl(data.updatedBy, null),\r\n            jamIndRecord: new FormControl(data.jamIndicator),\r\n            remark: new FormControl(data.remark, null),\r\n          }),\r\n        );\r\n      }\r\n    });\r\n    this.internetRemarksList.sort((a,b)=> b.dateTimeUpdated - a.dateTimeUpdated)\r\n    this.internetRemarksList.forEach((data, index) => {\r\n      {\r\n        remarkInternetTblArray.push(\r\n          this.formBuilder.group({\r\n            dateTimeUpdated: new FormControl(data.dateTimeUpdated, null),\r\n            updatedBy: new FormControl(data.updatedBy, null),\r\n            jamIndRecord: new FormControl(data.jamIndicator),\r\n            remark: new FormControl(data.remark, null),\r\n          }),\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  exportCSV(dataTable: Table): void{\r\n    console.log('text')\r\n\r\n  }\r\n\r\n  resetDataTable(): void {\r\n    this.table.reset();\r\n  }\r\n}\r\n","<div class = \"grid col-4\" [style]=\"{'margin-bottom':'1em'}\">\r\n    <div class = \"col\">\r\n        NRIC: {{ params.nric }}\r\n    </div>\r\n    <div class = \"col\">\r\n        Name:  {{ params.name }}\r\n    </div>\r\n    <div class = \"col\">\r\n        Case ID: {{ params.caseId }}\r\n    </div>\r\n</div>\r\n<h6>Remarks</h6>\r\n<hr>\r\n<div class = \"row\">\r\n    <label for=\"remark\" class=\"col-auto col-form-label\">Please enter remarks below:</label>\r\n</div>\r\n<form [formGroup]=\"remarksForm\">\r\n        <textarea rows=\"5\"\r\n        class=\"inputfield w-full\"\r\n        inputId = \"remark\"\r\n        formControlName=\"remark\"\r\n        maxlength=\"500\"\r\n        pInputTextarea\r\n        ></textarea>\r\n    <div class = \"row\">\r\n        <div class=\"flex justify-content-center align-items-center\" style = \"margin: 1em 0\">\r\n            <div class = \"field-check-box\">\r\n                <p-checkbox formControlName = \"isJam\" inputId = \"isJam\"\r\n                [binary]=\"true\" [disabled] = \"!params.isDataEntry\"\r\n                ></p-checkbox>\r\n                <label for=\"isJam\">Jam?</label>\r\n            </div>\r\n            <div>\r\n                <button class=\"flex justify-content-center align-items-center\"\r\n                pButton  label=\"Save Remarks\" (click) = \"saveRemarks()\" [disabled] = \"remarksForm.invalid\" style=\"margin: auto 1em\"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div formArrayName=\"remarkTableArray\">\r\n        <p-table [value]=\"remarkTableArray.controls\"\r\n                    [(selection)] = \"selectedRows\"\r\n                    [filterDelay]=\"0\"\r\n                    [loading] = \"loading\"\r\n                    styleClass=\"p-datatable-gridlines p-datatable-striped\"\r\n                    #dataTable\r\n                    >\r\n                    <ng-template pTemplate=\"caption\">\r\n                        <div class=\"grid\">\r\n                            <div class = \"col-6 nsp-align-left flex justify-content-start align-items-center\">\r\n                                <p-button icon=\"pi pi-file-o\" [style]=\"{'margin-right': '.5em', 'margin-bottom': '.5em'}\" (click) = \"exportCSV(dataTable)\"></p-button>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"header\" let-columns>\r\n                        <tr>\r\n                            <th scope=\"col\" pSortableColumn = \"updatedOn\">Updated On<p-sortIcon field=\"updatedOn\"></p-sortIcon>\r\n                            </th>\r\n                            <th scope=\"col\" pSortableColumn = \"updatedBy\">Updated By<p-sortIcon field=\"updatedBy\"></p-sortIcon>\r\n                            </th>\r\n                            <th scope=\"col\">Jam\r\n                            </th>\r\n                            <th scope=\"col\" pSortableColumn = \"remarks\">Remarks<p-sortIcon field=\"remarks\"></p-sortIcon>\r\n                            </th>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"body\" let-remarkRecord let-rowIndex = \"rowIndex\" let-columns=\"columns\">\r\n                        <tr [formGroupName]=\"rowIndex\">\r\n                            <td>{{ this.dateUtilsService.convertUnixToDateString(remarkRecord.value.dateTimeUpdated, dateFormat)  | defaultString }}</td>\r\n                            <td>{{ remarkRecord.value.updatedBy | defaultString}}</td>\r\n                            <td><p-checkbox  [value]=\"remarkRecord.value.jamIndRecord\" formControlName=\"jamIndRecord\" [binary]=\"true\" [disabled]=\"true\"></p-checkbox></td>\r\n                            <td>{{ remarkRecord.value.remark}}</td>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"emptymessage\">\r\n                        <tr>\r\n                            <td colspan=\"4\">No records found.</td>\r\n                        </tr>\r\n                    </ng-template>\r\n        </p-table>\r\n    </div>\r\n    <br/>\r\n    <h6>Remarks from Internet</h6>\r\n    <hr>\r\n    <div formArrayName=\"remarkInternetTblArray\">\r\n        <p-table [value]=\"remarkInternetTblArray.controls\"\r\n                    [(selection)] = \"selectedRows\"\r\n                    [filterDelay]=\"0\"\r\n                    [loading] = \"loading\"\r\n                    styleClass=\"p-datatable-gridlines p-datatable-striped\"\r\n                    #dataTable\r\n                    >\r\n                    <ng-template pTemplate=\"caption\">\r\n                        <div class=\"grid\">\r\n                            <div class = \"col-6 nsp-align-left flex justify-content-start align-items-center\">\r\n                                <p-button icon=\"pi pi-file-o\" [style]=\"{'margin-right': '.5em', 'margin-bottom': '.5em'}\" (click) = \"exportCSV(dataTable)\"></p-button>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"header\" let-columns>\r\n                        <tr>\r\n                            <th scope=\"col\" pSortableColumn = \"updatedOn\">Updated On<p-sortIcon field=\"updatedOn\"></p-sortIcon>\r\n                            </th>\r\n                            <th scope=\"col\" pSortableColumn = \"updatedBy\">Updated By<p-sortIcon field=\"updatedBy\"></p-sortIcon>\r\n                            </th>\r\n                            <th scope=\"col\">Jam\r\n                            </th>\r\n                            <th scope=\"col\" pSortableColumn = \"remarks\">Remarks<p-sortIcon field=\"remarks\"></p-sortIcon>\r\n                            </th>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"body\" let-remarkRecord let-rowIndex = \"rowIndex\" let-columns=\"columns\">\r\n                        <tr [formGroupName]=\"rowIndex\">\r\n                            <td>{{ this.dateUtilsService.convertUnixToDateString(remarkRecord.value.dateTimeUpdated, dateFormat)  | defaultString }}</td>\r\n                            <td>{{ remarkRecord.value.updatedBy | defaultString}}</td>\r\n                            <td><p-checkbox  [value]=\"remarkRecord.value.jamIndRecord\" formControlName=\"jamIndRecord\" [binary]=\"true\" [disabled]=\"true\"></p-checkbox></td>\r\n                            <td>{{ remarkRecord.value.remark}}</td>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"emptymessage\">\r\n                        <tr>\r\n                            <td colspan=\"4\">No records found.</td>\r\n                        </tr>\r\n                    </ng-template>\r\n        </p-table>\r\n    </div>\r\n\r\n</form>\r\n\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}